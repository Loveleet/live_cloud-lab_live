var k4=Object.defineProperty;var E4=(t,e,n)=>e in t?k4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var b_=(t,e,n)=>E4(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Ix(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qp={exports:{}},Yu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function N4(){if(__)return Yu;__=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:t,type:r,key:c,ref:s!==void 0?s:null,props:l}}return Yu.Fragment=e,Yu.jsx=n,Yu.jsxs=n,Yu}var S_;function T4(){return S_||(S_=1,qp.exports=N4()),qp.exports}var o=T4(),Jp={exports:{}},tr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function C4(){if(w_)return tr;w_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function _(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function E(M,oe,P){this.props=M,this.context=oe,this.refs=S,this.updater=P||b}E.prototype.isReactComponent={},E.prototype.setState=function(M,oe){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,oe,"setState")},E.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function O(){}O.prototype=E.prototype;function T(M,oe,P){this.props=M,this.context=oe,this.refs=S,this.updater=P||b}var D=T.prototype=new O;D.constructor=T,k(D,E.prototype),D.isPureReactComponent=!0;var F=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function L(M,oe,P,B,j,V){return P=V.ref,{$$typeof:t,type:M,key:oe,ref:P!==void 0?P:null,props:V}}function Q(M,oe){return L(M.type,oe,void 0,void 0,void 0,M.props)}function se(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function ce(M){var oe={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(P){return oe[P]})}var ye=/\/+/g;function te(M,oe){return typeof M=="object"&&M!==null&&M.key!=null?ce(""+M.key):oe.toString(36)}function xe(){}function Ce(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(xe,xe):(M.status="pending",M.then(function(oe){M.status==="pending"&&(M.status="fulfilled",M.value=oe)},function(oe){M.status==="pending"&&(M.status="rejected",M.reason=oe)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function at(M,oe,P,B,j){var V=typeof M;(V==="undefined"||V==="boolean")&&(M=null);var fe=!1;if(M===null)fe=!0;else switch(V){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(M.$$typeof){case t:case e:fe=!0;break;case p:return fe=M._init,at(fe(M._payload),oe,P,B,j)}}if(fe)return j=j(M),fe=B===""?"."+te(M,0):B,F(j)?(P="",fe!=null&&(P=fe.replace(ye,"$&/")+"/"),at(j,oe,P,"",function(ht){return ht})):j!=null&&(se(j)&&(j=Q(j,P+(j.key==null||M&&M.key===j.key?"":(""+j.key).replace(ye,"$&/")+"/")+fe)),oe.push(j)),1;fe=0;var lt=B===""?".":B+":";if(F(M))for(var et=0;et<M.length;et++)B=M[et],V=lt+te(B,et),fe+=at(B,oe,P,V,j);else if(et=_(M),typeof et=="function")for(M=et.call(M),et=0;!(B=M.next()).done;)B=B.value,V=lt+te(B,et++),fe+=at(B,oe,P,V,j);else if(V==="object"){if(typeof M.then=="function")return at(Ce(M),oe,P,B,j);throw oe=String(M),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return fe}function le(M,oe,P){if(M==null)return M;var B=[],j=0;return at(M,B,"","",function(V){return oe.call(P,V,j++)}),B}function Ve(M){if(M._status===-1){var oe=M._result;oe=oe(),oe.then(function(P){(M._status===0||M._status===-1)&&(M._status=1,M._result=P)},function(P){(M._status===0||M._status===-1)&&(M._status=2,M._result=P)}),M._status===-1&&(M._status=0,M._result=oe)}if(M._status===1)return M._result.default;throw M._result}var Ue=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ze(){}return tr.Children={map:le,forEach:function(M,oe,P){le(M,function(){oe.apply(this,arguments)},P)},count:function(M){var oe=0;return le(M,function(){oe++}),oe},toArray:function(M){return le(M,function(oe){return oe})||[]},only:function(M){if(!se(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},tr.Component=E,tr.Fragment=n,tr.Profiler=s,tr.PureComponent=T,tr.StrictMode=r,tr.Suspense=h,tr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,tr.__COMPILER_RUNTIME={__proto__:null,c:function(M){return Z.H.useMemoCache(M)}},tr.cache=function(M){return function(){return M.apply(null,arguments)}},tr.cloneElement=function(M,oe,P){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var B=k({},M.props),j=M.key,V=void 0;if(oe!=null)for(fe in oe.ref!==void 0&&(V=void 0),oe.key!==void 0&&(j=""+oe.key),oe)!K.call(oe,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&oe.ref===void 0||(B[fe]=oe[fe]);var fe=arguments.length-2;if(fe===1)B.children=P;else if(1<fe){for(var lt=Array(fe),et=0;et<fe;et++)lt[et]=arguments[et+2];B.children=lt}return L(M.type,j,void 0,void 0,V,B)},tr.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},tr.createElement=function(M,oe,P){var B,j={},V=null;if(oe!=null)for(B in oe.key!==void 0&&(V=""+oe.key),oe)K.call(oe,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(j[B]=oe[B]);var fe=arguments.length-2;if(fe===1)j.children=P;else if(1<fe){for(var lt=Array(fe),et=0;et<fe;et++)lt[et]=arguments[et+2];j.children=lt}if(M&&M.defaultProps)for(B in fe=M.defaultProps,fe)j[B]===void 0&&(j[B]=fe[B]);return L(M,V,void 0,void 0,null,j)},tr.createRef=function(){return{current:null}},tr.forwardRef=function(M){return{$$typeof:d,render:M}},tr.isValidElement=se,tr.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:Ve}},tr.memo=function(M,oe){return{$$typeof:g,type:M,compare:oe===void 0?null:oe}},tr.startTransition=function(M){var oe=Z.T,P={};Z.T=P;try{var B=M(),j=Z.S;j!==null&&j(P,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(Ze,Ue)}catch(V){Ue(V)}finally{Z.T=oe}},tr.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},tr.use=function(M){return Z.H.use(M)},tr.useActionState=function(M,oe,P){return Z.H.useActionState(M,oe,P)},tr.useCallback=function(M,oe){return Z.H.useCallback(M,oe)},tr.useContext=function(M){return Z.H.useContext(M)},tr.useDebugValue=function(){},tr.useDeferredValue=function(M,oe){return Z.H.useDeferredValue(M,oe)},tr.useEffect=function(M,oe,P){var B=Z.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(M,oe)},tr.useId=function(){return Z.H.useId()},tr.useImperativeHandle=function(M,oe,P){return Z.H.useImperativeHandle(M,oe,P)},tr.useInsertionEffect=function(M,oe){return Z.H.useInsertionEffect(M,oe)},tr.useLayoutEffect=function(M,oe){return Z.H.useLayoutEffect(M,oe)},tr.useMemo=function(M,oe){return Z.H.useMemo(M,oe)},tr.useOptimistic=function(M,oe){return Z.H.useOptimistic(M,oe)},tr.useReducer=function(M,oe,P){return Z.H.useReducer(M,oe,P)},tr.useRef=function(M){return Z.H.useRef(M)},tr.useState=function(M){return Z.H.useState(M)},tr.useSyncExternalStore=function(M,oe,P){return Z.H.useSyncExternalStore(M,oe,P)},tr.useTransition=function(){return Z.H.useTransition()},tr.version="19.1.0",tr}var k_;function Px(){return k_||(k_=1,Jp.exports=C4()),Jp.exports}var x=Px();const Kr=Ix(x);var Xp={exports:{}},Gu={},Kp={exports:{}},Zp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function j4(){return E_||(E_=1,function(t){function e(le,Ve){var Ue=le.length;le.push(Ve);e:for(;0<Ue;){var Ze=Ue-1>>>1,M=le[Ze];if(0<s(M,Ve))le[Ze]=Ve,le[Ue]=M,Ue=Ze;else break e}}function n(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var Ve=le[0],Ue=le.pop();if(Ue!==Ve){le[0]=Ue;e:for(var Ze=0,M=le.length,oe=M>>>1;Ze<oe;){var P=2*(Ze+1)-1,B=le[P],j=P+1,V=le[j];if(0>s(B,Ue))j<M&&0>s(V,B)?(le[Ze]=V,le[j]=Ue,Ze=j):(le[Ze]=B,le[P]=Ue,Ze=P);else if(j<M&&0>s(V,Ue))le[Ze]=V,le[j]=Ue,Ze=j;else break e}}return Ve}function s(le,Ve){var Ue=le.sortIndex-Ve.sortIndex;return Ue!==0?Ue:le.id-Ve.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],g=[],p=1,y=null,_=3,b=!1,k=!1,S=!1,E=!1,O=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function F(le){for(var Ve=n(g);Ve!==null;){if(Ve.callback===null)r(g);else if(Ve.startTime<=le)r(g),Ve.sortIndex=Ve.expirationTime,e(h,Ve);else break;Ve=n(g)}}function Z(le){if(S=!1,F(le),!k)if(n(h)!==null)k=!0,K||(K=!0,te());else{var Ve=n(g);Ve!==null&&at(Z,Ve.startTime-le)}}var K=!1,L=-1,Q=5,se=-1;function ce(){return E?!0:!(t.unstable_now()-se<Q)}function ye(){if(E=!1,K){var le=t.unstable_now();se=le;var Ve=!0;try{e:{k=!1,S&&(S=!1,T(L),L=-1),b=!0;var Ue=_;try{t:{for(F(le),y=n(h);y!==null&&!(y.expirationTime>le&&ce());){var Ze=y.callback;if(typeof Ze=="function"){y.callback=null,_=y.priorityLevel;var M=Ze(y.expirationTime<=le);if(le=t.unstable_now(),typeof M=="function"){y.callback=M,F(le),Ve=!0;break t}y===n(h)&&r(h),F(le)}else r(h);y=n(h)}if(y!==null)Ve=!0;else{var oe=n(g);oe!==null&&at(Z,oe.startTime-le),Ve=!1}}break e}finally{y=null,_=Ue,b=!1}Ve=void 0}}finally{Ve?te():K=!1}}}var te;if(typeof D=="function")te=function(){D(ye)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ce=xe.port2;xe.port1.onmessage=ye,te=function(){Ce.postMessage(null)}}else te=function(){O(ye,0)};function at(le,Ve){L=O(function(){le(t.unstable_now())},Ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(le){le.callback=null},t.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<le?Math.floor(1e3/le):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(le){switch(_){case 1:case 2:case 3:var Ve=3;break;default:Ve=_}var Ue=_;_=Ve;try{return le()}finally{_=Ue}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(le,Ve){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Ue=_;_=le;try{return Ve()}finally{_=Ue}},t.unstable_scheduleCallback=function(le,Ve,Ue){var Ze=t.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?Ze+Ue:Ze):Ue=Ze,le){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Ue+M,le={id:p++,callback:Ve,priorityLevel:le,startTime:Ue,expirationTime:M,sortIndex:-1},Ue>Ze?(le.sortIndex=Ue,e(g,le),n(h)===null&&le===n(g)&&(S?(T(L),L=-1):S=!0,at(Z,Ue-Ze))):(le.sortIndex=M,e(h,le),k||b||(k=!0,K||(K=!0,te()))),le},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(le){var Ve=_;return function(){var Ue=_;_=Ve;try{return le.apply(this,arguments)}finally{_=Ue}}}}(Zp)),Zp}var N_;function A4(){return N_||(N_=1,Kp.exports=j4()),Kp.exports}var Qp={exports:{}},Qs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function O4(){if(T_)return Qs;T_=1;var t=Px();function e(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(h,g,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:h,containerInfo:g,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Qs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qs.createPortal=function(h,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(h,g,null,p)},Qs.flushSync=function(h){var g=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=g,r.p=p,r.d.f()}},Qs.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(h,g))},Qs.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Qs.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var p=g.as,y=d(p,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,b=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?r.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):p==="script"&&r.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Qs.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=d(g.as,g.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(h)},Qs.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,y=d(p,g.crossOrigin);r.d.L(h,p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Qs.preloadModule=function(h,g){if(typeof h=="string")if(g){var p=d(g.as,g.crossOrigin);r.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(h)},Qs.requestFormReset=function(h){r.d.r(h)},Qs.unstable_batchedUpdates=function(h,g){return h(g)},Qs.useFormState=function(h,g,p){return c.H.useFormState(h,g,p)},Qs.useFormStatus=function(){return c.H.useHostTransitionStatus()},Qs.version="19.1.0",Qs}var C_;function D4(){if(C_)return Qp.exports;C_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qp.exports=O4(),Qp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function R4(){if(j_)return Gu;j_=1;var t=A4(),e=Px(),n=D4();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function h(i){var a=i.alternate;if(!a){if(a=l(i),a===null)throw Error(r(188));return a!==i?null:i}for(var u=i,f=a;;){var m=u.return;if(m===null)break;var v=m.alternate;if(v===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===u)return d(m),i;if(v===f)return d(m),a;v=v.sibling}throw Error(r(188))}if(u.return!==f.return)u=m,f=v;else{for(var C=!1,W=m.child;W;){if(W===u){C=!0,u=m,f=v;break}if(W===f){C=!0,f=m,u=v;break}W=W.sibling}if(!C){for(W=v.child;W;){if(W===u){C=!0,u=v,f=m;break}if(W===f){C=!0,f=v,u=m;break}W=W.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function te(i){return i===null||typeof i!="object"?null:(i=ye&&i[ye]||i["@@iterator"],typeof i=="function"?i:null)}var xe=Symbol.for("react.client.reference");function Ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===xe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case Z:return"Suspense";case K:return"SuspenseList";case se:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case D:return(i.displayName||"Context")+".Provider";case T:return(i._context.displayName||"Context")+".Consumer";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case L:return a=i.displayName||null,a!==null?a:Ce(i.type)||"Memo";case Q:a=i._payload,i=i._init;try{return Ce(i(a))}catch{}}return null}var at=Array.isArray,le=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ue={pending:!1,data:null,method:null,action:null},Ze=[],M=-1;function oe(i){return{current:i}}function P(i){0>M||(i.current=Ze[M],Ze[M]=null,M--)}function B(i,a){M++,Ze[M]=i.current,i.current=a}var j=oe(null),V=oe(null),fe=oe(null),lt=oe(null);function et(i,a){switch(B(fe,a),B(V,i),B(j,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?qb(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=qb(a),i=Jb(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}P(j),B(j,i)}function ht(){P(j),P(V),P(fe)}function At(i){i.memoizedState!==null&&B(lt,i);var a=j.current,u=Jb(a,i.type);a!==u&&(B(V,i),B(j,u))}function xn(i){V.current===i&&(P(j),P(V)),lt.current===i&&(P(lt),Hu._currentValue=Ue)}var Bt=Object.prototype.hasOwnProperty,Kt=t.unstable_scheduleCallback,tn=t.unstable_cancelCallback,Hn=t.unstable_shouldYield,sn=t.unstable_requestPaint,He=t.unstable_now,Dn=t.unstable_getCurrentPriorityLevel,Ht=t.unstable_ImmediatePriority,yt=t.unstable_UserBlockingPriority,dn=t.unstable_NormalPriority,Wt=t.unstable_LowPriority,an=t.unstable_IdlePriority,Un=t.log,Cn=t.unstable_setDisableYieldValue,Qn=null,me=null;function We(i){if(typeof Un=="function"&&Cn(i),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(Qn,i)}catch{}}var Ge=Math.clz32?Math.clz32:z,ie=Math.log,Pe=Math.LN2;function z(i){return i>>>=0,i===0?32:31-(ie(i)/Pe|0)|0}var pe=256,Fe=4194304;function bt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function dt(i,a,u){var f=i.pendingLanes;if(f===0)return 0;var m=0,v=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var W=f&134217727;return W!==0?(f=W&~v,f!==0?m=bt(f):(C&=W,C!==0?m=bt(C):u||(u=W&~i,u!==0&&(m=bt(u))))):(W=f&~v,W!==0?m=bt(W):C!==0?m=bt(C):u||(u=f&~i,u!==0&&(m=bt(u)))),m===0?0:a!==0&&a!==m&&(a&v)===0&&(v=m&-m,u=a&-a,v>=u||v===32&&(u&4194048)!==0)?a:m}function Zt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Vt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kt(){var i=pe;return pe<<=1,(pe&4194048)===0&&(pe=256),i}function ct(){var i=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),i}function ft(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function Xt(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function pn(i,a,u,f,m,v){var C=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var W=i.entanglements,ue=i.expirationTimes,Be=i.hiddenUpdates;for(u=C&~u;0<u;){var mt=31-Ge(u),Et=1<<mt;W[mt]=0,ue[mt]=-1;var Ye=Be[mt];if(Ye!==null)for(Be[mt]=null,mt=0;mt<Ye.length;mt++){var qe=Ye[mt];qe!==null&&(qe.lane&=-536870913)}u&=~Et}f!==0&&Yn(i,f,0),v!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=v&~(C&~a))}function Yn(i,a,u){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-Ge(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|u&4194090}function Tn(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var f=31-Ge(u),m=1<<f;m&a|i[f]&a&&(i[f]|=a),u&=~m}}function Gn(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function In(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function bn(){var i=Ve.p;return i!==0?i:(i=window.event,i===void 0?32:g_(i.type))}function re(i,a){var u=Ve.p;try{return Ve.p=i,a()}finally{Ve.p=u}}var Ae=Math.random().toString(36).slice(2),$e="__reactFiber$"+Ae,zt="__reactProps$"+Ae,Xe="__reactContainer$"+Ae,tt="__reactEvents$"+Ae,rt="__reactListeners$"+Ae,A="__reactHandles$"+Ae,G="__reactResources$"+Ae,U="__reactMarker$"+Ae;function J(i){delete i[$e],delete i[zt],delete i[tt],delete i[rt],delete i[A]}function Y(i){var a=i[$e];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Xe]||u[$e]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=Qb(i);i!==null;){if(u=i[$e])return u;i=Qb(i)}return a}i=u,u=i.parentNode}return null}function X(i){if(i=i[$e]||i[Xe]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function we(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function je(i){var a=i[G];return a||(a=i[G]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function _e(i){i[U]=!0}var Ee=new Set,Re={};function gt(i,a){Nt(i,a),Nt(i+"Capture",a)}function Nt(i,a){for(Re[i]=a,i=0;i<a.length;i++)Ee.add(a[i])}var Ut=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vt={},$t={};function fn(i){return Bt.call($t,i)?!0:Bt.call(vt,i)?!1:Ut.test(i)?$t[i]=!0:(vt[i]=!0,!1)}function Sn(i,a,u){if(fn(a))if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+u)}}function mn(i,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+u)}}function Ot(i,a,u,f){if(f===null)i.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(a,u,""+f)}}var ur,Mr;function Jn(i){if(ur===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ur=a&&a[1]||"",Mr=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ur+i+Mr}var ar=!1;function Lr(i,a){if(!i||ar)return"";ar=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var Et=function(){throw Error()};if(Object.defineProperty(Et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Et,[])}catch(qe){var Ye=qe}Reflect.construct(i,[],Et)}else{try{Et.call()}catch(qe){Ye=qe}i.call(Et.prototype)}}else{try{throw Error()}catch(qe){Ye=qe}(Et=i())&&typeof Et.catch=="function"&&Et.catch(function(){})}}catch(qe){if(qe&&Ye&&typeof qe.stack=="string")return[qe.stack,Ye.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),C=v[0],W=v[1];if(C&&W){var ue=C.split(`
`),Be=W.split(`
`);for(m=f=0;f<ue.length&&!ue[f].includes("DetermineComponentFrameRoot");)f++;for(;m<Be.length&&!Be[m].includes("DetermineComponentFrameRoot");)m++;if(f===ue.length||m===Be.length)for(f=ue.length-1,m=Be.length-1;1<=f&&0<=m&&ue[f]!==Be[m];)m--;for(;1<=f&&0<=m;f--,m--)if(ue[f]!==Be[m]){if(f!==1||m!==1)do if(f--,m--,0>m||ue[f]!==Be[m]){var mt=`
`+ue[f].replace(" at new "," at ");return i.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",i.displayName)),mt}while(1<=f&&0<=m);break}}}finally{ar=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Jn(u):""}function er(i){switch(i.tag){case 26:case 27:case 5:return Jn(i.type);case 16:return Jn("Lazy");case 13:return Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return Lr(i.type,!1);case 11:return Lr(i.type.render,!1);case 1:return Lr(i.type,!0);case 31:return Jn("Activity");default:return""}}function Ne(i){try{var a="";do a+=er(i),i=i.return;while(i);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function nt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function wt(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function nn(i){var a=wt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,v=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(C){f=""+C,v.call(this,C)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function ln(i){i._valueTracker||(i._valueTracker=nn(i))}function Dt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return i&&(f=wt(i)?i.checked?"true":"false":i.value),i=f,i!==u?(a.setValue(i),!0):!1}function yn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var lr=/[\n"\\]/g;function Pt(i){return i.replace(lr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function $n(i,a,u,f,m,v,C,W){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),a!=null?C==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+nt(a)):i.value!==""+nt(a)&&(i.value=""+nt(a)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),a!=null?ke(i,C,nt(a)):u!=null?ke(i,C,nt(u)):f!=null&&i.removeAttribute("value"),m==null&&v!=null&&(i.defaultChecked=!!v),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?i.name=""+nt(W):i.removeAttribute("name")}function rn(i,a,u,f,m,v,C,W){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),a!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;u=u!=null?""+nt(u):"",a=a!=null?""+nt(a):u,W||a===i.value||(i.value=a),i.defaultValue=a}f=f??m,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=W?i.checked:!!f,i.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C)}function ke(i,a,u){a==="number"&&yn(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function Me(i,a,u,f){if(i=i.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=a.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&f&&(i[u].defaultSelected=!0)}else{for(u=""+nt(u),a=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,f&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function Le(i,a,u){if(a!=null&&(a=""+nt(a),a!==i.value&&(i.value=a),u==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=u!=null?""+nt(u):""}function Ct(i,a,u,f){if(a==null){if(f!=null){if(u!=null)throw Error(r(92));if(at(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),a=u}u=nt(a),i.defaultValue=u,f=i.textContent,f===u&&f!==""&&f!==null&&(i.value=f)}function pt(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var Yt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(i,a,u){var f=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,u):typeof u!="number"||u===0||Yt.has(a)?a==="float"?i.cssFloat=u:i[a]=(""+u).trim():i[a]=u+"px"}function q(i,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var m in a)f=a[m],a.hasOwnProperty(m)&&u[m]!==f&&St(i,m,f)}else for(var v in a)a.hasOwnProperty(v)&&St(i,v,a[v])}function ee(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ot(i){return Qe.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var xt=null;function Gt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ze=null,wn=null;function Lt(i){var a=X(i);if(a&&(i=a.stateNode)){var u=i[zt]||null;e:switch(i=a.stateNode,a.type){case"input":if($n(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Pt(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==i&&f.form===i.form){var m=f[zt]||null;if(!m)throw Error(r(90));$n(f,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<u.length;a++)f=u[a],f.form===i.form&&Dt(f)}break e;case"textarea":Le(i,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Me(i,!!u.multiple,a,!1)}}}var Pn=!1;function qt(i,a,u){if(Pn)return i(a,u);Pn=!0;try{var f=i(a);return f}finally{if(Pn=!1,(ze!==null||wn!==null)&&(Hf(),ze&&(a=ze,i=wn,wn=ze=null,Lt(a),i)))for(a=0;a<i.length;a++)Lt(i[a])}}function fr(i,a){var u=i.stateNode;if(u===null)return null;var f=u[zt]||null;if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(Xn)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){vr=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{vr=!1}var rr=null,mr=null,vs=null;function sr(){if(vs)return vs;var i,a=mr,u=a.length,f,m="value"in rr?rr.value:rr.textContent,v=m.length;for(i=0;i<u&&a[i]===m[i];i++);var C=u-i;for(f=1;f<=C&&a[u-f]===m[v-f];f++);return vs=m.slice(i,1<f?1-f:void 0)}function is(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function wr(){return!0}function Ks(){return!1}function Mn(i){function a(u,f,m,v,C){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(u=i[W],this[W]=u?u(v):v[W]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?wr:Ks,this.isPropagationStopped=Ks,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),a}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qr=Mn(jn),os=p({},jn,{view:0,detail:0}),bs=Mn(os),si,Qt,Oe,Je=p({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Oe&&(Oe&&i.type==="mousemove"?(si=i.screenX-Oe.screenX,Qt=i.screenY-Oe.screenY):Qt=si=0,Oe=i),si)},movementY:function(i){return"movementY"in i?i.movementY:Qt}}),qn=Mn(Je),Vn=p({},Je,{dataTransfer:0}),H=Mn(Vn),he=p({},os,{relatedTarget:0}),Se=Mn(he),st=p({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tt=Mn(st),It=p({},jn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gn=Mn(It),Rt=p({},jn,{data:0}),kn=Mn(Rt),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},or={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Fn[i])?!!a[i]:!1}function Sr(){return En}var _s=p({},os,{key:function(i){if(i.key){var a=un[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=is(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?or[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(i){return i.type==="keypress"?is(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?is(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),kr=Mn(_s),ta=p({},Je,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ao=Mn(ta),lo=p({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr}),_a=Mn(lo),Zr=p({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ii=Mn(Zr),di=p({},Je,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),R=Mn(di),w=p({},jn,{newState:0,oldState:0}),N=Mn(w),I=[9,13,27,32],ne=Xn&&"CompositionEvent"in window,ae=null;Xn&&"documentMode"in document&&(ae=document.documentMode);var ge=Xn&&"TextEvent"in window&&!ae,Te=Xn&&(!ne||ae&&8<ae&&11>=ae),de=" ",Ke=!1;function Ft(i,a){switch(i){case"keyup":return I.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hn(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var An=!1;function xr(i,a){switch(i){case"compositionend":return hn(a);case"keypress":return a.which!==32?null:(Ke=!0,de);case"textInput":return i=a.data,i===de&&Ke?null:i;default:return null}}function Or(i,a){if(An)return i==="compositionend"||!ne&&Ft(i,a)?(i=sr(),vs=mr=rr=null,An=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Te&&a.locale!=="ko"?null:a.data;default:return null}}var yr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Si(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!yr[i.type]:a==="textarea"}function of(i,a,u,f){ze?wn?wn.push(f):wn=[f]:ze=f,a=Gf(a,"onChange"),0<a.length&&(u=new qr("onChange","change",null,u,f),i.push({event:u,listeners:a}))}var oo=null,na=null;function Jr(i){$b(i,0)}function ra(i){var a=we(i);if(Dt(a))return i}function Ua(i,a){if(i==="change")return a}var dy=!1;if(Xn){var sg;if(Xn){var ig="oninput"in document;if(!ig){var fy=document.createElement("div");fy.setAttribute("oninput","return;"),ig=typeof fy.oninput=="function"}sg=ig}else sg=!1;dy=sg&&(!document.documentMode||9<document.documentMode)}function hy(){oo&&(oo.detachEvent("onpropertychange",gy),na=oo=null)}function gy(i){if(i.propertyName==="value"&&ra(na)){var a=[];of(a,na,i,Gt(i)),qt(Jr,a)}}function eC(i,a,u){i==="focusin"?(hy(),oo=a,na=u,oo.attachEvent("onpropertychange",gy)):i==="focusout"&&hy()}function tC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ra(na)}function nC(i,a){if(i==="click")return ra(a)}function rC(i,a){if(i==="input"||i==="change")return ra(a)}function sC(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var wi=typeof Object.is=="function"?Object.is:sC;function lu(i,a){if(wi(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!Bt.call(a,m)||!wi(i[m],a[m]))return!1}return!0}function py(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function my(i,a){var u=py(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=a&&f>=a)return{node:u,offset:a-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=py(u)}}function xy(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?xy(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function yy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=yn(i.document);a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=yn(i.document)}return a}function ag(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var iC=Xn&&"documentMode"in document&&11>=document.documentMode,Jo=null,lg=null,ou=null,og=!1;function vy(i,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;og||Jo==null||Jo!==yn(f)||(f=Jo,"selectionStart"in f&&ag(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ou&&lu(ou,f)||(ou=f,f=Gf(lg,"onSelect"),0<f.length&&(a=new qr("onSelect","select",null,a,u),i.push({event:a,listeners:f}),a.target=Jo)))}function co(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Xo={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionrun:co("Transition","TransitionRun"),transitionstart:co("Transition","TransitionStart"),transitioncancel:co("Transition","TransitionCancel"),transitionend:co("Transition","TransitionEnd")},cg={},by={};Xn&&(by=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function uo(i){if(cg[i])return cg[i];if(!Xo[i])return i;var a=Xo[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in by)return cg[i]=a[u];return i}var _y=uo("animationend"),Sy=uo("animationiteration"),wy=uo("animationstart"),aC=uo("transitionrun"),lC=uo("transitionstart"),oC=uo("transitioncancel"),ky=uo("transitionend"),Ey=new Map,ug="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ug.push("scrollEnd");function sa(i,a){Ey.set(i,a),gt(a,[i])}var Ny=new WeakMap;function Pi(i,a){if(typeof i=="object"&&i!==null){var u=Ny.get(i);return u!==void 0?u:(a={value:i,source:a,stack:Ne(a)},Ny.set(i,a),a)}return{value:i,source:a,stack:Ne(a)}}var Fi=[],Ko=0,dg=0;function cf(){for(var i=Ko,a=dg=Ko=0;a<i;){var u=Fi[a];Fi[a++]=null;var f=Fi[a];Fi[a++]=null;var m=Fi[a];Fi[a++]=null;var v=Fi[a];if(Fi[a++]=null,f!==null&&m!==null){var C=f.pending;C===null?m.next=m:(m.next=C.next,C.next=m),f.pending=m}v!==0&&Ty(u,m,v)}}function uf(i,a,u,f){Fi[Ko++]=i,Fi[Ko++]=a,Fi[Ko++]=u,Fi[Ko++]=f,dg|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function fg(i,a,u,f){return uf(i,a,u,f),df(i)}function Zo(i,a){return uf(i,null,null,a),df(i)}function Ty(i,a,u){i.lanes|=u;var f=i.alternate;f!==null&&(f.lanes|=u);for(var m=!1,v=i.return;v!==null;)v.childLanes|=u,f=v.alternate,f!==null&&(f.childLanes|=u),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(m=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,m&&a!==null&&(m=31-Ge(u),i=v.hiddenUpdates,f=i[m],f===null?i[m]=[a]:f.push(a),a.lane=u|536870912),v):null}function df(i){if(50<Ru)throw Ru=0,yp=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Qo={};function cC(i,a,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(i,a,u,f){return new cC(i,a,u,f)}function hg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $a(i,a){var u=i.alternate;return u===null?(u=ki(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Cy(i,a){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,a=u.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function ff(i,a,u,f,m,v){var C=0;if(f=i,typeof i=="function")hg(i)&&(C=1);else if(typeof i=="string")C=d4(i,u,j.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case se:return i=ki(31,u,a,m),i.elementType=se,i.lanes=v,i;case k:return fo(u.children,m,v,a);case S:C=8,m|=24;break;case E:return i=ki(12,u,a,m|2),i.elementType=E,i.lanes=v,i;case Z:return i=ki(13,u,a,m),i.elementType=Z,i.lanes=v,i;case K:return i=ki(19,u,a,m),i.elementType=K,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:case D:C=10;break e;case T:C=9;break e;case F:C=11;break e;case L:C=14;break e;case Q:C=16,f=null;break e}C=29,u=Error(r(130,i===null?"null":typeof i,"")),f=null}return a=ki(C,u,a,m),a.elementType=i,a.type=f,a.lanes=v,a}function fo(i,a,u,f){return i=ki(7,i,f,a),i.lanes=u,i}function gg(i,a,u){return i=ki(6,i,null,a),i.lanes=u,i}function pg(i,a,u){return a=ki(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var ec=[],tc=0,hf=null,gf=0,zi=[],Bi=0,ho=null,Wa=1,Va="";function go(i,a){ec[tc++]=gf,ec[tc++]=hf,hf=i,gf=a}function jy(i,a,u){zi[Bi++]=Wa,zi[Bi++]=Va,zi[Bi++]=ho,ho=i;var f=Wa;i=Va;var m=32-Ge(f)-1;f&=~(1<<m),u+=1;var v=32-Ge(a)+m;if(30<v){var C=m-m%5;v=(f&(1<<C)-1).toString(32),f>>=C,m-=C,Wa=1<<32-Ge(a)+m|u<<m|f,Va=v+i}else Wa=1<<v|u<<m|f,Va=i}function mg(i){i.return!==null&&(go(i,1),jy(i,1,0))}function xg(i){for(;i===hf;)hf=ec[--tc],ec[tc]=null,gf=ec[--tc],ec[tc]=null;for(;i===ho;)ho=zi[--Bi],zi[Bi]=null,Va=zi[--Bi],zi[Bi]=null,Wa=zi[--Bi],zi[Bi]=null}var ai=null,ds=null,Dr=!1,po=null,Sa=!1,yg=Error(r(519));function mo(i){var a=Error(r(418,""));throw du(Pi(a,i)),yg}function Ay(i){var a=i.stateNode,u=i.type,f=i.memoizedProps;switch(a[$e]=i,a[zt]=f,u){case"dialog":gr("cancel",a),gr("close",a);break;case"iframe":case"object":case"embed":gr("load",a);break;case"video":case"audio":for(u=0;u<Lu.length;u++)gr(Lu[u],a);break;case"source":gr("error",a);break;case"img":case"image":case"link":gr("error",a),gr("load",a);break;case"details":gr("toggle",a);break;case"input":gr("invalid",a),rn(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ln(a);break;case"select":gr("invalid",a);break;case"textarea":gr("invalid",a),Ct(a,f.value,f.defaultValue,f.children),ln(a)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||f.suppressHydrationWarning===!0||Gb(a.textContent,u)?(f.popover!=null&&(gr("beforetoggle",a),gr("toggle",a)),f.onScroll!=null&&gr("scroll",a),f.onScrollEnd!=null&&gr("scrollend",a),f.onClick!=null&&(a.onclick=qf),a=!0):a=!1,a||mo(i)}function Oy(i){for(ai=i.return;ai;)switch(ai.tag){case 5:case 13:Sa=!1;return;case 27:case 3:Sa=!0;return;default:ai=ai.return}}function cu(i){if(i!==ai)return!1;if(!Dr)return Oy(i),Dr=!0,!1;var a=i.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Mp(i.type,i.memoizedProps)),u=!u),u&&ds&&mo(i),Oy(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(a===0){ds=aa(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;i=i.nextSibling}ds=null}}else a===27?(a=ds,Fl(i.type)?(i=Fp,Fp=null,ds=i):ds=a):ds=ai?aa(i.stateNode.nextSibling):null;return!0}function uu(){ds=ai=null,Dr=!1}function Dy(){var i=po;return i!==null&&(gi===null?gi=i:gi.push.apply(gi,i),po=null),i}function du(i){po===null?po=[i]:po.push(i)}var vg=oe(null),xo=null,Ya=null;function wl(i,a,u){B(vg,a._currentValue),a._currentValue=u}function Ga(i){i._currentValue=vg.current,P(vg)}function bg(i,a,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===u)break;i=i.return}}function _g(i,a,u,f){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var v=m.dependencies;if(v!==null){var C=m.child;v=v.firstContext;e:for(;v!==null;){var W=v;v=m;for(var ue=0;ue<a.length;ue++)if(W.context===a[ue]){v.lanes|=u,W=v.alternate,W!==null&&(W.lanes|=u),bg(v.return,u,i),f||(C=null);break e}v=W.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(r(341));C.lanes|=u,v=C.alternate,v!==null&&(v.lanes|=u),bg(C,u,i),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===i){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function fu(i,a,u,f){i=null;for(var m=a,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var W=m.type;wi(m.pendingProps.value,C.value)||(i!==null?i.push(W):i=[W])}}else if(m===lt.current){if(C=m.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Hu):i=[Hu])}m=m.return}i!==null&&_g(a,i,u,f),a.flags|=262144}function pf(i){for(i=i.firstContext;i!==null;){if(!wi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function yo(i){xo=i,Ya=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Zs(i){return Ry(xo,i)}function mf(i,a){return xo===null&&yo(i),Ry(i,a)}function Ry(i,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Ya===null){if(i===null)throw Error(r(308));Ya=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Ya=Ya.next=a;return u}var uC=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(u,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(u){return u()})}},dC=t.unstable_scheduleCallback,fC=t.unstable_NormalPriority,Ts={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sg(){return{controller:new uC,data:new Map,refCount:0}}function hu(i){i.refCount--,i.refCount===0&&dC(fC,function(){i.controller.abort()})}var gu=null,wg=0,nc=0,rc=null;function hC(i,a){if(gu===null){var u=gu=[];wg=0,nc=Ep(),rc={status:"pending",value:void 0,then:function(f){u.push(f)}}}return wg++,a.then(My,My),a}function My(){if(--wg===0&&gu!==null){rc!==null&&(rc.status="fulfilled");var i=gu;gu=null,nc=0,rc=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function gC(i,a){var u=[],f={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var m=0;m<u.length;m++)(0,u[m])(a)},function(m){for(f.status="rejected",f.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),f}var Ly=le.S;le.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&hC(i,a),Ly!==null&&Ly(i,a)};var vo=oe(null);function kg(){var i=vo.current;return i!==null?i:Qr.pooledCache}function xf(i,a){a===null?B(vo,vo.current):B(vo,a.pool)}function Iy(){var i=kg();return i===null?null:{parent:Ts._currentValue,pool:i}}var pu=Error(r(460)),Py=Error(r(474)),yf=Error(r(542)),Eg={then:function(){}};function Fy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function vf(){}function zy(i,a,u){switch(u=i[u],u===void 0?i.push(a):u!==a&&(a.then(vf,vf),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Hy(i),i;default:if(typeof a.status=="string")a.then(vf,vf);else{if(i=Qr,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=f}},function(f){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Hy(i),i}throw mu=a,pu}}var mu=null;function By(){if(mu===null)throw Error(r(459));var i=mu;return mu=null,i}function Hy(i){if(i===pu||i===yf)throw Error(r(483))}var kl=!1;function Ng(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function El(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Nl(i,a,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Pr&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,a=df(i),Ty(i,null,u),a}return uf(i,f,a,u),df(i)}function xu(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,Tn(i,u)}}function Cg(i,a){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?m=v=C:v=v.next=C,u=u.next}while(u!==null);v===null?m=v=a:v=v.next=a}else m=v=a;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}var jg=!1;function yu(){if(jg){var i=rc;if(i!==null)throw i}}function vu(i,a,u,f){jg=!1;var m=i.updateQueue;kl=!1;var v=m.firstBaseUpdate,C=m.lastBaseUpdate,W=m.shared.pending;if(W!==null){m.shared.pending=null;var ue=W,Be=ue.next;ue.next=null,C===null?v=Be:C.next=Be,C=ue;var mt=i.alternate;mt!==null&&(mt=mt.updateQueue,W=mt.lastBaseUpdate,W!==C&&(W===null?mt.firstBaseUpdate=Be:W.next=Be,mt.lastBaseUpdate=ue))}if(v!==null){var Et=m.baseState;C=0,mt=Be=ue=null,W=v;do{var Ye=W.lane&-536870913,qe=Ye!==W.lane;if(qe?(br&Ye)===Ye:(f&Ye)===Ye){Ye!==0&&Ye===nc&&(jg=!0),mt!==null&&(mt=mt.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var Wn=i,zn=W;Ye=a;var Vr=u;switch(zn.tag){case 1:if(Wn=zn.payload,typeof Wn=="function"){Et=Wn.call(Vr,Et,Ye);break e}Et=Wn;break e;case 3:Wn.flags=Wn.flags&-65537|128;case 0:if(Wn=zn.payload,Ye=typeof Wn=="function"?Wn.call(Vr,Et,Ye):Wn,Ye==null)break e;Et=p({},Et,Ye);break e;case 2:kl=!0}}Ye=W.callback,Ye!==null&&(i.flags|=64,qe&&(i.flags|=8192),qe=m.callbacks,qe===null?m.callbacks=[Ye]:qe.push(Ye))}else qe={lane:Ye,tag:W.tag,payload:W.payload,callback:W.callback,next:null},mt===null?(Be=mt=qe,ue=Et):mt=mt.next=qe,C|=Ye;if(W=W.next,W===null){if(W=m.shared.pending,W===null)break;qe=W,W=qe.next,qe.next=null,m.lastBaseUpdate=qe,m.shared.pending=null}}while(!0);mt===null&&(ue=Et),m.baseState=ue,m.firstBaseUpdate=Be,m.lastBaseUpdate=mt,v===null&&(m.shared.lanes=0),Ml|=C,i.lanes=C,i.memoizedState=Et}}function Uy(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function $y(i,a){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Uy(u[i],a)}var sc=oe(null),bf=oe(0);function Wy(i,a){i=el,B(bf,i),B(sc,a),el=i|a.baseLanes}function Ag(){B(bf,el),B(sc,sc.current)}function Og(){el=bf.current,P(sc),P(bf)}var Tl=0,cr=null,$r=null,Ss=null,_f=!1,ic=!1,bo=!1,Sf=0,bu=0,ac=null,pC=0;function ps(){throw Error(r(321))}function Dg(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!wi(i[u],a[u]))return!1;return!0}function Rg(i,a,u,f,m,v){return Tl=v,cr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,le.H=i===null||i.memoizedState===null?Tv:Cv,bo=!1,v=u(f,m),bo=!1,ic&&(v=Yy(a,u,f,m)),Vy(i),v}function Vy(i){le.H=Cf;var a=$r!==null&&$r.next!==null;if(Tl=0,Ss=$r=cr=null,_f=!1,bu=0,ac=null,a)throw Error(r(300));i===null||Os||(i=i.dependencies,i!==null&&pf(i)&&(Os=!0))}function Yy(i,a,u,f){cr=i;var m=0;do{if(ic&&(ac=null),bu=0,ic=!1,25<=m)throw Error(r(301));if(m+=1,Ss=$r=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}le.H=SC,v=a(u,f)}while(ic);return v}function mC(){var i=le.H,a=i.useState()[0];return a=typeof a.then=="function"?_u(a):a,i=i.useState()[0],($r!==null?$r.memoizedState:null)!==i&&(cr.flags|=1024),a}function Mg(){var i=Sf!==0;return Sf=0,i}function Lg(i,a,u){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u}function Ig(i){if(_f){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}_f=!1}Tl=0,Ss=$r=cr=null,ic=!1,bu=Sf=0,ac=null}function fi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?cr.memoizedState=Ss=i:Ss=Ss.next=i,Ss}function ws(){if($r===null){var i=cr.alternate;i=i!==null?i.memoizedState:null}else i=$r.next;var a=Ss===null?cr.memoizedState:Ss.next;if(a!==null)Ss=a,$r=i;else{if(i===null)throw cr.alternate===null?Error(r(467)):Error(r(310));$r=i,i={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Ss===null?cr.memoizedState=Ss=i:Ss=Ss.next=i}return Ss}function Pg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _u(i){var a=bu;return bu+=1,ac===null&&(ac=[]),i=zy(ac,i,a),a=cr,(Ss===null?a.memoizedState:Ss.next)===null&&(a=a.alternate,le.H=a===null||a.memoizedState===null?Tv:Cv),i}function wf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return _u(i);if(i.$$typeof===D)return Zs(i)}throw Error(r(438,String(i)))}function Fg(i){var a=null,u=cr.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var f=cr.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Pg(),cr.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(i),f=0;f<i;f++)u[f]=ce;return a.index++,u}function qa(i,a){return typeof a=="function"?a(i):a}function kf(i){var a=ws();return zg(a,$r,i)}function zg(i,a,u){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var m=i.baseQueue,v=f.pending;if(v!==null){if(m!==null){var C=m.next;m.next=v.next,v.next=C}a.baseQueue=m=v,f.pending=null}if(v=i.baseState,m===null)i.memoizedState=v;else{a=m.next;var W=C=null,ue=null,Be=a,mt=!1;do{var Et=Be.lane&-536870913;if(Et!==Be.lane?(br&Et)===Et:(Tl&Et)===Et){var Ye=Be.revertLane;if(Ye===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),Et===nc&&(mt=!0);else if((Tl&Ye)===Ye){Be=Be.next,Ye===nc&&(mt=!0);continue}else Et={lane:0,revertLane:Be.revertLane,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},ue===null?(W=ue=Et,C=v):ue=ue.next=Et,cr.lanes|=Ye,Ml|=Ye;Et=Be.action,bo&&u(v,Et),v=Be.hasEagerState?Be.eagerState:u(v,Et)}else Ye={lane:Et,revertLane:Be.revertLane,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},ue===null?(W=ue=Ye,C=v):ue=ue.next=Ye,cr.lanes|=Et,Ml|=Et;Be=Be.next}while(Be!==null&&Be!==a);if(ue===null?C=v:ue.next=W,!wi(v,i.memoizedState)&&(Os=!0,mt&&(u=rc,u!==null)))throw u;i.memoizedState=v,i.baseState=C,i.baseQueue=ue,f.lastRenderedState=v}return m===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Bg(i){var a=ws(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var f=u.dispatch,m=u.pending,v=a.memoizedState;if(m!==null){u.pending=null;var C=m=m.next;do v=i(v,C.action),C=C.next;while(C!==m);wi(v,a.memoizedState)||(Os=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,f]}function Gy(i,a,u){var f=cr,m=ws(),v=Dr;if(v){if(u===void 0)throw Error(r(407));u=u()}else u=a();var C=!wi(($r||m).memoizedState,u);C&&(m.memoizedState=u,Os=!0),m=m.queue;var W=Xy.bind(null,f,m,i);if(Su(2048,8,W,[i]),m.getSnapshot!==a||C||Ss!==null&&Ss.memoizedState.tag&1){if(f.flags|=2048,lc(9,Ef(),Jy.bind(null,f,m,u,a),null),Qr===null)throw Error(r(349));v||(Tl&124)!==0||qy(f,a,u)}return u}function qy(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=cr.updateQueue,a===null?(a=Pg(),cr.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function Jy(i,a,u,f){a.value=u,a.getSnapshot=f,Ky(a)&&Zy(i)}function Xy(i,a,u){return u(function(){Ky(a)&&Zy(i)})}function Ky(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!wi(i,u)}catch{return!0}}function Zy(i){var a=Zo(i,2);a!==null&&ji(a,i,2)}function Hg(i){var a=fi();if(typeof i=="function"){var u=i;if(i=u(),bo){We(!0);try{u()}finally{We(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:i},a}function Qy(i,a,u,f){return i.baseState=u,zg(i,$r,typeof f=="function"?f:qa)}function xC(i,a,u,f,m){if(Tf(i))throw Error(r(485));if(i=a.action,i!==null){var v={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){v.listeners.push(C)}};le.T!==null?u(!0):v.isTransition=!1,f(v),u=a.pending,u===null?(v.next=a.pending=v,ev(a,v)):(v.next=u.next,a.pending=u.next=v)}}function ev(i,a){var u=a.action,f=a.payload,m=i.state;if(a.isTransition){var v=le.T,C={};le.T=C;try{var W=u(m,f),ue=le.S;ue!==null&&ue(C,W),tv(i,a,W)}catch(Be){Ug(i,a,Be)}finally{le.T=v}}else try{v=u(m,f),tv(i,a,v)}catch(Be){Ug(i,a,Be)}}function tv(i,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){nv(i,a,f)},function(f){return Ug(i,a,f)}):nv(i,a,u)}function nv(i,a,u){a.status="fulfilled",a.value=u,rv(a),i.state=u,a=i.pending,a!==null&&(u=a.next,u===a?i.pending=null:(u=u.next,a.next=u,ev(i,u)))}function Ug(i,a,u){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=u,rv(a),a=a.next;while(a!==f)}i.action=null}function rv(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function sv(i,a){return a}function iv(i,a){if(Dr){var u=Qr.formState;if(u!==null){e:{var f=cr;if(Dr){if(ds){t:{for(var m=ds,v=Sa;m.nodeType!==8;){if(!v){m=null;break t}if(m=aa(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){ds=aa(m.nextSibling),f=m.data==="F!";break e}}mo(f)}f=!1}f&&(a=u[0])}}return u=fi(),u.memoizedState=u.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sv,lastRenderedState:a},u.queue=f,u=kv.bind(null,cr,f),f.dispatch=u,f=Hg(!1),v=Gg.bind(null,cr,!1,f.queue),f=fi(),m={state:a,dispatch:null,action:i,pending:null},f.queue=m,u=xC.bind(null,cr,m,v,u),m.dispatch=u,f.memoizedState=i,[a,u,!1]}function av(i){var a=ws();return lv(a,$r,i)}function lv(i,a,u){if(a=zg(i,a,sv)[0],i=kf(qa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=_u(a)}catch(C){throw C===pu?yf:C}else f=a;a=ws();var m=a.queue,v=m.dispatch;return u!==a.memoizedState&&(cr.flags|=2048,lc(9,Ef(),yC.bind(null,m,u),null)),[f,v,i]}function yC(i,a){i.action=a}function ov(i){var a=ws(),u=$r;if(u!==null)return lv(a,u,i);ws(),a=a.memoizedState,u=ws();var f=u.queue.dispatch;return u.memoizedState=i,[a,f,!1]}function lc(i,a,u,f){return i={tag:i,create:u,deps:f,inst:a,next:null},a=cr.updateQueue,a===null&&(a=Pg(),cr.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,a.lastEffect=i),i}function Ef(){return{destroy:void 0,resource:void 0}}function cv(){return ws().memoizedState}function Nf(i,a,u,f){var m=fi();f=f===void 0?null:f,cr.flags|=i,m.memoizedState=lc(1|a,Ef(),u,f)}function Su(i,a,u,f){var m=ws();f=f===void 0?null:f;var v=m.memoizedState.inst;$r!==null&&f!==null&&Dg(f,$r.memoizedState.deps)?m.memoizedState=lc(a,v,u,f):(cr.flags|=i,m.memoizedState=lc(1|a,v,u,f))}function uv(i,a){Nf(8390656,8,i,a)}function dv(i,a){Su(2048,8,i,a)}function fv(i,a){return Su(4,2,i,a)}function hv(i,a){return Su(4,4,i,a)}function gv(i,a){if(typeof a=="function"){i=i();var u=a(i);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function pv(i,a,u){u=u!=null?u.concat([i]):null,Su(4,4,gv.bind(null,a,i),u)}function $g(){}function mv(i,a){var u=ws();a=a===void 0?null:a;var f=u.memoizedState;return a!==null&&Dg(a,f[1])?f[0]:(u.memoizedState=[i,a],i)}function xv(i,a){var u=ws();a=a===void 0?null:a;var f=u.memoizedState;if(a!==null&&Dg(a,f[1]))return f[0];if(f=i(),bo){We(!0);try{i()}finally{We(!1)}}return u.memoizedState=[f,a],f}function Wg(i,a,u){return u===void 0||(Tl&1073741824)!==0?i.memoizedState=a:(i.memoizedState=u,i=bb(),cr.lanes|=i,Ml|=i,u)}function yv(i,a,u,f){return wi(u,a)?u:sc.current!==null?(i=Wg(i,u,f),wi(i,a)||(Os=!0),i):(Tl&42)===0?(Os=!0,i.memoizedState=u):(i=bb(),cr.lanes|=i,Ml|=i,a)}function vv(i,a,u,f,m){var v=Ve.p;Ve.p=v!==0&&8>v?v:8;var C=le.T,W={};le.T=W,Gg(i,!1,a,u);try{var ue=m(),Be=le.S;if(Be!==null&&Be(W,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var mt=gC(ue,f);wu(i,a,mt,Ci(i))}else wu(i,a,f,Ci(i))}catch(Et){wu(i,a,{then:function(){},status:"rejected",reason:Et},Ci())}finally{Ve.p=v,le.T=C}}function vC(){}function Vg(i,a,u,f){if(i.tag!==5)throw Error(r(476));var m=bv(i).queue;vv(i,m,a,Ue,u===null?vC:function(){return _v(i),u(f)})}function bv(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Ue,baseState:Ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:Ue},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:u},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function _v(i){var a=bv(i).next.queue;wu(i,a,{},Ci())}function Yg(){return Zs(Hu)}function Sv(){return ws().memoizedState}function wv(){return ws().memoizedState}function bC(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var u=Ci();i=El(u);var f=Nl(a,i,u);f!==null&&(ji(f,a,u),xu(f,a,u)),a={cache:Sg()},i.payload=a;return}a=a.return}}function _C(i,a,u){var f=Ci();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Tf(i)?Ev(a,u):(u=fg(i,a,u,f),u!==null&&(ji(u,i,f),Nv(u,a,f)))}function kv(i,a,u){var f=Ci();wu(i,a,u,f)}function wu(i,a,u,f){var m={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Tf(i))Ev(a,m);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var C=a.lastRenderedState,W=v(C,u);if(m.hasEagerState=!0,m.eagerState=W,wi(W,C))return uf(i,a,m,0),Qr===null&&cf(),!1}catch{}finally{}if(u=fg(i,a,m,f),u!==null)return ji(u,i,f),Nv(u,a,f),!0}return!1}function Gg(i,a,u,f){if(f={lane:2,revertLane:Ep(),action:f,hasEagerState:!1,eagerState:null,next:null},Tf(i)){if(a)throw Error(r(479))}else a=fg(i,u,f,2),a!==null&&ji(a,i,2)}function Tf(i){var a=i.alternate;return i===cr||a!==null&&a===cr}function Ev(i,a){ic=_f=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function Nv(i,a,u){if((u&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,Tn(i,u)}}var Cf={readContext:Zs,use:wf,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useLayoutEffect:ps,useInsertionEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useSyncExternalStore:ps,useId:ps,useHostTransitionStatus:ps,useFormState:ps,useActionState:ps,useOptimistic:ps,useMemoCache:ps,useCacheRefresh:ps},Tv={readContext:Zs,use:wf,useCallback:function(i,a){return fi().memoizedState=[i,a===void 0?null:a],i},useContext:Zs,useEffect:uv,useImperativeHandle:function(i,a,u){u=u!=null?u.concat([i]):null,Nf(4194308,4,gv.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Nf(4194308,4,i,a)},useInsertionEffect:function(i,a){Nf(4,2,i,a)},useMemo:function(i,a){var u=fi();a=a===void 0?null:a;var f=i();if(bo){We(!0);try{i()}finally{We(!1)}}return u.memoizedState=[f,a],f},useReducer:function(i,a,u){var f=fi();if(u!==void 0){var m=u(a);if(bo){We(!0);try{u(a)}finally{We(!1)}}}else m=a;return f.memoizedState=f.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},f.queue=i,i=i.dispatch=_C.bind(null,cr,i),[f.memoizedState,i]},useRef:function(i){var a=fi();return i={current:i},a.memoizedState=i},useState:function(i){i=Hg(i);var a=i.queue,u=kv.bind(null,cr,a);return a.dispatch=u,[i.memoizedState,u]},useDebugValue:$g,useDeferredValue:function(i,a){var u=fi();return Wg(u,i,a)},useTransition:function(){var i=Hg(!1);return i=vv.bind(null,cr,i.queue,!0,!1),fi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,u){var f=cr,m=fi();if(Dr){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),Qr===null)throw Error(r(349));(br&124)!==0||qy(f,a,u)}m.memoizedState=u;var v={value:u,getSnapshot:a};return m.queue=v,uv(Xy.bind(null,f,v,i),[i]),f.flags|=2048,lc(9,Ef(),Jy.bind(null,f,v,u,a),null),u},useId:function(){var i=fi(),a=Qr.identifierPrefix;if(Dr){var u=Va,f=Wa;u=(f&~(1<<32-Ge(f)-1)).toString(32)+u,a=""+a+"R"+u,u=Sf++,0<u&&(a+="H"+u.toString(32)),a+=""}else u=pC++,a=""+a+"r"+u.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:Yg,useFormState:iv,useActionState:iv,useOptimistic:function(i){var a=fi();a.memoizedState=a.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Gg.bind(null,cr,!0,u),u.dispatch=a,[i,a]},useMemoCache:Fg,useCacheRefresh:function(){return fi().memoizedState=bC.bind(null,cr)}},Cv={readContext:Zs,use:wf,useCallback:mv,useContext:Zs,useEffect:dv,useImperativeHandle:pv,useInsertionEffect:fv,useLayoutEffect:hv,useMemo:xv,useReducer:kf,useRef:cv,useState:function(){return kf(qa)},useDebugValue:$g,useDeferredValue:function(i,a){var u=ws();return yv(u,$r.memoizedState,i,a)},useTransition:function(){var i=kf(qa)[0],a=ws().memoizedState;return[typeof i=="boolean"?i:_u(i),a]},useSyncExternalStore:Gy,useId:Sv,useHostTransitionStatus:Yg,useFormState:av,useActionState:av,useOptimistic:function(i,a){var u=ws();return Qy(u,$r,i,a)},useMemoCache:Fg,useCacheRefresh:wv},SC={readContext:Zs,use:wf,useCallback:mv,useContext:Zs,useEffect:dv,useImperativeHandle:pv,useInsertionEffect:fv,useLayoutEffect:hv,useMemo:xv,useReducer:Bg,useRef:cv,useState:function(){return Bg(qa)},useDebugValue:$g,useDeferredValue:function(i,a){var u=ws();return $r===null?Wg(u,i,a):yv(u,$r.memoizedState,i,a)},useTransition:function(){var i=Bg(qa)[0],a=ws().memoizedState;return[typeof i=="boolean"?i:_u(i),a]},useSyncExternalStore:Gy,useId:Sv,useHostTransitionStatus:Yg,useFormState:ov,useActionState:ov,useOptimistic:function(i,a){var u=ws();return $r!==null?Qy(u,$r,i,a):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Fg,useCacheRefresh:wv},oc=null,ku=0;function jf(i){var a=ku;return ku+=1,oc===null&&(oc=[]),zy(oc,i,a)}function Eu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Af(i,a){throw a.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function jv(i){var a=i._init;return a(i._payload)}function Av(i){function a(De,be){if(i){var Ie=De.deletions;Ie===null?(De.deletions=[be],De.flags|=16):Ie.push(be)}}function u(De,be){if(!i)return null;for(;be!==null;)a(De,be),be=be.sibling;return null}function f(De){for(var be=new Map;De!==null;)De.key!==null?be.set(De.key,De):be.set(De.index,De),De=De.sibling;return be}function m(De,be){return De=$a(De,be),De.index=0,De.sibling=null,De}function v(De,be,Ie){return De.index=Ie,i?(Ie=De.alternate,Ie!==null?(Ie=Ie.index,Ie<be?(De.flags|=67108866,be):Ie):(De.flags|=67108866,be)):(De.flags|=1048576,be)}function C(De){return i&&De.alternate===null&&(De.flags|=67108866),De}function W(De,be,Ie,_t){return be===null||be.tag!==6?(be=gg(Ie,De.mode,_t),be.return=De,be):(be=m(be,Ie),be.return=De,be)}function ue(De,be,Ie,_t){var _n=Ie.type;return _n===k?mt(De,be,Ie.props.children,_t,Ie.key):be!==null&&(be.elementType===_n||typeof _n=="object"&&_n!==null&&_n.$$typeof===Q&&jv(_n)===be.type)?(be=m(be,Ie.props),Eu(be,Ie),be.return=De,be):(be=ff(Ie.type,Ie.key,Ie.props,null,De.mode,_t),Eu(be,Ie),be.return=De,be)}function Be(De,be,Ie,_t){return be===null||be.tag!==4||be.stateNode.containerInfo!==Ie.containerInfo||be.stateNode.implementation!==Ie.implementation?(be=pg(Ie,De.mode,_t),be.return=De,be):(be=m(be,Ie.children||[]),be.return=De,be)}function mt(De,be,Ie,_t,_n){return be===null||be.tag!==7?(be=fo(Ie,De.mode,_t,_n),be.return=De,be):(be=m(be,Ie),be.return=De,be)}function Et(De,be,Ie){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return be=gg(""+be,De.mode,Ie),be.return=De,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case _:return Ie=ff(be.type,be.key,be.props,null,De.mode,Ie),Eu(Ie,be),Ie.return=De,Ie;case b:return be=pg(be,De.mode,Ie),be.return=De,be;case Q:var _t=be._init;return be=_t(be._payload),Et(De,be,Ie)}if(at(be)||te(be))return be=fo(be,De.mode,Ie,null),be.return=De,be;if(typeof be.then=="function")return Et(De,jf(be),Ie);if(be.$$typeof===D)return Et(De,mf(De,be),Ie);Af(De,be)}return null}function Ye(De,be,Ie,_t){var _n=be!==null?be.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return _n!==null?null:W(De,be,""+Ie,_t);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case _:return Ie.key===_n?ue(De,be,Ie,_t):null;case b:return Ie.key===_n?Be(De,be,Ie,_t):null;case Q:return _n=Ie._init,Ie=_n(Ie._payload),Ye(De,be,Ie,_t)}if(at(Ie)||te(Ie))return _n!==null?null:mt(De,be,Ie,_t,null);if(typeof Ie.then=="function")return Ye(De,be,jf(Ie),_t);if(Ie.$$typeof===D)return Ye(De,be,mf(De,Ie),_t);Af(De,Ie)}return null}function qe(De,be,Ie,_t,_n){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return De=De.get(Ie)||null,W(be,De,""+_t,_n);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case _:return De=De.get(_t.key===null?Ie:_t.key)||null,ue(be,De,_t,_n);case b:return De=De.get(_t.key===null?Ie:_t.key)||null,Be(be,De,_t,_n);case Q:var dr=_t._init;return _t=dr(_t._payload),qe(De,be,Ie,_t,_n)}if(at(_t)||te(_t))return De=De.get(Ie)||null,mt(be,De,_t,_n,null);if(typeof _t.then=="function")return qe(De,be,Ie,jf(_t),_n);if(_t.$$typeof===D)return qe(De,be,Ie,mf(be,_t),_n);Af(be,_t)}return null}function Wn(De,be,Ie,_t){for(var _n=null,dr=null,On=be,Bn=be=0,Rs=null;On!==null&&Bn<Ie.length;Bn++){On.index>Bn?(Rs=On,On=null):Rs=On.sibling;var Er=Ye(De,On,Ie[Bn],_t);if(Er===null){On===null&&(On=Rs);break}i&&On&&Er.alternate===null&&a(De,On),be=v(Er,be,Bn),dr===null?_n=Er:dr.sibling=Er,dr=Er,On=Rs}if(Bn===Ie.length)return u(De,On),Dr&&go(De,Bn),_n;if(On===null){for(;Bn<Ie.length;Bn++)On=Et(De,Ie[Bn],_t),On!==null&&(be=v(On,be,Bn),dr===null?_n=On:dr.sibling=On,dr=On);return Dr&&go(De,Bn),_n}for(On=f(On);Bn<Ie.length;Bn++)Rs=qe(On,De,Bn,Ie[Bn],_t),Rs!==null&&(i&&Rs.alternate!==null&&On.delete(Rs.key===null?Bn:Rs.key),be=v(Rs,be,Bn),dr===null?_n=Rs:dr.sibling=Rs,dr=Rs);return i&&On.forEach(function($l){return a(De,$l)}),Dr&&go(De,Bn),_n}function zn(De,be,Ie,_t){if(Ie==null)throw Error(r(151));for(var _n=null,dr=null,On=be,Bn=be=0,Rs=null,Er=Ie.next();On!==null&&!Er.done;Bn++,Er=Ie.next()){On.index>Bn?(Rs=On,On=null):Rs=On.sibling;var $l=Ye(De,On,Er.value,_t);if($l===null){On===null&&(On=Rs);break}i&&On&&$l.alternate===null&&a(De,On),be=v($l,be,Bn),dr===null?_n=$l:dr.sibling=$l,dr=$l,On=Rs}if(Er.done)return u(De,On),Dr&&go(De,Bn),_n;if(On===null){for(;!Er.done;Bn++,Er=Ie.next())Er=Et(De,Er.value,_t),Er!==null&&(be=v(Er,be,Bn),dr===null?_n=Er:dr.sibling=Er,dr=Er);return Dr&&go(De,Bn),_n}for(On=f(On);!Er.done;Bn++,Er=Ie.next())Er=qe(On,De,Bn,Er.value,_t),Er!==null&&(i&&Er.alternate!==null&&On.delete(Er.key===null?Bn:Er.key),be=v(Er,be,Bn),dr===null?_n=Er:dr.sibling=Er,dr=Er);return i&&On.forEach(function(w4){return a(De,w4)}),Dr&&go(De,Bn),_n}function Vr(De,be,Ie,_t){if(typeof Ie=="object"&&Ie!==null&&Ie.type===k&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case _:e:{for(var _n=Ie.key;be!==null;){if(be.key===_n){if(_n=Ie.type,_n===k){if(be.tag===7){u(De,be.sibling),_t=m(be,Ie.props.children),_t.return=De,De=_t;break e}}else if(be.elementType===_n||typeof _n=="object"&&_n!==null&&_n.$$typeof===Q&&jv(_n)===be.type){u(De,be.sibling),_t=m(be,Ie.props),Eu(_t,Ie),_t.return=De,De=_t;break e}u(De,be);break}else a(De,be);be=be.sibling}Ie.type===k?(_t=fo(Ie.props.children,De.mode,_t,Ie.key),_t.return=De,De=_t):(_t=ff(Ie.type,Ie.key,Ie.props,null,De.mode,_t),Eu(_t,Ie),_t.return=De,De=_t)}return C(De);case b:e:{for(_n=Ie.key;be!==null;){if(be.key===_n)if(be.tag===4&&be.stateNode.containerInfo===Ie.containerInfo&&be.stateNode.implementation===Ie.implementation){u(De,be.sibling),_t=m(be,Ie.children||[]),_t.return=De,De=_t;break e}else{u(De,be);break}else a(De,be);be=be.sibling}_t=pg(Ie,De.mode,_t),_t.return=De,De=_t}return C(De);case Q:return _n=Ie._init,Ie=_n(Ie._payload),Vr(De,be,Ie,_t)}if(at(Ie))return Wn(De,be,Ie,_t);if(te(Ie)){if(_n=te(Ie),typeof _n!="function")throw Error(r(150));return Ie=_n.call(Ie),zn(De,be,Ie,_t)}if(typeof Ie.then=="function")return Vr(De,be,jf(Ie),_t);if(Ie.$$typeof===D)return Vr(De,be,mf(De,Ie),_t);Af(De,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,be!==null&&be.tag===6?(u(De,be.sibling),_t=m(be,Ie),_t.return=De,De=_t):(u(De,be),_t=gg(Ie,De.mode,_t),_t.return=De,De=_t),C(De)):u(De,be)}return function(De,be,Ie,_t){try{ku=0;var _n=Vr(De,be,Ie,_t);return oc=null,_n}catch(On){if(On===pu||On===yf)throw On;var dr=ki(29,On,null,De.mode);return dr.lanes=_t,dr.return=De,dr}finally{}}}var cc=Av(!0),Ov=Av(!1),Hi=oe(null),wa=null;function Cl(i){var a=i.alternate;B(Cs,Cs.current&1),B(Hi,i),wa===null&&(a===null||sc.current!==null||a.memoizedState!==null)&&(wa=i)}function Dv(i){if(i.tag===22){if(B(Cs,Cs.current),B(Hi,i),wa===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(wa=i)}}else jl()}function jl(){B(Cs,Cs.current),B(Hi,Hi.current)}function Ja(i){P(Hi),wa===i&&(wa=null),P(Cs)}var Cs=oe(0);function Of(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Pp(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function qg(i,a,u,f){a=i.memoizedState,u=u(f,a),u=u==null?a:p({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Jg={enqueueSetState:function(i,a,u){i=i._reactInternals;var f=Ci(),m=El(f);m.payload=a,u!=null&&(m.callback=u),a=Nl(i,m,f),a!==null&&(ji(a,i,f),xu(a,i,f))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var f=Ci(),m=El(f);m.tag=1,m.payload=a,u!=null&&(m.callback=u),a=Nl(i,m,f),a!==null&&(ji(a,i,f),xu(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Ci(),f=El(u);f.tag=2,a!=null&&(f.callback=a),a=Nl(i,f,u),a!==null&&(ji(a,i,u),xu(a,i,u))}};function Rv(i,a,u,f,m,v,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,v,C):a.prototype&&a.prototype.isPureReactComponent?!lu(u,f)||!lu(m,v):!0}function Mv(i,a,u,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==i&&Jg.enqueueReplaceState(a,a.state,null)}function _o(i,a){var u=a;if("ref"in a){u={};for(var f in a)f!=="ref"&&(u[f]=a[f])}if(i=i.defaultProps){u===a&&(u=p({},u));for(var m in i)u[m]===void 0&&(u[m]=i[m])}return u}var Df=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Lv(i){Df(i)}function Iv(i){console.error(i)}function Pv(i){Df(i)}function Rf(i,a){try{var u=i.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function Fv(i,a,u){try{var f=i.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Xg(i,a,u){return u=El(u),u.tag=3,u.payload={element:null},u.callback=function(){Rf(i,a)},u}function zv(i){return i=El(i),i.tag=3,i}function Bv(i,a,u,f){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var v=f.value;i.payload=function(){return m(v)},i.callback=function(){Fv(a,u,f)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Fv(a,u,f),typeof m!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var W=f.stack;this.componentDidCatch(f.value,{componentStack:W!==null?W:""})})}function wC(i,a,u,f,m){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=u.alternate,a!==null&&fu(a,u,m,!0),u=Hi.current,u!==null){switch(u.tag){case 13:return wa===null?bp():u.alternate===null&&fs===0&&(fs=3),u.flags&=-257,u.flags|=65536,u.lanes=m,f===Eg?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([f]):a.add(f),Sp(i,f,m)),!1;case 22:return u.flags|=65536,f===Eg?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([f]):u.add(f)),Sp(i,f,m)),!1}throw Error(r(435,u.tag))}return Sp(i,f,m),bp(),!1}if(Dr)return a=Hi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,f!==yg&&(i=Error(r(422),{cause:f}),du(Pi(i,u)))):(f!==yg&&(a=Error(r(423),{cause:f}),du(Pi(a,u))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,f=Pi(f,u),m=Xg(i.stateNode,f,m),Cg(i,m),fs!==4&&(fs=2)),!1;var v=Error(r(520),{cause:f});if(v=Pi(v,u),Du===null?Du=[v]:Du.push(v),fs!==4&&(fs=2),a===null)return!0;f=Pi(f,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,i=m&-m,u.lanes|=i,i=Xg(u.stateNode,f,i),Cg(u,i),!1;case 1:if(a=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ll===null||!Ll.has(v))))return u.flags|=65536,m&=-m,u.lanes|=m,m=zv(m),Bv(m,i,u,f),Cg(u,m),!1}u=u.return}while(u!==null);return!1}var Hv=Error(r(461)),Os=!1;function zs(i,a,u,f){a.child=i===null?Ov(a,null,u,f):cc(a,i.child,u,f)}function Uv(i,a,u,f,m){u=u.render;var v=a.ref;if("ref"in f){var C={};for(var W in f)W!=="ref"&&(C[W]=f[W])}else C=f;return yo(a),f=Rg(i,a,u,C,v,m),W=Mg(),i!==null&&!Os?(Lg(i,a,m),Xa(i,a,m)):(Dr&&W&&mg(a),a.flags|=1,zs(i,a,f,m),a.child)}function $v(i,a,u,f,m){if(i===null){var v=u.type;return typeof v=="function"&&!hg(v)&&v.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=v,Wv(i,a,v,f,m)):(i=ff(u.type,null,f,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,!sp(i,m)){var C=v.memoizedProps;if(u=u.compare,u=u!==null?u:lu,u(C,f)&&i.ref===a.ref)return Xa(i,a,m)}return a.flags|=1,i=$a(v,f),i.ref=a.ref,i.return=a,a.child=i}function Wv(i,a,u,f,m){if(i!==null){var v=i.memoizedProps;if(lu(v,f)&&i.ref===a.ref)if(Os=!1,a.pendingProps=f=v,sp(i,m))(i.flags&131072)!==0&&(Os=!0);else return a.lanes=i.lanes,Xa(i,a,m)}return Kg(i,a,u,f,m)}function Vv(i,a,u){var f=a.pendingProps,m=f.children,v=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((a.flags&128)!==0){if(f=v!==null?v.baseLanes|u:u,i!==null){for(m=a.child=i.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;a.childLanes=v&~f}else a.childLanes=0,a.child=null;return Yv(i,a,f,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&xf(a,v!==null?v.cachePool:null),v!==null?Wy(a,v):Ag(),Dv(a);else return a.lanes=a.childLanes=536870912,Yv(i,a,v!==null?v.baseLanes|u:u,u)}else v!==null?(xf(a,v.cachePool),Wy(a,v),jl(),a.memoizedState=null):(i!==null&&xf(a,null),Ag(),jl());return zs(i,a,m,u),a.child}function Yv(i,a,u,f){var m=kg();return m=m===null?null:{parent:Ts._currentValue,pool:m},a.memoizedState={baseLanes:u,cachePool:m},i!==null&&xf(a,null),Ag(),Dv(a),i!==null&&fu(i,a,f,!0),null}function Mf(i,a){var u=a.ref;if(u===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(a.flags|=4194816)}}function Kg(i,a,u,f,m){return yo(a),u=Rg(i,a,u,f,void 0,m),f=Mg(),i!==null&&!Os?(Lg(i,a,m),Xa(i,a,m)):(Dr&&f&&mg(a),a.flags|=1,zs(i,a,u,m),a.child)}function Gv(i,a,u,f,m,v){return yo(a),a.updateQueue=null,u=Yy(a,f,u,m),Vy(i),f=Mg(),i!==null&&!Os?(Lg(i,a,v),Xa(i,a,v)):(Dr&&f&&mg(a),a.flags|=1,zs(i,a,u,v),a.child)}function qv(i,a,u,f,m){if(yo(a),a.stateNode===null){var v=Qo,C=u.contextType;typeof C=="object"&&C!==null&&(v=Zs(C)),v=new u(f,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Jg,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=f,v.state=a.memoizedState,v.refs={},Ng(a),C=u.contextType,v.context=typeof C=="object"&&C!==null?Zs(C):Qo,v.state=a.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(qg(a,u,C,f),v.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(C=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),C!==v.state&&Jg.enqueueReplaceState(v,v.state,null),vu(a,f,v,m),yu(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){v=a.stateNode;var W=a.memoizedProps,ue=_o(u,W);v.props=ue;var Be=v.context,mt=u.contextType;C=Qo,typeof mt=="object"&&mt!==null&&(C=Zs(mt));var Et=u.getDerivedStateFromProps;mt=typeof Et=="function"||typeof v.getSnapshotBeforeUpdate=="function",W=a.pendingProps!==W,mt||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(W||Be!==C)&&Mv(a,v,f,C),kl=!1;var Ye=a.memoizedState;v.state=Ye,vu(a,f,v,m),yu(),Be=a.memoizedState,W||Ye!==Be||kl?(typeof Et=="function"&&(qg(a,u,Et,f),Be=a.memoizedState),(ue=kl||Rv(a,u,ue,f,Ye,Be,C))?(mt||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=Be),v.props=f,v.state=Be,v.context=C,f=ue):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{v=a.stateNode,Tg(i,a),C=a.memoizedProps,mt=_o(u,C),v.props=mt,Et=a.pendingProps,Ye=v.context,Be=u.contextType,ue=Qo,typeof Be=="object"&&Be!==null&&(ue=Zs(Be)),W=u.getDerivedStateFromProps,(Be=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==Et||Ye!==ue)&&Mv(a,v,f,ue),kl=!1,Ye=a.memoizedState,v.state=Ye,vu(a,f,v,m),yu();var qe=a.memoizedState;C!==Et||Ye!==qe||kl||i!==null&&i.dependencies!==null&&pf(i.dependencies)?(typeof W=="function"&&(qg(a,u,W,f),qe=a.memoizedState),(mt=kl||Rv(a,u,mt,f,Ye,qe,ue)||i!==null&&i.dependencies!==null&&pf(i.dependencies))?(Be||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,qe,ue),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,qe,ue)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===i.memoizedProps&&Ye===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Ye===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=qe),v.props=f,v.state=qe,v.context=ue,f=mt):(typeof v.componentDidUpdate!="function"||C===i.memoizedProps&&Ye===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Ye===i.memoizedState||(a.flags|=1024),f=!1)}return v=f,Mf(i,a),f=(a.flags&128)!==0,v||f?(v=a.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,i!==null&&f?(a.child=cc(a,i.child,null,m),a.child=cc(a,null,u,m)):zs(i,a,u,m),a.memoizedState=v.state,i=a.child):i=Xa(i,a,m),i}function Jv(i,a,u,f){return uu(),a.flags|=256,zs(i,a,u,f),a.child}var Zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qg(i){return{baseLanes:i,cachePool:Iy()}}function ep(i,a,u){return i=i!==null?i.childLanes&~u:0,a&&(i|=Ui),i}function Xv(i,a,u){var f=a.pendingProps,m=!1,v=(a.flags&128)!==0,C;if((C=v)||(C=i!==null&&i.memoizedState===null?!1:(Cs.current&2)!==0),C&&(m=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,i===null){if(Dr){if(m?Cl(a):jl(),Dr){var W=ds,ue;if(ue=W){e:{for(ue=W,W=Sa;ue.nodeType!==8;){if(!W){W=null;break e}if(ue=aa(ue.nextSibling),ue===null){W=null;break e}}W=ue}W!==null?(a.memoizedState={dehydrated:W,treeContext:ho!==null?{id:Wa,overflow:Va}:null,retryLane:536870912,hydrationErrors:null},ue=ki(18,null,null,0),ue.stateNode=W,ue.return=a,a.child=ue,ai=a,ds=null,ue=!0):ue=!1}ue||mo(a)}if(W=a.memoizedState,W!==null&&(W=W.dehydrated,W!==null))return Pp(W)?a.lanes=32:a.lanes=536870912,null;Ja(a)}return W=f.children,f=f.fallback,m?(jl(),m=a.mode,W=Lf({mode:"hidden",children:W},m),f=fo(f,m,u,null),W.return=a,f.return=a,W.sibling=f,a.child=W,m=a.child,m.memoizedState=Qg(u),m.childLanes=ep(i,C,u),a.memoizedState=Zg,f):(Cl(a),tp(a,W))}if(ue=i.memoizedState,ue!==null&&(W=ue.dehydrated,W!==null)){if(v)a.flags&256?(Cl(a),a.flags&=-257,a=np(i,a,u)):a.memoizedState!==null?(jl(),a.child=i.child,a.flags|=128,a=null):(jl(),m=f.fallback,W=a.mode,f=Lf({mode:"visible",children:f.children},W),m=fo(m,W,u,null),m.flags|=2,f.return=a,m.return=a,f.sibling=m,a.child=f,cc(a,i.child,null,u),f=a.child,f.memoizedState=Qg(u),f.childLanes=ep(i,C,u),a.memoizedState=Zg,a=m);else if(Cl(a),Pp(W)){if(C=W.nextSibling&&W.nextSibling.dataset,C)var Be=C.dgst;C=Be,f=Error(r(419)),f.stack="",f.digest=C,du({value:f,source:null,stack:null}),a=np(i,a,u)}else if(Os||fu(i,a,u,!1),C=(u&i.childLanes)!==0,Os||C){if(C=Qr,C!==null&&(f=u&-u,f=(f&42)!==0?1:Gn(f),f=(f&(C.suspendedLanes|u))!==0?0:f,f!==0&&f!==ue.retryLane))throw ue.retryLane=f,Zo(i,f),ji(C,i,f),Hv;W.data==="$?"||bp(),a=np(i,a,u)}else W.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=ue.treeContext,ds=aa(W.nextSibling),ai=a,Dr=!0,po=null,Sa=!1,i!==null&&(zi[Bi++]=Wa,zi[Bi++]=Va,zi[Bi++]=ho,Wa=i.id,Va=i.overflow,ho=a),a=tp(a,f.children),a.flags|=4096);return a}return m?(jl(),m=f.fallback,W=a.mode,ue=i.child,Be=ue.sibling,f=$a(ue,{mode:"hidden",children:f.children}),f.subtreeFlags=ue.subtreeFlags&65011712,Be!==null?m=$a(Be,m):(m=fo(m,W,u,null),m.flags|=2),m.return=a,f.return=a,f.sibling=m,a.child=f,f=m,m=a.child,W=i.child.memoizedState,W===null?W=Qg(u):(ue=W.cachePool,ue!==null?(Be=Ts._currentValue,ue=ue.parent!==Be?{parent:Be,pool:Be}:ue):ue=Iy(),W={baseLanes:W.baseLanes|u,cachePool:ue}),m.memoizedState=W,m.childLanes=ep(i,C,u),a.memoizedState=Zg,f):(Cl(a),u=i.child,i=u.sibling,u=$a(u,{mode:"visible",children:f.children}),u.return=a,u.sibling=null,i!==null&&(C=a.deletions,C===null?(a.deletions=[i],a.flags|=16):C.push(i)),a.child=u,a.memoizedState=null,u)}function tp(i,a){return a=Lf({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Lf(i,a){return i=ki(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function np(i,a,u){return cc(a,i.child,null,u),i=tp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Kv(i,a,u){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),bg(i.return,a,u)}function rp(i,a,u,f,m){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=m)}function Zv(i,a,u){var f=a.pendingProps,m=f.revealOrder,v=f.tail;if(zs(i,a,f.children,u),f=Cs.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Kv(i,u,a);else if(i.tag===19)Kv(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(B(Cs,f),m){case"forwards":for(u=a.child,m=null;u!==null;)i=u.alternate,i!==null&&Of(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),rp(a,!1,m,u,v);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&Of(i)===null){a.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}rp(a,!0,u,null,v);break;case"together":rp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Xa(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Ml|=a.lanes,(u&a.childLanes)===0)if(i!==null){if(fu(i,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,u=$a(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=$a(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function sp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&pf(i)))}function kC(i,a,u){switch(a.tag){case 3:et(a,a.stateNode.containerInfo),wl(a,Ts,i.memoizedState.cache),uu();break;case 27:case 5:At(a);break;case 4:et(a,a.stateNode.containerInfo);break;case 10:wl(a,a.type,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Cl(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Xv(i,a,u):(Cl(a),i=Xa(i,a,u),i!==null?i.sibling:null);Cl(a);break;case 19:var m=(i.flags&128)!==0;if(f=(u&a.childLanes)!==0,f||(fu(i,a,u,!1),f=(u&a.childLanes)!==0),m){if(f)return Zv(i,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),B(Cs,Cs.current),f)break;return null;case 22:case 23:return a.lanes=0,Vv(i,a,u);case 24:wl(a,Ts,i.memoizedState.cache)}return Xa(i,a,u)}function Qv(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps)Os=!0;else{if(!sp(i,u)&&(a.flags&128)===0)return Os=!1,kC(i,a,u);Os=(i.flags&131072)!==0}else Os=!1,Dr&&(a.flags&1048576)!==0&&jy(a,gf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var f=a.elementType,m=f._init;if(f=m(f._payload),a.type=f,typeof f=="function")hg(f)?(i=_o(f,i),a.tag=1,a=qv(null,a,f,i,u)):(a.tag=0,a=Kg(null,a,f,i,u));else{if(f!=null){if(m=f.$$typeof,m===F){a.tag=11,a=Uv(null,a,f,i,u);break e}else if(m===L){a.tag=14,a=$v(null,a,f,i,u);break e}}throw a=Ce(f)||f,Error(r(306,a,""))}}return a;case 0:return Kg(i,a,a.type,a.pendingProps,u);case 1:return f=a.type,m=_o(f,a.pendingProps),qv(i,a,f,m,u);case 3:e:{if(et(a,a.stateNode.containerInfo),i===null)throw Error(r(387));f=a.pendingProps;var v=a.memoizedState;m=v.element,Tg(i,a),vu(a,f,null,u);var C=a.memoizedState;if(f=C.cache,wl(a,Ts,f),f!==v.cache&&_g(a,[Ts],u,!0),yu(),f=C.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=Jv(i,a,f,u);break e}else if(f!==m){m=Pi(Error(r(424)),a),du(m),a=Jv(i,a,f,u);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ds=aa(i.firstChild),ai=a,Dr=!0,po=null,Sa=!0,u=Ov(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(uu(),f===m){a=Xa(i,a,u);break e}zs(i,a,f,u)}a=a.child}return a;case 26:return Mf(i,a),i===null?(u=r_(a.type,null,a.pendingProps,null))?a.memoizedState=u:Dr||(u=a.type,i=a.pendingProps,f=Jf(fe.current).createElement(u),f[$e]=a,f[zt]=i,Hs(f,u,i),_e(f),a.stateNode=f):a.memoizedState=r_(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return At(a),i===null&&Dr&&(f=a.stateNode=e_(a.type,a.pendingProps,fe.current),ai=a,Sa=!0,m=ds,Fl(a.type)?(Fp=m,ds=aa(f.firstChild)):ds=m),zs(i,a,a.pendingProps.children,u),Mf(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Dr&&((m=f=ds)&&(f=ZC(f,a.type,a.pendingProps,Sa),f!==null?(a.stateNode=f,ai=a,ds=aa(f.firstChild),Sa=!1,m=!0):m=!1),m||mo(a)),At(a),m=a.type,v=a.pendingProps,C=i!==null?i.memoizedProps:null,f=v.children,Mp(m,v)?f=null:C!==null&&Mp(m,C)&&(a.flags|=32),a.memoizedState!==null&&(m=Rg(i,a,mC,null,null,u),Hu._currentValue=m),Mf(i,a),zs(i,a,f,u),a.child;case 6:return i===null&&Dr&&((i=u=ds)&&(u=QC(u,a.pendingProps,Sa),u!==null?(a.stateNode=u,ai=a,ds=null,i=!0):i=!1),i||mo(a)),null;case 13:return Xv(i,a,u);case 4:return et(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=cc(a,null,f,u):zs(i,a,f,u),a.child;case 11:return Uv(i,a,a.type,a.pendingProps,u);case 7:return zs(i,a,a.pendingProps,u),a.child;case 8:return zs(i,a,a.pendingProps.children,u),a.child;case 12:return zs(i,a,a.pendingProps.children,u),a.child;case 10:return f=a.pendingProps,wl(a,a.type,f.value),zs(i,a,f.children,u),a.child;case 9:return m=a.type._context,f=a.pendingProps.children,yo(a),m=Zs(m),f=f(m),a.flags|=1,zs(i,a,f,u),a.child;case 14:return $v(i,a,a.type,a.pendingProps,u);case 15:return Wv(i,a,a.type,a.pendingProps,u);case 19:return Zv(i,a,u);case 31:return f=a.pendingProps,u=a.mode,f={mode:f.mode,children:f.children},i===null?(u=Lf(f,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=$a(i.child,f),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return Vv(i,a,u);case 24:return yo(a),f=Zs(Ts),i===null?(m=kg(),m===null&&(m=Qr,v=Sg(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=u),m=v),a.memoizedState={parent:f,cache:m},Ng(a),wl(a,Ts,m)):((i.lanes&u)!==0&&(Tg(i,a),vu(a,null,null,u),yu()),m=i.memoizedState,v=a.memoizedState,m.parent!==f?(m={parent:f,cache:f},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),wl(a,Ts,f)):(f=v.cache,wl(a,Ts,f),f!==m.cache&&_g(a,[Ts],u,!0))),zs(i,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ka(i){i.flags|=4}function eb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!o_(a)){if(a=Hi.current,a!==null&&((br&4194048)===br?wa!==null:(br&62914560)!==br&&(br&536870912)===0||a!==wa))throw mu=Eg,Py;i.flags|=8192}}function If(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?ct():536870912,i.lanes|=a,hc|=a)}function Nu(i,a){if(!Dr)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function cs(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(a)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&65011712,f|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=f,i.childLanes=u,a}function EC(i,a,u){var f=a.pendingProps;switch(xg(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(a),null;case 1:return cs(a),null;case 3:return u=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Ga(Ts),ht(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(cu(a)?Ka(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Dy())),cs(a),null;case 26:return u=a.memoizedState,i===null?(Ka(a),u!==null?(cs(a),eb(a,u)):(cs(a),a.flags&=-16777217)):u?u!==i.memoizedState?(Ka(a),cs(a),eb(a,u)):(cs(a),a.flags&=-16777217):(i.memoizedProps!==f&&Ka(a),cs(a),a.flags&=-16777217),null;case 27:xn(a),u=fe.current;var m=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Ka(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return cs(a),null}i=j.current,cu(a)?Ay(a):(i=e_(m,f,u),a.stateNode=i,Ka(a))}return cs(a),null;case 5:if(xn(a),u=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Ka(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return cs(a),null}if(i=j.current,cu(a))Ay(a);else{switch(m=Jf(fe.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?m.createElement("select",{is:f.is}):m.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?m.createElement(u,{is:f.is}):m.createElement(u)}}i[$e]=a,i[zt]=f;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=i;e:switch(Hs(i,u,f),u){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ka(a)}}return cs(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&Ka(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(i=fe.current,cu(a)){if(i=a.stateNode,u=a.memoizedProps,f=null,m=ai,m!==null)switch(m.tag){case 27:case 5:f=m.memoizedProps}i[$e]=a,i=!!(i.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Gb(i.nodeValue,u)),i||mo(a)}else i=Jf(i).createTextNode(f),i[$e]=a,a.stateNode=i}return cs(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=cu(a),f!==null&&f.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[$e]=a}else uu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;cs(a),m=!1}else m=Dy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(Ja(a),a):(Ja(a),null)}if(Ja(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=f!==null,i=i!==null&&i.memoizedState!==null,u){f=a.child,m=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(m=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==m&&(f.flags|=2048)}return u!==i&&u&&(a.child.flags|=8192),If(a,a.updateQueue),cs(a),null;case 4:return ht(),i===null&&jp(a.stateNode.containerInfo),cs(a),null;case 10:return Ga(a.type),cs(a),null;case 19:if(P(Cs),m=a.memoizedState,m===null)return cs(a),null;if(f=(a.flags&128)!==0,v=m.rendering,v===null)if(f)Nu(m,!1);else{if(fs!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(v=Of(i),v!==null){for(a.flags|=128,Nu(m,!1),i=v.updateQueue,a.updateQueue=i,If(a,i),a.subtreeFlags=0,i=u,u=a.child;u!==null;)Cy(u,i),u=u.sibling;return B(Cs,Cs.current&1|2),a.child}i=i.sibling}m.tail!==null&&He()>zf&&(a.flags|=128,f=!0,Nu(m,!1),a.lanes=4194304)}else{if(!f)if(i=Of(v),i!==null){if(a.flags|=128,f=!0,i=i.updateQueue,a.updateQueue=i,If(a,i),Nu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Dr)return cs(a),null}else 2*He()-m.renderingStartTime>zf&&u!==536870912&&(a.flags|=128,f=!0,Nu(m,!1),a.lanes=4194304);m.isBackwards?(v.sibling=a.child,a.child=v):(i=m.last,i!==null?i.sibling=v:a.child=v,m.last=v)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=He(),a.sibling=null,i=Cs.current,B(Cs,f?i&1|2:i&1),a):(cs(a),null);case 22:case 23:return Ja(a),Og(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(u&536870912)!==0&&(a.flags&128)===0&&(cs(a),a.subtreeFlags&6&&(a.flags|=8192)):cs(a),u=a.updateQueue,u!==null&&If(a,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==u&&(a.flags|=2048),i!==null&&P(vo),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ga(Ts),cs(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function NC(i,a){switch(xg(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ga(Ts),ht(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return xn(a),null;case 13:if(Ja(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));uu()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return P(Cs),null;case 4:return ht(),null;case 10:return Ga(a.type),null;case 22:case 23:return Ja(a),Og(),i!==null&&P(vo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ga(Ts),null;case 25:return null;default:return null}}function tb(i,a){switch(xg(a),a.tag){case 3:Ga(Ts),ht();break;case 26:case 27:case 5:xn(a);break;case 4:ht();break;case 13:Ja(a);break;case 19:P(Cs);break;case 10:Ga(a.type);break;case 22:case 23:Ja(a),Og(),i!==null&&P(vo);break;case 24:Ga(Ts)}}function Tu(i,a){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&i)===i){f=void 0;var v=u.create,C=u.inst;f=v(),C.destroy=f}u=u.next}while(u!==m)}}catch(W){Xr(a,a.return,W)}}function Al(i,a,u){try{var f=a.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var v=m.next;f=v;do{if((f.tag&i)===i){var C=f.inst,W=C.destroy;if(W!==void 0){C.destroy=void 0,m=a;var ue=u,Be=W;try{Be()}catch(mt){Xr(m,ue,mt)}}}f=f.next}while(f!==v)}}catch(mt){Xr(a,a.return,mt)}}function nb(i){var a=i.updateQueue;if(a!==null){var u=i.stateNode;try{$y(a,u)}catch(f){Xr(i,i.return,f)}}}function rb(i,a,u){u.props=_o(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(f){Xr(i,a,f)}}function Cu(i,a){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof u=="function"?i.refCleanup=u(f):u.current=f}}catch(m){Xr(i,a,m)}}function ka(i,a){var u=i.ref,f=i.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(m){Xr(i,a,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Xr(i,a,m)}else u.current=null}function sb(i){var a=i.type,u=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(m){Xr(i,i.return,m)}}function ip(i,a,u){try{var f=i.stateNode;GC(f,i.type,u,a),f[zt]=a}catch(m){Xr(i,i.return,m)}}function ib(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fl(i.type)||i.tag===4}function ap(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ib(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fl(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(i),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=qf));else if(f!==4&&(f===27&&Fl(i.type)&&(u=i.stateNode,a=null),i=i.child,i!==null))for(lp(i,a,u),i=i.sibling;i!==null;)lp(i,a,u),i=i.sibling}function Pf(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(f!==4&&(f===27&&Fl(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Pf(i,a,u),i=i.sibling;i!==null;)Pf(i,a,u),i=i.sibling}function ab(i){var a=i.stateNode,u=i.memoizedProps;try{for(var f=i.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Hs(a,f,u),a[$e]=i,a[zt]=u}catch(v){Xr(i,i.return,v)}}var Za=!1,ms=!1,op=!1,lb=typeof WeakSet=="function"?WeakSet:Set,Ds=null;function TC(i,a){if(i=i.containerInfo,Dp=th,i=yy(i),ag(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var C=0,W=-1,ue=-1,Be=0,mt=0,Et=i,Ye=null;t:for(;;){for(var qe;Et!==u||m!==0&&Et.nodeType!==3||(W=C+m),Et!==v||f!==0&&Et.nodeType!==3||(ue=C+f),Et.nodeType===3&&(C+=Et.nodeValue.length),(qe=Et.firstChild)!==null;)Ye=Et,Et=qe;for(;;){if(Et===i)break t;if(Ye===u&&++Be===m&&(W=C),Ye===v&&++mt===f&&(ue=C),(qe=Et.nextSibling)!==null)break;Et=Ye,Ye=Et.parentNode}Et=qe}u=W===-1||ue===-1?null:{start:W,end:ue}}else u=null}u=u||{start:0,end:0}}else u=null;for(Rp={focusedElem:i,selectionRange:u},th=!1,Ds=a;Ds!==null;)if(a=Ds,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,Ds=i;else for(;Ds!==null;){switch(a=Ds,v=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,u=a,m=v.memoizedProps,v=v.memoizedState,f=u.stateNode;try{var Wn=_o(u.type,m,u.elementType===u.type);i=f.getSnapshotBeforeUpdate(Wn,v),f.__reactInternalSnapshotBeforeUpdate=i}catch(zn){Xr(u,u.return,zn)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,u=i.nodeType,u===9)Ip(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ip(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Ds=i;break}Ds=a.return}}function ob(i,a,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Ol(i,u),f&4&&Tu(5,u);break;case 1:if(Ol(i,u),f&4)if(i=u.stateNode,a===null)try{i.componentDidMount()}catch(C){Xr(u,u.return,C)}else{var m=_o(u.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(m,a,i.__reactInternalSnapshotBeforeUpdate)}catch(C){Xr(u,u.return,C)}}f&64&&nb(u),f&512&&Cu(u,u.return);break;case 3:if(Ol(i,u),f&64&&(i=u.updateQueue,i!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{$y(i,a)}catch(C){Xr(u,u.return,C)}}break;case 27:a===null&&f&4&&ab(u);case 26:case 5:Ol(i,u),a===null&&f&4&&sb(u),f&512&&Cu(u,u.return);break;case 12:Ol(i,u);break;case 13:Ol(i,u),f&4&&db(i,u),f&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=IC.bind(null,u),e4(i,u))));break;case 22:if(f=u.memoizedState!==null||Za,!f){a=a!==null&&a.memoizedState!==null||ms,m=Za;var v=ms;Za=f,(ms=a)&&!v?Dl(i,u,(u.subtreeFlags&8772)!==0):Ol(i,u),Za=m,ms=v}break;case 30:break;default:Ol(i,u)}}function cb(i){var a=i.alternate;a!==null&&(i.alternate=null,cb(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&J(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var as=null,hi=!1;function Qa(i,a,u){for(u=u.child;u!==null;)ub(i,a,u),u=u.sibling}function ub(i,a,u){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(Qn,u)}catch{}switch(u.tag){case 26:ms||ka(u,a),Qa(i,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:ms||ka(u,a);var f=as,m=hi;Fl(u.type)&&(as=u.stateNode,hi=!1),Qa(i,a,u),Pu(u.stateNode),as=f,hi=m;break;case 5:ms||ka(u,a);case 6:if(f=as,m=hi,as=null,Qa(i,a,u),as=f,hi=m,as!==null)if(hi)try{(as.nodeType===9?as.body:as.nodeName==="HTML"?as.ownerDocument.body:as).removeChild(u.stateNode)}catch(v){Xr(u,a,v)}else try{as.removeChild(u.stateNode)}catch(v){Xr(u,a,v)}break;case 18:as!==null&&(hi?(i=as,Zb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Vu(i)):Zb(as,u.stateNode));break;case 4:f=as,m=hi,as=u.stateNode.containerInfo,hi=!0,Qa(i,a,u),as=f,hi=m;break;case 0:case 11:case 14:case 15:ms||Al(2,u,a),ms||Al(4,u,a),Qa(i,a,u);break;case 1:ms||(ka(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"&&rb(u,a,f)),Qa(i,a,u);break;case 21:Qa(i,a,u);break;case 22:ms=(f=ms)||u.memoizedState!==null,Qa(i,a,u),ms=f;break;default:Qa(i,a,u)}}function db(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Vu(i)}catch(u){Xr(a,a.return,u)}}function CC(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new lb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new lb),a;default:throw Error(r(435,i.tag))}}function cp(i,a){var u=CC(i);a.forEach(function(f){var m=PC.bind(null,i,f);u.has(f)||(u.add(f),f.then(m,m))})}function Ei(i,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f],v=i,C=a,W=C;e:for(;W!==null;){switch(W.tag){case 27:if(Fl(W.type)){as=W.stateNode,hi=!1;break e}break;case 5:as=W.stateNode,hi=!1;break e;case 3:case 4:as=W.stateNode.containerInfo,hi=!0;break e}W=W.return}if(as===null)throw Error(r(160));ub(v,C,m),as=null,hi=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)fb(a,i),a=a.sibling}var ia=null;function fb(i,a){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ei(a,i),Ni(i),f&4&&(Al(3,i,i.return),Tu(3,i),Al(5,i,i.return));break;case 1:Ei(a,i),Ni(i),f&512&&(ms||u===null||ka(u,u.return)),f&64&&Za&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var m=ia;if(Ei(a,i),Ni(i),f&512&&(ms||u===null||ka(u,u.return)),f&4){var v=u!==null?u.memoizedState:null;if(f=i.memoizedState,u===null)if(f===null)if(i.stateNode===null){e:{f=i.type,u=i.memoizedProps,m=m.ownerDocument||m;t:switch(f){case"title":v=m.getElementsByTagName("title")[0],(!v||v[U]||v[$e]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(f),m.head.insertBefore(v,m.querySelector("head > title"))),Hs(v,f,u),v[$e]=i,_e(v),f=v;break e;case"link":var C=a_("link","href",m).get(f+(u.href||""));if(C){for(var W=0;W<C.length;W++)if(v=C[W],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(W,1);break t}}v=m.createElement(f),Hs(v,f,u),m.head.appendChild(v);break;case"meta":if(C=a_("meta","content",m).get(f+(u.content||""))){for(W=0;W<C.length;W++)if(v=C[W],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(W,1);break t}}v=m.createElement(f),Hs(v,f,u),m.head.appendChild(v);break;default:throw Error(r(468,f))}v[$e]=i,_e(v),f=v}i.stateNode=f}else l_(m,i.type,i.stateNode);else i.stateNode=i_(m,f,i.memoizedProps);else v!==f?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,f===null?l_(m,i.type,i.stateNode):i_(m,f,i.memoizedProps)):f===null&&i.stateNode!==null&&ip(i,i.memoizedProps,u.memoizedProps)}break;case 27:Ei(a,i),Ni(i),f&512&&(ms||u===null||ka(u,u.return)),u!==null&&f&4&&ip(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Ei(a,i),Ni(i),f&512&&(ms||u===null||ka(u,u.return)),i.flags&32){m=i.stateNode;try{pt(m,"")}catch(qe){Xr(i,i.return,qe)}}f&4&&i.stateNode!=null&&(m=i.memoizedProps,ip(i,m,u!==null?u.memoizedProps:m)),f&1024&&(op=!0);break;case 6:if(Ei(a,i),Ni(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,u=i.stateNode;try{u.nodeValue=f}catch(qe){Xr(i,i.return,qe)}}break;case 3:if(Zf=null,m=ia,ia=Xf(a.containerInfo),Ei(a,i),ia=m,Ni(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Vu(a.containerInfo)}catch(qe){Xr(i,i.return,qe)}op&&(op=!1,hb(i));break;case 4:f=ia,ia=Xf(i.stateNode.containerInfo),Ei(a,i),Ni(i),ia=f;break;case 12:Ei(a,i),Ni(i);break;case 13:Ei(a,i),Ni(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(pp=He()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,cp(i,f)));break;case 22:m=i.memoizedState!==null;var ue=u!==null&&u.memoizedState!==null,Be=Za,mt=ms;if(Za=Be||m,ms=mt||ue,Ei(a,i),ms=mt,Za=Be,Ni(i),f&8192)e:for(a=i.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(u===null||ue||Za||ms||So(i)),u=null,a=i;;){if(a.tag===5||a.tag===26){if(u===null){ue=u=a;try{if(v=ue.stateNode,m)C=v.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{W=ue.stateNode;var Et=ue.memoizedProps.style,Ye=Et!=null&&Et.hasOwnProperty("display")?Et.display:null;W.style.display=Ye==null||typeof Ye=="boolean"?"":(""+Ye).trim()}}catch(qe){Xr(ue,ue.return,qe)}}}else if(a.tag===6){if(u===null){ue=a;try{ue.stateNode.nodeValue=m?"":ue.memoizedProps}catch(qe){Xr(ue,ue.return,qe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,cp(i,u))));break;case 19:Ei(a,i),Ni(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,cp(i,f)));break;case 30:break;case 21:break;default:Ei(a,i),Ni(i)}}function Ni(i){var a=i.flags;if(a&2){try{for(var u,f=i.return;f!==null;){if(ib(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var m=u.stateNode,v=ap(i);Pf(i,v,m);break;case 5:var C=u.stateNode;u.flags&32&&(pt(C,""),u.flags&=-33);var W=ap(i);Pf(i,W,C);break;case 3:case 4:var ue=u.stateNode.containerInfo,Be=ap(i);lp(i,Be,ue);break;default:throw Error(r(161))}}catch(mt){Xr(i,i.return,mt)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function hb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;hb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ol(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ob(i,a.alternate,a),a=a.sibling}function So(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Al(4,a,a.return),So(a);break;case 1:ka(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&rb(a,a.return,u),So(a);break;case 27:Pu(a.stateNode);case 26:case 5:ka(a,a.return),So(a);break;case 22:a.memoizedState===null&&So(a);break;case 30:So(a);break;default:So(a)}i=i.sibling}}function Dl(i,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,m=i,v=a,C=v.flags;switch(v.tag){case 0:case 11:case 15:Dl(m,v,u),Tu(4,v);break;case 1:if(Dl(m,v,u),f=v,m=f.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Be){Xr(f,f.return,Be)}if(f=v,m=f.updateQueue,m!==null){var W=f.stateNode;try{var ue=m.shared.hiddenCallbacks;if(ue!==null)for(m.shared.hiddenCallbacks=null,m=0;m<ue.length;m++)Uy(ue[m],W)}catch(Be){Xr(f,f.return,Be)}}u&&C&64&&nb(v),Cu(v,v.return);break;case 27:ab(v);case 26:case 5:Dl(m,v,u),u&&f===null&&C&4&&sb(v),Cu(v,v.return);break;case 12:Dl(m,v,u);break;case 13:Dl(m,v,u),u&&C&4&&db(m,v);break;case 22:v.memoizedState===null&&Dl(m,v,u),Cu(v,v.return);break;case 30:break;default:Dl(m,v,u)}a=a.sibling}}function up(i,a){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&hu(u))}function dp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&hu(i))}function Ea(i,a,u,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)gb(i,a,u,f),a=a.sibling}function gb(i,a,u,f){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Ea(i,a,u,f),m&2048&&Tu(9,a);break;case 1:Ea(i,a,u,f);break;case 3:Ea(i,a,u,f),m&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&hu(i)));break;case 12:if(m&2048){Ea(i,a,u,f),i=a.stateNode;try{var v=a.memoizedProps,C=v.id,W=v.onPostCommit;typeof W=="function"&&W(C,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ue){Xr(a,a.return,ue)}}else Ea(i,a,u,f);break;case 13:Ea(i,a,u,f);break;case 23:break;case 22:v=a.stateNode,C=a.alternate,a.memoizedState!==null?v._visibility&2?Ea(i,a,u,f):ju(i,a):v._visibility&2?Ea(i,a,u,f):(v._visibility|=2,uc(i,a,u,f,(a.subtreeFlags&10256)!==0)),m&2048&&up(C,a);break;case 24:Ea(i,a,u,f),m&2048&&dp(a.alternate,a);break;default:Ea(i,a,u,f)}}function uc(i,a,u,f,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=i,C=a,W=u,ue=f,Be=C.flags;switch(C.tag){case 0:case 11:case 15:uc(v,C,W,ue,m),Tu(8,C);break;case 23:break;case 22:var mt=C.stateNode;C.memoizedState!==null?mt._visibility&2?uc(v,C,W,ue,m):ju(v,C):(mt._visibility|=2,uc(v,C,W,ue,m)),m&&Be&2048&&up(C.alternate,C);break;case 24:uc(v,C,W,ue,m),m&&Be&2048&&dp(C.alternate,C);break;default:uc(v,C,W,ue,m)}a=a.sibling}}function ju(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=i,f=a,m=f.flags;switch(f.tag){case 22:ju(u,f),m&2048&&up(f.alternate,f);break;case 24:ju(u,f),m&2048&&dp(f.alternate,f);break;default:ju(u,f)}a=a.sibling}}var Au=8192;function dc(i){if(i.subtreeFlags&Au)for(i=i.child;i!==null;)pb(i),i=i.sibling}function pb(i){switch(i.tag){case 26:dc(i),i.flags&Au&&i.memoizedState!==null&&h4(ia,i.memoizedState,i.memoizedProps);break;case 5:dc(i);break;case 3:case 4:var a=ia;ia=Xf(i.stateNode.containerInfo),dc(i),ia=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Au,Au=16777216,dc(i),Au=a):dc(i));break;default:dc(i)}}function mb(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Ou(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];Ds=f,yb(f,i)}mb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)xb(i),i=i.sibling}function xb(i){switch(i.tag){case 0:case 11:case 15:Ou(i),i.flags&2048&&Al(9,i,i.return);break;case 3:Ou(i);break;case 12:Ou(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Ff(i)):Ou(i);break;default:Ou(i)}}function Ff(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];Ds=f,yb(f,i)}mb(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Al(8,a,a.return),Ff(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Ff(a));break;default:Ff(a)}i=i.sibling}}function yb(i,a){for(;Ds!==null;){var u=Ds;switch(u.tag){case 0:case 11:case 15:Al(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:hu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Ds=f;else e:for(u=i;Ds!==null;){f=Ds;var m=f.sibling,v=f.return;if(cb(f),f===u){Ds=null;break e}if(m!==null){m.return=v,Ds=m;break e}Ds=v}}}var jC={getCacheForType:function(i){var a=Zs(Ts),u=a.data.get(i);return u===void 0&&(u=i(),a.data.set(i,u)),u}},AC=typeof WeakMap=="function"?WeakMap:Map,Pr=0,Qr=null,hr=null,br=0,Fr=0,Ti=null,Rl=!1,fc=!1,fp=!1,el=0,fs=0,Ml=0,wo=0,hp=0,Ui=0,hc=0,Du=null,gi=null,gp=!1,pp=0,zf=1/0,Bf=null,Ll=null,Bs=0,Il=null,gc=null,pc=0,mp=0,xp=null,vb=null,Ru=0,yp=null;function Ci(){if((Pr&2)!==0&&br!==0)return br&-br;if(le.T!==null){var i=nc;return i!==0?i:Ep()}return bn()}function bb(){Ui===0&&(Ui=(br&536870912)===0||Dr?kt():536870912);var i=Hi.current;return i!==null&&(i.flags|=32),Ui}function ji(i,a,u){(i===Qr&&(Fr===2||Fr===9)||i.cancelPendingCommit!==null)&&(mc(i,0),Pl(i,br,Ui,!1)),Xt(i,u),((Pr&2)===0||i!==Qr)&&(i===Qr&&((Pr&2)===0&&(wo|=u),fs===4&&Pl(i,br,Ui,!1)),Na(i))}function _b(i,a,u){if((Pr&6)!==0)throw Error(r(327));var f=!u&&(a&124)===0&&(a&i.expiredLanes)===0||Zt(i,a),m=f?RC(i,a):_p(i,a,!0),v=f;do{if(m===0){fc&&!f&&Pl(i,a,0,!1);break}else{if(u=i.current.alternate,v&&!OC(u)){m=_p(i,a,!1),v=!1;continue}if(m===2){if(v=a,i.errorRecoveryDisabledLanes&v)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;e:{var W=i;m=Du;var ue=W.current.memoizedState.isDehydrated;if(ue&&(mc(W,C).flags|=256),C=_p(W,C,!1),C!==2){if(fp&&!ue){W.errorRecoveryDisabledLanes|=v,wo|=v,m=4;break e}v=gi,gi=m,v!==null&&(gi===null?gi=v:gi.push.apply(gi,v))}m=C}if(v=!1,m!==2)continue}}if(m===1){mc(i,0),Pl(i,a,0,!0);break}e:{switch(f=i,v=m,v){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Pl(f,a,Ui,!Rl);break e;case 2:gi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(m=pp+300-He(),10<m)){if(Pl(f,a,Ui,!Rl),dt(f,0,!0)!==0)break e;f.timeoutHandle=Xb(Sb.bind(null,f,u,gi,Bf,gp,a,Ui,wo,hc,Rl,v,2,-0,0),m);break e}Sb(f,u,gi,Bf,gp,a,Ui,wo,hc,Rl,v,0,-0,0)}}break}while(!0);Na(i)}function Sb(i,a,u,f,m,v,C,W,ue,Be,mt,Et,Ye,qe){if(i.timeoutHandle=-1,Et=a.subtreeFlags,(Et&8192||(Et&16785408)===16785408)&&(Bu={stylesheets:null,count:0,unsuspend:f4},pb(a),Et=g4(),Et!==null)){i.cancelPendingCommit=Et(jb.bind(null,i,a,v,u,f,m,C,W,ue,mt,1,Ye,qe)),Pl(i,v,C,!Be);return}jb(i,a,v,u,f,m,C,W,ue)}function OC(i){for(var a=i;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var m=u[f],v=m.getSnapshot;m=m.value;try{if(!wi(v(),m))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Pl(i,a,u,f){a&=~hp,a&=~wo,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var m=a;0<m;){var v=31-Ge(m),C=1<<v;f[v]=-1,m&=~C}u!==0&&Yn(i,u,a)}function Hf(){return(Pr&6)===0?(Mu(0),!1):!0}function vp(){if(hr!==null){if(Fr===0)var i=hr.return;else i=hr,Ya=xo=null,Ig(i),oc=null,ku=0,i=hr;for(;i!==null;)tb(i.alternate,i),i=i.return;hr=null}}function mc(i,a){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,JC(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),vp(),Qr=i,hr=u=$a(i.current,null),br=a,Fr=0,Ti=null,Rl=!1,fc=Zt(i,a),fp=!1,hc=Ui=hp=wo=Ml=fs=0,gi=Du=null,gp=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var m=31-Ge(f),v=1<<m;a|=i[m],f&=~v}return el=a,cf(),u}function wb(i,a){cr=null,le.H=Cf,a===pu||a===yf?(a=By(),Fr=3):a===Py?(a=By(),Fr=4):Fr=a===Hv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ti=a,hr===null&&(fs=1,Rf(i,Pi(a,i.current)))}function kb(){var i=le.H;return le.H=Cf,i===null?Cf:i}function Eb(){var i=le.A;return le.A=jC,i}function bp(){fs=4,Rl||(br&4194048)!==br&&Hi.current!==null||(fc=!0),(Ml&134217727)===0&&(wo&134217727)===0||Qr===null||Pl(Qr,br,Ui,!1)}function _p(i,a,u){var f=Pr;Pr|=2;var m=kb(),v=Eb();(Qr!==i||br!==a)&&(Bf=null,mc(i,a)),a=!1;var C=fs;e:do try{if(Fr!==0&&hr!==null){var W=hr,ue=Ti;switch(Fr){case 8:vp(),C=6;break e;case 3:case 2:case 9:case 6:Hi.current===null&&(a=!0);var Be=Fr;if(Fr=0,Ti=null,xc(i,W,ue,Be),u&&fc){C=0;break e}break;default:Be=Fr,Fr=0,Ti=null,xc(i,W,ue,Be)}}DC(),C=fs;break}catch(mt){wb(i,mt)}while(!0);return a&&i.shellSuspendCounter++,Ya=xo=null,Pr=f,le.H=m,le.A=v,hr===null&&(Qr=null,br=0,cf()),C}function DC(){for(;hr!==null;)Nb(hr)}function RC(i,a){var u=Pr;Pr|=2;var f=kb(),m=Eb();Qr!==i||br!==a?(Bf=null,zf=He()+500,mc(i,a)):fc=Zt(i,a);e:do try{if(Fr!==0&&hr!==null){a=hr;var v=Ti;t:switch(Fr){case 1:Fr=0,Ti=null,xc(i,a,v,1);break;case 2:case 9:if(Fy(v)){Fr=0,Ti=null,Tb(a);break}a=function(){Fr!==2&&Fr!==9||Qr!==i||(Fr=7),Na(i)},v.then(a,a);break e;case 3:Fr=7;break e;case 4:Fr=5;break e;case 7:Fy(v)?(Fr=0,Ti=null,Tb(a)):(Fr=0,Ti=null,xc(i,a,v,7));break;case 5:var C=null;switch(hr.tag){case 26:C=hr.memoizedState;case 5:case 27:var W=hr;if(!C||o_(C)){Fr=0,Ti=null;var ue=W.sibling;if(ue!==null)hr=ue;else{var Be=W.return;Be!==null?(hr=Be,Uf(Be)):hr=null}break t}}Fr=0,Ti=null,xc(i,a,v,5);break;case 6:Fr=0,Ti=null,xc(i,a,v,6);break;case 8:vp(),fs=6;break e;default:throw Error(r(462))}}MC();break}catch(mt){wb(i,mt)}while(!0);return Ya=xo=null,le.H=f,le.A=m,Pr=u,hr!==null?0:(Qr=null,br=0,cf(),fs)}function MC(){for(;hr!==null&&!Hn();)Nb(hr)}function Nb(i){var a=Qv(i.alternate,i,el);i.memoizedProps=i.pendingProps,a===null?Uf(i):hr=a}function Tb(i){var a=i,u=a.alternate;switch(a.tag){case 15:case 0:a=Gv(u,a,a.pendingProps,a.type,void 0,br);break;case 11:a=Gv(u,a,a.pendingProps,a.type.render,a.ref,br);break;case 5:Ig(a);default:tb(u,a),a=hr=Cy(a,el),a=Qv(u,a,el)}i.memoizedProps=i.pendingProps,a===null?Uf(i):hr=a}function xc(i,a,u,f){Ya=xo=null,Ig(a),oc=null,ku=0;var m=a.return;try{if(wC(i,m,a,u,br)){fs=1,Rf(i,Pi(u,i.current)),hr=null;return}}catch(v){if(m!==null)throw hr=m,v;fs=1,Rf(i,Pi(u,i.current)),hr=null;return}a.flags&32768?(Dr||f===1?i=!0:fc||(br&536870912)!==0?i=!1:(Rl=i=!0,(f===2||f===9||f===3||f===6)&&(f=Hi.current,f!==null&&f.tag===13&&(f.flags|=16384))),Cb(a,i)):Uf(a)}function Uf(i){var a=i;do{if((a.flags&32768)!==0){Cb(a,Rl);return}i=a.return;var u=EC(a.alternate,a,el);if(u!==null){hr=u;return}if(a=a.sibling,a!==null){hr=a;return}hr=a=i}while(a!==null);fs===0&&(fs=5)}function Cb(i,a){do{var u=NC(i.alternate,i);if(u!==null){u.flags&=32767,hr=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(i=i.sibling,i!==null)){hr=i;return}hr=i=u}while(i!==null);fs=6,hr=null}function jb(i,a,u,f,m,v,C,W,ue){i.cancelPendingCommit=null;do $f();while(Bs!==0);if((Pr&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(v=a.lanes|a.childLanes,v|=dg,pn(i,u,v,C,W,ue),i===Qr&&(hr=Qr=null,br=0),gc=a,Il=i,pc=u,mp=v,xp=m,vb=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,FC(dn,function(){return Mb(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=le.T,le.T=null,m=Ve.p,Ve.p=2,C=Pr,Pr|=4;try{TC(i,a,u)}finally{Pr=C,Ve.p=m,le.T=f}}Bs=1,Ab(),Ob(),Db()}}function Ab(){if(Bs===1){Bs=0;var i=Il,a=gc,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=le.T,le.T=null;var f=Ve.p;Ve.p=2;var m=Pr;Pr|=4;try{fb(a,i);var v=Rp,C=yy(i.containerInfo),W=v.focusedElem,ue=v.selectionRange;if(C!==W&&W&&W.ownerDocument&&xy(W.ownerDocument.documentElement,W)){if(ue!==null&&ag(W)){var Be=ue.start,mt=ue.end;if(mt===void 0&&(mt=Be),"selectionStart"in W)W.selectionStart=Be,W.selectionEnd=Math.min(mt,W.value.length);else{var Et=W.ownerDocument||document,Ye=Et&&Et.defaultView||window;if(Ye.getSelection){var qe=Ye.getSelection(),Wn=W.textContent.length,zn=Math.min(ue.start,Wn),Vr=ue.end===void 0?zn:Math.min(ue.end,Wn);!qe.extend&&zn>Vr&&(C=Vr,Vr=zn,zn=C);var De=my(W,zn),be=my(W,Vr);if(De&&be&&(qe.rangeCount!==1||qe.anchorNode!==De.node||qe.anchorOffset!==De.offset||qe.focusNode!==be.node||qe.focusOffset!==be.offset)){var Ie=Et.createRange();Ie.setStart(De.node,De.offset),qe.removeAllRanges(),zn>Vr?(qe.addRange(Ie),qe.extend(be.node,be.offset)):(Ie.setEnd(be.node,be.offset),qe.addRange(Ie))}}}}for(Et=[],qe=W;qe=qe.parentNode;)qe.nodeType===1&&Et.push({element:qe,left:qe.scrollLeft,top:qe.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<Et.length;W++){var _t=Et[W];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}th=!!Dp,Rp=Dp=null}finally{Pr=m,Ve.p=f,le.T=u}}i.current=a,Bs=2}}function Ob(){if(Bs===2){Bs=0;var i=Il,a=gc,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=le.T,le.T=null;var f=Ve.p;Ve.p=2;var m=Pr;Pr|=4;try{ob(i,a.alternate,a)}finally{Pr=m,Ve.p=f,le.T=u}}Bs=3}}function Db(){if(Bs===4||Bs===3){Bs=0,sn();var i=Il,a=gc,u=pc,f=vb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Bs=5:(Bs=0,gc=Il=null,Rb(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ll=null),In(u),a=a.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(Qn,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=le.T,m=Ve.p,Ve.p=2,le.T=null;try{for(var v=i.onRecoverableError,C=0;C<f.length;C++){var W=f[C];v(W.value,{componentStack:W.stack})}}finally{le.T=a,Ve.p=m}}(pc&3)!==0&&$f(),Na(i),m=i.pendingLanes,(u&4194090)!==0&&(m&42)!==0?i===yp?Ru++:(Ru=0,yp=i):Ru=0,Mu(0)}}function Rb(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,hu(a)))}function $f(i){return Ab(),Ob(),Db(),Mb()}function Mb(){if(Bs!==5)return!1;var i=Il,a=mp;mp=0;var u=In(pc),f=le.T,m=Ve.p;try{Ve.p=32>u?32:u,le.T=null,u=xp,xp=null;var v=Il,C=pc;if(Bs=0,gc=Il=null,pc=0,(Pr&6)!==0)throw Error(r(331));var W=Pr;if(Pr|=4,xb(v.current),gb(v,v.current,C,u),Pr=W,Mu(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(Qn,v)}catch{}return!0}finally{Ve.p=m,le.T=f,Rb(i,a)}}function Lb(i,a,u){a=Pi(u,a),a=Xg(i.stateNode,a,2),i=Nl(i,a,2),i!==null&&(Xt(i,2),Na(i))}function Xr(i,a,u){if(i.tag===3)Lb(i,i,u);else for(;a!==null;){if(a.tag===3){Lb(a,i,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ll===null||!Ll.has(f))){i=Pi(u,i),u=zv(2),f=Nl(a,u,2),f!==null&&(Bv(u,f,a,i),Xt(f,2),Na(f));break}}a=a.return}}function Sp(i,a,u){var f=i.pingCache;if(f===null){f=i.pingCache=new AC;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(u)||(fp=!0,m.add(u),i=LC.bind(null,i,a,u),a.then(i,i))}function LC(i,a,u){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Qr===i&&(br&u)===u&&(fs===4||fs===3&&(br&62914560)===br&&300>He()-pp?(Pr&2)===0&&mc(i,0):hp|=u,hc===br&&(hc=0)),Na(i)}function Ib(i,a){a===0&&(a=ct()),i=Zo(i,a),i!==null&&(Xt(i,a),Na(i))}function IC(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Ib(i,u)}function PC(i,a){var u=0;switch(i.tag){case 13:var f=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),Ib(i,u)}function FC(i,a){return Kt(i,a)}var Wf=null,yc=null,wp=!1,Vf=!1,kp=!1,ko=0;function Na(i){i!==yc&&i.next===null&&(yc===null?Wf=yc=i:yc=yc.next=i),Vf=!0,wp||(wp=!0,BC())}function Mu(i,a){if(!kp&&Vf){kp=!0;do for(var u=!1,f=Wf;f!==null;){if(i!==0){var m=f.pendingLanes;if(m===0)var v=0;else{var C=f.suspendedLanes,W=f.pingedLanes;v=(1<<31-Ge(42|i)+1)-1,v&=m&~(C&~W),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,Bb(f,v))}else v=br,v=dt(f,f===Qr?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||Zt(f,v)||(u=!0,Bb(f,v));f=f.next}while(u);kp=!1}}function zC(){Pb()}function Pb(){Vf=wp=!1;var i=0;ko!==0&&(qC()&&(i=ko),ko=0);for(var a=He(),u=null,f=Wf;f!==null;){var m=f.next,v=Fb(f,a);v===0?(f.next=null,u===null?Wf=m:u.next=m,m===null&&(yc=u)):(u=f,(i!==0||(v&3)!==0)&&(Vf=!0)),f=m}Mu(i)}function Fb(i,a){for(var u=i.suspendedLanes,f=i.pingedLanes,m=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var C=31-Ge(v),W=1<<C,ue=m[C];ue===-1?((W&u)===0||(W&f)!==0)&&(m[C]=Vt(W,a)):ue<=a&&(i.expiredLanes|=W),v&=~W}if(a=Qr,u=br,u=dt(i,i===a?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,u===0||i===a&&(Fr===2||Fr===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&tn(f),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Zt(i,u)){if(a=u&-u,a===i.callbackPriority)return a;switch(f!==null&&tn(f),In(u)){case 2:case 8:u=yt;break;case 32:u=dn;break;case 268435456:u=an;break;default:u=dn}return f=zb.bind(null,i),u=Kt(u,f),i.callbackPriority=a,i.callbackNode=u,a}return f!==null&&f!==null&&tn(f),i.callbackPriority=2,i.callbackNode=null,2}function zb(i,a){if(Bs!==0&&Bs!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if($f()&&i.callbackNode!==u)return null;var f=br;return f=dt(i,i===Qr?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(_b(i,f,a),Fb(i,He()),i.callbackNode!=null&&i.callbackNode===u?zb.bind(null,i):null)}function Bb(i,a){if($f())return null;_b(i,a,!0)}function BC(){XC(function(){(Pr&6)!==0?Kt(Ht,zC):Pb()})}function Ep(){return ko===0&&(ko=kt()),ko}function Hb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ot(""+i)}function Ub(i,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,i.id&&u.setAttribute("form",i.id),a.parentNode.insertBefore(u,a),i=new FormData(i),u.parentNode.removeChild(u),i}function HC(i,a,u,f,m){if(a==="submit"&&u&&u.stateNode===m){var v=Hb((m[zt]||null).action),C=f.submitter;C&&(a=(a=C[zt]||null)?Hb(a.formAction):C.getAttribute("formAction"),a!==null&&(v=a,C=null));var W=new qr("action","action",null,f,m);i.push({event:W,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ko!==0){var ue=C?Ub(m,C):new FormData(m);Vg(u,{pending:!0,data:ue,method:m.method,action:v},null,ue)}}else typeof v=="function"&&(W.preventDefault(),ue=C?Ub(m,C):new FormData(m),Vg(u,{pending:!0,data:ue,method:m.method,action:v},v,ue))},currentTarget:m}]})}}for(var Np=0;Np<ug.length;Np++){var Tp=ug[Np],UC=Tp.toLowerCase(),$C=Tp[0].toUpperCase()+Tp.slice(1);sa(UC,"on"+$C)}sa(_y,"onAnimationEnd"),sa(Sy,"onAnimationIteration"),sa(wy,"onAnimationStart"),sa("dblclick","onDoubleClick"),sa("focusin","onFocus"),sa("focusout","onBlur"),sa(aC,"onTransitionRun"),sa(lC,"onTransitionStart"),sa(oC,"onTransitionCancel"),sa(ky,"onTransitionEnd"),Nt("onMouseEnter",["mouseout","mouseover"]),Nt("onMouseLeave",["mouseout","mouseover"]),Nt("onPointerEnter",["pointerout","pointerover"]),Nt("onPointerLeave",["pointerout","pointerover"]),gt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gt("onBeforeInput",["compositionend","keypress","textInput","paste"]),gt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function $b(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],m=f.event;f=f.listeners;e:{var v=void 0;if(a)for(var C=f.length-1;0<=C;C--){var W=f[C],ue=W.instance,Be=W.currentTarget;if(W=W.listener,ue!==v&&m.isPropagationStopped())break e;v=W,m.currentTarget=Be;try{v(m)}catch(mt){Df(mt)}m.currentTarget=null,v=ue}else for(C=0;C<f.length;C++){if(W=f[C],ue=W.instance,Be=W.currentTarget,W=W.listener,ue!==v&&m.isPropagationStopped())break e;v=W,m.currentTarget=Be;try{v(m)}catch(mt){Df(mt)}m.currentTarget=null,v=ue}}}}function gr(i,a){var u=a[tt];u===void 0&&(u=a[tt]=new Set);var f=i+"__bubble";u.has(f)||(Wb(a,i,2,!1),u.add(f))}function Cp(i,a,u){var f=0;a&&(f|=4),Wb(u,i,f,a)}var Yf="_reactListening"+Math.random().toString(36).slice(2);function jp(i){if(!i[Yf]){i[Yf]=!0,Ee.forEach(function(u){u!=="selectionchange"&&(WC.has(u)||Cp(u,!1,i),Cp(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Yf]||(a[Yf]=!0,Cp("selectionchange",!1,a))}}function Wb(i,a,u,f){switch(g_(a)){case 2:var m=x4;break;case 8:m=y4;break;default:m=$p}u=m.bind(null,a,u,i),m=void 0,!vr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?i.addEventListener(a,u,{capture:!0,passive:m}):i.addEventListener(a,u,!0):m!==void 0?i.addEventListener(a,u,{passive:m}):i.addEventListener(a,u,!1)}function Ap(i,a,u,f,m){var v=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var W=f.stateNode.containerInfo;if(W===m)break;if(C===4)for(C=f.return;C!==null;){var ue=C.tag;if((ue===3||ue===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;W!==null;){if(C=Y(W),C===null)return;if(ue=C.tag,ue===5||ue===6||ue===26||ue===27){f=v=C;continue e}W=W.parentNode}}f=f.return}qt(function(){var Be=v,mt=Gt(u),Et=[];e:{var Ye=Ey.get(i);if(Ye!==void 0){var qe=qr,Wn=i;switch(i){case"keypress":if(is(u)===0)break e;case"keydown":case"keyup":qe=kr;break;case"focusin":Wn="focus",qe=Se;break;case"focusout":Wn="blur",qe=Se;break;case"beforeblur":case"afterblur":qe=Se;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=H;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=_a;break;case _y:case Sy:case wy:qe=Tt;break;case ky:qe=ii;break;case"scroll":case"scrollend":qe=bs;break;case"wheel":qe=R;break;case"copy":case"cut":case"paste":qe=gn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=ao;break;case"toggle":case"beforetoggle":qe=N}var zn=(a&4)!==0,Vr=!zn&&(i==="scroll"||i==="scrollend"),De=zn?Ye!==null?Ye+"Capture":null:Ye;zn=[];for(var be=Be,Ie;be!==null;){var _t=be;if(Ie=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||Ie===null||De===null||(_t=fr(be,De),_t!=null&&zn.push(Iu(be,_t,Ie))),Vr)break;be=be.return}0<zn.length&&(Ye=new qe(Ye,Wn,null,u,mt),Et.push({event:Ye,listeners:zn}))}}if((a&7)===0){e:{if(Ye=i==="mouseover"||i==="pointerover",qe=i==="mouseout"||i==="pointerout",Ye&&u!==xt&&(Wn=u.relatedTarget||u.fromElement)&&(Y(Wn)||Wn[Xe]))break e;if((qe||Ye)&&(Ye=mt.window===mt?mt:(Ye=mt.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,qe?(Wn=u.relatedTarget||u.toElement,qe=Be,Wn=Wn?Y(Wn):null,Wn!==null&&(Vr=l(Wn),zn=Wn.tag,Wn!==Vr||zn!==5&&zn!==27&&zn!==6)&&(Wn=null)):(qe=null,Wn=Be),qe!==Wn)){if(zn=qn,_t="onMouseLeave",De="onMouseEnter",be="mouse",(i==="pointerout"||i==="pointerover")&&(zn=ao,_t="onPointerLeave",De="onPointerEnter",be="pointer"),Vr=qe==null?Ye:we(qe),Ie=Wn==null?Ye:we(Wn),Ye=new zn(_t,be+"leave",qe,u,mt),Ye.target=Vr,Ye.relatedTarget=Ie,_t=null,Y(mt)===Be&&(zn=new zn(De,be+"enter",Wn,u,mt),zn.target=Ie,zn.relatedTarget=Vr,_t=zn),Vr=_t,qe&&Wn)t:{for(zn=qe,De=Wn,be=0,Ie=zn;Ie;Ie=vc(Ie))be++;for(Ie=0,_t=De;_t;_t=vc(_t))Ie++;for(;0<be-Ie;)zn=vc(zn),be--;for(;0<Ie-be;)De=vc(De),Ie--;for(;be--;){if(zn===De||De!==null&&zn===De.alternate)break t;zn=vc(zn),De=vc(De)}zn=null}else zn=null;qe!==null&&Vb(Et,Ye,qe,zn,!1),Wn!==null&&Vr!==null&&Vb(Et,Vr,Wn,zn,!0)}}e:{if(Ye=Be?we(Be):window,qe=Ye.nodeName&&Ye.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Ye.type==="file")var _n=Ua;else if(Si(Ye))if(dy)_n=rC;else{_n=tC;var dr=eC}else qe=Ye.nodeName,!qe||qe.toLowerCase()!=="input"||Ye.type!=="checkbox"&&Ye.type!=="radio"?Be&&ee(Be.elementType)&&(_n=Ua):_n=nC;if(_n&&(_n=_n(i,Be))){of(Et,_n,u,mt);break e}dr&&dr(i,Ye,Be),i==="focusout"&&Be&&Ye.type==="number"&&Be.memoizedProps.value!=null&&ke(Ye,"number",Ye.value)}switch(dr=Be?we(Be):window,i){case"focusin":(Si(dr)||dr.contentEditable==="true")&&(Jo=dr,lg=Be,ou=null);break;case"focusout":ou=lg=Jo=null;break;case"mousedown":og=!0;break;case"contextmenu":case"mouseup":case"dragend":og=!1,vy(Et,u,mt);break;case"selectionchange":if(iC)break;case"keydown":case"keyup":vy(Et,u,mt)}var On;if(ne)e:{switch(i){case"compositionstart":var Bn="onCompositionStart";break e;case"compositionend":Bn="onCompositionEnd";break e;case"compositionupdate":Bn="onCompositionUpdate";break e}Bn=void 0}else An?Ft(i,u)&&(Bn="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Bn="onCompositionStart");Bn&&(Te&&u.locale!=="ko"&&(An||Bn!=="onCompositionStart"?Bn==="onCompositionEnd"&&An&&(On=sr()):(rr=mt,mr="value"in rr?rr.value:rr.textContent,An=!0)),dr=Gf(Be,Bn),0<dr.length&&(Bn=new kn(Bn,i,null,u,mt),Et.push({event:Bn,listeners:dr}),On?Bn.data=On:(On=hn(u),On!==null&&(Bn.data=On)))),(On=ge?xr(i,u):Or(i,u))&&(Bn=Gf(Be,"onBeforeInput"),0<Bn.length&&(dr=new kn("onBeforeInput","beforeinput",null,u,mt),Et.push({event:dr,listeners:Bn}),dr.data=On)),HC(Et,i,Be,u,mt)}$b(Et,a)})}function Iu(i,a,u){return{instance:i,listener:a,currentTarget:u}}function Gf(i,a){for(var u=a+"Capture",f=[];i!==null;){var m=i,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=fr(i,u),m!=null&&f.unshift(Iu(i,m,v)),m=fr(i,a),m!=null&&f.push(Iu(i,m,v))),i.tag===3)return f;i=i.return}return[]}function vc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Vb(i,a,u,f,m){for(var v=a._reactName,C=[];u!==null&&u!==f;){var W=u,ue=W.alternate,Be=W.stateNode;if(W=W.tag,ue!==null&&ue===f)break;W!==5&&W!==26&&W!==27||Be===null||(ue=Be,m?(Be=fr(u,v),Be!=null&&C.unshift(Iu(u,Be,ue))):m||(Be=fr(u,v),Be!=null&&C.push(Iu(u,Be,ue)))),u=u.return}C.length!==0&&i.push({event:a,listeners:C})}var VC=/\r\n?/g,YC=/\u0000|\uFFFD/g;function Yb(i){return(typeof i=="string"?i:""+i).replace(VC,`
`).replace(YC,"")}function Gb(i,a){return a=Yb(a),Yb(i)===a}function qf(){}function Wr(i,a,u,f,m,v){switch(u){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||pt(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&pt(i,""+f);break;case"className":mn(i,"class",f);break;case"tabIndex":mn(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(i,u,f);break;case"style":q(i,f,v);break;case"data":if(a!=="object"){mn(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||u!=="href")){i.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=ot(""+f),i.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(a!=="input"&&Wr(i,a,"name",m.name,m,null),Wr(i,a,"formEncType",m.formEncType,m,null),Wr(i,a,"formMethod",m.formMethod,m,null),Wr(i,a,"formTarget",m.formTarget,m,null)):(Wr(i,a,"encType",m.encType,m,null),Wr(i,a,"method",m.method,m,null),Wr(i,a,"target",m.target,m,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=ot(""+f),i.setAttribute(u,f);break;case"onClick":f!=null&&(i.onclick=qf);break;case"onScroll":f!=null&&gr("scroll",i);break;case"onScrollEnd":f!=null&&gr("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}u=ot(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""+f):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":f===!0?i.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,f):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(u,f):i.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(u):i.setAttribute(u,f);break;case"popover":gr("beforetoggle",i),gr("toggle",i),Sn(i,"popover",f);break;case"xlinkActuate":Ot(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ot(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ot(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ot(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ot(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ot(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ot(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ot(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ot(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Sn(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=ve.get(u)||u,Sn(i,u,f))}}function Op(i,a,u,f,m,v){switch(u){case"style":q(i,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof f=="string"?pt(i,f):(typeof f=="number"||typeof f=="bigint")&&pt(i,""+f);break;case"onScroll":f!=null&&gr("scroll",i);break;case"onScrollEnd":f!=null&&gr("scrollend",i);break;case"onClick":f!=null&&(i.onclick=qf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Re.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),a=u.slice(2,m?u.length-7:void 0),v=i[zt]||null,v=v!=null?v[u]:null,typeof v=="function"&&i.removeEventListener(a,v,m),typeof f=="function")){typeof v!="function"&&v!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(a,f,m);break e}u in i?i[u]=f:f===!0?i.setAttribute(u,""):Sn(i,u,f)}}}function Hs(i,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gr("error",i),gr("load",i);var f=!1,m=!1,v;for(v in u)if(u.hasOwnProperty(v)){var C=u[v];if(C!=null)switch(v){case"src":f=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Wr(i,a,v,C,u,null)}}m&&Wr(i,a,"srcSet",u.srcSet,u,null),f&&Wr(i,a,"src",u.src,u,null);return;case"input":gr("invalid",i);var W=v=C=m=null,ue=null,Be=null;for(f in u)if(u.hasOwnProperty(f)){var mt=u[f];if(mt!=null)switch(f){case"name":m=mt;break;case"type":C=mt;break;case"checked":ue=mt;break;case"defaultChecked":Be=mt;break;case"value":v=mt;break;case"defaultValue":W=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,a));break;default:Wr(i,a,f,mt,u,null)}}rn(i,v,W,ue,Be,C,m,!1),ln(i);return;case"select":gr("invalid",i),f=C=v=null;for(m in u)if(u.hasOwnProperty(m)&&(W=u[m],W!=null))switch(m){case"value":v=W;break;case"defaultValue":C=W;break;case"multiple":f=W;default:Wr(i,a,m,W,u,null)}a=v,u=C,i.multiple=!!f,a!=null?Me(i,!!f,a,!1):u!=null&&Me(i,!!f,u,!0);return;case"textarea":gr("invalid",i),v=m=f=null;for(C in u)if(u.hasOwnProperty(C)&&(W=u[C],W!=null))switch(C){case"value":f=W;break;case"defaultValue":m=W;break;case"children":v=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(91));break;default:Wr(i,a,C,W,u,null)}Ct(i,f,m,v),ln(i);return;case"option":for(ue in u)if(u.hasOwnProperty(ue)&&(f=u[ue],f!=null))switch(ue){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Wr(i,a,ue,f,u,null)}return;case"dialog":gr("beforetoggle",i),gr("toggle",i),gr("cancel",i),gr("close",i);break;case"iframe":case"object":gr("load",i);break;case"video":case"audio":for(f=0;f<Lu.length;f++)gr(Lu[f],i);break;case"image":gr("error",i),gr("load",i);break;case"details":gr("toggle",i);break;case"embed":case"source":case"link":gr("error",i),gr("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in u)if(u.hasOwnProperty(Be)&&(f=u[Be],f!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Wr(i,a,Be,f,u,null)}return;default:if(ee(a)){for(mt in u)u.hasOwnProperty(mt)&&(f=u[mt],f!==void 0&&Op(i,a,mt,f,u,void 0));return}}for(W in u)u.hasOwnProperty(W)&&(f=u[W],f!=null&&Wr(i,a,W,f,u,null))}function GC(i,a,u,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,C=null,W=null,ue=null,Be=null,mt=null;for(qe in u){var Et=u[qe];if(u.hasOwnProperty(qe)&&Et!=null)switch(qe){case"checked":break;case"value":break;case"defaultValue":ue=Et;default:f.hasOwnProperty(qe)||Wr(i,a,qe,null,f,Et)}}for(var Ye in f){var qe=f[Ye];if(Et=u[Ye],f.hasOwnProperty(Ye)&&(qe!=null||Et!=null))switch(Ye){case"type":v=qe;break;case"name":m=qe;break;case"checked":Be=qe;break;case"defaultChecked":mt=qe;break;case"value":C=qe;break;case"defaultValue":W=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,a));break;default:qe!==Et&&Wr(i,a,Ye,qe,f,Et)}}$n(i,C,W,ue,Be,mt,v,m);return;case"select":qe=C=W=Ye=null;for(v in u)if(ue=u[v],u.hasOwnProperty(v)&&ue!=null)switch(v){case"value":break;case"multiple":qe=ue;default:f.hasOwnProperty(v)||Wr(i,a,v,null,f,ue)}for(m in f)if(v=f[m],ue=u[m],f.hasOwnProperty(m)&&(v!=null||ue!=null))switch(m){case"value":Ye=v;break;case"defaultValue":W=v;break;case"multiple":C=v;default:v!==ue&&Wr(i,a,m,v,f,ue)}a=W,u=C,f=qe,Ye!=null?Me(i,!!u,Ye,!1):!!f!=!!u&&(a!=null?Me(i,!!u,a,!0):Me(i,!!u,u?[]:"",!1));return;case"textarea":qe=Ye=null;for(W in u)if(m=u[W],u.hasOwnProperty(W)&&m!=null&&!f.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:Wr(i,a,W,null,f,m)}for(C in f)if(m=f[C],v=u[C],f.hasOwnProperty(C)&&(m!=null||v!=null))switch(C){case"value":Ye=m;break;case"defaultValue":qe=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==v&&Wr(i,a,C,m,f,v)}Le(i,Ye,qe);return;case"option":for(var Wn in u)if(Ye=u[Wn],u.hasOwnProperty(Wn)&&Ye!=null&&!f.hasOwnProperty(Wn))switch(Wn){case"selected":i.selected=!1;break;default:Wr(i,a,Wn,null,f,Ye)}for(ue in f)if(Ye=f[ue],qe=u[ue],f.hasOwnProperty(ue)&&Ye!==qe&&(Ye!=null||qe!=null))switch(ue){case"selected":i.selected=Ye&&typeof Ye!="function"&&typeof Ye!="symbol";break;default:Wr(i,a,ue,Ye,f,qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zn in u)Ye=u[zn],u.hasOwnProperty(zn)&&Ye!=null&&!f.hasOwnProperty(zn)&&Wr(i,a,zn,null,f,Ye);for(Be in f)if(Ye=f[Be],qe=u[Be],f.hasOwnProperty(Be)&&Ye!==qe&&(Ye!=null||qe!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,a));break;default:Wr(i,a,Be,Ye,f,qe)}return;default:if(ee(a)){for(var Vr in u)Ye=u[Vr],u.hasOwnProperty(Vr)&&Ye!==void 0&&!f.hasOwnProperty(Vr)&&Op(i,a,Vr,void 0,f,Ye);for(mt in f)Ye=f[mt],qe=u[mt],!f.hasOwnProperty(mt)||Ye===qe||Ye===void 0&&qe===void 0||Op(i,a,mt,Ye,f,qe);return}}for(var De in u)Ye=u[De],u.hasOwnProperty(De)&&Ye!=null&&!f.hasOwnProperty(De)&&Wr(i,a,De,null,f,Ye);for(Et in f)Ye=f[Et],qe=u[Et],!f.hasOwnProperty(Et)||Ye===qe||Ye==null&&qe==null||Wr(i,a,Et,Ye,f,qe)}var Dp=null,Rp=null;function Jf(i){return i.nodeType===9?i:i.ownerDocument}function qb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jb(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Mp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Lp=null;function qC(){var i=window.event;return i&&i.type==="popstate"?i===Lp?!1:(Lp=i,!0):(Lp=null,!1)}var Xb=typeof setTimeout=="function"?setTimeout:void 0,JC=typeof clearTimeout=="function"?clearTimeout:void 0,Kb=typeof Promise=="function"?Promise:void 0,XC=typeof queueMicrotask=="function"?queueMicrotask:typeof Kb<"u"?function(i){return Kb.resolve(null).then(i).catch(KC)}:Xb;function KC(i){setTimeout(function(){throw i})}function Fl(i){return i==="head"}function Zb(i,a){var u=a,f=0,m=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(0<f&&8>f){u=f;var C=i.ownerDocument;if(u&1&&Pu(C.documentElement),u&2&&Pu(C.body),u&4)for(u=C.head,Pu(u),C=u.firstChild;C;){var W=C.nextSibling,ue=C.nodeName;C[U]||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=W}}if(m===0){i.removeChild(v),Vu(a);return}m--}else u==="$"||u==="$?"||u==="$!"?m++:f=u.charCodeAt(0)-48;else f=0;u=v}while(u);Vu(a)}function Ip(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Ip(u),J(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function ZC(i,a,u,f){for(;i.nodeType===1;){var m=u;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[U])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=aa(i.nextSibling),i===null)break}return null}function QC(i,a,u){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=aa(i.nextSibling),i===null))return null;return i}function Pp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function e4(i,a){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")a();else{var f=function(){a(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function aa(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var Fp=null;function Qb(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}function e_(i,a,u){switch(a=Jf(u),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Pu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);J(i)}var $i=new Map,t_=new Set;function Xf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var tl=Ve.d;Ve.d={f:t4,r:n4,D:r4,C:s4,L:i4,m:a4,X:o4,S:l4,M:c4};function t4(){var i=tl.f(),a=Hf();return i||a}function n4(i){var a=X(i);a!==null&&a.tag===5&&a.type==="form"?_v(a):tl.r(i)}var bc=typeof document>"u"?null:document;function n_(i,a,u){var f=bc;if(f&&typeof a=="string"&&a){var m=Pt(a);m='link[rel="'+i+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),t_.has(m)||(t_.add(m),i={rel:i,crossOrigin:u,href:a},f.querySelector(m)===null&&(a=f.createElement("link"),Hs(a,"link",i),_e(a),f.head.appendChild(a)))}}function r4(i){tl.D(i),n_("dns-prefetch",i,null)}function s4(i,a){tl.C(i,a),n_("preconnect",i,a)}function i4(i,a,u){tl.L(i,a,u);var f=bc;if(f&&i&&a){var m='link[rel="preload"][as="'+Pt(a)+'"]';a==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+Pt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+Pt(u.imageSizes)+'"]')):m+='[href="'+Pt(i)+'"]';var v=m;switch(a){case"style":v=_c(i);break;case"script":v=Sc(i)}$i.has(v)||(i=p({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:i,as:a},u),$i.set(v,i),f.querySelector(m)!==null||a==="style"&&f.querySelector(Fu(v))||a==="script"&&f.querySelector(zu(v))||(a=f.createElement("link"),Hs(a,"link",i),_e(a),f.head.appendChild(a)))}}function a4(i,a){tl.m(i,a);var u=bc;if(u&&i){var f=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Pt(f)+'"][href="'+Pt(i)+'"]',v=m;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Sc(i)}if(!$i.has(v)&&(i=p({rel:"modulepreload",href:i},a),$i.set(v,i),u.querySelector(m)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(zu(v)))return}f=u.createElement("link"),Hs(f,"link",i),_e(f),u.head.appendChild(f)}}}function l4(i,a,u){tl.S(i,a,u);var f=bc;if(f&&i){var m=je(f).hoistableStyles,v=_c(i);a=a||"default";var C=m.get(v);if(!C){var W={loading:0,preload:null};if(C=f.querySelector(Fu(v)))W.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":a},u),(u=$i.get(v))&&zp(i,u);var ue=C=f.createElement("link");_e(ue),Hs(ue,"link",i),ue._p=new Promise(function(Be,mt){ue.onload=Be,ue.onerror=mt}),ue.addEventListener("load",function(){W.loading|=1}),ue.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Kf(C,a,f)}C={type:"stylesheet",instance:C,count:1,state:W},m.set(v,C)}}}function o4(i,a){tl.X(i,a);var u=bc;if(u&&i){var f=je(u).hoistableScripts,m=Sc(i),v=f.get(m);v||(v=u.querySelector(zu(m)),v||(i=p({src:i,async:!0},a),(a=$i.get(m))&&Bp(i,a),v=u.createElement("script"),_e(v),Hs(v,"link",i),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(m,v))}}function c4(i,a){tl.M(i,a);var u=bc;if(u&&i){var f=je(u).hoistableScripts,m=Sc(i),v=f.get(m);v||(v=u.querySelector(zu(m)),v||(i=p({src:i,async:!0,type:"module"},a),(a=$i.get(m))&&Bp(i,a),v=u.createElement("script"),_e(v),Hs(v,"link",i),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(m,v))}}function r_(i,a,u,f){var m=(m=fe.current)?Xf(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=_c(u.href),u=je(m).hoistableStyles,f=u.get(a),f||(f={type:"style",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=_c(u.href);var v=je(m).hoistableStyles,C=v.get(i);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,C),(v=m.querySelector(Fu(i)))&&!v._p&&(C.instance=v,C.state.loading=5),$i.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},$i.set(i,u),v||u4(m,i,u,C.state))),a&&f===null)throw Error(r(528,""));return C}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Sc(u),u=je(m).hoistableScripts,f=u.get(a),f||(f={type:"script",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function _c(i){return'href="'+Pt(i)+'"'}function Fu(i){return'link[rel="stylesheet"]['+i+"]"}function s_(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function u4(i,a,u,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),Hs(a,"link",u),_e(a),i.head.appendChild(a))}function Sc(i){return'[src="'+Pt(i)+'"]'}function zu(i){return"script[async]"+i}function i_(i,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+Pt(u.href)+'"]');if(f)return a.instance=f,_e(f),f;var m=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),_e(f),Hs(f,"style",m),Kf(f,u.precedence,i),a.instance=f;case"stylesheet":m=_c(u.href);var v=i.querySelector(Fu(m));if(v)return a.state.loading|=4,a.instance=v,_e(v),v;f=s_(u),(m=$i.get(m))&&zp(f,m),v=(i.ownerDocument||i).createElement("link"),_e(v);var C=v;return C._p=new Promise(function(W,ue){C.onload=W,C.onerror=ue}),Hs(v,"link",f),a.state.loading|=4,Kf(v,u.precedence,i),a.instance=v;case"script":return v=Sc(u.src),(m=i.querySelector(zu(v)))?(a.instance=m,_e(m),m):(f=u,(m=$i.get(v))&&(f=p({},u),Bp(f,m)),i=i.ownerDocument||i,m=i.createElement("script"),_e(m),Hs(m,"link",f),i.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,Kf(f,u.precedence,i));return a.instance}function Kf(i,a,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=f.length?f[f.length-1]:null,v=m,C=0;C<f.length;C++){var W=f[C];if(W.dataset.precedence===a)v=W;else if(v!==m)break}v?v.parentNode.insertBefore(i,v.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(i,a.firstChild))}function zp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Bp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Zf=null;function a_(i,a,u){if(Zf===null){var f=new Map,m=Zf=new Map;m.set(u,f)}else m=Zf,f=m.get(u),f||(f=new Map,m.set(u,f));if(f.has(i))return f;for(f.set(i,null),u=u.getElementsByTagName(i),m=0;m<u.length;m++){var v=u[m];if(!(v[U]||v[$e]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var C=v.getAttribute(a)||"";C=i+C;var W=f.get(C);W?W.push(v):f.set(C,[v])}}return f}function l_(i,a,u){i=i.ownerDocument||i,i.head.insertBefore(u,a==="title"?i.querySelector("head > title"):null)}function d4(i,a,u){if(u===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function o_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Bu=null;function f4(){}function h4(i,a,u){if(Bu===null)throw Error(r(475));var f=Bu;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=_c(u.href),v=i.querySelector(Fu(m));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=Qf.bind(f),i.then(f,f)),a.state.loading|=4,a.instance=v,_e(v);return}v=i.ownerDocument||i,u=s_(u),(m=$i.get(m))&&zp(u,m),v=v.createElement("link"),_e(v);var C=v;C._p=new Promise(function(W,ue){C.onload=W,C.onerror=ue}),Hs(v,"link",u),a.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(f.count++,a=Qf.bind(f),i.addEventListener("load",a),i.addEventListener("error",a))}}function g4(){if(Bu===null)throw Error(r(475));var i=Bu;return i.stylesheets&&i.count===0&&Hp(i,i.stylesheets),0<i.count?function(a){var u=setTimeout(function(){if(i.stylesheets&&Hp(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u)}}:null}function Qf(){if(this.count--,this.count===0){if(this.stylesheets)Hp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var eh=null;function Hp(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,eh=new Map,a.forEach(p4,i),eh=null,Qf.call(i))}function p4(i,a){if(!(a.state.loading&4)){var u=eh.get(i);if(u)var f=u.get(null);else{u=new Map,eh.set(i,u);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var C=m[v];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),f=C)}f&&u.set(null,f)}m=a.instance,C=m.getAttribute("data-precedence"),v=u.get(C)||f,v===f&&u.set(null,m),u.set(C,m),this.count++,f=Qf.bind(this),m.addEventListener("load",f),m.addEventListener("error",f),v?v.parentNode.insertBefore(m,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),a.state.loading|=4}}var Hu={$$typeof:D,Provider:null,Consumer:null,_currentValue:Ue,_currentValue2:Ue,_threadCount:0};function m4(i,a,u,f,m,v,C,W){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ft(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.hiddenUpdates=ft(null),this.identifierPrefix=f,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function c_(i,a,u,f,m,v,C,W,ue,Be,mt,Et){return i=new m4(i,a,u,C,W,ue,Be,Et),a=1,v===!0&&(a|=24),v=ki(3,null,null,a),i.current=v,v.stateNode=i,a=Sg(),a.refCount++,i.pooledCache=a,a.refCount++,v.memoizedState={element:f,isDehydrated:u,cache:a},Ng(v),i}function u_(i){return i?(i=Qo,i):Qo}function d_(i,a,u,f,m,v){m=u_(m),f.context===null?f.context=m:f.pendingContext=m,f=El(a),f.payload={element:u},v=v===void 0?null:v,v!==null&&(f.callback=v),u=Nl(i,f,a),u!==null&&(ji(u,i,a),xu(u,i,a))}function f_(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Up(i,a){f_(i,a),(i=i.alternate)&&f_(i,a)}function h_(i){if(i.tag===13){var a=Zo(i,67108864);a!==null&&ji(a,i,67108864),Up(i,67108864)}}var th=!0;function x4(i,a,u,f){var m=le.T;le.T=null;var v=Ve.p;try{Ve.p=2,$p(i,a,u,f)}finally{Ve.p=v,le.T=m}}function y4(i,a,u,f){var m=le.T;le.T=null;var v=Ve.p;try{Ve.p=8,$p(i,a,u,f)}finally{Ve.p=v,le.T=m}}function $p(i,a,u,f){if(th){var m=Wp(f);if(m===null)Ap(i,a,f,nh,u),p_(i,f);else if(b4(m,i,a,u,f))f.stopPropagation();else if(p_(i,f),a&4&&-1<v4.indexOf(i)){for(;m!==null;){var v=X(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var C=bt(v.pendingLanes);if(C!==0){var W=v;for(W.pendingLanes|=2,W.entangledLanes|=2;C;){var ue=1<<31-Ge(C);W.entanglements[1]|=ue,C&=~ue}Na(v),(Pr&6)===0&&(zf=He()+500,Mu(0))}}break;case 13:W=Zo(v,2),W!==null&&ji(W,v,2),Hf(),Up(v,2)}if(v=Wp(f),v===null&&Ap(i,a,f,nh,u),v===m)break;m=v}m!==null&&f.stopPropagation()}else Ap(i,a,f,null,u)}}function Wp(i){return i=Gt(i),Vp(i)}var nh=null;function Vp(i){if(nh=null,i=Y(i),i!==null){var a=l(i);if(a===null)i=null;else{var u=a.tag;if(u===13){if(i=c(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return nh=i,null}function g_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case Ht:return 2;case yt:return 8;case dn:case Wt:return 32;case an:return 268435456;default:return 32}default:return 32}}var Yp=!1,zl=null,Bl=null,Hl=null,Uu=new Map,$u=new Map,Ul=[],v4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p_(i,a){switch(i){case"focusin":case"focusout":zl=null;break;case"dragenter":case"dragleave":Bl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":Uu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(a.pointerId)}}function Wu(i,a,u,f,m,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[m]},a!==null&&(a=X(a),a!==null&&h_(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function b4(i,a,u,f,m){switch(a){case"focusin":return zl=Wu(zl,i,a,u,f,m),!0;case"dragenter":return Bl=Wu(Bl,i,a,u,f,m),!0;case"mouseover":return Hl=Wu(Hl,i,a,u,f,m),!0;case"pointerover":var v=m.pointerId;return Uu.set(v,Wu(Uu.get(v)||null,i,a,u,f,m)),!0;case"gotpointercapture":return v=m.pointerId,$u.set(v,Wu($u.get(v)||null,i,a,u,f,m)),!0}return!1}function m_(i){var a=Y(i.target);if(a!==null){var u=l(a);if(u!==null){if(a=u.tag,a===13){if(a=c(u),a!==null){i.blockedOn=a,re(i.priority,function(){if(u.tag===13){var f=Ci();f=Gn(f);var m=Zo(u,f);m!==null&&ji(m,u,f),Up(u,f)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function rh(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Wp(i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);xt=f,u.target.dispatchEvent(f),xt=null}else return a=X(u),a!==null&&h_(a),i.blockedOn=u,!1;a.shift()}return!0}function x_(i,a,u){rh(i)&&u.delete(a)}function _4(){Yp=!1,zl!==null&&rh(zl)&&(zl=null),Bl!==null&&rh(Bl)&&(Bl=null),Hl!==null&&rh(Hl)&&(Hl=null),Uu.forEach(x_),$u.forEach(x_)}function sh(i,a){i.blockedOn===a&&(i.blockedOn=null,Yp||(Yp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_4)))}var ih=null;function y_(i){ih!==i&&(ih=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ih===i&&(ih=null);for(var a=0;a<i.length;a+=3){var u=i[a],f=i[a+1],m=i[a+2];if(typeof f!="function"){if(Vp(f||u)===null)continue;break}var v=X(u);v!==null&&(i.splice(a,3),a-=3,Vg(v,{pending:!0,data:m,method:u.method,action:f},f,m))}}))}function Vu(i){function a(ue){return sh(ue,i)}zl!==null&&sh(zl,i),Bl!==null&&sh(Bl,i),Hl!==null&&sh(Hl,i),Uu.forEach(a),$u.forEach(a);for(var u=0;u<Ul.length;u++){var f=Ul[u];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Ul.length&&(u=Ul[0],u.blockedOn===null);)m_(u),u.blockedOn===null&&Ul.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var m=u[f],v=u[f+1],C=m[zt]||null;if(typeof v=="function")C||y_(u);else if(C){var W=null;if(v&&v.hasAttribute("formAction")){if(m=v,C=v[zt]||null)W=C.formAction;else if(Vp(m)!==null)continue}else W=C.action;typeof W=="function"?u[f+1]=W:(u.splice(f,3),f-=3),y_(u)}}}function Gp(i){this._internalRoot=i}ah.prototype.render=Gp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,f=Ci();d_(u,f,i,a,null,null)},ah.prototype.unmount=Gp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;d_(i.current,2,null,i,null,null),Hf(),a[Xe]=null}};function ah(i){this._internalRoot=i}ah.prototype.unstable_scheduleHydration=function(i){if(i){var a=bn();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Ul.length&&a!==0&&a<Ul[u].priority;u++);Ul.splice(u,0,i),u===0&&m_(i)}};var v_=e.version;if(v_!=="19.1.0")throw Error(r(527,v_,"19.1.0"));Ve.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var S4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{Qn=lh.inject(S4),me=lh}catch{}}return Gu.createRoot=function(i,a){if(!s(i))throw Error(r(299));var u=!1,f="",m=Lv,v=Iv,C=Pv,W=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(W=a.unstable_transitionCallbacks)),a=c_(i,1,!1,null,null,u,f,m,v,C,W,null),i[Xe]=a.current,jp(i),new Gp(a)},Gu.hydrateRoot=function(i,a,u){if(!s(i))throw Error(r(299));var f=!1,m="",v=Lv,C=Iv,W=Pv,ue=null,Be=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(W=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ue=u.unstable_transitionCallbacks),u.formState!==void 0&&(Be=u.formState)),a=c_(i,1,!0,a,u??null,f,m,v,C,W,ue,Be),a.context=u_(null),u=a.current,f=Ci(),f=Gn(f),m=El(f),m.callback=null,Nl(u,m,f),u=f,a.current.lanes=u,Xt(a,u),Na(a),i[Xe]=a.current,jp(i),new ah(a)},Gu.version="19.1.0",Gu}var A_;function M4(){if(A_)return Xp.exports;A_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xp.exports=R4(),Xp.exports}var L4=M4();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var O_="popstate";function I4(t={}){function e(r,s){let{pathname:l,search:c,hash:d}=r.location;return rx("",{pathname:l,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:kd(s)}return F4(e,n,null,t)}function us(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ia(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function P4(){return Math.random().toString(36).substring(2,10)}function D_(t,e){return{usr:t.state,key:t.key,idx:e}}function rx(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?qc(e):e,state:n,key:e&&e.key||r||P4()}}function kd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function qc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function F4(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,d="POP",h=null,g=p();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function p(){return(c.state||{idx:null}).idx}function y(){d="POP";let E=p(),O=E==null?null:E-g;g=E,h&&h({action:d,location:S.location,delta:O})}function _(E,O){d="PUSH";let T=rx(S.location,E,O);g=p()+1;let D=D_(T,g),F=S.createHref(T);try{c.pushState(D,"",F)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;s.location.assign(F)}l&&h&&h({action:d,location:S.location,delta:1})}function b(E,O){d="REPLACE";let T=rx(S.location,E,O);g=p();let D=D_(T,g),F=S.createHref(T);c.replaceState(D,"",F),l&&h&&h({action:d,location:S.location,delta:0})}function k(E){return z4(E)}let S={get action(){return d},get location(){return t(s,c)},listen(E){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(O_,y),h=E,()=>{s.removeEventListener(O_,y),h=null}},createHref(E){return e(s,E)},createURL:k,encodeLocation(E){let O=k(E);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:b,go(E){return c.go(E)}};return S}function z4(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),us(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:kd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Hw(t,e,n="/"){return B4(t,e,n,!1)}function B4(t,e,n,r){let s=typeof e=="string"?qc(e):e,l=pl(s.pathname||"/",n);if(l==null)return null;let c=Uw(t);H4(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let g=Z4(l);d=X4(c[h],g,r)}return d}function Uw(t,e=[],n=[],r=""){let s=(l,c,d)=>{let h={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(us(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let g=cl([r,h.relativePath]),p=n.concat(h);l.children&&l.children.length>0&&(us(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Uw(l.children,e,p,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:q4(g,l.index),routesMeta:p})};return t.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))s(l,c);else for(let h of $w(l.path))s(l,c,h)}),e}function $w(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=$w(r.join("/")),d=[];return d.push(...c.map(h=>h===""?l:[l,h].join("/"))),s&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function H4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:J4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var U4=/^:[\w-]+$/,$4=3,W4=2,V4=1,Y4=10,G4=-2,R_=t=>t==="*";function q4(t,e){let n=t.split("/"),r=n.length;return n.some(R_)&&(r+=G4),e&&(r+=W4),n.filter(s=>!R_(s)).reduce((s,l)=>s+(U4.test(l)?$4:l===""?V4:Y4),r)}function J4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function X4(t,e,n=!1){let{routesMeta:r}=t,s={},l="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],g=d===r.length-1,p=l==="/"?e:e.slice(l.length)||"/",y=Yh({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},p),_=h.route;if(!y&&g&&n&&!r[r.length-1].route.index&&(y=Yh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:cl([l,y.pathname]),pathnameBase:nj(cl([l,y.pathnameBase])),route:_}),y.pathnameBase!=="/"&&(l=cl([l,y.pathnameBase]))}return c}function Yh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=K4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((g,{paramName:p,isOptional:y},_)=>{if(p==="*"){let k=d[_]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const b=d[_];return y&&!b?g[p]=void 0:g[p]=(b||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:t}}function K4(t,e=!1,n=!0){Ia(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Z4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ia(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function pl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Q4(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?qc(t):t;return{pathname:n?n.startsWith("/")?n:ej(n,e):e,search:rj(r),hash:sj(s)}}function ej(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function em(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ww(t){let e=tj(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Vw(t,e,n,r=!1){let s;typeof t=="string"?s=qc(t):(s={...t},us(!s.pathname||!s.pathname.includes("?"),em("?","pathname","search",s)),us(!s.pathname||!s.pathname.includes("#"),em("#","pathname","hash",s)),us(!s.search||!s.search.includes("#"),em("#","search","hash",s)));let l=t===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),y-=1;s.pathname=_.join("/")}d=y>=0?e[y]:"/"}let h=Q4(s,d),g=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(g||p)&&(h.pathname+="/"),h}var cl=t=>t.join("/").replace(/\/\/+/g,"/"),nj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ij(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Yw=["POST","PUT","PATCH","DELETE"];new Set(Yw);var aj=["GET",...Yw];new Set(aj);var Jc=x.createContext(null);Jc.displayName="DataRouter";var y0=x.createContext(null);y0.displayName="DataRouterState";x.createContext(!1);var Gw=x.createContext({isTransitioning:!1});Gw.displayName="ViewTransition";var lj=x.createContext(new Map);lj.displayName="Fetchers";var oj=x.createContext(null);oj.displayName="Await";var za=x.createContext(null);za.displayName="Navigation";var Wd=x.createContext(null);Wd.displayName="Location";var vl=x.createContext({outlet:null,matches:[],isDataRoute:!1});vl.displayName="Route";var Fx=x.createContext(null);Fx.displayName="RouteError";function cj(t,{relative:e}={}){us(Vd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(za),{hash:s,pathname:l,search:c}=Yd(t,{relative:e}),d=l;return n!=="/"&&(d=l==="/"?n:cl([n,l])),r.createHref({pathname:d,search:c,hash:s})}function Vd(){return x.useContext(Wd)!=null}function Ki(){return us(Vd(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Wd).location}var qw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Jw(t){x.useContext(za).static||x.useLayoutEffect(t)}function Xc(){let{isDataRoute:t}=x.useContext(vl);return t?Sj():uj()}function uj(){us(Vd(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(Jc),{basename:e,navigator:n}=x.useContext(za),{matches:r}=x.useContext(vl),{pathname:s}=Ki(),l=JSON.stringify(Ww(r)),c=x.useRef(!1);return Jw(()=>{c.current=!0}),x.useCallback((h,g={})=>{if(Ia(c.current,qw),!c.current)return;if(typeof h=="number"){n.go(h);return}let p=Vw(h,JSON.parse(l),s,g.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:cl([e,p.pathname])),(g.replace?n.replace:n.push)(p,g.state,g)},[e,n,l,s,t])}x.createContext(null);function Yd(t,{relative:e}={}){let{matches:n}=x.useContext(vl),{pathname:r}=Ki(),s=JSON.stringify(Ww(n));return x.useMemo(()=>Vw(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function dj(t,e){return Xw(t,e)}function Xw(t,e,n,r){var O;us(Vd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(za),{matches:l}=x.useContext(vl),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",g=c?c.pathnameBase:"/",p=c&&c.route;{let T=p&&p.path||"";Kw(h,!p||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let y=Ki(),_;if(e){let T=typeof e=="string"?qc(e):e;us(g==="/"||((O=T.pathname)==null?void 0:O.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),_=T}else _=y;let b=_.pathname||"/",k=b;if(g!=="/"){let T=g.replace(/^\//,"").split("/");k="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=Hw(t,{pathname:k});Ia(p||S!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Ia(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=mj(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:cl([g,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:cl([g,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),l,n,r);return e&&E?x.createElement(Wd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},E):E}function fj(){let t=_j(),e=ij(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:l},"ErrorBoundary")," or"," ",x.createElement("code",{style:l},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,c)}var hj=x.createElement(fj,null),gj=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?x.createElement(vl.Provider,{value:this.props.routeContext},x.createElement(Fx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pj({routeContext:t,match:e,children:n}){let r=x.useContext(Jc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(vl.Provider,{value:t},n)}function mj(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=n==null?void 0:n.errors;if(l!=null){let h=s.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);us(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let c=!1,d=-1;if(n)for(let h=0;h<s.length;h++){let g=s[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=h),g.route.id){let{loaderData:p,errors:y}=n,_=g.route.loader&&!p.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||_){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,g,p)=>{let y,_=!1,b=null,k=null;n&&(y=l&&g.route.id?l[g.route.id]:void 0,b=g.route.errorElement||hj,c&&(d<0&&p===0?(Kw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,k=null):d===p&&(_=!0,k=g.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,p+1)),E=()=>{let O;return y?O=b:_?O=k:g.route.Component?O=x.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=h,x.createElement(pj,{match:g,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:O})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?x.createElement(gj,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}function zx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xj(t){let e=x.useContext(Jc);return us(e,zx(t)),e}function yj(t){let e=x.useContext(y0);return us(e,zx(t)),e}function vj(t){let e=x.useContext(vl);return us(e,zx(t)),e}function Bx(t){let e=vj(t),n=e.matches[e.matches.length-1];return us(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function bj(){return Bx("useRouteId")}function _j(){var r;let t=x.useContext(Fx),e=yj("useRouteError"),n=Bx("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Sj(){let{router:t}=xj("useNavigate"),e=Bx("useNavigate"),n=x.useRef(!1);return Jw(()=>{n.current=!0}),x.useCallback(async(s,l={})=>{Ia(n.current,qw),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...l}))},[t,e])}var M_={};function Kw(t,e,n){!e&&!M_[t]&&(M_[t]=!0,Ia(!1,n))}x.memo(wj);function wj({routes:t,future:e,state:n}){return Xw(t,void 0,n,e)}function ca(t){us(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kj({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:l=!1}){us(!Vd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:s,static:l,future:{}}),[c,s,l]);typeof n=="string"&&(n=qc(n));let{pathname:h="/",search:g="",hash:p="",state:y=null,key:_="default"}=n,b=x.useMemo(()=>{let k=pl(h,c);return k==null?null:{location:{pathname:k,search:g,hash:p,state:y,key:_},navigationType:r}},[c,h,g,p,y,_,r]);return Ia(b!=null,`<Router basename="${c}"> is not able to match the URL "${h}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:x.createElement(za.Provider,{value:d},x.createElement(Wd.Provider,{children:e,value:b}))}function Ej({children:t,location:e}){return dj(sx(t),e)}function sx(t,e=[]){let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let l=[...e,s];if(r.type===x.Fragment){n.push.apply(n,sx(r.props.children,l));return}us(r.type===ca,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),us(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=sx(r.props.children,l)),n.push(c)}),n}var Ih="get",Ph="application/x-www-form-urlencoded";function v0(t){return t!=null&&typeof t.tagName=="string"}function Nj(t){return v0(t)&&t.tagName.toLowerCase()==="button"}function Tj(t){return v0(t)&&t.tagName.toLowerCase()==="form"}function Cj(t){return v0(t)&&t.tagName.toLowerCase()==="input"}function jj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Aj(t,e){return t.button===0&&(!e||e==="_self")&&!jj(t)}var oh=null;function Oj(){if(oh===null)try{new FormData(document.createElement("form"),0),oh=!1}catch{oh=!0}return oh}var Dj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tm(t){return t!=null&&!Dj.has(t)?(Ia(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ph}"`),null):t}function Rj(t,e){let n,r,s,l,c;if(Tj(t)){let d=t.getAttribute("action");r=d?pl(d,e):null,n=t.getAttribute("method")||Ih,s=tm(t.getAttribute("enctype"))||Ph,l=new FormData(t)}else if(Nj(t)||Cj(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(r=h?pl(h,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Ih,s=tm(t.getAttribute("formenctype"))||tm(d.getAttribute("enctype"))||Ph,l=new FormData(d,t),!Oj()){let{name:g,type:p,value:y}=t;if(p==="image"){let _=g?`${g}.`:"";l.append(`${_}x`,"0"),l.append(`${_}y`,"0")}else g&&l.append(g,y)}}else{if(v0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ih,r=null,s=Ph,c=t}return l&&s==="text/plain"&&(c=l,l=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mj(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&pl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Lj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ij(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Pj(t,e,n){let r=await Promise.all(t.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await Lj(l,n);return c.links?c.links():[]}return[]}));return Hj(r.flat(1).filter(Ij).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function L_(t,e,n,r,s,l){let c=(h,g)=>n[g]?h.route.id!==n[g].route.id:!0,d=(h,g)=>{var p;return n[g].pathname!==h.pathname||((p=n[g].route.path)==null?void 0:p.endsWith("*"))&&n[g].params["*"]!==h.params["*"]};return l==="assets"?e.filter((h,g)=>c(h,g)||d(h,g)):l==="data"?e.filter((h,g)=>{var y;let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,g)||d(h,g))return!0;if(h.route.shouldRevalidate){let _=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Fj(t,e,{includeHydrateFallback:n}={}){return zj(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function zj(t){return[...new Set(t)]}function Bj(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Hj(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let l=JSON.stringify(Bj(s));return n.has(l)||(n.add(l),r.push({key:l,link:s})),r},[])}function Zw(){let t=x.useContext(Jc);return Hx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Uj(){let t=x.useContext(y0);return Hx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ux=x.createContext(void 0);Ux.displayName="FrameworkContext";function Qw(){let t=x.useContext(Ux);return Hx(t,"You must render this element inside a <HydratedRouter> element"),t}function $j(t,e){let n=x.useContext(Ux),[r,s]=x.useState(!1),[l,c]=x.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:g,onMouseLeave:p,onTouchStart:y}=e,_=x.useRef(null);x.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let S=O=>{O.forEach(T=>{c(T.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return _.current&&E.observe(_.current),()=>{E.disconnect()}}},[t]),x.useEffect(()=>{if(r){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[r]);let b=()=>{s(!0)},k=()=>{s(!1),c(!1)};return n?t!=="intent"?[l,_,{}]:[l,_,{onFocus:qu(d,b),onBlur:qu(h,k),onMouseEnter:qu(g,b),onMouseLeave:qu(p,k),onTouchStart:qu(y,b)}]:[!1,_,{}]}function qu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Wj({page:t,...e}){let{router:n}=Zw(),r=x.useMemo(()=>Hw(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?x.createElement(Yj,{page:t,matches:r,...e}):null}function Vj(t){let{manifest:e,routeModules:n}=Qw(),[r,s]=x.useState([]);return x.useEffect(()=>{let l=!1;return Pj(t,e,n).then(c=>{l||s(c)}),()=>{l=!0}},[t,e,n]),r}function Yj({page:t,matches:e,...n}){let r=Ki(),{manifest:s,routeModules:l}=Qw(),{basename:c}=Zw(),{loaderData:d,matches:h}=Uj(),g=x.useMemo(()=>L_(t,e,h,s,r,"data"),[t,e,h,s,r]),p=x.useMemo(()=>L_(t,e,h,s,r,"assets"),[t,e,h,s,r]),y=x.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let k=new Set,S=!1;if(e.forEach(O=>{var D;let T=s.routes[O.route.id];!T||!T.hasLoader||(!g.some(F=>F.route.id===O.route.id)&&O.route.id in d&&((D=l[O.route.id])!=null&&D.shouldRevalidate)||T.hasClientLoader?S=!0:k.add(O.route.id))}),k.size===0)return[];let E=Mj(t,c,"data");return S&&k.size>0&&E.searchParams.set("_routes",e.filter(O=>k.has(O.route.id)).map(O=>O.route.id).join(",")),[E.pathname+E.search]},[c,d,r,s,g,e,t,l]),_=x.useMemo(()=>Fj(p,s),[p,s]),b=Vj(p);return x.createElement(x.Fragment,null,y.map(k=>x.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),_.map(k=>x.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),b.map(({key:k,link:S})=>x.createElement("link",{key:k,...S})))}function Gj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ek=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ek&&(window.__reactRouterVersion="7.7.0")}catch{}function qj({basename:t,children:e,window:n}){let r=x.useRef();r.current==null&&(r.current=I4({window:n,v5Compat:!0}));let s=r.current,[l,c]=x.useState({action:s.action,location:s.location}),d=x.useCallback(h=>{x.startTransition(()=>c(h))},[c]);return x.useLayoutEffect(()=>s.listen(d),[s,d]),x.createElement(kj,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:s})}var tk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$x=x.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:l,replace:c,state:d,target:h,to:g,preventScrollReset:p,viewTransition:y,..._},b){let{basename:k}=x.useContext(za),S=typeof g=="string"&&tk.test(g),E,O=!1;if(typeof g=="string"&&S&&(E=g,ek))try{let se=new URL(window.location.href),ce=g.startsWith("//")?new URL(se.protocol+g):new URL(g),ye=pl(ce.pathname,k);ce.origin===se.origin&&ye!=null?g=ye+ce.search+ce.hash:O=!0}catch{Ia(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=cj(g,{relative:s}),[D,F,Z]=$j(r,_),K=Kj(g,{replace:c,state:d,target:h,preventScrollReset:p,relative:s,viewTransition:y});function L(se){e&&e(se),se.defaultPrevented||K(se)}let Q=x.createElement("a",{..._,...Z,href:E||T,onClick:O||l?e:L,ref:Gj(b,F),target:h,"data-discover":!S&&n==="render"?"true":void 0});return D&&!S?x.createElement(x.Fragment,null,Q,x.createElement(Wj,{page:T})):Q});$x.displayName="Link";var nk=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:l,to:c,viewTransition:d,children:h,...g},p){let y=Yd(c,{relative:g.relative}),_=Ki(),b=x.useContext(y0),{navigator:k,basename:S}=x.useContext(za),E=b!=null&&n3(y)&&d===!0,O=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,T=_.pathname,D=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(T=T.toLowerCase(),D=D?D.toLowerCase():null,O=O.toLowerCase()),D&&S&&(D=pl(D,S)||D);const F=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let Z=T===O||!s&&T.startsWith(O)&&T.charAt(F)==="/",K=D!=null&&(D===O||!s&&D.startsWith(O)&&D.charAt(O.length)==="/"),L={isActive:Z,isPending:K,isTransitioning:E},Q=Z?e:void 0,se;typeof r=="function"?se=r(L):se=[r,Z?"active":null,K?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ce=typeof l=="function"?l(L):l;return x.createElement($x,{...g,"aria-current":Q,className:se,ref:p,style:ce,to:c,viewTransition:d},typeof h=="function"?h(L):h)});nk.displayName="NavLink";var Jj=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:l,method:c=Ih,action:d,onSubmit:h,relative:g,preventScrollReset:p,viewTransition:y,..._},b)=>{let k=e3(),S=t3(d,{relative:g}),E=c.toLowerCase()==="get"?"get":"post",O=typeof d=="string"&&tk.test(d),T=D=>{if(h&&h(D),D.defaultPrevented)return;D.preventDefault();let F=D.nativeEvent.submitter,Z=(F==null?void 0:F.getAttribute("formmethod"))||c;k(F||D.currentTarget,{fetcherKey:e,method:Z,navigate:n,replace:s,state:l,relative:g,preventScrollReset:p,viewTransition:y})};return x.createElement("form",{ref:b,method:E,action:S,onSubmit:r?h:T,..._,"data-discover":!O&&t==="render"?"true":void 0})});Jj.displayName="Form";function Xj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rk(t){let e=x.useContext(Jc);return us(e,Xj(t)),e}function Kj(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:l,viewTransition:c}={}){let d=Xc(),h=Ki(),g=Yd(t,{relative:l});return x.useCallback(p=>{if(Aj(p,e)){p.preventDefault();let y=n!==void 0?n:kd(h)===kd(g);d(t,{replace:y,state:r,preventScrollReset:s,relative:l,viewTransition:c})}},[h,d,g,n,r,e,t,s,l,c])}var Zj=0,Qj=()=>`__${String(++Zj)}__`;function e3(){let{router:t}=rk("useSubmit"),{basename:e}=x.useContext(za),n=bj();return x.useCallback(async(r,s={})=>{let{action:l,method:c,encType:d,formData:h,body:g}=Rj(r,e);if(s.navigate===!1){let p=s.fetcherKey||Qj();await t.fetch(p,n,s.action||l,{preventScrollReset:s.preventScrollReset,formData:h,body:g,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await t.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:h,body:g,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function t3(t,{relative:e}={}){let{basename:n}=x.useContext(za),r=x.useContext(vl);us(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...Yd(t||".",{relative:e})},c=Ki();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(y=>y).forEach(y=>d.append("index",y));let p=d.toString();l.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:cl([n,l.pathname])),kd(l)}function n3(t,e={}){let n=x.useContext(Gw);us(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=rk("useViewTransitionState"),s=Yd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let l=pl(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=pl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Yh(s.pathname,c)!=null||Yh(s.pathname,l)!=null}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var sk;function Mt(){return sk.apply(null,arguments)}function r3(t){sk=t}function pa(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Ao(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Cr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wx(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Cr(t,e))return!1;return!0}function pi(t){return t===void 0}function ml(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Gd(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function ik(t,e){var n=[],r,s=t.length;for(r=0;r<s;++r)n.push(e(t[r],r));return n}function Xl(t,e){for(var n in e)Cr(e,n)&&(t[n]=e[n]);return Cr(e,"toString")&&(t.toString=e.toString),Cr(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Ba(t,e,n,r){return Ck(t,e,n,r,!0).utc()}function s3(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function nr(t){return t._pf==null&&(t._pf=s3()),t._pf}var ix;Array.prototype.some?ix=Array.prototype.some:ix=function(t){var e=Object(this),n=e.length>>>0,r;for(r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function Vx(t){var e=null,n=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=nr(t),n=ix.call(e.parsedDateParts,function(s){return s!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function b0(t){var e=Ba(NaN);return t!=null?Xl(nr(e),t):nr(e).userInvalidated=!0,e}var I_=Mt.momentProperties=[],nm=!1;function Yx(t,e){var n,r,s,l=I_.length;if(pi(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),pi(e._i)||(t._i=e._i),pi(e._f)||(t._f=e._f),pi(e._l)||(t._l=e._l),pi(e._strict)||(t._strict=e._strict),pi(e._tzm)||(t._tzm=e._tzm),pi(e._isUTC)||(t._isUTC=e._isUTC),pi(e._offset)||(t._offset=e._offset),pi(e._pf)||(t._pf=nr(e)),pi(e._locale)||(t._locale=e._locale),l>0)for(n=0;n<l;n++)r=I_[n],s=e[r],pi(s)||(t[r]=s);return t}function qd(t){Yx(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),nm===!1&&(nm=!0,Mt.updateOffset(this),nm=!1)}function ma(t){return t instanceof qd||t!=null&&t._isAMomentObject!=null}function ak(t){Mt.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Zi(t,e){var n=!0;return Xl(function(){if(Mt.deprecationHandler!=null&&Mt.deprecationHandler(null,t),n){var r=[],s,l,c,d=arguments.length;for(l=0;l<d;l++){if(s="",typeof arguments[l]=="object"){s+=`
[`+l+"] ";for(c in arguments[0])Cr(arguments[0],c)&&(s+=c+": "+arguments[0][c]+", ");s=s.slice(0,-2)}else s=arguments[l];r.push(s)}ak(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var P_={};function lk(t,e){Mt.deprecationHandler!=null&&Mt.deprecationHandler(t,e),P_[t]||(ak(e),P_[t]=!0)}Mt.suppressDeprecationWarnings=!1;Mt.deprecationHandler=null;function Ha(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function i3(t){var e,n;for(n in t)Cr(t,n)&&(e=t[n],Ha(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ax(t,e){var n=Xl({},t),r;for(r in e)Cr(e,r)&&(Ao(t[r])&&Ao(e[r])?(n[r]={},Xl(n[r],t[r]),Xl(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)Cr(t,r)&&!Cr(e,r)&&Ao(t[r])&&(n[r]=Xl({},n[r]));return n}function Gx(t){t!=null&&this.set(t)}var lx;Object.keys?lx=Object.keys:lx=function(t){var e,n=[];for(e in t)Cr(t,e)&&n.push(e);return n};var a3={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function l3(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return Ha(r)?r.call(e,n):r}function Pa(t,e,n){var r=""+Math.abs(t),s=e-r.length,l=t>=0;return(l?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}var qx=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ch=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,rm={},Ic={};function Ln(t,e,n,r){var s=r;typeof r=="string"&&(s=function(){return this[r]()}),t&&(Ic[t]=s),e&&(Ic[e[0]]=function(){return Pa(s.apply(this,arguments),e[1],e[2])}),n&&(Ic[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function o3(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function c3(t){var e=t.match(qx),n,r;for(n=0,r=e.length;n<r;n++)Ic[e[n]]?e[n]=Ic[e[n]]:e[n]=o3(e[n]);return function(s){var l="",c;for(c=0;c<r;c++)l+=Ha(e[c])?e[c].call(s,t):e[c];return l}}function Fh(t,e){return t.isValid()?(e=ok(e,t.localeData()),rm[e]=rm[e]||c3(e),rm[e](t)):t.localeData().invalidDate()}function ok(t,e){var n=5;function r(s){return e.longDateFormat(s)||s}for(ch.lastIndex=0;n>=0&&ch.test(t);)t=t.replace(ch,r),ch.lastIndex=0,n-=1;return t}var u3={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function d3(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(qx).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var f3="Invalid date";function h3(){return this._invalidDate}var g3="%d",p3=/\d{1,2}/;function m3(t){return this._ordinal.replace("%d",t)}var x3={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function y3(t,e,n,r){var s=this._relativeTime[n];return Ha(s)?s(t,e,n,r):s.replace(/%d/i,t)}function v3(t,e){var n=this._relativeTime[t>0?"future":"past"];return Ha(n)?n(e):n.replace(/%s/i,e)}var F_={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Qi(t){return typeof t=="string"?F_[t]||F_[t.toLowerCase()]:void 0}function Jx(t){var e={},n,r;for(r in t)Cr(t,r)&&(n=Qi(r),n&&(e[n]=t[r]));return e}var b3={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function _3(t){var e=[],n;for(n in t)Cr(t,n)&&e.push({unit:n,priority:b3[n]});return e.sort(function(r,s){return r.priority-s.priority}),e}var ck=/\d/,Ii=/\d\d/,uk=/\d{3}/,Xx=/\d{4}/,_0=/[+-]?\d{6}/,ss=/\d\d?/,dk=/\d\d\d\d?/,fk=/\d\d\d\d\d\d?/,S0=/\d{1,3}/,Kx=/\d{1,4}/,w0=/[+-]?\d{1,6}/,Kc=/\d+/,k0=/[+-]?\d+/,S3=/Z|[+-]\d\d:?\d\d/gi,E0=/Z|[+-]\d\d(?::?\d\d)?/gi,w3=/[+-]?\d+(\.\d{1,3})?/,Jd=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Zc=/^[1-9]\d?/,Zx=/^([1-9]\d|\d)/,Gh;Gh={};function vn(t,e,n){Gh[t]=Ha(e)?e:function(r,s){return r&&n?n:e}}function k3(t,e){return Cr(Gh,t)?Gh[t](e._strict,e._locale):new RegExp(E3(t))}function E3(t){return ul(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,r,s,l){return n||r||s||l}))}function ul(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ji(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function pr(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Ji(e)),n}var ox={};function Gr(t,e){var n,r=e,s;for(typeof t=="string"&&(t=[t]),ml(e)&&(r=function(l,c){c[e]=pr(l)}),s=t.length,n=0;n<s;n++)ox[t[n]]=r}function Xd(t,e){Gr(t,function(n,r,s,l){s._w=s._w||{},e(n,s._w,s,l)})}function N3(t,e,n){e!=null&&Cr(ox,t)&&ox[t](e,n._a,n,t)}function N0(t){return t%4===0&&t%100!==0||t%400===0}var ti=0,il=1,Ra=2,As=3,fa=4,al=5,Co=6,T3=7,C3=8;Ln("Y",0,0,function(){var t=this.year();return t<=9999?Pa(t,4):"+"+t});Ln(0,["YY",2],0,function(){return this.year()%100});Ln(0,["YYYY",4],0,"year");Ln(0,["YYYYY",5],0,"year");Ln(0,["YYYYYY",6,!0],0,"year");vn("Y",k0);vn("YY",ss,Ii);vn("YYYY",Kx,Xx);vn("YYYYY",w0,_0);vn("YYYYYY",w0,_0);Gr(["YYYYY","YYYYYY"],ti);Gr("YYYY",function(t,e){e[ti]=t.length===2?Mt.parseTwoDigitYear(t):pr(t)});Gr("YY",function(t,e){e[ti]=Mt.parseTwoDigitYear(t)});Gr("Y",function(t,e){e[ti]=parseInt(t,10)});function fd(t){return N0(t)?366:365}Mt.parseTwoDigitYear=function(t){return pr(t)+(pr(t)>68?1900:2e3)};var hk=Qc("FullYear",!0);function j3(){return N0(this.year())}function Qc(t,e){return function(n){return n!=null?(gk(this,t,n),Mt.updateOffset(this,e),this):Ed(this,t)}}function Ed(t,e){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function gk(t,e,n){var r,s,l,c,d;if(!(!t.isValid()||isNaN(n))){switch(r=t._d,s=t._isUTC,e){case"Milliseconds":return void(s?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(s?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(s?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(s?r.setUTCHours(n):r.setHours(n));case"Date":return void(s?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}l=n,c=t.month(),d=t.date(),d=d===29&&c===1&&!N0(l)?28:d,s?r.setUTCFullYear(l,c,d):r.setFullYear(l,c,d)}}function A3(t){return t=Qi(t),Ha(this[t])?this[t]():this}function O3(t,e){if(typeof t=="object"){t=Jx(t);var n=_3(t),r,s=n.length;for(r=0;r<s;r++)this[n[r].unit](t[n[r].unit])}else if(t=Qi(t),Ha(this[t]))return this[t](e);return this}function D3(t,e){return(t%e+e)%e}var xs;Array.prototype.indexOf?xs=Array.prototype.indexOf:xs=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Qx(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=D3(e,12);return t+=(e-n)/12,n===1?N0(t)?29:28:31-n%7%2}Ln("M",["MM",2],"Mo",function(){return this.month()+1});Ln("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Ln("MMMM",0,0,function(t){return this.localeData().months(this,t)});vn("M",ss,Zc);vn("MM",ss,Ii);vn("MMM",function(t,e){return e.monthsShortRegex(t)});vn("MMMM",function(t,e){return e.monthsRegex(t)});Gr(["M","MM"],function(t,e){e[il]=pr(t)-1});Gr(["MMM","MMMM"],function(t,e,n,r){var s=n._locale.monthsParse(t,r,n._strict);s!=null?e[il]=s:nr(n).invalidMonth=t});var R3="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pk="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mk=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,M3=Jd,L3=Jd;function I3(t,e){return t?pa(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||mk).test(e)?"format":"standalone"][t.month()]:pa(this._months)?this._months:this._months.standalone}function P3(t,e){return t?pa(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[mk.test(e)?"format":"standalone"][t.month()]:pa(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function F3(t,e,n){var r,s,l,c=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)l=Ba([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(l,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(l,"").toLocaleLowerCase();return n?e==="MMM"?(s=xs.call(this._shortMonthsParse,c),s!==-1?s:null):(s=xs.call(this._longMonthsParse,c),s!==-1?s:null):e==="MMM"?(s=xs.call(this._shortMonthsParse,c),s!==-1?s:(s=xs.call(this._longMonthsParse,c),s!==-1?s:null)):(s=xs.call(this._longMonthsParse,c),s!==-1?s:(s=xs.call(this._shortMonthsParse,c),s!==-1?s:null))}function z3(t,e,n){var r,s,l;if(this._monthsParseExact)return F3.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=Ba([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(l="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(l.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function xk(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=pr(e);else if(e=t.localeData().monthsParse(e),!ml(e))return t}var n=e,r=t.date();return r=r<29?r:Math.min(r,Qx(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function yk(t){return t!=null?(xk(this,t),Mt.updateOffset(this,!0),this):Ed(this,"Month")}function B3(){return Qx(this.year(),this.month())}function H3(t){return this._monthsParseExact?(Cr(this,"_monthsRegex")||vk.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Cr(this,"_monthsShortRegex")||(this._monthsShortRegex=M3),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function U3(t){return this._monthsParseExact?(Cr(this,"_monthsRegex")||vk.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Cr(this,"_monthsRegex")||(this._monthsRegex=L3),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function vk(){function t(h,g){return g.length-h.length}var e=[],n=[],r=[],s,l,c,d;for(s=0;s<12;s++)l=Ba([2e3,s]),c=ul(this.monthsShort(l,"")),d=ul(this.months(l,"")),e.push(c),n.push(d),r.push(d),r.push(c);e.sort(t),n.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function $3(t,e,n,r,s,l,c){var d;return t<100&&t>=0?(d=new Date(t+400,e,n,r,s,l,c),isFinite(d.getFullYear())&&d.setFullYear(t)):d=new Date(t,e,n,r,s,l,c),d}function Nd(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function qh(t,e,n){var r=7+e-n,s=(7+Nd(t,0,r).getUTCDay()-e)%7;return-s+r-1}function bk(t,e,n,r,s){var l=(7+n-r)%7,c=qh(t,r,s),d=1+7*(e-1)+l+c,h,g;return d<=0?(h=t-1,g=fd(h)+d):d>fd(t)?(h=t+1,g=d-fd(t)):(h=t,g=d),{year:h,dayOfYear:g}}function Td(t,e,n){var r=qh(t.year(),e,n),s=Math.floor((t.dayOfYear()-r-1)/7)+1,l,c;return s<1?(c=t.year()-1,l=s+dl(c,e,n)):s>dl(t.year(),e,n)?(l=s-dl(t.year(),e,n),c=t.year()+1):(c=t.year(),l=s),{week:l,year:c}}function dl(t,e,n){var r=qh(t,e,n),s=qh(t+1,e,n);return(fd(t)-r+s)/7}Ln("w",["ww",2],"wo","week");Ln("W",["WW",2],"Wo","isoWeek");vn("w",ss,Zc);vn("ww",ss,Ii);vn("W",ss,Zc);vn("WW",ss,Ii);Xd(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=pr(t)});function W3(t){return Td(t,this._week.dow,this._week.doy).week}var V3={dow:0,doy:6};function Y3(){return this._week.dow}function G3(){return this._week.doy}function q3(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function J3(t){var e=Td(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Ln("d",0,"do","day");Ln("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Ln("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Ln("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Ln("e",0,0,"weekday");Ln("E",0,0,"isoWeekday");vn("d",ss);vn("e",ss);vn("E",ss);vn("dd",function(t,e){return e.weekdaysMinRegex(t)});vn("ddd",function(t,e){return e.weekdaysShortRegex(t)});vn("dddd",function(t,e){return e.weekdaysRegex(t)});Xd(["dd","ddd","dddd"],function(t,e,n,r){var s=n._locale.weekdaysParse(t,r,n._strict);s!=null?e.d=s:nr(n).invalidWeekday=t});Xd(["d","e","E"],function(t,e,n,r){e[r]=pr(t)});function X3(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function K3(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function e1(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Z3="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),_k="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Q3="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),eA=Jd,tA=Jd,nA=Jd;function rA(t,e){var n=pa(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?e1(n,this._week.dow):t?n[t.day()]:n}function sA(t){return t===!0?e1(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function iA(t){return t===!0?e1(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function aA(t,e,n){var r,s,l,c=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)l=Ba([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(l,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(l,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(l,"").toLocaleLowerCase();return n?e==="dddd"?(s=xs.call(this._weekdaysParse,c),s!==-1?s:null):e==="ddd"?(s=xs.call(this._shortWeekdaysParse,c),s!==-1?s:null):(s=xs.call(this._minWeekdaysParse,c),s!==-1?s:null):e==="dddd"?(s=xs.call(this._weekdaysParse,c),s!==-1||(s=xs.call(this._shortWeekdaysParse,c),s!==-1)?s:(s=xs.call(this._minWeekdaysParse,c),s!==-1?s:null)):e==="ddd"?(s=xs.call(this._shortWeekdaysParse,c),s!==-1||(s=xs.call(this._weekdaysParse,c),s!==-1)?s:(s=xs.call(this._minWeekdaysParse,c),s!==-1?s:null)):(s=xs.call(this._minWeekdaysParse,c),s!==-1||(s=xs.call(this._weekdaysParse,c),s!==-1)?s:(s=xs.call(this._shortWeekdaysParse,c),s!==-1?s:null))}function lA(t,e,n){var r,s,l;if(this._weekdaysParseExact)return aA.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=Ba([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(l="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(l.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function oA(t){if(!this.isValid())return t!=null?this:NaN;var e=Ed(this,"Day");return t!=null?(t=X3(t,this.localeData()),this.add(t-e,"d")):e}function cA(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function uA(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=K3(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function dA(t){return this._weekdaysParseExact?(Cr(this,"_weekdaysRegex")||t1.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Cr(this,"_weekdaysRegex")||(this._weekdaysRegex=eA),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function fA(t){return this._weekdaysParseExact?(Cr(this,"_weekdaysRegex")||t1.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Cr(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=tA),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function hA(t){return this._weekdaysParseExact?(Cr(this,"_weekdaysRegex")||t1.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Cr(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=nA),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function t1(){function t(p,y){return y.length-p.length}var e=[],n=[],r=[],s=[],l,c,d,h,g;for(l=0;l<7;l++)c=Ba([2e3,1]).day(l),d=ul(this.weekdaysMin(c,"")),h=ul(this.weekdaysShort(c,"")),g=ul(this.weekdays(c,"")),e.push(d),n.push(h),r.push(g),s.push(d),s.push(h),s.push(g);e.sort(t),n.sort(t),r.sort(t),s.sort(t),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function n1(){return this.hours()%12||12}function gA(){return this.hours()||24}Ln("H",["HH",2],0,"hour");Ln("h",["hh",2],0,n1);Ln("k",["kk",2],0,gA);Ln("hmm",0,0,function(){return""+n1.apply(this)+Pa(this.minutes(),2)});Ln("hmmss",0,0,function(){return""+n1.apply(this)+Pa(this.minutes(),2)+Pa(this.seconds(),2)});Ln("Hmm",0,0,function(){return""+this.hours()+Pa(this.minutes(),2)});Ln("Hmmss",0,0,function(){return""+this.hours()+Pa(this.minutes(),2)+Pa(this.seconds(),2)});function Sk(t,e){Ln(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Sk("a",!0);Sk("A",!1);function wk(t,e){return e._meridiemParse}vn("a",wk);vn("A",wk);vn("H",ss,Zx);vn("h",ss,Zc);vn("k",ss,Zc);vn("HH",ss,Ii);vn("hh",ss,Ii);vn("kk",ss,Ii);vn("hmm",dk);vn("hmmss",fk);vn("Hmm",dk);vn("Hmmss",fk);Gr(["H","HH"],As);Gr(["k","kk"],function(t,e,n){var r=pr(t);e[As]=r===24?0:r});Gr(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Gr(["h","hh"],function(t,e,n){e[As]=pr(t),nr(n).bigHour=!0});Gr("hmm",function(t,e,n){var r=t.length-2;e[As]=pr(t.substr(0,r)),e[fa]=pr(t.substr(r)),nr(n).bigHour=!0});Gr("hmmss",function(t,e,n){var r=t.length-4,s=t.length-2;e[As]=pr(t.substr(0,r)),e[fa]=pr(t.substr(r,2)),e[al]=pr(t.substr(s)),nr(n).bigHour=!0});Gr("Hmm",function(t,e,n){var r=t.length-2;e[As]=pr(t.substr(0,r)),e[fa]=pr(t.substr(r))});Gr("Hmmss",function(t,e,n){var r=t.length-4,s=t.length-2;e[As]=pr(t.substr(0,r)),e[fa]=pr(t.substr(r,2)),e[al]=pr(t.substr(s))});function pA(t){return(t+"").toLowerCase().charAt(0)==="p"}var mA=/[ap]\.?m?\.?/i,xA=Qc("Hours",!0);function yA(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var kk={calendar:a3,longDateFormat:u3,invalidDate:f3,ordinal:g3,dayOfMonthOrdinalParse:p3,relativeTime:x3,months:R3,monthsShort:pk,week:V3,weekdays:Z3,weekdaysMin:Q3,weekdaysShort:_k,meridiemParse:mA},ls={},Ju={},Cd;function vA(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function z_(t){return t&&t.toLowerCase().replace("_","-")}function bA(t){for(var e=0,n,r,s,l;e<t.length;){for(l=z_(t[e]).split("-"),n=l.length,r=z_(t[e+1]),r=r?r.split("-"):null;n>0;){if(s=T0(l.slice(0,n).join("-")),s)return s;if(r&&r.length>=n&&vA(l,r)>=n-1)break;n--}e++}return Cd}function _A(t){return!!(t&&t.match("^[^/\\\\]*$"))}function T0(t){var e=null,n;if(ls[t]===void 0&&typeof module<"u"&&module&&module.exports&&_A(t))try{e=Cd._abbr,n=require,n("./locale/"+t),eo(e)}catch{ls[t]=null}return ls[t]}function eo(t,e){var n;return t&&(pi(e)?n=bl(t):n=r1(t,e),n?Cd=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Cd._abbr}function r1(t,e){if(e!==null){var n,r=kk;if(e.abbr=t,ls[t]!=null)lk("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ls[t]._config;else if(e.parentLocale!=null)if(ls[e.parentLocale]!=null)r=ls[e.parentLocale]._config;else if(n=T0(e.parentLocale),n!=null)r=n._config;else return Ju[e.parentLocale]||(Ju[e.parentLocale]=[]),Ju[e.parentLocale].push({name:t,config:e}),null;return ls[t]=new Gx(ax(r,e)),Ju[t]&&Ju[t].forEach(function(s){r1(s.name,s.config)}),eo(t),ls[t]}else return delete ls[t],null}function SA(t,e){if(e!=null){var n,r,s=kk;ls[t]!=null&&ls[t].parentLocale!=null?ls[t].set(ax(ls[t]._config,e)):(r=T0(t),r!=null&&(s=r._config),e=ax(s,e),r==null&&(e.abbr=t),n=new Gx(e),n.parentLocale=ls[t],ls[t]=n),eo(t)}else ls[t]!=null&&(ls[t].parentLocale!=null?(ls[t]=ls[t].parentLocale,t===eo()&&eo(t)):ls[t]!=null&&delete ls[t]);return ls[t]}function bl(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Cd;if(!pa(t)){if(e=T0(t),e)return e;t=[t]}return bA(t)}function wA(){return lx(ls)}function s1(t){var e,n=t._a;return n&&nr(t).overflow===-2&&(e=n[il]<0||n[il]>11?il:n[Ra]<1||n[Ra]>Qx(n[ti],n[il])?Ra:n[As]<0||n[As]>24||n[As]===24&&(n[fa]!==0||n[al]!==0||n[Co]!==0)?As:n[fa]<0||n[fa]>59?fa:n[al]<0||n[al]>59?al:n[Co]<0||n[Co]>999?Co:-1,nr(t)._overflowDayOfYear&&(e<ti||e>Ra)&&(e=Ra),nr(t)._overflowWeeks&&e===-1&&(e=T3),nr(t)._overflowWeekday&&e===-1&&(e=C3),nr(t).overflow=e),t}var kA=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,EA=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,NA=/Z|[+-]\d\d(?::?\d\d)?/,uh=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],sm=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],TA=/^\/?Date\((-?\d+)/i,CA=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,jA={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ek(t){var e,n,r=t._i,s=kA.exec(r)||EA.exec(r),l,c,d,h,g=uh.length,p=sm.length;if(s){for(nr(t).iso=!0,e=0,n=g;e<n;e++)if(uh[e][1].exec(s[1])){c=uh[e][0],l=uh[e][2]!==!1;break}if(c==null){t._isValid=!1;return}if(s[3]){for(e=0,n=p;e<n;e++)if(sm[e][1].exec(s[3])){d=(s[2]||" ")+sm[e][0];break}if(d==null){t._isValid=!1;return}}if(!l&&d!=null){t._isValid=!1;return}if(s[4])if(NA.exec(s[4]))h="Z";else{t._isValid=!1;return}t._f=c+(d||"")+(h||""),a1(t)}else t._isValid=!1}function AA(t,e,n,r,s,l){var c=[OA(t),pk.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(s,10)];return l&&c.push(parseInt(l,10)),c}function OA(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function DA(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function RA(t,e,n){if(t){var r=_k.indexOf(t),s=new Date(e[0],e[1],e[2]).getDay();if(r!==s)return nr(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function MA(t,e,n){if(t)return jA[t];if(e)return 0;var r=parseInt(n,10),s=r%100,l=(r-s)/100;return l*60+s}function Nk(t){var e=CA.exec(DA(t._i)),n;if(e){if(n=AA(e[4],e[3],e[2],e[5],e[6],e[7]),!RA(e[1],n,t))return;t._a=n,t._tzm=MA(e[8],e[9],e[10]),t._d=Nd.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),nr(t).rfc2822=!0}else t._isValid=!1}function LA(t){var e=TA.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Ek(t),t._isValid===!1)delete t._isValid;else return;if(Nk(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:Mt.createFromInputFallback(t)}Mt.createFromInputFallback=Zi("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Ac(t,e,n){return t??e??n}function IA(t){var e=new Date(Mt.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function i1(t){var e,n,r=[],s,l,c;if(!t._d){for(s=IA(t),t._w&&t._a[Ra]==null&&t._a[il]==null&&PA(t),t._dayOfYear!=null&&(c=Ac(t._a[ti],s[ti]),(t._dayOfYear>fd(c)||t._dayOfYear===0)&&(nr(t)._overflowDayOfYear=!0),n=Nd(c,0,t._dayOfYear),t._a[il]=n.getUTCMonth(),t._a[Ra]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=s[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[As]===24&&t._a[fa]===0&&t._a[al]===0&&t._a[Co]===0&&(t._nextDay=!0,t._a[As]=0),t._d=(t._useUTC?Nd:$3).apply(null,r),l=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[As]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==l&&(nr(t).weekdayMismatch=!0)}}function PA(t){var e,n,r,s,l,c,d,h,g;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(l=1,c=4,n=Ac(e.GG,t._a[ti],Td(ns(),1,4).year),r=Ac(e.W,1),s=Ac(e.E,1),(s<1||s>7)&&(h=!0)):(l=t._locale._week.dow,c=t._locale._week.doy,g=Td(ns(),l,c),n=Ac(e.gg,t._a[ti],g.year),r=Ac(e.w,g.week),e.d!=null?(s=e.d,(s<0||s>6)&&(h=!0)):e.e!=null?(s=e.e+l,(e.e<0||e.e>6)&&(h=!0)):s=l),r<1||r>dl(n,l,c)?nr(t)._overflowWeeks=!0:h!=null?nr(t)._overflowWeekday=!0:(d=bk(n,r,s,l,c),t._a[ti]=d.year,t._dayOfYear=d.dayOfYear)}Mt.ISO_8601=function(){};Mt.RFC_2822=function(){};function a1(t){if(t._f===Mt.ISO_8601){Ek(t);return}if(t._f===Mt.RFC_2822){Nk(t);return}t._a=[],nr(t).empty=!0;var e=""+t._i,n,r,s,l,c,d=e.length,h=0,g,p;for(s=ok(t._f,t._locale).match(qx)||[],p=s.length,n=0;n<p;n++)l=s[n],r=(e.match(k3(l,t))||[])[0],r&&(c=e.substr(0,e.indexOf(r)),c.length>0&&nr(t).unusedInput.push(c),e=e.slice(e.indexOf(r)+r.length),h+=r.length),Ic[l]?(r?nr(t).empty=!1:nr(t).unusedTokens.push(l),N3(l,r,t)):t._strict&&!r&&nr(t).unusedTokens.push(l);nr(t).charsLeftOver=d-h,e.length>0&&nr(t).unusedInput.push(e),t._a[As]<=12&&nr(t).bigHour===!0&&t._a[As]>0&&(nr(t).bigHour=void 0),nr(t).parsedDateParts=t._a.slice(0),nr(t).meridiem=t._meridiem,t._a[As]=FA(t._locale,t._a[As],t._meridiem),g=nr(t).era,g!==null&&(t._a[ti]=t._locale.erasConvertYear(g,t._a[ti])),i1(t),s1(t)}function FA(t,e,n){var r;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(r=t.isPM(n),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function zA(t){var e,n,r,s,l,c,d=!1,h=t._f.length;if(h===0){nr(t).invalidFormat=!0,t._d=new Date(NaN);return}for(s=0;s<h;s++)l=0,c=!1,e=Yx({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[s],a1(e),Vx(e)&&(c=!0),l+=nr(e).charsLeftOver,l+=nr(e).unusedTokens.length*10,nr(e).score=l,d?l<r&&(r=l,n=e):(r==null||l<r||c)&&(r=l,n=e,c&&(d=!0));Xl(t,n||e)}function BA(t){if(!t._d){var e=Jx(t._i),n=e.day===void 0?e.date:e.day;t._a=ik([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),i1(t)}}function HA(t){var e=new qd(s1(Tk(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Tk(t){var e=t._i,n=t._f;return t._locale=t._locale||bl(t._l),e===null||n===void 0&&e===""?b0({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),ma(e)?new qd(s1(e)):(Gd(e)?t._d=e:pa(n)?zA(t):n?a1(t):UA(t),Vx(t)||(t._d=null),t))}function UA(t){var e=t._i;pi(e)?t._d=new Date(Mt.now()):Gd(e)?t._d=new Date(e.valueOf()):typeof e=="string"?LA(t):pa(e)?(t._a=ik(e.slice(0),function(n){return parseInt(n,10)}),i1(t)):Ao(e)?BA(t):ml(e)?t._d=new Date(e):Mt.createFromInputFallback(t)}function Ck(t,e,n,r,s){var l={};return(e===!0||e===!1)&&(r=e,e=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(Ao(t)&&Wx(t)||pa(t)&&t.length===0)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=n,l._i=t,l._f=e,l._strict=r,HA(l)}function ns(t,e,n,r){return Ck(t,e,n,r,!1)}var $A=Zi("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ns.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:b0()}),WA=Zi("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ns.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:b0()});function jk(t,e){var n,r;if(e.length===1&&pa(e[0])&&(e=e[0]),!e.length)return ns();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function VA(){var t=[].slice.call(arguments,0);return jk("isBefore",t)}function YA(){var t=[].slice.call(arguments,0);return jk("isAfter",t)}var GA=function(){return Date.now?Date.now():+new Date},Xu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function qA(t){var e,n=!1,r,s=Xu.length;for(e in t)if(Cr(t,e)&&!(xs.call(Xu,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<s;++r)if(t[Xu[r]]){if(n)return!1;parseFloat(t[Xu[r]])!==pr(t[Xu[r]])&&(n=!0)}return!0}function JA(){return this._isValid}function XA(){return ya(NaN)}function C0(t){var e=Jx(t),n=e.year||0,r=e.quarter||0,s=e.month||0,l=e.week||e.isoWeek||0,c=e.day||0,d=e.hour||0,h=e.minute||0,g=e.second||0,p=e.millisecond||0;this._isValid=qA(e),this._milliseconds=+p+g*1e3+h*6e4+d*1e3*60*60,this._days=+c+l*7,this._months=+s+r*3+n*12,this._data={},this._locale=bl(),this._bubble()}function zh(t){return t instanceof C0}function cx(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function KA(t,e,n){var r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),l=0,c;for(c=0;c<r;c++)pr(t[c])!==pr(e[c])&&l++;return l+s}function Ak(t,e){Ln(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+Pa(~~(n/60),2)+e+Pa(~~n%60,2)})}Ak("Z",":");Ak("ZZ","");vn("Z",E0);vn("ZZ",E0);Gr(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=l1(E0,t)});var ZA=/([\+\-]|\d\d)/gi;function l1(t,e){var n=(e||"").match(t),r,s,l;return n===null?null:(r=n[n.length-1]||[],s=(r+"").match(ZA)||["-",0,0],l=+(s[1]*60)+pr(s[2]),l===0?0:s[0]==="+"?l:-l)}function o1(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(ma(t)||Gd(t)?t.valueOf():ns(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Mt.updateOffset(n,!1),n):ns(t).local()}function ux(t){return-Math.round(t._d.getTimezoneOffset())}Mt.updateOffset=function(){};function QA(t,e,n){var r=this._offset||0,s;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=l1(E0,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(s=ux(this)),this._offset=t,this._isUTC=!0,s!=null&&this.add(s,"m"),r!==t&&(!e||this._changeInProgress?Rk(this,ya(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Mt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:ux(this)}function eO(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function tO(t){return this.utcOffset(0,t)}function nO(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ux(this),"m")),this}function rO(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=l1(S3,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function sO(t){return this.isValid()?(t=t?ns(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function iO(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function aO(){if(!pi(this._isDSTShifted))return this._isDSTShifted;var t={},e;return Yx(t,this),t=Tk(t),t._a?(e=t._isUTC?Ba(t._a):ns(t._a),this._isDSTShifted=this.isValid()&&KA(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function lO(){return this.isValid()?!this._isUTC:!1}function oO(){return this.isValid()?this._isUTC:!1}function Ok(){return this.isValid()?this._isUTC&&this._offset===0:!1}var cO=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,uO=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ya(t,e){var n=t,r=null,s,l,c;return zh(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:ml(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(r=cO.exec(t))?(s=r[1]==="-"?-1:1,n={y:0,d:pr(r[Ra])*s,h:pr(r[As])*s,m:pr(r[fa])*s,s:pr(r[al])*s,ms:pr(cx(r[Co]*1e3))*s}):(r=uO.exec(t))?(s=r[1]==="-"?-1:1,n={y:Eo(r[2],s),M:Eo(r[3],s),w:Eo(r[4],s),d:Eo(r[5],s),h:Eo(r[6],s),m:Eo(r[7],s),s:Eo(r[8],s)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(c=dO(ns(n.from),ns(n.to)),n={},n.ms=c.milliseconds,n.M=c.months),l=new C0(n),zh(t)&&Cr(t,"_locale")&&(l._locale=t._locale),zh(t)&&Cr(t,"_isValid")&&(l._isValid=t._isValid),l}ya.fn=C0.prototype;ya.invalid=XA;function Eo(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function B_(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function dO(t,e){var n;return t.isValid()&&e.isValid()?(e=o1(e,t),t.isBefore(e)?n=B_(t,e):(n=B_(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Dk(t,e){return function(n,r){var s,l;return r!==null&&!isNaN(+r)&&(lk(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),l=n,n=r,r=l),s=ya(n,r),Rk(this,s,t),this}}function Rk(t,e,n,r){var s=e._milliseconds,l=cx(e._days),c=cx(e._months);t.isValid()&&(r=r??!0,c&&xk(t,Ed(t,"Month")+c*n),l&&gk(t,"Date",Ed(t,"Date")+l*n),s&&t._d.setTime(t._d.valueOf()+s*n),r&&Mt.updateOffset(t,l||c))}var fO=Dk(1,"add"),hO=Dk(-1,"subtract");function Mk(t){return typeof t=="string"||t instanceof String}function gO(t){return ma(t)||Gd(t)||Mk(t)||ml(t)||mO(t)||pO(t)||t===null||t===void 0}function pO(t){var e=Ao(t)&&!Wx(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,l,c=r.length;for(s=0;s<c;s+=1)l=r[s],n=n||Cr(t,l);return e&&n}function mO(t){var e=pa(t),n=!1;return e&&(n=t.filter(function(r){return!ml(r)&&Mk(t)}).length===0),e&&n}function xO(t){var e=Ao(t)&&!Wx(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,l;for(s=0;s<r.length;s+=1)l=r[s],n=n||Cr(t,l);return e&&n}function yO(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function vO(t,e){arguments.length===1&&(arguments[0]?gO(arguments[0])?(t=arguments[0],e=void 0):xO(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||ns(),r=o1(n,this).startOf("day"),s=Mt.calendarFormat(this,r)||"sameElse",l=e&&(Ha(e[s])?e[s].call(this,n):e[s]);return this.format(l||this.localeData().calendar(s,this,ns(n)))}function bO(){return new qd(this)}function _O(t,e){var n=ma(t)?t:ns(t);return this.isValid()&&n.isValid()?(e=Qi(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function SO(t,e){var n=ma(t)?t:ns(t);return this.isValid()&&n.isValid()?(e=Qi(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function wO(t,e,n,r){var s=ma(t)?t:ns(t),l=ma(e)?e:ns(e);return this.isValid()&&s.isValid()&&l.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(s,n):!this.isBefore(s,n))&&(r[1]===")"?this.isBefore(l,n):!this.isAfter(l,n))):!1}function kO(t,e){var n=ma(t)?t:ns(t),r;return this.isValid()&&n.isValid()?(e=Qi(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function EO(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function NO(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function TO(t,e,n){var r,s,l;if(!this.isValid())return NaN;if(r=o1(t,this),!r.isValid())return NaN;switch(s=(r.utcOffset()-this.utcOffset())*6e4,e=Qi(e),e){case"year":l=Bh(this,r)/12;break;case"month":l=Bh(this,r);break;case"quarter":l=Bh(this,r)/3;break;case"second":l=(this-r)/1e3;break;case"minute":l=(this-r)/6e4;break;case"hour":l=(this-r)/36e5;break;case"day":l=(this-r-s)/864e5;break;case"week":l=(this-r-s)/6048e5;break;default:l=this-r}return n?l:Ji(l)}function Bh(t,e){if(t.date()<e.date())return-Bh(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months"),s,l;return e-r<0?(s=t.clone().add(n-1,"months"),l=(e-r)/(r-s)):(s=t.clone().add(n+1,"months"),l=(e-r)/(s-r)),-(n+l)||0}Mt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Mt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function CO(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function jO(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?Fh(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ha(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Fh(n,"Z")):Fh(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function AO(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,r,s,l;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",l=e+'[")]',this.format(n+r+s+l)}function OO(t){t||(t=this.isUtc()?Mt.defaultFormatUtc:Mt.defaultFormat);var e=Fh(this,t);return this.localeData().postformat(e)}function DO(t,e){return this.isValid()&&(ma(t)&&t.isValid()||ns(t).isValid())?ya({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function RO(t){return this.from(ns(),t)}function MO(t,e){return this.isValid()&&(ma(t)&&t.isValid()||ns(t).isValid())?ya({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function LO(t){return this.to(ns(),t)}function Lk(t){var e;return t===void 0?this._locale._abbr:(e=bl(t),e!=null&&(this._locale=e),this)}var Ik=Zi("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Pk(){return this._locale}var Jh=1e3,Pc=60*Jh,Xh=60*Pc,Fk=(365*400+97)*24*Xh;function Fc(t,e){return(t%e+e)%e}function zk(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-Fk:new Date(t,e,n).valueOf()}function Bk(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-Fk:Date.UTC(t,e,n)}function IO(t){var e,n;if(t=Qi(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Bk:zk,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Fc(e+(this._isUTC?0:this.utcOffset()*Pc),Xh);break;case"minute":e=this._d.valueOf(),e-=Fc(e,Pc);break;case"second":e=this._d.valueOf(),e-=Fc(e,Jh);break}return this._d.setTime(e),Mt.updateOffset(this,!0),this}function PO(t){var e,n;if(t=Qi(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Bk:zk,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Xh-Fc(e+(this._isUTC?0:this.utcOffset()*Pc),Xh)-1;break;case"minute":e=this._d.valueOf(),e+=Pc-Fc(e,Pc)-1;break;case"second":e=this._d.valueOf(),e+=Jh-Fc(e,Jh)-1;break}return this._d.setTime(e),Mt.updateOffset(this,!0),this}function FO(){return this._d.valueOf()-(this._offset||0)*6e4}function zO(){return Math.floor(this.valueOf()/1e3)}function BO(){return new Date(this.valueOf())}function HO(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function UO(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function $O(){return this.isValid()?this.toISOString():null}function WO(){return Vx(this)}function VO(){return Xl({},nr(this))}function YO(){return nr(this).overflow}function GO(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Ln("N",0,0,"eraAbbr");Ln("NN",0,0,"eraAbbr");Ln("NNN",0,0,"eraAbbr");Ln("NNNN",0,0,"eraName");Ln("NNNNN",0,0,"eraNarrow");Ln("y",["y",1],"yo","eraYear");Ln("y",["yy",2],0,"eraYear");Ln("y",["yyy",3],0,"eraYear");Ln("y",["yyyy",4],0,"eraYear");vn("N",c1);vn("NN",c1);vn("NNN",c1);vn("NNNN",s5);vn("NNNNN",i5);Gr(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var s=n._locale.erasParse(t,r,n._strict);s?nr(n).era=s:nr(n).invalidEra=t});vn("y",Kc);vn("yy",Kc);vn("yyy",Kc);vn("yyyy",Kc);vn("yo",a5);Gr(["y","yy","yyy","yyyy"],ti);Gr(["yo"],function(t,e,n,r){var s;n._locale._eraYearOrdinalRegex&&(s=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[ti]=n._locale.eraYearOrdinalParse(t,s):e[ti]=parseInt(t,10)});function qO(t,e){var n,r,s,l=this._eras||bl("en")._eras;for(n=0,r=l.length;n<r;++n){switch(typeof l[n].since){case"string":s=Mt(l[n].since).startOf("day"),l[n].since=s.valueOf();break}switch(typeof l[n].until){case"undefined":l[n].until=1/0;break;case"string":s=Mt(l[n].until).startOf("day").valueOf(),l[n].until=s.valueOf();break}}return l}function JO(t,e,n){var r,s,l=this.eras(),c,d,h;for(t=t.toUpperCase(),r=0,s=l.length;r<s;++r)if(c=l[r].name.toUpperCase(),d=l[r].abbr.toUpperCase(),h=l[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(d===t)return l[r];break;case"NNNN":if(c===t)return l[r];break;case"NNNNN":if(h===t)return l[r];break}else if([c,d,h].indexOf(t)>=0)return l[r]}function XO(t,e){var n=t.since<=t.until?1:-1;return e===void 0?Mt(t.since).year():Mt(t.since).year()+(e-t.offset)*n}function KO(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function ZO(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function QO(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function e5(){var t,e,n,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=s[t].since<=s[t].until?1:-1,r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return(this.year()-Mt(s[t].since).year())*n+s[t].offset;return this.year()}function t5(t){return Cr(this,"_erasNameRegex")||u1.call(this),t?this._erasNameRegex:this._erasRegex}function n5(t){return Cr(this,"_erasAbbrRegex")||u1.call(this),t?this._erasAbbrRegex:this._erasRegex}function r5(t){return Cr(this,"_erasNarrowRegex")||u1.call(this),t?this._erasNarrowRegex:this._erasRegex}function c1(t,e){return e.erasAbbrRegex(t)}function s5(t,e){return e.erasNameRegex(t)}function i5(t,e){return e.erasNarrowRegex(t)}function a5(t,e){return e._eraYearOrdinalRegex||Kc}function u1(){var t=[],e=[],n=[],r=[],s,l,c,d,h,g=this.eras();for(s=0,l=g.length;s<l;++s)c=ul(g[s].name),d=ul(g[s].abbr),h=ul(g[s].narrow),e.push(c),t.push(d),n.push(h),r.push(c),r.push(d),r.push(h);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Ln(0,["gg",2],0,function(){return this.weekYear()%100});Ln(0,["GG",2],0,function(){return this.isoWeekYear()%100});function j0(t,e){Ln(0,[t,t.length],0,e)}j0("gggg","weekYear");j0("ggggg","weekYear");j0("GGGG","isoWeekYear");j0("GGGGG","isoWeekYear");vn("G",k0);vn("g",k0);vn("GG",ss,Ii);vn("gg",ss,Ii);vn("GGGG",Kx,Xx);vn("gggg",Kx,Xx);vn("GGGGG",w0,_0);vn("ggggg",w0,_0);Xd(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=pr(t)});Xd(["gg","GG"],function(t,e,n,r){e[r]=Mt.parseTwoDigitYear(t)});function l5(t){return Hk.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function o5(t){return Hk.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function c5(){return dl(this.year(),1,4)}function u5(){return dl(this.isoWeekYear(),1,4)}function d5(){var t=this.localeData()._week;return dl(this.year(),t.dow,t.doy)}function f5(){var t=this.localeData()._week;return dl(this.weekYear(),t.dow,t.doy)}function Hk(t,e,n,r,s){var l;return t==null?Td(this,r,s).year:(l=dl(t,r,s),e>l&&(e=l),h5.call(this,t,e,n,r,s))}function h5(t,e,n,r,s){var l=bk(t,e,n,r,s),c=Nd(l.year,0,l.dayOfYear);return this.year(c.getUTCFullYear()),this.month(c.getUTCMonth()),this.date(c.getUTCDate()),this}Ln("Q",0,"Qo","quarter");vn("Q",ck);Gr("Q",function(t,e){e[il]=(pr(t)-1)*3});function g5(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Ln("D",["DD",2],"Do","date");vn("D",ss,Zc);vn("DD",ss,Ii);vn("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Gr(["D","DD"],Ra);Gr("Do",function(t,e){e[Ra]=pr(t.match(ss)[0])});var Uk=Qc("Date",!0);Ln("DDD",["DDDD",3],"DDDo","dayOfYear");vn("DDD",S0);vn("DDDD",uk);Gr(["DDD","DDDD"],function(t,e,n){n._dayOfYear=pr(t)});function p5(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Ln("m",["mm",2],0,"minute");vn("m",ss,Zx);vn("mm",ss,Ii);Gr(["m","mm"],fa);var m5=Qc("Minutes",!1);Ln("s",["ss",2],0,"second");vn("s",ss,Zx);vn("ss",ss,Ii);Gr(["s","ss"],al);var x5=Qc("Seconds",!1);Ln("S",0,0,function(){return~~(this.millisecond()/100)});Ln(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Ln(0,["SSS",3],0,"millisecond");Ln(0,["SSSS",4],0,function(){return this.millisecond()*10});Ln(0,["SSSSS",5],0,function(){return this.millisecond()*100});Ln(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Ln(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Ln(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Ln(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});vn("S",S0,ck);vn("SS",S0,Ii);vn("SSS",S0,uk);var Kl,$k;for(Kl="SSSS";Kl.length<=9;Kl+="S")vn(Kl,Kc);function y5(t,e){e[Co]=pr(("0."+t)*1e3)}for(Kl="S";Kl.length<=9;Kl+="S")Gr(Kl,y5);$k=Qc("Milliseconds",!1);Ln("z",0,0,"zoneAbbr");Ln("zz",0,0,"zoneName");function v5(){return this._isUTC?"UTC":""}function b5(){return this._isUTC?"Coordinated Universal Time":""}var en=qd.prototype;en.add=fO;en.calendar=vO;en.clone=bO;en.diff=TO;en.endOf=PO;en.format=OO;en.from=DO;en.fromNow=RO;en.to=MO;en.toNow=LO;en.get=A3;en.invalidAt=YO;en.isAfter=_O;en.isBefore=SO;en.isBetween=wO;en.isSame=kO;en.isSameOrAfter=EO;en.isSameOrBefore=NO;en.isValid=WO;en.lang=Ik;en.locale=Lk;en.localeData=Pk;en.max=WA;en.min=$A;en.parsingFlags=VO;en.set=O3;en.startOf=IO;en.subtract=hO;en.toArray=HO;en.toObject=UO;en.toDate=BO;en.toISOString=jO;en.inspect=AO;typeof Symbol<"u"&&Symbol.for!=null&&(en[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});en.toJSON=$O;en.toString=CO;en.unix=zO;en.valueOf=FO;en.creationData=GO;en.eraName=KO;en.eraNarrow=ZO;en.eraAbbr=QO;en.eraYear=e5;en.year=hk;en.isLeapYear=j3;en.weekYear=l5;en.isoWeekYear=o5;en.quarter=en.quarters=g5;en.month=yk;en.daysInMonth=B3;en.week=en.weeks=q3;en.isoWeek=en.isoWeeks=J3;en.weeksInYear=d5;en.weeksInWeekYear=f5;en.isoWeeksInYear=c5;en.isoWeeksInISOWeekYear=u5;en.date=Uk;en.day=en.days=oA;en.weekday=cA;en.isoWeekday=uA;en.dayOfYear=p5;en.hour=en.hours=xA;en.minute=en.minutes=m5;en.second=en.seconds=x5;en.millisecond=en.milliseconds=$k;en.utcOffset=QA;en.utc=tO;en.local=nO;en.parseZone=rO;en.hasAlignedHourOffset=sO;en.isDST=iO;en.isLocal=lO;en.isUtcOffset=oO;en.isUtc=Ok;en.isUTC=Ok;en.zoneAbbr=v5;en.zoneName=b5;en.dates=Zi("dates accessor is deprecated. Use date instead.",Uk);en.months=Zi("months accessor is deprecated. Use month instead",yk);en.years=Zi("years accessor is deprecated. Use year instead",hk);en.zone=Zi("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",eO);en.isDSTShifted=Zi("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",aO);function _5(t){return ns(t*1e3)}function S5(){return ns.apply(null,arguments).parseZone()}function Wk(t){return t}var jr=Gx.prototype;jr.calendar=l3;jr.longDateFormat=d3;jr.invalidDate=h3;jr.ordinal=m3;jr.preparse=Wk;jr.postformat=Wk;jr.relativeTime=y3;jr.pastFuture=v3;jr.set=i3;jr.eras=qO;jr.erasParse=JO;jr.erasConvertYear=XO;jr.erasAbbrRegex=n5;jr.erasNameRegex=t5;jr.erasNarrowRegex=r5;jr.months=I3;jr.monthsShort=P3;jr.monthsParse=z3;jr.monthsRegex=U3;jr.monthsShortRegex=H3;jr.week=W3;jr.firstDayOfYear=G3;jr.firstDayOfWeek=Y3;jr.weekdays=rA;jr.weekdaysMin=iA;jr.weekdaysShort=sA;jr.weekdaysParse=lA;jr.weekdaysRegex=dA;jr.weekdaysShortRegex=fA;jr.weekdaysMinRegex=hA;jr.isPM=pA;jr.meridiem=yA;function Kh(t,e,n,r){var s=bl(),l=Ba().set(r,e);return s[n](l,t)}function Vk(t,e,n){if(ml(t)&&(e=t,t=void 0),t=t||"",e!=null)return Kh(t,e,n,"month");var r,s=[];for(r=0;r<12;r++)s[r]=Kh(t,r,n,"month");return s}function d1(t,e,n,r){typeof t=="boolean"?(ml(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,ml(e)&&(n=e,e=void 0),e=e||"");var s=bl(),l=t?s._week.dow:0,c,d=[];if(n!=null)return Kh(e,(n+l)%7,r,"day");for(c=0;c<7;c++)d[c]=Kh(e,(c+l)%7,r,"day");return d}function w5(t,e){return Vk(t,e,"months")}function k5(t,e){return Vk(t,e,"monthsShort")}function E5(t,e,n){return d1(t,e,n,"weekdays")}function N5(t,e,n){return d1(t,e,n,"weekdaysShort")}function T5(t,e,n){return d1(t,e,n,"weekdaysMin")}eo("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=pr(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});Mt.lang=Zi("moment.lang is deprecated. Use moment.locale instead.",eo);Mt.langData=Zi("moment.langData is deprecated. Use moment.localeData instead.",bl);var nl=Math.abs;function C5(){var t=this._data;return this._milliseconds=nl(this._milliseconds),this._days=nl(this._days),this._months=nl(this._months),t.milliseconds=nl(t.milliseconds),t.seconds=nl(t.seconds),t.minutes=nl(t.minutes),t.hours=nl(t.hours),t.months=nl(t.months),t.years=nl(t.years),this}function Yk(t,e,n,r){var s=ya(e,n);return t._milliseconds+=r*s._milliseconds,t._days+=r*s._days,t._months+=r*s._months,t._bubble()}function j5(t,e){return Yk(this,t,e,1)}function A5(t,e){return Yk(this,t,e,-1)}function H_(t){return t<0?Math.floor(t):Math.ceil(t)}function O5(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data,s,l,c,d,h;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=H_(dx(n)+e)*864e5,e=0,n=0),r.milliseconds=t%1e3,s=Ji(t/1e3),r.seconds=s%60,l=Ji(s/60),r.minutes=l%60,c=Ji(l/60),r.hours=c%24,e+=Ji(c/24),h=Ji(Gk(e)),n+=h,e-=H_(dx(h)),d=Ji(n/12),n%=12,r.days=e,r.months=n,r.years=d,this}function Gk(t){return t*4800/146097}function dx(t){return t*146097/4800}function D5(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if(t=Qi(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,n=this._months+Gk(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(dx(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function _l(t){return function(){return this.as(t)}}var qk=_l("ms"),R5=_l("s"),M5=_l("m"),L5=_l("h"),I5=_l("d"),P5=_l("w"),F5=_l("M"),z5=_l("Q"),B5=_l("y"),H5=qk;function U5(){return ya(this)}function $5(t){return t=Qi(t),this.isValid()?this[t+"s"]():NaN}function $o(t){return function(){return this.isValid()?this._data[t]:NaN}}var W5=$o("milliseconds"),V5=$o("seconds"),Y5=$o("minutes"),G5=$o("hours"),q5=$o("days"),J5=$o("months"),X5=$o("years");function K5(){return Ji(this.days()/7)}var rl=Math.round,Dc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Z5(t,e,n,r,s){return s.relativeTime(e||1,!!n,t,r)}function Q5(t,e,n,r){var s=ya(t).abs(),l=rl(s.as("s")),c=rl(s.as("m")),d=rl(s.as("h")),h=rl(s.as("d")),g=rl(s.as("M")),p=rl(s.as("w")),y=rl(s.as("y")),_=l<=n.ss&&["s",l]||l<n.s&&["ss",l]||c<=1&&["m"]||c<n.m&&["mm",c]||d<=1&&["h"]||d<n.h&&["hh",d]||h<=1&&["d"]||h<n.d&&["dd",h];return n.w!=null&&(_=_||p<=1&&["w"]||p<n.w&&["ww",p]),_=_||g<=1&&["M"]||g<n.M&&["MM",g]||y<=1&&["y"]||["yy",y],_[2]=e,_[3]=+t>0,_[4]=r,Z5.apply(null,_)}function eD(t){return t===void 0?rl:typeof t=="function"?(rl=t,!0):!1}function tD(t,e){return Dc[t]===void 0?!1:e===void 0?Dc[t]:(Dc[t]=e,t==="s"&&(Dc.ss=e-1),!0)}function nD(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Dc,s,l;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(r=Object.assign({},Dc,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),s=this.localeData(),l=Q5(this,!n,r,s),n&&(l=s.pastFuture(+this,l)),s.postformat(l)}var im=Math.abs;function wc(t){return(t>0)-(t<0)||+t}function A0(){if(!this.isValid())return this.localeData().invalidDate();var t=im(this._milliseconds)/1e3,e=im(this._days),n=im(this._months),r,s,l,c,d=this.asSeconds(),h,g,p,y;return d?(r=Ji(t/60),s=Ji(r/60),t%=60,r%=60,l=Ji(n/12),n%=12,c=t?t.toFixed(3).replace(/\.?0+$/,""):"",h=d<0?"-":"",g=wc(this._months)!==wc(d)?"-":"",p=wc(this._days)!==wc(d)?"-":"",y=wc(this._milliseconds)!==wc(d)?"-":"",h+"P"+(l?g+l+"Y":"")+(n?g+n+"M":"")+(e?p+e+"D":"")+(s||r||t?"T":"")+(s?y+s+"H":"")+(r?y+r+"M":"")+(t?y+c+"S":"")):"P0D"}var _r=C0.prototype;_r.isValid=JA;_r.abs=C5;_r.add=j5;_r.subtract=A5;_r.as=D5;_r.asMilliseconds=qk;_r.asSeconds=R5;_r.asMinutes=M5;_r.asHours=L5;_r.asDays=I5;_r.asWeeks=P5;_r.asMonths=F5;_r.asQuarters=z5;_r.asYears=B5;_r.valueOf=H5;_r._bubble=O5;_r.clone=U5;_r.get=$5;_r.milliseconds=W5;_r.seconds=V5;_r.minutes=Y5;_r.hours=G5;_r.days=q5;_r.weeks=K5;_r.months=J5;_r.years=X5;_r.humanize=nD;_r.toISOString=A0;_r.toString=A0;_r.toJSON=A0;_r.locale=Lk;_r.localeData=Pk;_r.toIsoString=Zi("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",A0);_r.lang=Ik;Ln("X",0,0,"unix");Ln("x",0,0,"valueOf");vn("x",k0);vn("X",w3);Gr("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Gr("x",function(t,e,n){n._d=new Date(pr(t))});//! moment.js
Mt.version="2.30.1";r3(ns);Mt.fn=en;Mt.min=VA;Mt.max=YA;Mt.now=GA;Mt.utc=Ba;Mt.unix=_5;Mt.months=w5;Mt.isDate=Gd;Mt.locale=eo;Mt.invalid=b0;Mt.duration=ya;Mt.isMoment=ma;Mt.weekdays=E5;Mt.parseZone=S5;Mt.localeData=bl;Mt.isDuration=zh;Mt.monthsShort=k5;Mt.weekdaysMin=T5;Mt.defineLocale=r1;Mt.updateLocale=SA;Mt.locales=wA;Mt.weekdaysShort=N5;Mt.normalizeUnits=Qi;Mt.relativeTimeRounding=eD;Mt.relativeTimeThreshold=tD;Mt.calendarFormat=yO;Mt.prototype=en;Mt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Zh={};Zh.version="0.18.5";var Jk=1252,rD=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Xk=function(t){rD.indexOf(t)!=-1&&(Jk=t)};function sD(){Xk(1252)}var jd=function(t){Xk(t)};function iD(){jd(1200),sD()}var dh=function(e){return String.fromCharCode(e)},U_=function(e){return String.fromCharCode(e)},Qh,Zl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ad(t){for(var e="",n=0,r=0,s=0,l=0,c=0,d=0,h=0,g=0;g<t.length;)n=t.charCodeAt(g++),l=n>>2,r=t.charCodeAt(g++),c=(n&3)<<4|r>>4,s=t.charCodeAt(g++),d=(r&15)<<2|s>>6,h=s&63,isNaN(r)?d=h=64:isNaN(s)&&(h=64),e+=Zl.charAt(l)+Zl.charAt(c)+Zl.charAt(d)+Zl.charAt(h);return e}function xl(t){var e="",n=0,r=0,s=0,l=0,c=0,d=0,h=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var g=0;g<t.length;)l=Zl.indexOf(t.charAt(g++)),c=Zl.indexOf(t.charAt(g++)),n=l<<2|c>>4,e+=String.fromCharCode(n),d=Zl.indexOf(t.charAt(g++)),r=(c&15)<<4|d>>2,d!==64&&(e+=String.fromCharCode(r)),h=Zl.indexOf(t.charAt(g++)),s=(d&3)<<6|h,h!==64&&(e+=String.fromCharCode(s));return e}var Rr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Sl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Mo(t){return Rr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function $_(t){return Rr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var da=function(e){return Rr?Sl(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function O0(t){if(typeof ArrayBuffer>"u")return da(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function Kd(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function aD(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Ys=Rr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Sl(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),s=0;for(e=0,n=0;e<t.length;n+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(l){return Array.isArray(l)?l:[].slice.call(l)}))};function lD(t){for(var e=[],n=0,r=t.length+250,s=Mo(t.length+255),l=0;l<t.length;++l){var c=t.charCodeAt(l);if(c<128)s[n++]=c;else if(c<2048)s[n++]=192|c>>6&31,s[n++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var d=t.charCodeAt(++l)&1023;s[n++]=240|c>>8&7,s[n++]=128|c>>2&63,s[n++]=128|d>>6&15|(c&3)<<4,s[n++]=128|d&63}else s[n++]=224|c>>12&15,s[n++]=128|c>>6&63,s[n++]=128|c&63;n>r&&(e.push(s.slice(0,n)),n=0,s=Mo(65535),r=65530)}return e.push(s.slice(0,n)),Ys(e)}var hd=/\u0000/g,fh=/[\u0001-\u0006]/g;function zc(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function ha(t,e){var n=""+t;return n.length>=e?n:hs("0",e-n.length)+n}function f1(t,e){var n=""+t;return n.length>=e?n:hs(" ",e-n.length)+n}function e0(t,e){var n=""+t;return n.length>=e?n:n+hs(" ",e-n.length)}function oD(t,e){var n=""+Math.round(t);return n.length>=e?n:hs("0",e-n.length)+n}function cD(t,e){var n=""+t;return n.length>=e?n:hs("0",e-n.length)+n}var W_=Math.pow(2,32);function kc(t,e){if(t>W_||t<-W_)return oD(t,e);var n=Math.round(t);return cD(n,e)}function t0(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var V_=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],am=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function uD(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var gs={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Y_={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},dD={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function n0(t,e,n){for(var r=t<0?-1:1,s=t*r,l=0,c=1,d=0,h=1,g=0,p=0,y=Math.floor(s);g<e&&(y=Math.floor(s),d=y*c+l,p=y*g+h,!(s-y<5e-8));)s=1/(s-y),l=c,c=d,h=g,g=p;if(p>e&&(g>e?(p=h,d=l):(p=g,d=c)),!n)return[0,r*d,p];var _=Math.floor(r*d/p);return[_,r*d-_*p,p]}function hh(t,e,n){if(t>2958465||t<0)return null;var r=t|0,s=Math.floor(86400*(t-r)),l=0,c=[],d={D:r,T:s,u:86400*(t-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),e&&e.date1904&&(r+=1462),d.u>.9999&&(d.u=0,++s==86400&&(d.T=s=0,++r,++d.D)),r===60)c=n?[1317,10,29]:[1900,2,29],l=3;else if(r===0)c=n?[1317,8,29]:[1900,1,0],l=6;else{r>60&&--r;var h=new Date(1900,0,1);h.setDate(h.getDate()+r-1),c=[h.getFullYear(),h.getMonth()+1,h.getDate()],l=h.getDay(),r<60&&(l=(l+6)%7),n&&(l=yD(h,c))}return d.y=c[0],d.m=c[1],d.d=c[2],d.S=s%60,s=Math.floor(s/60),d.M=s%60,s=Math.floor(s/60),d.H=s,d.q=l,d}var Kk=new Date(1899,11,31,0,0,0),fD=Kk.getTime(),hD=new Date(1900,2,1,0,0,0);function Zk(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=hD&&(n+=24*60*60*1e3),(n-(fD+(t.getTimezoneOffset()-Kk.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function h1(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function gD(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function pD(t){var e=t<0?12:11,n=h1(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function mD(t){var e=h1(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function xD(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=pD(t):e===10?n=t.toFixed(10).substr(0,12):n=mD(t),h1(gD(n.toUpperCase()))}function fx(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):xD(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return to(14,Zk(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function yD(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function vD(t,e,n,r){var s="",l=0,c=0,d=n.y,h,g=0;switch(t){case 98:d=n.y+543;case 121:switch(e.length){case 1:case 2:h=d%100,g=2;break;default:h=d%1e4,g=4;break}break;case 109:switch(e.length){case 1:case 2:h=n.m,g=e.length;break;case 3:return am[n.m-1][1];case 5:return am[n.m-1][0];default:return am[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:h=n.d,g=e.length;break;case 3:return V_[n.q][0];default:return V_[n.q][1]}break;case 104:switch(e.length){case 1:case 2:h=1+(n.H+11)%12,g=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:h=n.H,g=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:h=n.M,g=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?ha(n.S,e.length):(r>=2?c=r===3?1e3:100:c=r===1?10:1,l=Math.round(c*(n.S+n.u)),l>=60*c&&(l=0),e==="s"?l===0?"0":""+l/c:(s=ha(l,2+r),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":h=n.D*24+n.H;break;case"[m]":case"[mm]":h=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":h=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}g=e.length===3?1:2;break;case 101:h=d,g=1;break}var p=g>0?ha(h,g):"";return p}function Ql(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var Qk=/%/g;function bD(t,e,n){var r=e.replace(Qk,""),s=e.length-r.length;return fl(t,r,n*Math.pow(10,2*s))+hs("%",s)}function _D(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return fl(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function eE(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+eE(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var l=Math.floor(Math.log(e)*Math.LOG10E)%s;if(l<0&&(l+=s),n=(e/Math.pow(10,l)).toPrecision(r+1+(s+l)%s),n.indexOf("e")===-1){var c=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(c-n.length+l):n+="E+"+(c-l);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,h,g,p){return h+g+p.substr(0,(s+l)%s)+"."+p.substr(l)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var tE=/# (\?+)( ?)\/( ?)(\d+)/;function SD(t,e,n){var r=parseInt(t[4],10),s=Math.round(e*r),l=Math.floor(s/r),c=s-l*r,d=r;return n+(l===0?"":""+l)+" "+(c===0?hs(" ",t[1].length+1+t[4].length):f1(c,t[1].length)+t[2]+"/"+t[3]+ha(d,t[4].length))}function wD(t,e,n){return n+(e===0?"":""+e)+hs(" ",t[1].length+2+t[4].length)}var nE=/^#*0*\.([0#]+)/,rE=/\).*[0#]/,sE=/\(###\) ###\\?-####/;function li(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function G_(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function q_(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function kD(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function ED(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Yi(t,e,n){if(t.charCodeAt(0)===40&&!e.match(rE)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Yi("n",r,n):"("+Yi("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return _D(t,e,n);if(e.indexOf("%")!==-1)return bD(t,e,n);if(e.indexOf("E")!==-1)return eE(e,n);if(e.charCodeAt(0)===36)return"$"+Yi(t,e.substr(e.charAt(1)==" "?2:1),n);var s,l,c,d,h=Math.abs(n),g=n<0?"-":"";if(e.match(/^00+$/))return g+kc(h,e.length);if(e.match(/^[#?]+$/))return s=kc(n,0),s==="0"&&(s=""),s.length>e.length?s:li(e.substr(0,e.length-s.length))+s;if(l=e.match(tE))return SD(l,h,g);if(e.match(/^#+0+$/))return g+kc(h,e.length-e.indexOf("0"));if(l=e.match(nE))return s=G_(n,l[1].length).replace(/^([^\.]+)$/,"$1."+li(l[1])).replace(/\.$/,"."+li(l[1])).replace(/\.(\d*)$/,function(k,S){return"."+S+hs("0",li(l[1]).length-S.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),l=e.match(/^(0*)\.(#*)$/))return g+G_(h,l[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=e.match(/^#{1,3},##0(\.?)$/))return g+Ql(kc(h,0));if(l=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Yi(t,e,-n):Ql(""+(Math.floor(n)+kD(n,l[1].length)))+"."+ha(q_(n,l[1].length),l[1].length);if(l=e.match(/^#,#*,#0/))return Yi(t,e.replace(/^#,#*,/,""),n);if(l=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=zc(Yi(t,e.replace(/[\\-]/g,""),n)),c=0,zc(zc(e.replace(/\\/g,"")).replace(/[0#]/g,function(k){return c<s.length?s.charAt(c++):k==="0"?"0":""}));if(e.match(sE))return s=Yi(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var p="";if(l=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(l[4].length,7),d=n0(h,Math.pow(10,c)-1,!1),s=""+g,p=fl("n",l[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),s+=p+l[2]+"/"+l[3],p=e0(d[2],c),p.length<l[4].length&&(p=li(l[4].substr(l[4].length-p.length))+p),s+=p,s;if(l=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(l[1].length,l[4].length),7),d=n0(h,Math.pow(10,c)-1,!0),g+(d[0]||(d[1]?"":"0"))+" "+(d[1]?f1(d[1],c)+l[2]+"/"+l[3]+e0(d[2],c):hs(" ",2*c+1+l[2].length+l[3].length));if(l=e.match(/^[#0?]+$/))return s=kc(n,0),e.length<=s.length?s:li(e.substr(0,e.length-s.length))+s;if(l=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),c=s.indexOf(".");var y=e.indexOf(".")-c,_=e.length-s.length-y;return li(e.substr(0,y)+s+e.substr(e.length-_))}if(l=e.match(/^00,000\.([#0]*0)$/))return c=q_(n,l[1].length),n<0?"-"+Yi(t,e,-n):Ql(ED(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(k){return"00,"+(k.length<3?ha(0,3-k.length):"")+k})+"."+ha(c,l[1].length);switch(e){case"###,##0.00":return Yi(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var b=Ql(kc(h,0));return b!=="0"?g+b:"";case"###,###.00":return Yi(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Yi(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function ND(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return fl(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function TD(t,e,n){var r=e.replace(Qk,""),s=e.length-r.length;return fl(t,r,n*Math.pow(10,2*s))+hs("%",s)}function iE(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+iE(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var l=Math.floor(Math.log(e)*Math.LOG10E)%s;if(l<0&&(l+=s),n=(e/Math.pow(10,l)).toPrecision(r+1+(s+l)%s),!n.match(/[Ee]/)){var c=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(c-n.length+l):n+="E+"+(c-l),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,h,g,p){return h+g+p.substr(0,(s+l)%s)+"."+p.substr(l)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function ja(t,e,n){if(t.charCodeAt(0)===40&&!e.match(rE)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ja("n",r,n):"("+ja("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return ND(t,e,n);if(e.indexOf("%")!==-1)return TD(t,e,n);if(e.indexOf("E")!==-1)return iE(e,n);if(e.charCodeAt(0)===36)return"$"+ja(t,e.substr(e.charAt(1)==" "?2:1),n);var s,l,c,d,h=Math.abs(n),g=n<0?"-":"";if(e.match(/^00+$/))return g+ha(h,e.length);if(e.match(/^[#?]+$/))return s=""+n,n===0&&(s=""),s.length>e.length?s:li(e.substr(0,e.length-s.length))+s;if(l=e.match(tE))return wD(l,h,g);if(e.match(/^#+0+$/))return g+ha(h,e.length-e.indexOf("0"));if(l=e.match(nE))return s=(""+n).replace(/^([^\.]+)$/,"$1."+li(l[1])).replace(/\.$/,"."+li(l[1])),s=s.replace(/\.(\d*)$/,function(k,S){return"."+S+hs("0",li(l[1]).length-S.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),l=e.match(/^(0*)\.(#*)$/))return g+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=e.match(/^#{1,3},##0(\.?)$/))return g+Ql(""+h);if(l=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ja(t,e,-n):Ql(""+n)+"."+hs("0",l[1].length);if(l=e.match(/^#,#*,#0/))return ja(t,e.replace(/^#,#*,/,""),n);if(l=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=zc(ja(t,e.replace(/[\\-]/g,""),n)),c=0,zc(zc(e.replace(/\\/g,"")).replace(/[0#]/g,function(k){return c<s.length?s.charAt(c++):k==="0"?"0":""}));if(e.match(sE))return s=ja(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var p="";if(l=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(l[4].length,7),d=n0(h,Math.pow(10,c)-1,!1),s=""+g,p=fl("n",l[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),s+=p+l[2]+"/"+l[3],p=e0(d[2],c),p.length<l[4].length&&(p=li(l[4].substr(l[4].length-p.length))+p),s+=p,s;if(l=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(l[1].length,l[4].length),7),d=n0(h,Math.pow(10,c)-1,!0),g+(d[0]||(d[1]?"":"0"))+" "+(d[1]?f1(d[1],c)+l[2]+"/"+l[3]+e0(d[2],c):hs(" ",2*c+1+l[2].length+l[3].length));if(l=e.match(/^[#0?]+$/))return s=""+n,e.length<=s.length?s:li(e.substr(0,e.length-s.length))+s;if(l=e.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),c=s.indexOf(".");var y=e.indexOf(".")-c,_=e.length-s.length-y;return li(e.substr(0,y)+s+e.substr(e.length-_))}if(l=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+ja(t,e,-n):Ql(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(k){return"00,"+(k.length<3?ha(0,3-k.length):"")+k})+"."+ha(0,l[1].length);switch(e){case"###,###":case"##,###":case"#,###":var b=Ql(""+h);return b!=="0"?g+b:"";default:if(e.match(/\.[0#?]*$/))return ja(t,e.slice(0,e.lastIndexOf(".")),n)+li(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function fl(t,e,n){return(n|0)===n?ja(t,e,n):Yi(t,e,n)}function CD(t){for(var e=[],n=!1,r=0,s=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(s,r-s),s=r+1}if(e[e.length]=t.substr(s),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var aE=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function lE(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":t0(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(aE))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function jD(t,e,n,r){for(var s=[],l="",c=0,d="",h="t",g,p,y,_="H";c<t.length;)switch(d=t.charAt(c)){case"G":if(!t0(t,c))throw new Error("unrecognized character "+d+" in "+t);s[s.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";(y=t.charCodeAt(++c))!==34&&c<t.length;)l+=String.fromCharCode(y);s[s.length]={t:"t",v:l},++c;break;case"\\":var b=t.charAt(++c),k=b==="("||b===")"?b:"t";s[s.length]={t:k,v:b},++c;break;case"_":s[s.length]={t:"t",v:" "},c+=2;break;case"@":s[s.length]={t:"T",v:e},++c;break;case"B":case"b":if(t.charAt(c+1)==="1"||t.charAt(c+1)==="2"){if(g==null&&(g=hh(e,n,t.charAt(c+1)==="2"),g==null))return"";s[s.length]={t:"X",v:t.substr(c,2)},h=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||g==null&&(g=hh(e,n),g==null))return"";for(l=d;++c<t.length&&t.charAt(c).toLowerCase()===d;)l+=d;d==="m"&&h.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=_),s[s.length]={t:d,v:l},h=d;break;case"A":case"a":case"":var S={t:d,v:d};if(g==null&&(g=hh(e,n)),t.substr(c,3).toUpperCase()==="A/P"?(g!=null&&(S.v=g.H>=12?"P":"A"),S.t="T",_="h",c+=3):t.substr(c,5).toUpperCase()==="AM/PM"?(g!=null&&(S.v=g.H>=12?"PM":"AM"),S.t="T",c+=5,_="h"):t.substr(c,5).toUpperCase()==="/"?(g!=null&&(S.v=g.H>=12?"":""),S.t="T",c+=5,_="h"):(S.t="t",++c),g==null&&S.t==="T")return"";s[s.length]=S,h=d;break;case"[":for(l=d;t.charAt(c++)!=="]"&&c<t.length;)l+=t.charAt(c);if(l.slice(-1)!=="]")throw'unterminated "[" block: |'+l+"|";if(l.match(aE)){if(g==null&&(g=hh(e,n),g==null))return"";s[s.length]={t:"Z",v:l.toLowerCase()},h=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",lE(t)||(s[s.length]={t:"t",v:l}));break;case".":if(g!=null){for(l=d;++c<t.length&&(d=t.charAt(c))==="0";)l+=d;s[s.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<t.length&&"0#?.,E+-%".indexOf(d=t.charAt(c))>-1;)l+=d;s[s.length]={t:"n",v:l};break;case"?":for(l=d;t.charAt(++c)===d;)l+=d;s[s.length]={t:d,v:l},h=d;break;case"*":++c,(t.charAt(c)==" "||t.charAt(c)=="*")&&++c;break;case"(":case")":s[s.length]={t:r===1?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<t.length&&"0123456789".indexOf(t.charAt(++c))>-1;)l+=t.charAt(c);s[s.length]={t:"D",v:l};break;case" ":s[s.length]={t:d,v:d},++c;break;case"$":s[s.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+t);s[s.length]={t:"t",v:d},++c;break}var E=0,O=0,T;for(c=s.length-1,h="t";c>=0;--c)switch(s[c].t){case"h":case"H":s[c].t=_,h="h",E<1&&(E=1);break;case"s":(T=s[c].v.match(/\.0+$/))&&(O=Math.max(O,T[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":h=s[c].t;break;case"m":h==="s"&&(s[c].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&s[c].v.match(/[Hh]/)&&(E=1),E<2&&s[c].v.match(/[Mm]/)&&(E=2),E<3&&s[c].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M),g.M>=60&&(g.M=0,++g.H);break;case 2:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M);break}var D="",F;for(c=0;c<s.length;++c)switch(s[c].t){case"t":case"T":case" ":case"D":break;case"X":s[c].v="",s[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[c].v=vD(s[c].t.charCodeAt(0),s[c].v,g,O),s[c].t="t";break;case"n":case"?":for(F=c+1;s[F]!=null&&((d=s[F].t)==="?"||d==="D"||(d===" "||d==="t")&&s[F+1]!=null&&(s[F+1].t==="?"||s[F+1].t==="t"&&s[F+1].v==="/")||s[c].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(s[F].v==="/"||s[F].v===" "&&s[F+1]!=null&&s[F+1].t=="?"));)s[c].v+=s[F].v,s[F]={v:"",t:";"},++F;D+=s[c].v,c=F-1;break;case"G":s[c].t="t",s[c].v=fx(e,n);break}var Z="",K,L;if(D.length>0){D.charCodeAt(0)==40?(K=e<0&&D.charCodeAt(0)===45?-e:e,L=fl("n",D,K)):(K=e<0&&r>1?-e:e,L=fl("n",D,K),K<0&&s[0]&&s[0].t=="t"&&(L=L.substr(1),s[0].v="-"+s[0].v)),F=L.length-1;var Q=s.length;for(c=0;c<s.length;++c)if(s[c]!=null&&s[c].t!="t"&&s[c].v.indexOf(".")>-1){Q=c;break}var se=s.length;if(Q===s.length&&L.indexOf("E")===-1){for(c=s.length-1;c>=0;--c)s[c]==null||"n?".indexOf(s[c].t)===-1||(F>=s[c].v.length-1?(F-=s[c].v.length,s[c].v=L.substr(F+1,s[c].v.length)):F<0?s[c].v="":(s[c].v=L.substr(0,F+1),F=-1),s[c].t="t",se=c);F>=0&&se<s.length&&(s[se].v=L.substr(0,F+1)+s[se].v)}else if(Q!==s.length&&L.indexOf("E")===-1){for(F=L.indexOf(".")-1,c=Q;c>=0;--c)if(!(s[c]==null||"n?".indexOf(s[c].t)===-1)){for(p=s[c].v.indexOf(".")>-1&&c===Q?s[c].v.indexOf(".")-1:s[c].v.length-1,Z=s[c].v.substr(p+1);p>=0;--p)F>=0&&(s[c].v.charAt(p)==="0"||s[c].v.charAt(p)==="#")&&(Z=L.charAt(F--)+Z);s[c].v=Z,s[c].t="t",se=c}for(F>=0&&se<s.length&&(s[se].v=L.substr(0,F+1)+s[se].v),F=L.indexOf(".")+1,c=Q;c<s.length;++c)if(!(s[c]==null||"n?(".indexOf(s[c].t)===-1&&c!==Q)){for(p=s[c].v.indexOf(".")>-1&&c===Q?s[c].v.indexOf(".")+1:0,Z=s[c].v.substr(0,p);p<s[c].v.length;++p)F<L.length&&(Z+=L.charAt(F++));s[c].v=Z,s[c].t="t",se=c}}}for(c=0;c<s.length;++c)s[c]!=null&&"n?".indexOf(s[c].t)>-1&&(K=r>1&&e<0&&c>0&&s[c-1].v==="-"?-e:e,s[c].v=fl(s[c].t,s[c].v,K),s[c].t="t");var ce="";for(c=0;c!==s.length;++c)s[c]!=null&&(ce+=s[c].v);return ce}var J_=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function X_(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function AD(t,e){var n=CD(t),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var l=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,l];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var c=n[0].match(J_),d=n[1].match(J_);return X_(e,c)?[r,n[0]]:X_(e,d)?[r,n[1]]:[r,n[c!=null&&d!=null?2:1]]}return[r,l]}function to(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:gs)[t],r==null&&(r=n.table&&n.table[Y_[t]]||gs[Y_[t]]),r==null&&(r=dD[t]||"General");break}if(t0(r,0))return fx(e,n);e instanceof Date&&(e=Zk(e,n.date1904));var s=AD(r,e);if(t0(s[1]))return fx(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return jD(s[1],e,n,s[0])}function oE(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(gs[n]==null){e<0&&(e=n);continue}if(gs[n]==t){e=n;break}}e<0&&(e=391)}return gs[e]=t,e}function D0(t){for(var e=0;e!=392;++e)t[e]!==void 0&&oE(t[e],e)}function R0(){gs=uD()}var cE=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function OD(t){var e=typeof t=="number"?gs[t]:t;return e=e.replace(cE,"(\\d+)"),new RegExp("^"+e+"$")}function DD(t,e,n){var r=-1,s=-1,l=-1,c=-1,d=-1,h=-1;(e.match(cE)||[]).forEach(function(y,_){var b=parseInt(n[_+1],10);switch(y.toLowerCase().charAt(0)){case"y":r=b;break;case"d":l=b;break;case"h":c=b;break;case"s":h=b;break;case"m":c>=0?d=b:s=b;break}}),h>=0&&d==-1&&s>=0&&(d=s,s=-1);var g=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(l>=1?l:1)).slice(-2);g.length==7&&(g="0"+g),g.length==8&&(g="20"+g);var p=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return c==-1&&d==-1&&h==-1?g:r==-1&&s==-1&&l==-1?p:g+"T"+p}var RD=function(){var t={};t.version="1.2.0";function e(){for(var L=0,Q=new Array(256),se=0;se!=256;++se)L=se,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,Q[se]=L;return typeof Int32Array<"u"?new Int32Array(Q):Q}var n=e();function r(L){var Q=0,se=0,ce=0,ye=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ce=0;ce!=256;++ce)ye[ce]=L[ce];for(ce=0;ce!=256;++ce)for(se=L[ce],Q=256+ce;Q<4096;Q+=256)se=ye[Q]=se>>>8^L[se&255];var te=[];for(ce=1;ce!=16;++ce)te[ce-1]=typeof Int32Array<"u"?ye.subarray(ce*256,ce*256+256):ye.slice(ce*256,ce*256+256);return te}var s=r(n),l=s[0],c=s[1],d=s[2],h=s[3],g=s[4],p=s[5],y=s[6],_=s[7],b=s[8],k=s[9],S=s[10],E=s[11],O=s[12],T=s[13],D=s[14];function F(L,Q){for(var se=Q^-1,ce=0,ye=L.length;ce<ye;)se=se>>>8^n[(se^L.charCodeAt(ce++))&255];return~se}function Z(L,Q){for(var se=Q^-1,ce=L.length-15,ye=0;ye<ce;)se=D[L[ye++]^se&255]^T[L[ye++]^se>>8&255]^O[L[ye++]^se>>16&255]^E[L[ye++]^se>>>24]^S[L[ye++]]^k[L[ye++]]^b[L[ye++]]^_[L[ye++]]^y[L[ye++]]^p[L[ye++]]^g[L[ye++]]^h[L[ye++]]^d[L[ye++]]^c[L[ye++]]^l[L[ye++]]^n[L[ye++]];for(ce+=15;ye<ce;)se=se>>>8^n[(se^L[ye++])&255];return~se}function K(L,Q){for(var se=Q^-1,ce=0,ye=L.length,te=0,xe=0;ce<ye;)te=L.charCodeAt(ce++),te<128?se=se>>>8^n[(se^te)&255]:te<2048?(se=se>>>8^n[(se^(192|te>>6&31))&255],se=se>>>8^n[(se^(128|te&63))&255]):te>=55296&&te<57344?(te=(te&1023)+64,xe=L.charCodeAt(ce++)&1023,se=se>>>8^n[(se^(240|te>>8&7))&255],se=se>>>8^n[(se^(128|te>>2&63))&255],se=se>>>8^n[(se^(128|xe>>6&15|(te&3)<<4))&255],se=se>>>8^n[(se^(128|xe&63))&255]):(se=se>>>8^n[(se^(224|te>>12&15))&255],se=se>>>8^n[(se^(128|te>>6&63))&255],se=se>>>8^n[(se^(128|te&63))&255]);return~se}return t.table=n,t.bstr=F,t.buf=Z,t.str=K,t}(),Yr=function(){var e={};e.version="1.2.1";function n(A,G){for(var U=A.split("/"),J=G.split("/"),Y=0,X=0,we=Math.min(U.length,J.length);Y<we;++Y){if(X=U[Y].length-J[Y].length)return X;if(U[Y]!=J[Y])return U[Y]<J[Y]?-1:1}return U.length-J.length}function r(A){if(A.charAt(A.length-1)=="/")return A.slice(0,-1).indexOf("/")===-1?A:r(A.slice(0,-1));var G=A.lastIndexOf("/");return G===-1?A:A.slice(0,G+1)}function s(A){if(A.charAt(A.length-1)=="/")return s(A.slice(0,-1));var G=A.lastIndexOf("/");return G===-1?A:A.slice(G+1)}function l(A,G){typeof G=="string"&&(G=new Date(G));var U=G.getHours();U=U<<6|G.getMinutes(),U=U<<5|G.getSeconds()>>>1,A.write_shift(2,U);var J=G.getFullYear()-1980;J=J<<4|G.getMonth()+1,J=J<<5|G.getDate(),A.write_shift(2,J)}function c(A){var G=A.read_shift(2)&65535,U=A.read_shift(2)&65535,J=new Date,Y=U&31;U>>>=5;var X=U&15;U>>>=4,J.setMilliseconds(0),J.setFullYear(U+1980),J.setMonth(X-1),J.setDate(Y);var we=G&31;G>>>=5;var je=G&63;return G>>>=6,J.setHours(G),J.setMinutes(je),J.setSeconds(we<<1),J}function d(A){Di(A,0);for(var G={},U=0;A.l<=A.length-4;){var J=A.read_shift(2),Y=A.read_shift(2),X=A.l+Y,we={};switch(J){case 21589:U=A.read_shift(1),U&1&&(we.mtime=A.read_shift(4)),Y>5&&(U&2&&(we.atime=A.read_shift(4)),U&4&&(we.ctime=A.read_shift(4))),we.mtime&&(we.mt=new Date(we.mtime*1e3));break}A.l=X,G[J]=we}return G}var h;function g(){return h||(h={})}function p(A,G){if(A[0]==80&&A[1]==75)return ct(A,G);if((A[0]|32)==109&&(A[1]|32)==105)return re(A,G);if(A.length<512)throw new Error("CFB file size "+A.length+" < 512");var U=3,J=512,Y=0,X=0,we=0,je=0,_e=0,Ee=[],Re=A.slice(0,512);Di(Re,0);var gt=y(Re);switch(U=gt[0],U){case 3:J=512;break;case 4:J=4096;break;case 0:if(gt[1]==0)return ct(A,G);default:throw new Error("Major Version: Expected 3 or 4 saw "+U)}J!==512&&(Re=A.slice(0,J),Di(Re,28));var Nt=A.slice(0,J);_(Re,U);var Ut=Re.read_shift(4,"i");if(U===3&&Ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ut);Re.l+=4,we=Re.read_shift(4,"i"),Re.l+=4,Re.chk("00100000","Mini Stream Cutoff Size: "),je=Re.read_shift(4,"i"),Y=Re.read_shift(4,"i"),_e=Re.read_shift(4,"i"),X=Re.read_shift(4,"i");for(var vt=-1,$t=0;$t<109&&(vt=Re.read_shift(4,"i"),!(vt<0));++$t)Ee[$t]=vt;var fn=b(A,J);E(_e,X,fn,J,Ee);var Sn=T(fn,we,Ee,J);Sn[we].name="!Directory",Y>0&&je!==xe&&(Sn[je].name="!MiniFAT"),Sn[Ee[0]].name="!FAT",Sn.fat_addrs=Ee,Sn.ssz=J;var mn={},Ot=[],ur=[],Mr=[];D(we,Sn,fn,Ot,Y,mn,ur,je),k(ur,Mr,Ot),Ot.shift();var Jn={FileIndex:ur,FullPaths:Mr};return G&&G.raw&&(Jn.raw={header:Nt,sectors:fn}),Jn}function y(A){if(A[A.l]==80&&A[A.l+1]==75)return[0,0];A.chk(Ce,"Header Signature: "),A.l+=16;var G=A.read_shift(2,"u");return[A.read_shift(2,"u"),G]}function _(A,G){var U=9;switch(A.l+=2,U=A.read_shift(2)){case 9:if(G!=3)throw new Error("Sector Shift: Expected 9 saw "+U);break;case 12:if(G!=4)throw new Error("Sector Shift: Expected 12 saw "+U);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+U)}A.chk("0600","Mini Sector Shift: "),A.chk("000000000000","Reserved: ")}function b(A,G){for(var U=Math.ceil(A.length/G)-1,J=[],Y=1;Y<U;++Y)J[Y-1]=A.slice(Y*G,(Y+1)*G);return J[U-1]=A.slice(U*G),J}function k(A,G,U){for(var J=0,Y=0,X=0,we=0,je=0,_e=U.length,Ee=[],Re=[];J<_e;++J)Ee[J]=Re[J]=J,G[J]=U[J];for(;je<Re.length;++je)J=Re[je],Y=A[J].L,X=A[J].R,we=A[J].C,Ee[J]===J&&(Y!==-1&&Ee[Y]!==Y&&(Ee[J]=Ee[Y]),X!==-1&&Ee[X]!==X&&(Ee[J]=Ee[X])),we!==-1&&(Ee[we]=J),Y!==-1&&J!=Ee[J]&&(Ee[Y]=Ee[J],Re.lastIndexOf(Y)<je&&Re.push(Y)),X!==-1&&J!=Ee[J]&&(Ee[X]=Ee[J],Re.lastIndexOf(X)<je&&Re.push(X));for(J=1;J<_e;++J)Ee[J]===J&&(X!==-1&&Ee[X]!==X?Ee[J]=Ee[X]:Y!==-1&&Ee[Y]!==Y&&(Ee[J]=Ee[Y]));for(J=1;J<_e;++J)if(A[J].type!==0){if(je=J,je!=Ee[je])do je=Ee[je],G[J]=G[je]+"/"+G[J];while(je!==0&&Ee[je]!==-1&&je!=Ee[je]);Ee[J]=-1}for(G[0]+="/",J=1;J<_e;++J)A[J].type!==2&&(G[J]+="/")}function S(A,G,U){for(var J=A.start,Y=A.size,X=[],we=J;U&&Y>0&&we>=0;)X.push(G.slice(we*te,we*te+te)),Y-=te,we=To(U,we*4);return X.length===0?ut(0):Ys(X).slice(0,A.size)}function E(A,G,U,J,Y){var X=xe;if(A===xe){if(G!==0)throw new Error("DIFAT chain shorter than expected")}else if(A!==-1){var we=U[A],je=(J>>>2)-1;if(!we)return;for(var _e=0;_e<je&&(X=To(we,_e*4))!==xe;++_e)Y.push(X);E(To(we,J-4),G-1,U,J,Y)}}function O(A,G,U,J,Y){var X=[],we=[];Y||(Y=[]);var je=J-1,_e=0,Ee=0;for(_e=G;_e>=0;){Y[_e]=!0,X[X.length]=_e,we.push(A[_e]);var Re=U[Math.floor(_e*4/J)];if(Ee=_e*4&je,J<4+Ee)throw new Error("FAT boundary crossed: "+_e+" 4 "+J);if(!A[Re])break;_e=To(A[Re],Ee)}return{nodes:X,data:s2([we])}}function T(A,G,U,J){var Y=A.length,X=[],we=[],je=[],_e=[],Ee=J-1,Re=0,gt=0,Nt=0,Ut=0;for(Re=0;Re<Y;++Re)if(je=[],Nt=Re+G,Nt>=Y&&(Nt-=Y),!we[Nt]){_e=[];var vt=[];for(gt=Nt;gt>=0;){vt[gt]=!0,we[gt]=!0,je[je.length]=gt,_e.push(A[gt]);var $t=U[Math.floor(gt*4/J)];if(Ut=gt*4&Ee,J<4+Ut)throw new Error("FAT boundary crossed: "+gt+" 4 "+J);if(!A[$t]||(gt=To(A[$t],Ut),vt[gt]))break}X[Nt]={nodes:je,data:s2([_e])}}return X}function D(A,G,U,J,Y,X,we,je){for(var _e=0,Ee=J.length?2:0,Re=G[A].data,gt=0,Nt=0,Ut;gt<Re.length;gt+=128){var vt=Re.slice(gt,gt+128);Di(vt,64),Nt=vt.read_shift(2),Ut=y1(vt,0,Nt-Ee),J.push(Ut);var $t={name:Ut,type:vt.read_shift(1),color:vt.read_shift(1),L:vt.read_shift(4,"i"),R:vt.read_shift(4,"i"),C:vt.read_shift(4,"i"),clsid:vt.read_shift(16),state:vt.read_shift(4,"i"),start:0,size:0},fn=vt.read_shift(2)+vt.read_shift(2)+vt.read_shift(2)+vt.read_shift(2);fn!==0&&($t.ct=F(vt,vt.l-8));var Sn=vt.read_shift(2)+vt.read_shift(2)+vt.read_shift(2)+vt.read_shift(2);Sn!==0&&($t.mt=F(vt,vt.l-8)),$t.start=vt.read_shift(4,"i"),$t.size=vt.read_shift(4,"i"),$t.size<0&&$t.start<0&&($t.size=$t.type=0,$t.start=xe,$t.name=""),$t.type===5?(_e=$t.start,Y>0&&_e!==xe&&(G[_e].name="!StreamData")):$t.size>=4096?($t.storage="fat",G[$t.start]===void 0&&(G[$t.start]=O(U,$t.start,G.fat_addrs,G.ssz)),G[$t.start].name=$t.name,$t.content=G[$t.start].data.slice(0,$t.size)):($t.storage="minifat",$t.size<0?$t.size=0:_e!==xe&&$t.start!==xe&&G[_e]&&($t.content=S($t,G[_e].data,(G[je]||{}).data))),$t.content&&Di($t.content,0),X[Ut]=$t,we.push($t)}}function F(A,G){return new Date((Mi(A,G+4)/1e7*Math.pow(2,32)+Mi(A,G)/1e7-11644473600)*1e3)}function Z(A,G){return g(),p(h.readFileSync(A),G)}function K(A,G){var U=G&&G.type;switch(U||Rr&&Buffer.isBuffer(A)&&(U="buffer"),U||"base64"){case"file":return Z(A,G);case"base64":return p(da(xl(A)),G);case"binary":return p(da(A),G)}return p(A,G)}function L(A,G){var U=G||{},J=U.root||"Root Entry";if(A.FullPaths||(A.FullPaths=[]),A.FileIndex||(A.FileIndex=[]),A.FullPaths.length!==A.FileIndex.length)throw new Error("inconsistent CFB structure");A.FullPaths.length===0&&(A.FullPaths[0]=J+"/",A.FileIndex[0]={name:J,type:5}),U.CLSID&&(A.FileIndex[0].clsid=U.CLSID),Q(A)}function Q(A){var G="Sh33tJ5";if(!Yr.find(A,"/"+G)){var U=ut(4);U[0]=55,U[1]=U[3]=50,U[2]=54,A.FileIndex.push({name:G,type:2,content:U,size:4,L:69,R:69,C:69}),A.FullPaths.push(A.FullPaths[0]+G),se(A)}}function se(A,G){L(A);for(var U=!1,J=!1,Y=A.FullPaths.length-1;Y>=0;--Y){var X=A.FileIndex[Y];switch(X.type){case 0:J?U=!0:(A.FileIndex.pop(),A.FullPaths.pop());break;case 1:case 2:case 5:J=!0,isNaN(X.R*X.L*X.C)&&(U=!0),X.R>-1&&X.L>-1&&X.R==X.L&&(U=!0);break;default:U=!0;break}}if(!(!U&&!G)){var we=new Date(1987,1,19),je=0,_e=Object.create?Object.create(null):{},Ee=[];for(Y=0;Y<A.FullPaths.length;++Y)_e[A.FullPaths[Y]]=!0,A.FileIndex[Y].type!==0&&Ee.push([A.FullPaths[Y],A.FileIndex[Y]]);for(Y=0;Y<Ee.length;++Y){var Re=r(Ee[Y][0]);J=_e[Re],J||(Ee.push([Re,{name:s(Re).replace("/",""),type:1,clsid:le,ct:we,mt:we,content:null}]),_e[Re]=!0)}for(Ee.sort(function(Ut,vt){return n(Ut[0],vt[0])}),A.FullPaths=[],A.FileIndex=[],Y=0;Y<Ee.length;++Y)A.FullPaths[Y]=Ee[Y][0],A.FileIndex[Y]=Ee[Y][1];for(Y=0;Y<Ee.length;++Y){var gt=A.FileIndex[Y],Nt=A.FullPaths[Y];if(gt.name=s(Nt).replace("/",""),gt.L=gt.R=gt.C=-(gt.color=1),gt.size=gt.content?gt.content.length:0,gt.start=0,gt.clsid=gt.clsid||le,Y===0)gt.C=Ee.length>1?1:-1,gt.size=0,gt.type=5;else if(Nt.slice(-1)=="/"){for(je=Y+1;je<Ee.length&&r(A.FullPaths[je])!=Nt;++je);for(gt.C=je>=Ee.length?-1:je,je=Y+1;je<Ee.length&&r(A.FullPaths[je])!=r(Nt);++je);gt.R=je>=Ee.length?-1:je,gt.type=1}else r(A.FullPaths[Y+1]||"")==r(Nt)&&(gt.R=Y+1),gt.type=2}}}function ce(A,G){var U=G||{};if(U.fileType=="mad")return Ae(A,U);switch(se(A),U.fileType){case"zip":return Xt(A,U)}var J=function(Ut){for(var vt=0,$t=0,fn=0;fn<Ut.FileIndex.length;++fn){var Sn=Ut.FileIndex[fn];if(Sn.content){var mn=Sn.content.length;mn>0&&(mn<4096?vt+=mn+63>>6:$t+=mn+511>>9)}}for(var Ot=Ut.FullPaths.length+3>>2,ur=vt+7>>3,Mr=vt+127>>7,Jn=ur+$t+Ot+Mr,ar=Jn+127>>7,Lr=ar<=109?0:Math.ceil((ar-109)/127);Jn+ar+Lr+127>>7>ar;)Lr=++ar<=109?0:Math.ceil((ar-109)/127);var er=[1,Lr,ar,Mr,Ot,$t,vt,0];return Ut.FileIndex[0].size=vt<<6,er[7]=(Ut.FileIndex[0].start=er[0]+er[1]+er[2]+er[3]+er[4]+er[5])+(er[6]+7>>3),er}(A),Y=ut(J[7]<<9),X=0,we=0;{for(X=0;X<8;++X)Y.write_shift(1,at[X]);for(X=0;X<8;++X)Y.write_shift(2,0);for(Y.write_shift(2,62),Y.write_shift(2,3),Y.write_shift(2,65534),Y.write_shift(2,9),Y.write_shift(2,6),X=0;X<3;++X)Y.write_shift(2,0);for(Y.write_shift(4,0),Y.write_shift(4,J[2]),Y.write_shift(4,J[0]+J[1]+J[2]+J[3]-1),Y.write_shift(4,0),Y.write_shift(4,4096),Y.write_shift(4,J[3]?J[0]+J[1]+J[2]-1:xe),Y.write_shift(4,J[3]),Y.write_shift(-4,J[1]?J[0]-1:xe),Y.write_shift(4,J[1]),X=0;X<109;++X)Y.write_shift(-4,X<J[2]?J[1]+X:-1)}if(J[1])for(we=0;we<J[1];++we){for(;X<236+we*127;++X)Y.write_shift(-4,X<J[2]?J[1]+X:-1);Y.write_shift(-4,we===J[1]-1?xe:we+1)}var je=function(Ut){for(we+=Ut;X<we-1;++X)Y.write_shift(-4,X+1);Ut&&(++X,Y.write_shift(-4,xe))};for(we=X=0,we+=J[1];X<we;++X)Y.write_shift(-4,Ve.DIFSECT);for(we+=J[2];X<we;++X)Y.write_shift(-4,Ve.FATSECT);je(J[3]),je(J[4]);for(var _e=0,Ee=0,Re=A.FileIndex[0];_e<A.FileIndex.length;++_e)Re=A.FileIndex[_e],Re.content&&(Ee=Re.content.length,!(Ee<4096)&&(Re.start=we,je(Ee+511>>9)));for(je(J[6]+7>>3);Y.l&511;)Y.write_shift(-4,Ve.ENDOFCHAIN);for(we=X=0,_e=0;_e<A.FileIndex.length;++_e)Re=A.FileIndex[_e],Re.content&&(Ee=Re.content.length,!(!Ee||Ee>=4096)&&(Re.start=we,je(Ee+63>>6)));for(;Y.l&511;)Y.write_shift(-4,Ve.ENDOFCHAIN);for(X=0;X<J[4]<<2;++X){var gt=A.FullPaths[X];if(!gt||gt.length===0){for(_e=0;_e<17;++_e)Y.write_shift(4,0);for(_e=0;_e<3;++_e)Y.write_shift(4,-1);for(_e=0;_e<12;++_e)Y.write_shift(4,0);continue}Re=A.FileIndex[X],X===0&&(Re.start=Re.size?Re.start-1:xe);var Nt=X===0&&U.root||Re.name;if(Ee=2*(Nt.length+1),Y.write_shift(64,Nt,"utf16le"),Y.write_shift(2,Ee),Y.write_shift(1,Re.type),Y.write_shift(1,Re.color),Y.write_shift(-4,Re.L),Y.write_shift(-4,Re.R),Y.write_shift(-4,Re.C),Re.clsid)Y.write_shift(16,Re.clsid,"hex");else for(_e=0;_e<4;++_e)Y.write_shift(4,0);Y.write_shift(4,Re.state||0),Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(4,Re.start),Y.write_shift(4,Re.size),Y.write_shift(4,0)}for(X=1;X<A.FileIndex.length;++X)if(Re=A.FileIndex[X],Re.size>=4096)if(Y.l=Re.start+1<<9,Rr&&Buffer.isBuffer(Re.content))Re.content.copy(Y,Y.l,0,Re.size),Y.l+=Re.size+511&-512;else{for(_e=0;_e<Re.size;++_e)Y.write_shift(1,Re.content[_e]);for(;_e&511;++_e)Y.write_shift(1,0)}for(X=1;X<A.FileIndex.length;++X)if(Re=A.FileIndex[X],Re.size>0&&Re.size<4096)if(Rr&&Buffer.isBuffer(Re.content))Re.content.copy(Y,Y.l,0,Re.size),Y.l+=Re.size+63&-64;else{for(_e=0;_e<Re.size;++_e)Y.write_shift(1,Re.content[_e]);for(;_e&63;++_e)Y.write_shift(1,0)}if(Rr)Y.l=Y.length;else for(;Y.l<Y.length;)Y.write_shift(1,0);return Y}function ye(A,G){var U=A.FullPaths.map(function(_e){return _e.toUpperCase()}),J=U.map(function(_e){var Ee=_e.split("/");return Ee[Ee.length-(_e.slice(-1)=="/"?2:1)]}),Y=!1;G.charCodeAt(0)===47?(Y=!0,G=U[0].slice(0,-1)+G):Y=G.indexOf("/")!==-1;var X=G.toUpperCase(),we=Y===!0?U.indexOf(X):J.indexOf(X);if(we!==-1)return A.FileIndex[we];var je=!X.match(fh);for(X=X.replace(hd,""),je&&(X=X.replace(fh,"!")),we=0;we<U.length;++we)if((je?U[we].replace(fh,"!"):U[we]).replace(hd,"")==X||(je?J[we].replace(fh,"!"):J[we]).replace(hd,"")==X)return A.FileIndex[we];return null}var te=64,xe=-2,Ce="d0cf11e0a1b11ae1",at=[208,207,17,224,161,177,26,225],le="00000000000000000000000000000000",Ve={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:xe,FREESECT:-1,HEADER_SIGNATURE:Ce,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:le,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ue(A,G,U){g();var J=ce(A,U);h.writeFileSync(G,J)}function Ze(A){for(var G=new Array(A.length),U=0;U<A.length;++U)G[U]=String.fromCharCode(A[U]);return G.join("")}function M(A,G){var U=ce(A,G);switch(G&&G.type||"buffer"){case"file":return g(),h.writeFileSync(G.filename,U),U;case"binary":return typeof U=="string"?U:Ze(U);case"base64":return Ad(typeof U=="string"?U:Ze(U));case"buffer":if(Rr)return Buffer.isBuffer(U)?U:Sl(U);case"array":return typeof U=="string"?da(U):U}return U}var oe;function P(A){try{var G=A.InflateRaw,U=new G;if(U._processChunk(new Uint8Array([3,0]),U._finishFlushFlag),U.bytesRead)oe=A;else throw new Error("zlib does not expose bytesRead")}catch(J){console.error("cannot use native zlib: "+(J.message||J))}}function B(A,G){if(!oe)return Vt(A,G);var U=oe.InflateRaw,J=new U,Y=J._processChunk(A.slice(A.l),J._finishFlushFlag);return A.l+=J.bytesRead,Y}function j(A){return oe?oe.deflateRawSync(A):ie(A)}var V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],lt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function et(A){var G=(A<<1|A<<11)&139536|(A<<5|A<<15)&558144;return(G>>16|G>>8|G)&255}for(var ht=typeof Uint8Array<"u",At=ht?new Uint8Array(256):[],xn=0;xn<256;++xn)At[xn]=et(xn);function Bt(A,G){var U=At[A&255];return G<=8?U>>>8-G:(U=U<<8|At[A>>8&255],G<=16?U>>>16-G:(U=U<<8|At[A>>16&255],U>>>24-G))}function Kt(A,G){var U=G&7,J=G>>>3;return(A[J]|(U<=6?0:A[J+1]<<8))>>>U&3}function tn(A,G){var U=G&7,J=G>>>3;return(A[J]|(U<=5?0:A[J+1]<<8))>>>U&7}function Hn(A,G){var U=G&7,J=G>>>3;return(A[J]|(U<=4?0:A[J+1]<<8))>>>U&15}function sn(A,G){var U=G&7,J=G>>>3;return(A[J]|(U<=3?0:A[J+1]<<8))>>>U&31}function He(A,G){var U=G&7,J=G>>>3;return(A[J]|(U<=1?0:A[J+1]<<8))>>>U&127}function Dn(A,G,U){var J=G&7,Y=G>>>3,X=(1<<U)-1,we=A[Y]>>>J;return U<8-J||(we|=A[Y+1]<<8-J,U<16-J)||(we|=A[Y+2]<<16-J,U<24-J)||(we|=A[Y+3]<<24-J),we&X}function Ht(A,G,U){var J=G&7,Y=G>>>3;return J<=5?A[Y]|=(U&7)<<J:(A[Y]|=U<<J&255,A[Y+1]=(U&7)>>8-J),G+3}function yt(A,G,U){var J=G&7,Y=G>>>3;return U=(U&1)<<J,A[Y]|=U,G+1}function dn(A,G,U){var J=G&7,Y=G>>>3;return U<<=J,A[Y]|=U&255,U>>>=8,A[Y+1]=U,G+8}function Wt(A,G,U){var J=G&7,Y=G>>>3;return U<<=J,A[Y]|=U&255,U>>>=8,A[Y+1]=U&255,A[Y+2]=U>>>8,G+16}function an(A,G){var U=A.length,J=2*U>G?2*U:G+5,Y=0;if(U>=G)return A;if(Rr){var X=$_(J);if(A.copy)A.copy(X);else for(;Y<A.length;++Y)X[Y]=A[Y];return X}else if(ht){var we=new Uint8Array(J);if(we.set)we.set(A);else for(;Y<U;++Y)we[Y]=A[Y];return we}return A.length=J,A}function Un(A){for(var G=new Array(A),U=0;U<A;++U)G[U]=0;return G}function Cn(A,G,U){var J=1,Y=0,X=0,we=0,je=0,_e=A.length,Ee=ht?new Uint16Array(32):Un(32);for(X=0;X<32;++X)Ee[X]=0;for(X=_e;X<U;++X)A[X]=0;_e=A.length;var Re=ht?new Uint16Array(_e):Un(_e);for(X=0;X<_e;++X)Ee[Y=A[X]]++,J<Y&&(J=Y),Re[X]=0;for(Ee[0]=0,X=1;X<=J;++X)Ee[X+16]=je=je+Ee[X-1]<<1;for(X=0;X<_e;++X)je=A[X],je!=0&&(Re[X]=Ee[je+16]++);var gt=0;for(X=0;X<_e;++X)if(gt=A[X],gt!=0)for(je=Bt(Re[X],J)>>J-gt,we=(1<<J+4-gt)-1;we>=0;--we)G[je|we<<gt]=gt&15|X<<4;return J}var Qn=ht?new Uint16Array(512):Un(512),me=ht?new Uint16Array(32):Un(32);if(!ht){for(var We=0;We<512;++We)Qn[We]=0;for(We=0;We<32;++We)me[We]=0}(function(){for(var A=[],G=0;G<32;G++)A.push(5);Cn(A,me,32);var U=[];for(G=0;G<=143;G++)U.push(8);for(;G<=255;G++)U.push(9);for(;G<=279;G++)U.push(7);for(;G<=287;G++)U.push(8);Cn(U,Qn,288)})();var Ge=function(){for(var G=ht?new Uint8Array(32768):[],U=0,J=0;U<lt.length-1;++U)for(;J<lt[U+1];++J)G[J]=U;for(;J<32768;++J)G[J]=29;var Y=ht?new Uint8Array(259):[];for(U=0,J=0;U<fe.length-1;++U)for(;J<fe[U+1];++J)Y[J]=U;function X(je,_e){for(var Ee=0;Ee<je.length;){var Re=Math.min(65535,je.length-Ee),gt=Ee+Re==je.length;for(_e.write_shift(1,+gt),_e.write_shift(2,Re),_e.write_shift(2,~Re&65535);Re-- >0;)_e[_e.l++]=je[Ee++]}return _e.l}function we(je,_e){for(var Ee=0,Re=0,gt=ht?new Uint16Array(32768):[];Re<je.length;){var Nt=Math.min(65535,je.length-Re);if(Nt<10){for(Ee=Ht(_e,Ee,+(Re+Nt==je.length)),Ee&7&&(Ee+=8-(Ee&7)),_e.l=Ee/8|0,_e.write_shift(2,Nt),_e.write_shift(2,~Nt&65535);Nt-- >0;)_e[_e.l++]=je[Re++];Ee=_e.l*8;continue}Ee=Ht(_e,Ee,+(Re+Nt==je.length)+2);for(var Ut=0;Nt-- >0;){var vt=je[Re];Ut=(Ut<<5^vt)&32767;var $t=-1,fn=0;if(($t=gt[Ut])&&($t|=Re&-32768,$t>Re&&($t-=32768),$t<Re))for(;je[$t+fn]==je[Re+fn]&&fn<250;)++fn;if(fn>2){vt=Y[fn],vt<=22?Ee=dn(_e,Ee,At[vt+1]>>1)-1:(dn(_e,Ee,3),Ee+=5,dn(_e,Ee,At[vt-23]>>5),Ee+=3);var Sn=vt<8?0:vt-4>>2;Sn>0&&(Wt(_e,Ee,fn-fe[vt]),Ee+=Sn),vt=G[Re-$t],Ee=dn(_e,Ee,At[vt]>>3),Ee-=3;var mn=vt<4?0:vt-2>>1;mn>0&&(Wt(_e,Ee,Re-$t-lt[vt]),Ee+=mn);for(var Ot=0;Ot<fn;++Ot)gt[Ut]=Re&32767,Ut=(Ut<<5^je[Re])&32767,++Re;Nt-=fn-1}else vt<=143?vt=vt+48:Ee=yt(_e,Ee,1),Ee=dn(_e,Ee,At[vt]),gt[Ut]=Re&32767,++Re}Ee=dn(_e,Ee,0)-1}return _e.l=(Ee+7)/8|0,_e.l}return function(_e,Ee){return _e.length<8?X(_e,Ee):we(_e,Ee)}}();function ie(A){var G=ut(50+Math.floor(A.length*1.1)),U=Ge(A,G);return G.slice(0,U)}var Pe=ht?new Uint16Array(32768):Un(32768),z=ht?new Uint16Array(32768):Un(32768),pe=ht?new Uint16Array(128):Un(128),Fe=1,bt=1;function dt(A,G){var U=sn(A,G)+257;G+=5;var J=sn(A,G)+1;G+=5;var Y=Hn(A,G)+4;G+=4;for(var X=0,we=ht?new Uint8Array(19):Un(19),je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_e=1,Ee=ht?new Uint8Array(8):Un(8),Re=ht?new Uint8Array(8):Un(8),gt=we.length,Nt=0;Nt<Y;++Nt)we[V[Nt]]=X=tn(A,G),_e<X&&(_e=X),Ee[X]++,G+=3;var Ut=0;for(Ee[0]=0,Nt=1;Nt<=_e;++Nt)Re[Nt]=Ut=Ut+Ee[Nt-1]<<1;for(Nt=0;Nt<gt;++Nt)(Ut=we[Nt])!=0&&(je[Nt]=Re[Ut]++);var vt=0;for(Nt=0;Nt<gt;++Nt)if(vt=we[Nt],vt!=0){Ut=At[je[Nt]]>>8-vt;for(var $t=(1<<7-vt)-1;$t>=0;--$t)pe[Ut|$t<<vt]=vt&7|Nt<<3}var fn=[];for(_e=1;fn.length<U+J;)switch(Ut=pe[He(A,G)],G+=Ut&7,Ut>>>=3){case 16:for(X=3+Kt(A,G),G+=2,Ut=fn[fn.length-1];X-- >0;)fn.push(Ut);break;case 17:for(X=3+tn(A,G),G+=3;X-- >0;)fn.push(0);break;case 18:for(X=11+He(A,G),G+=7;X-- >0;)fn.push(0);break;default:fn.push(Ut),_e<Ut&&(_e=Ut);break}var Sn=fn.slice(0,U),mn=fn.slice(U);for(Nt=U;Nt<286;++Nt)Sn[Nt]=0;for(Nt=J;Nt<30;++Nt)mn[Nt]=0;return Fe=Cn(Sn,Pe,286),bt=Cn(mn,z,30),G}function Zt(A,G){if(A[0]==3&&!(A[1]&3))return[Mo(G),2];for(var U=0,J=0,Y=$_(G||1<<18),X=0,we=Y.length>>>0,je=0,_e=0;(J&1)==0;){if(J=tn(A,U),U+=3,J>>>1)J>>1==1?(je=9,_e=5):(U=dt(A,U),je=Fe,_e=bt);else{U&7&&(U+=8-(U&7));var Ee=A[U>>>3]|A[(U>>>3)+1]<<8;if(U+=32,Ee>0)for(!G&&we<X+Ee&&(Y=an(Y,X+Ee),we=Y.length);Ee-- >0;)Y[X++]=A[U>>>3],U+=8;continue}for(;;){!G&&we<X+32767&&(Y=an(Y,X+32767),we=Y.length);var Re=Dn(A,U,je),gt=J>>>1==1?Qn[Re]:Pe[Re];if(U+=gt&15,gt>>>=4,(gt>>>8&255)===0)Y[X++]=gt;else{if(gt==256)break;gt-=257;var Nt=gt<8?0:gt-4>>2;Nt>5&&(Nt=0);var Ut=X+fe[gt];Nt>0&&(Ut+=Dn(A,U,Nt),U+=Nt),Re=Dn(A,U,_e),gt=J>>>1==1?me[Re]:z[Re],U+=gt&15,gt>>>=4;var vt=gt<4?0:gt-2>>1,$t=lt[gt];for(vt>0&&($t+=Dn(A,U,vt),U+=vt),!G&&we<Ut&&(Y=an(Y,Ut+100),we=Y.length);X<Ut;)Y[X]=Y[X-$t],++X}}}return G?[Y,U+7>>>3]:[Y.slice(0,X),U+7>>>3]}function Vt(A,G){var U=A.slice(A.l||0),J=Zt(U,G);return A.l+=J[1],J[0]}function kt(A,G){if(A)typeof console<"u"&&console.error(G);else throw new Error(G)}function ct(A,G){var U=A;Di(U,0);var J=[],Y=[],X={FileIndex:J,FullPaths:Y};L(X,{root:G.root});for(var we=U.length-4;(U[we]!=80||U[we+1]!=75||U[we+2]!=5||U[we+3]!=6)&&we>=0;)--we;U.l=we+4,U.l+=4;var je=U.read_shift(2);U.l+=6;var _e=U.read_shift(4);for(U.l=_e,we=0;we<je;++we){U.l+=20;var Ee=U.read_shift(4),Re=U.read_shift(4),gt=U.read_shift(2),Nt=U.read_shift(2),Ut=U.read_shift(2);U.l+=8;var vt=U.read_shift(4),$t=d(U.slice(U.l+gt,U.l+gt+Nt));U.l+=gt+Nt+Ut;var fn=U.l;U.l=vt+4,ft(U,Ee,Re,X,$t),U.l=fn}return X}function ft(A,G,U,J,Y){A.l+=2;var X=A.read_shift(2),we=A.read_shift(2),je=c(A);if(X&8257)throw new Error("Unsupported ZIP encryption");for(var _e=A.read_shift(4),Ee=A.read_shift(4),Re=A.read_shift(4),gt=A.read_shift(2),Nt=A.read_shift(2),Ut="",vt=0;vt<gt;++vt)Ut+=String.fromCharCode(A[A.l++]);if(Nt){var $t=d(A.slice(A.l,A.l+Nt));($t[21589]||{}).mt&&(je=$t[21589].mt),((Y||{})[21589]||{}).mt&&(je=Y[21589].mt)}A.l+=Nt;var fn=A.slice(A.l,A.l+Ee);switch(we){case 8:fn=B(A,Re);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+we)}var Sn=!1;X&8&&(_e=A.read_shift(4),_e==134695760&&(_e=A.read_shift(4),Sn=!0),Ee=A.read_shift(4),Re=A.read_shift(4)),Ee!=G&&kt(Sn,"Bad compressed size: "+G+" != "+Ee),Re!=U&&kt(Sn,"Bad uncompressed size: "+U+" != "+Re),zt(J,Ut,fn,{unsafe:!0,mt:je})}function Xt(A,G){var U=G||{},J=[],Y=[],X=ut(1),we=U.compression?8:0,je=0,_e=0,Ee=0,Re=0,gt=0,Nt=A.FullPaths[0],Ut=Nt,vt=A.FileIndex[0],$t=[],fn=0;for(_e=1;_e<A.FullPaths.length;++_e)if(Ut=A.FullPaths[_e].slice(Nt.length),vt=A.FileIndex[_e],!(!vt.size||!vt.content||Ut=="Sh33tJ5")){var Sn=Re,mn=ut(Ut.length);for(Ee=0;Ee<Ut.length;++Ee)mn.write_shift(1,Ut.charCodeAt(Ee)&127);mn=mn.slice(0,mn.l),$t[gt]=RD.buf(vt.content,0);var Ot=vt.content;we==8&&(Ot=j(Ot)),X=ut(30),X.write_shift(4,67324752),X.write_shift(2,20),X.write_shift(2,je),X.write_shift(2,we),vt.mt?l(X,vt.mt):X.write_shift(4,0),X.write_shift(-4,$t[gt]),X.write_shift(4,Ot.length),X.write_shift(4,vt.content.length),X.write_shift(2,mn.length),X.write_shift(2,0),Re+=X.length,J.push(X),Re+=mn.length,J.push(mn),Re+=Ot.length,J.push(Ot),X=ut(46),X.write_shift(4,33639248),X.write_shift(2,0),X.write_shift(2,20),X.write_shift(2,je),X.write_shift(2,we),X.write_shift(4,0),X.write_shift(-4,$t[gt]),X.write_shift(4,Ot.length),X.write_shift(4,vt.content.length),X.write_shift(2,mn.length),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(4,0),X.write_shift(4,Sn),fn+=X.l,Y.push(X),fn+=mn.length,Y.push(mn),++gt}return X=ut(22),X.write_shift(4,101010256),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(2,gt),X.write_shift(2,gt),X.write_shift(4,fn),X.write_shift(4,Re),X.write_shift(2,0),Ys([Ys(J),Ys(Y),X])}var pn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Yn(A,G){if(A.ctype)return A.ctype;var U=A.name||"",J=U.match(/\.([^\.]+)$/);return J&&pn[J[1]]||G&&(J=(U=G).match(/[\.\\]([^\.\\])+$/),J&&pn[J[1]])?pn[J[1]]:"application/octet-stream"}function Tn(A){for(var G=Ad(A),U=[],J=0;J<G.length;J+=76)U.push(G.slice(J,J+76));return U.join(`\r
`)+`\r
`}function Gn(A){var G=A.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ee){var Re=Ee.charCodeAt(0).toString(16).toUpperCase();return"="+(Re.length==1?"0"+Re:Re)});G=G.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),G.charAt(0)==`
`&&(G="=0D"+G.slice(1)),G=G.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var U=[],J=G.split(`\r
`),Y=0;Y<J.length;++Y){var X=J[Y];if(X.length==0){U.push("");continue}for(var we=0;we<X.length;){var je=76,_e=X.slice(we,we+je);_e.charAt(je-1)=="="?je--:_e.charAt(je-2)=="="?je-=2:_e.charAt(je-3)=="="&&(je-=3),_e=X.slice(we,we+je),we+=je,we<X.length&&(_e+="="),U.push(_e)}}return U.join(`\r
`)}function In(A){for(var G=[],U=0;U<A.length;++U){for(var J=A[U];U<=A.length&&J.charAt(J.length-1)=="=";)J=J.slice(0,J.length-1)+A[++U];G.push(J)}for(var Y=0;Y<G.length;++Y)G[Y]=G[Y].replace(/[=][0-9A-Fa-f]{2}/g,function(X){return String.fromCharCode(parseInt(X.slice(1),16))});return da(G.join(`\r
`))}function bn(A,G,U){for(var J="",Y="",X="",we,je=0;je<10;++je){var _e=G[je];if(!_e||_e.match(/^\s*$/))break;var Ee=_e.match(/^(.*?):\s*([^\s].*)$/);if(Ee)switch(Ee[1].toLowerCase()){case"content-location":J=Ee[2].trim();break;case"content-type":X=Ee[2].trim();break;case"content-transfer-encoding":Y=Ee[2].trim();break}}switch(++je,Y.toLowerCase()){case"base64":we=da(xl(G.slice(je).join("")));break;case"quoted-printable":we=In(G.slice(je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Y)}var Re=zt(A,J.slice(U.length),we,{unsafe:!0});X&&(Re.ctype=X)}function re(A,G){if(Ze(A.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var U=G&&G.root||"",J=(Rr&&Buffer.isBuffer(A)?A.toString("binary"):Ze(A)).split(`\r
`),Y=0,X="";for(Y=0;Y<J.length;++Y)if(X=J[Y],!!/^Content-Location:/i.test(X)&&(X=X.slice(X.indexOf("file")),U||(U=X.slice(0,X.lastIndexOf("/")+1)),X.slice(0,U.length)!=U))for(;U.length>0&&(U=U.slice(0,U.length-1),U=U.slice(0,U.lastIndexOf("/")+1),X.slice(0,U.length)!=U););var we=(J[1]||"").match(/boundary="(.*?)"/);if(!we)throw new Error("MAD cannot find boundary");var je="--"+(we[1]||""),_e=[],Ee=[],Re={FileIndex:_e,FullPaths:Ee};L(Re);var gt,Nt=0;for(Y=0;Y<J.length;++Y){var Ut=J[Y];Ut!==je&&Ut!==je+"--"||(Nt++&&bn(Re,J.slice(gt,Y),U),gt=Y)}return Re}function Ae(A,G){var U=G||{},J=U.boundary||"SheetJS";J="------="+J;for(var Y=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+J.slice(2)+'"',"","",""],X=A.FullPaths[0],we=X,je=A.FileIndex[0],_e=1;_e<A.FullPaths.length;++_e)if(we=A.FullPaths[_e].slice(X.length),je=A.FileIndex[_e],!(!je.size||!je.content||we=="Sh33tJ5")){we=we.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(fn){return"_x"+fn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(fn){return"_u"+fn.charCodeAt(0).toString(16)+"_"});for(var Ee=je.content,Re=Rr&&Buffer.isBuffer(Ee)?Ee.toString("binary"):Ze(Ee),gt=0,Nt=Math.min(1024,Re.length),Ut=0,vt=0;vt<=Nt;++vt)(Ut=Re.charCodeAt(vt))>=32&&Ut<128&&++gt;var $t=gt>=Nt*4/5;Y.push(J),Y.push("Content-Location: "+(U.root||"file:///C:/SheetJS/")+we),Y.push("Content-Transfer-Encoding: "+($t?"quoted-printable":"base64")),Y.push("Content-Type: "+Yn(je,we)),Y.push(""),Y.push($t?Gn(Re):Tn(Re))}return Y.push(J+`--\r
`),Y.join(`\r
`)}function $e(A){var G={};return L(G,A),G}function zt(A,G,U,J){var Y=J&&J.unsafe;Y||L(A);var X=!Y&&Yr.find(A,G);if(!X){var we=A.FullPaths[0];G.slice(0,we.length)==we?we=G:(we.slice(-1)!="/"&&(we+="/"),we=(we+G).replace("//","/")),X={name:s(G),type:2},A.FileIndex.push(X),A.FullPaths.push(we),Y||Yr.utils.cfb_gc(A)}return X.content=U,X.size=U?U.length:0,J&&(J.CLSID&&(X.clsid=J.CLSID),J.mt&&(X.mt=J.mt),J.ct&&(X.ct=J.ct)),X}function Xe(A,G){L(A);var U=Yr.find(A,G);if(U){for(var J=0;J<A.FileIndex.length;++J)if(A.FileIndex[J]==U)return A.FileIndex.splice(J,1),A.FullPaths.splice(J,1),!0}return!1}function tt(A,G,U){L(A);var J=Yr.find(A,G);if(J){for(var Y=0;Y<A.FileIndex.length;++Y)if(A.FileIndex[Y]==J)return A.FileIndex[Y].name=s(U),A.FullPaths[Y]=U,!0}return!1}function rt(A){se(A,!0)}return e.find=ye,e.read=K,e.parse=p,e.write=M,e.writeFile=Ue,e.utils={cfb_new:$e,cfb_add:zt,cfb_del:Xe,cfb_mov:tt,cfb_gc:rt,ReadShift:pd,CheckField:TE,prep_blob:Di,bconcat:Ys,use_zlib:P,_deflateRaw:ie,_inflateRaw:Vt,consts:Ve},e}();function MD(t){return typeof t=="string"?O0(t):Array.isArray(t)?aD(t):t}function Zd(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=O0(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?Dd(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var s=new Blob([MD(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var l=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),chrome.downloads.download({url:l,filename:t,saveAs:!0});var c=document.createElement("a");if(c.download!=null)return c.download=t,c.href=l,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),l}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(t);return d.open("w"),d.encoding="binary",Array.isArray(e)&&(e=Kd(e)),d.write(e),d.close(),e}catch(h){if(!h.message||!h.message.match(/onstruct/))throw h}throw new Error("cannot save file "+t)}function Js(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function K_(t,e){for(var n=[],r=Js(t),s=0;s!==r.length;++s)n[t[r[s]][e]]==null&&(n[t[r[s]][e]]=r[s]);return n}function g1(t){for(var e=[],n=Js(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function M0(t){for(var e=[],n=Js(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function LD(t){for(var e=[],n=Js(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var r0=new Date(1899,11,30,0,0,0);function bi(t,e){var n=t.getTime(),r=r0.getTime()+(t.getTimezoneOffset()-r0.getTimezoneOffset())*6e4;return(n-r)/(24*60*60*1e3)}var uE=new Date,ID=r0.getTime()+(uE.getTimezoneOffset()-r0.getTimezoneOffset())*6e4,Z_=uE.getTimezoneOffset();function dE(t){var e=new Date;return e.setTime(t*24*60*60*1e3+ID),e.getTimezoneOffset()!==Z_&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Z_)*6e4),e}var Q_=new Date("2017-02-19T19:06:09.000Z"),fE=isNaN(Q_.getFullYear())?new Date("2/19/17"):Q_,PD=fE.getFullYear()==2017;function ci(t,e){var n=new Date(t);if(PD)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(fE.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],l=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(l=new Date(l.getTime()-l.getTimezoneOffset()*60*1e3)),l}function L0(t,e){if(Rr&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(l){return n[l]||l})}catch{}for(var r=[],s=0;s!=t.length;++s)r.push(String.fromCharCode(t[s]));return r.join("")}function _i(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=_i(t[n]));return e}function hs(t,e){for(var n="";n.length<e;)n+=t;return n}function hl(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,l){return n=-n,l}),!isNaN(e=Number(r)))?e/n:e}var FD=["january","february","march","april","may","june","july","august","september","october","november","december"];function Od(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),s=e.getMonth(),l=e.getDate();if(isNaN(l))return n;var c=t.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&FD.indexOf(c)==-1)return n}else if(c.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||l>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}function ir(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return Rr?r=Sl(n):r=lD(n),Yr.utils.cfb_add(t,e,r)}Yr.utils.cfb_add(t,e,n)}else t.file(e,n)}function p1(){return Yr.utils.cfb_new()}var Ns=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,zD={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},m1=g1(zD),x1=/[&<>'"]/g,BD=/[\u0000-\u0008\u000b-\u001f]/g;function Hr(t){var e=t+"";return e.replace(x1,function(n){return m1[n]}).replace(BD,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function e2(t){return Hr(t).replace(/ /g,"_x0020_")}var hE=/[\u0000-\u001f]/g;function HD(t){var e=t+"";return e.replace(x1,function(n){return m1[n]}).replace(/\n/g,"<br/>").replace(hE,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function UD(t){var e=t+"";return e.replace(x1,function(n){return m1[n]}).replace(hE,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function $D(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function WD(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function lm(t){for(var e="",n=0,r=0,s=0,l=0,c=0,d=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(s=t.charCodeAt(n++),r>191&&r<224){c=(r&31)<<6,c|=s&63,e+=String.fromCharCode(c);continue}if(l=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(s&63)<<6|l&63);continue}c=t.charCodeAt(n++),d=((r&7)<<18|(s&63)<<12|(l&63)<<6|c&63)-65536,e+=String.fromCharCode(55296+(d>>>10&1023)),e+=String.fromCharCode(56320+(d&1023))}return e}function t2(t){var e=Mo(2*t.length),n,r,s=1,l=0,c=0,d;for(r=0;r<t.length;r+=s)s=1,(d=t.charCodeAt(r))<128?n=d:d<224?(n=(d&31)*64+(t.charCodeAt(r+1)&63),s=2):d<240?(n=(d&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),s=3):(s=4,n=(d&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,c=55296+(n>>>10&1023),n=56320+(n&1023)),c!==0&&(e[l++]=c&255,e[l++]=c>>>8,c=0),e[l++]=n%256,e[l++]=n>>>8;return e.slice(0,l).toString("ucs2")}function n2(t){return Sl(t,"binary").toString("utf8")}var gh="foo bar baz",gd=Rr&&(n2(gh)==lm(gh)&&n2||t2(gh)==lm(gh)&&t2)||lm,Dd=Rr?function(t){return Sl(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,s=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},VD=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)r=r.replace(t[s][0],t[s][1]);return r}}(),gE=/(^\s|\s$|\n)/;function Gs(t,e){return"<"+t+(e.match(gE)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Rd(t){return Js(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function on(t,e,n){return"<"+t+(n!=null?Rd(n):"")+(e!=null?(e.match(gE)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function hx(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function YD(t,e){switch(typeof t){case"string":var n=on("vt:lpwstr",Hr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return on((t|0)==t?"vt:i4":"vt:r8",Hr(String(t)));case"boolean":return on("vt:bool",t?"true":"false")}if(t instanceof Date)return on("vt:filetime",hx(t));throw new Error("Unable to serialize "+t)}var Ls={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},eu=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ri={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function GD(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,l=5;l>=0;--l)s=s*256+t[e+l];return r==2047?s==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}function qD(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,s=0,l=0,c=r?-e:e;isFinite(c)?c==0?s=l=0:(s=Math.floor(Math.log(c)/Math.LN2),l=c*Math.pow(2,52-s),s<=-1023&&(!isFinite(l)||l<Math.pow(2,52))?s=-1022:(l-=Math.pow(2,52),s+=1023)):(s=2047,l=isNaN(e)?26985:0);for(var d=0;d<=5;++d,l/=256)t[n+d]=l&255;t[n+6]=(s&15)<<4|l&15,t[n+7]=s>>4|r}var r2=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var s=0,l=t[0][r].length;s<l;s+=n)e.push.apply(e,t[0][r].slice(s,s+n));return e},s2=Rr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Sl(e)})):r2(t)}:r2,i2=function(t,e,n){for(var r=[],s=e;s<n;s+=2)r.push(String.fromCharCode(cd(t,s)));return r.join("").replace(hd,"")},y1=Rr?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(hd,""):i2(t,e,n)}:i2,a2=function(t,e,n){for(var r=[],s=e;s<e+n;++s)r.push(("0"+t[s].toString(16)).slice(-2));return r.join("")},pE=Rr?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):a2(t,e,n)}:a2,l2=function(t,e,n){for(var r=[],s=e;s<n;s++)r.push(String.fromCharCode(Oc(t,s)));return r.join("")},Qd=Rr?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):l2(e,n,r)}:l2,mE=function(t,e){var n=Mi(t,e);return n>0?Qd(t,e+4,e+4+n-1):""},xE=mE,yE=function(t,e){var n=Mi(t,e);return n>0?Qd(t,e+4,e+4+n-1):""},vE=yE,bE=function(t,e){var n=2*Mi(t,e);return n>0?Qd(t,e+4,e+4+n-1):""},_E=bE,SE=function(e,n){var r=Mi(e,n);return r>0?y1(e,n+4,n+4+r):""},wE=SE,kE=function(t,e){var n=Mi(t,e);return n>0?Qd(t,e+4,e+4+n):""},EE=kE,NE=function(t,e){return GD(t,e)},s0=NE,v1=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Rr&&(xE=function(e,n){if(!Buffer.isBuffer(e))return mE(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},vE=function(e,n){if(!Buffer.isBuffer(e))return yE(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},_E=function(e,n){if(!Buffer.isBuffer(e))return bE(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},wE=function(e,n){if(!Buffer.isBuffer(e))return SE(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},EE=function(e,n){if(!Buffer.isBuffer(e))return kE(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},s0=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):NE(e,n)},v1=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Oc=function(t,e){return t[e]},cd=function(t,e){return t[e+1]*256+t[e]},JD=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},Mi=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},To=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},XD=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function pd(t,e){var n="",r,s,l=[],c,d,h,g;switch(e){case"dbcs":if(g=this.l,Rr&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(h=0;h<t;++h)n+=String.fromCharCode(cd(this,g)),g+=2;t*=2;break;case"utf8":n=Qd(this,this.l,this.l+t);break;case"utf16le":t*=2,n=y1(this,this.l,this.l+t);break;case"wstr":return pd.call(this,t,"dbcs");case"lpstr-ansi":n=xE(this,this.l),t=4+Mi(this,this.l);break;case"lpstr-cp":n=vE(this,this.l),t=4+Mi(this,this.l);break;case"lpwstr":n=_E(this,this.l),t=4+2*Mi(this,this.l);break;case"lpp4":t=4+Mi(this,this.l),n=wE(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Mi(this,this.l),n=EE(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(c=Oc(this,this.l+t++))!==0;)l.push(dh(c));n=l.join("");break;case"_wstr":for(t=0,n="";(c=cd(this,this.l+t))!==0;)l.push(dh(c)),t+=2;t+=2,n=l.join("");break;case"dbcs-cont":for(n="",g=this.l,h=0;h<t;++h){if(this.lens&&this.lens.indexOf(g)!==-1)return c=Oc(this,g),this.l=g+1,d=pd.call(this,t-h,c?"dbcs-cont":"sbcs-cont"),l.join("")+d;l.push(dh(cd(this,g))),g+=2}n=l.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",g=this.l,h=0;h!=t;++h){if(this.lens&&this.lens.indexOf(g)!==-1)return c=Oc(this,g),this.l=g+1,d=pd.call(this,t-h,c?"dbcs-cont":"sbcs-cont"),l.join("")+d;l.push(dh(Oc(this,g))),g+=1}n=l.join("");break;default:switch(t){case 1:return r=Oc(this,this.l),this.l++,r;case 2:return r=(e==="i"?JD:cd)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?To:XD)(this,this.l),this.l+=4,r):(s=Mi(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=s0(this,this.l):s=s0([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:n=pE(this,this.l,t);break}}return this.l+=t,n}var KD=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},ZD=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},QD=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function eR(t,e,n){var r=0,s=0;if(n==="dbcs"){for(s=0;s!=e.length;++s)QD(this,e.charCodeAt(s),this.l+2*s);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;r=e.length}else if(n==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(n==="utf16le"){var l=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var c=e.charCodeAt(s);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<l;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,KD(this,e,this.l);break;case 8:if(r=8,n==="f"){qD(this,e,this.l);break}case 16:break;case-4:r=4,ZD(this,e,this.l);break}return this.l+=r,this}function TE(t,e){var n=pE(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function Di(t,e){t.l=e,t.read_shift=pd,t.chk=TE,t.write_shift=eR}function Fa(t,e){t.l+=e}function ut(t){var e=Mo(t);return Di(e,0),e}function mi(){var t=[],e=Rr?256:2048,n=function(g){var p=ut(g);return Di(p,0),p},r=n(e),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},l=function(g){return r&&g<r.length-r.l?r:(s(),r=n(Math.max(g+1,e)))},c=function(){return s(),Ys(t)},d=function(g){s(),r=g,r.l==null&&(r.l=r.length),l(e)};return{next:l,push:d,end:c,_bufs:t}}function jt(t,e,n,r){var s=+e,l;if(!isNaN(s)){r||(r=GI[s].p||(n||[]).length||0),l=1+(s>=128?1:0)+1,r>=128&&++l,r>=16384&&++l,r>=2097152&&++l;var c=t.next(l);s<=127?c.write_shift(1,s):(c.write_shift(1,(s&127)+128),c.write_shift(1,s>>7));for(var d=0;d!=4;++d)if(r>=128)c.write_shift(1,(r&127)+128),r>>=7;else{c.write_shift(1,r);break}r>0&&v1(n)&&t.push(n)}}function md(t,e,n){var r=_i(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function o2(t,e,n){var r=_i(t);return r.s=md(r.s,e.s,n),r.e=md(r.e,e.s,n),r}function xd(t,e){if(t.cRel&&t.c<0)for(t=_i(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=_i(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=Ur(t);return!t.cRel&&t.cRel!=null&&(n=rR(n)),!t.rRel&&t.rRel!=null&&(n=tR(n)),n}function om(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ni(t.s.c)+":"+(t.e.cRel?"":"$")+ni(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+qs(t.s.r)+":"+(t.e.rRel?"":"$")+qs(t.e.r):xd(t.s,e.biff)+":"+xd(t.e,e.biff)}function b1(t){return parseInt(nR(t),10)-1}function qs(t){return""+(t+1)}function tR(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function nR(t){return t.replace(/\$(\d+)$/,"$1")}function _1(t){for(var e=sR(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function ni(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function rR(t){return t.replace(/^([A-Z])/,"$$$1")}function sR(t){return t.replace(/^\$([A-Z])/,"$1")}function iR(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Is(t){for(var e=0,n=0,r=0;r<t.length;++r){var s=t.charCodeAt(r);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:e-1}}function Ur(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function Li(t){var e=t.indexOf(":");return e==-1?{s:Is(t),e:Is(t)}:{s:Is(t.slice(0,e)),e:Is(t.slice(e+1))}}function Es(t,e){return typeof e>"u"||typeof e=="number"?Es(t.s,t.e):(typeof t!="string"&&(t=Ur(t)),typeof e!="string"&&(e=Ur(e)),t==e?t:t+":"+e)}function rs(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,l=t.length;for(n=0;r<l&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.s.c=--n,n=0;r<l&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(e.s.r=--n,r===l||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=l&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.e.c=--n,n=0;r!=l&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return e.e.r=--n,e}function c2(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=to(t.z,n?bi(e):e)}catch{}try{return t.w=to((t.XF||{}).numFmtId||(n?14:0),n?bi(e):e)}catch{return""+e}}function yl(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?ef[t.v]||t.v:e==null?c2(t,t.v):c2(t,e))}function Wo(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function CE(t,e,n){var r=n||{},s=t?Array.isArray(t):r.dense,l=t||(s?[]:{}),c=0,d=0;if(l&&r.origin!=null){if(typeof r.origin=="number")c=r.origin;else{var h=typeof r.origin=="string"?Is(r.origin):r.origin;c=h.r,d=h.c}l["!ref"]||(l["!ref"]="A1:A1")}var g={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(l["!ref"]){var p=rs(l["!ref"]);g.s.c=p.s.c,g.s.r=p.s.r,g.e.c=Math.max(g.e.c,p.e.c),g.e.r=Math.max(g.e.r,p.e.r),c==-1&&(g.e.r=c=p.e.r+1)}for(var y=0;y!=e.length;++y)if(e[y]){if(!Array.isArray(e[y]))throw new Error("aoa_to_sheet expects an array of arrays");for(var _=0;_!=e[y].length;++_)if(!(typeof e[y][_]>"u")){var b={v:e[y][_]},k=c+y,S=d+_;if(g.s.r>k&&(g.s.r=k),g.s.c>S&&(g.s.c=S),g.e.r<k&&(g.e.r=k),g.e.c<S&&(g.e.c=S),e[y][_]&&typeof e[y][_]=="object"&&!Array.isArray(e[y][_])&&!(e[y][_]instanceof Date))b=e[y][_];else if(Array.isArray(b.v)&&(b.f=e[y][_][1],b.v=b.v[0]),b.v===null)if(b.f)b.t="n";else if(r.nullError)b.t="e",b.v=0;else if(r.sheetStubs)b.t="z";else continue;else typeof b.v=="number"?b.t="n":typeof b.v=="boolean"?b.t="b":b.v instanceof Date?(b.z=r.dateNF||gs[14],r.cellDates?(b.t="d",b.w=to(b.z,bi(b.v))):(b.t="n",b.v=bi(b.v),b.w=to(b.z,b.v))):b.t="s";if(s)l[k]||(l[k]=[]),l[k][S]&&l[k][S].z&&(b.z=l[k][S].z),l[k][S]=b;else{var E=Ur({c:S,r:k});l[E]&&l[E].z&&(b.z=l[E].z),l[E]=b}}}return g.s.c<1e7&&(l["!ref"]=Es(g)),l}function tu(t,e){return CE(null,t,e)}function aR(t){return t.read_shift(4,"i")}function ga(t,e){return e||(e=ut(4)),e.write_shift(4,t),e}function ri(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Ps(t,e){var n=!1;return e==null&&(n=!0,e=ut(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function lR(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function oR(t,e){return e||(e=ut(4)),e.write_shift(2,0),e.write_shift(2,0),e}function S1(t,e){var n=t.l,r=t.read_shift(1),s=ri(t),l=[],c={t:s,h:s};if((r&1)!==0){for(var d=t.read_shift(4),h=0;h!=d;++h)l.push(lR(t));c.r=l}else c.r=[{ich:0,ifnt:0}];return t.l=n+e,c}function cR(t,e){var n=!1;return e==null&&(n=!0,e=ut(15+4*t.t.length)),e.write_shift(1,0),Ps(t.t,e),n?e.slice(0,e.l):e}var uR=S1;function dR(t,e){var n=!1;return e==null&&(n=!0,e=ut(23+4*t.t.length)),e.write_shift(1,1),Ps(t.t,e),e.write_shift(4,1),oR({},e),n?e.slice(0,e.l):e}function ea(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function Vo(t,e){return e==null&&(e=ut(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Yo(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Go(t,e){return e==null&&(e=ut(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var fR=ri,jE=Ps;function w1(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function i0(t,e){var n=!1;return e==null&&(n=!0,e=ut(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var hR=ri,gx=w1,k1=i0;function AE(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var s=r===0?s0([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):To(e,0)>>2;return n?s/100:s}function OE(t,e){e==null&&(e=ut(4));var n=0,r=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?s:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function DE(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function gR(t,e){return e||(e=ut(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var qo=DE,nu=gR;function ru(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Lo(t,e){return(e||ut(8)).write_shift(8,t,"f")}function pR(t){var e={},n=t.read_shift(1),r=n>>>1,s=t.read_shift(1),l=t.read_shift(2,"i"),c=t.read_shift(1),d=t.read_shift(1),h=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=s;var g=kR[s];g&&(e.rgb=b2(g));break;case 2:e.rgb=b2([c,d,h]);break;case 3:e.theme=s;break}return l!=0&&(e.tint=l>0?l/32767:l/32768),e}function a0(t,e){if(e||(e=ut(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function mR(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function xR(t,e){e||(e=ut(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var RE=2,Ai=3,ph=11,l0=19,mh=64,yR=65,vR=71,bR=4108,_R=4126,Vs=80,u2={1:{n:"CodePage",t:RE},2:{n:"Category",t:Vs},3:{n:"PresentationFormat",t:Vs},4:{n:"ByteCount",t:Ai},5:{n:"LineCount",t:Ai},6:{n:"ParagraphCount",t:Ai},7:{n:"SlideCount",t:Ai},8:{n:"NoteCount",t:Ai},9:{n:"HiddenCount",t:Ai},10:{n:"MultimediaClipCount",t:Ai},11:{n:"ScaleCrop",t:ph},12:{n:"HeadingPairs",t:bR},13:{n:"TitlesOfParts",t:_R},14:{n:"Manager",t:Vs},15:{n:"Company",t:Vs},16:{n:"LinksUpToDate",t:ph},17:{n:"CharacterCount",t:Ai},19:{n:"SharedDoc",t:ph},22:{n:"HyperlinksChanged",t:ph},23:{n:"AppVersion",t:Ai,p:"version"},24:{n:"DigSig",t:yR},26:{n:"ContentType",t:Vs},27:{n:"ContentStatus",t:Vs},28:{n:"Language",t:Vs},29:{n:"Version",t:Vs},255:{},2147483648:{n:"Locale",t:l0},2147483651:{n:"Behavior",t:l0},1919054434:{}},d2={1:{n:"CodePage",t:RE},2:{n:"Title",t:Vs},3:{n:"Subject",t:Vs},4:{n:"Author",t:Vs},5:{n:"Keywords",t:Vs},6:{n:"Comments",t:Vs},7:{n:"Template",t:Vs},8:{n:"LastAuthor",t:Vs},9:{n:"RevNumber",t:Vs},10:{n:"EditTime",t:mh},11:{n:"LastPrinted",t:mh},12:{n:"CreatedDate",t:mh},13:{n:"ModifiedDate",t:mh},14:{n:"PageCount",t:Ai},15:{n:"WordCount",t:Ai},16:{n:"CharCount",t:Ai},17:{n:"Thumbnail",t:vR},18:{n:"Application",t:Vs},19:{n:"DocSecurity",t:Ai},255:{},2147483648:{n:"Locale",t:l0},2147483651:{n:"Behavior",t:l0},1919054434:{}};function SR(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var wR=SR([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),kR=_i(wR),ef={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ER={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},xh={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function ME(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function LE(t,e){var n=LD(ER),r=[],s;r[r.length]=Ns,r[r.length]=on("Types",null,{xmlns:Ls.CT,"xmlns:xsd":Ls.xsd,"xmlns:xsi":Ls.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(h){return on("Default",null,{Extension:h[0],ContentType:h[1]})}));var l=function(h){t[h]&&t[h].length>0&&(s=t[h][0],r[r.length]=on("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:xh[h][e.bookType]||xh[h].xlsx}))},c=function(h){(t[h]||[]).forEach(function(g){r[r.length]=on("Override",null,{PartName:(g[0]=="/"?"":"/")+g,ContentType:xh[h][e.bookType]||xh[h].xlsx})})},d=function(h){(t[h]||[]).forEach(function(g){r[r.length]=on("Override",null,{PartName:(g[0]=="/"?"":"/")+g,ContentType:n[h][0]})})};return l("workbooks"),c("sheets"),c("charts"),d("themes"),["strs","styles"].forEach(l),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),c("metadata"),d("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Tr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function IE(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Bc(t){var e=[Ns,on("Relationships",null,{xmlns:Ls.RELS})];return Js(t["!id"]).forEach(function(n){e[e.length]=on("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Br(t,e,n,r,s,l){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=r,s.Target=n,[Tr.HLINK,Tr.XPATH,Tr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}function NR(t){var e=[Ns];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function f2(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function TR(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function CR(t){var e=[Ns];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(f2(t[n][0],t[n][1])),e.push(TR("",t[n][0]));return e.push(f2("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function PE(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Zh.version+"</meta:generator></office:meta></office:document-meta>"}var Oo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function cm(t,e,n,r,s){s[t]!=null||e==null||e===""||(s[t]=e,e=Hr(e),r[r.length]=n?on(t,e,n):Gs(t,e))}function FE(t,e){var n=e||{},r=[Ns,on("cp:coreProperties",null,{"xmlns:cp":Ls.CORE_PROPS,"xmlns:dc":Ls.dc,"xmlns:dcterms":Ls.dcterms,"xmlns:dcmitype":Ls.dcmitype,"xmlns:xsi":Ls.xsi})],s={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&cm("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:hx(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),t.ModifiedDate!=null&&cm("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:hx(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var l=0;l!=Oo.length;++l){var c=Oo[l],d=n.Props&&n.Props[c[1]]!=null?n.Props[c[1]]:t?t[c[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&cm(c[0],d,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Hc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],zE=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function BE(t){var e=[],n=on;return t||(t={}),t.Application="SheetJS",e[e.length]=Ns,e[e.length]=on("Properties",null,{xmlns:Ls.EXT_PROPS,"xmlns:vt":Ls.vt}),Hc.forEach(function(r){if(t[r[1]]!==void 0){var s;switch(r[2]){case"string":s=Hr(String(t[r[1]]));break;case"bool":s=t[r[1]]?"true":"false";break}s!==void 0&&(e[e.length]=n(r[0],s))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Hr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function HE(t){var e=[Ns,on("Properties",null,{xmlns:Ls.CUST_PROPS,"xmlns:vt":Ls.vt})];if(!t)return e.join("");var n=1;return Js(t).forEach(function(s){++n,e[e.length]=on("property",YD(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Hr(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var h2={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function jR(t,e){var n=[];return Js(h2).map(function(r){for(var s=0;s<Oo.length;++s)if(Oo[s][1]==r)return Oo[s];for(s=0;s<Hc.length;++s)if(Hc[s][1]==r)return Hc[s];throw r}).forEach(function(r){if(t[r[1]]!=null){var s=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(Gs(h2[r[1]]||r[1],s))}}),on("DocumentProperties",n.join(""),{xmlns:Ri.o})}function AR(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return t&&Js(t).forEach(function(l){if(Object.prototype.hasOwnProperty.call(t,l)){for(var c=0;c<Oo.length;++c)if(l==Oo[c][1])return;for(c=0;c<Hc.length;++c)if(l==Hc[c][1])return;for(c=0;c<n.length;++c)if(l==n[c])return;var d=t[l],h="string";typeof d=="number"?(h="float",d=String(d)):d===!0||d===!1?(h="boolean",d=d?"1":"0"):d=String(d),s.push(on(e2(l),d,{"dt:dt":h}))}}),e&&Js(e).forEach(function(l){if(Object.prototype.hasOwnProperty.call(e,l)&&!(t&&Object.prototype.hasOwnProperty.call(t,l))){var c=e[l],d="string";typeof c=="number"?(d="float",c=String(c)):c===!0||c===!1?(d="boolean",c=c?"1":"0"):c instanceof Date?(d="dateTime.tz",c=c.toISOString()):c=String(c),s.push(on(e2(l),c,{"dt:dt":d}))}}),"<"+r+' xmlns="'+Ri.o+'">'+s.join("")+"</"+r+">"}function OR(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),s=(n-r)/Math.pow(2,32);r*=1e7,s*=1e7;var l=r/Math.pow(2,32)|0;l>0&&(r=r%Math.pow(2,32),s+=l);var c=ut(8);return c.write_shift(4,r),c.write_shift(4,s),c}function g2(t,e){var n=ut(4),r=ut(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=ut(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=OR(e);break;case 31:case 80:for(r=ut(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Ys([n,r])}var UE=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function DR(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function p2(t,e,n){var r=ut(8),s=[],l=[],c=8,d=0,h=ut(8),g=ut(8);if(h.write_shift(4,2),h.write_shift(4,1200),g.write_shift(4,1),l.push(h),s.push(g),c+=8+h.length,!e){g=ut(8),g.write_shift(4,0),s.unshift(g);var p=[ut(4)];for(p[0].write_shift(4,t.length),d=0;d<t.length;++d){var y=t[d][0];for(h=ut(8+2*(y.length+1)+(y.length%2?0:2)),h.write_shift(4,d+2),h.write_shift(4,y.length+1),h.write_shift(0,y,"dbcs");h.l!=h.length;)h.write_shift(1,0);p.push(h)}h=Ys(p),l.unshift(h),c+=8+h.length}for(d=0;d<t.length;++d)if(!(e&&!e[t[d][0]])&&!(UE.indexOf(t[d][0])>-1||zE.indexOf(t[d][0])>-1)&&t[d][1]!=null){var _=t[d][1],b=0;if(e){b=+e[t[d][0]];var k=n[b];if(k.p=="version"&&typeof _=="string"){var S=_.split(".");_=(+S[0]<<16)+(+S[1]||0)}h=g2(k.t,_)}else{var E=DR(_);E==-1&&(E=31,_=String(_)),h=g2(E,_)}l.push(h),g=ut(8),g.write_shift(4,e?b:2+d),s.push(g),c+=8+h.length}var O=8*(l.length+1);for(d=0;d<l.length;++d)s[d].write_shift(4,O),O+=l[d].length;return r.write_shift(4,c),r.write_shift(4,l.length),Ys([r].concat(s).concat(l))}function m2(t,e,n,r,s,l){var c=ut(s?68:48),d=[c];c.write_shift(2,65534),c.write_shift(2,0),c.write_shift(4,842412599),c.write_shift(16,Yr.utils.consts.HEADER_CLSID,"hex"),c.write_shift(4,s?2:1),c.write_shift(16,e,"hex"),c.write_shift(4,s?68:48);var h=p2(t,n,r);if(d.push(h),s){var g=p2(s,null,null);c.write_shift(16,l,"hex"),c.write_shift(4,68+h.length),d.push(g)}return Ys(d)}function RR(t,e){e||(e=ut(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function MR(t,e){return t.read_shift(e)===1}function oi(t,e){return e||(e=ut(2)),e.write_shift(2,+!!t),e}function $E(t){return t.read_shift(2,"u")}function qi(t,e){return e||(e=ut(2)),e.write_shift(2,t),e}function WE(t,e,n){return n||(n=ut(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function VE(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var l=t.read_shift(1);l&&(s="dbcs-cont")}else n.biff==12&&(s="wstr");n.biff>=2&&n.biff<=5&&(s="cpstr");var c=r?t.read_shift(r,s):"";return c}function LR(t){var e=t.t||"",n=ut(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=ut(2*e.length);r.write_shift(2*e.length,e,"utf16le");var s=[n,r];return Ys(s)}function IR(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function PR(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):IR(t,r,n)}function FR(t,e,n){if(n.biff>5)return PR(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function YE(t,e,n){return n||(n=ut(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function x2(t,e){e||(e=ut(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function zR(t){var e=ut(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),l=s>-1?31:23;switch(r.charAt(0)){case"#":l=28;break;case".":l&=-3;break}e.write_shift(4,2),e.write_shift(4,l);var c=[8,6815827,6619237,4849780,83];for(n=0;n<c.length;++n)e.write_shift(4,c[n]);if(l==28)r=r.slice(1),x2(r,e);else if(l&2){for(c="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<c.length;++n)e.write_shift(1,parseInt(c[n],16));var d=s>-1?r.slice(0,s):r;for(e.write_shift(4,2*(d.length+1)),n=0;n<d.length;++n)e.write_shift(2,d.charCodeAt(n));e.write_shift(2,0),l&8&&x2(s>-1?r.slice(s+1):"",e)}else{for(c="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<c.length;++n)e.write_shift(1,parseInt(c[n],16));for(var h=0;r.slice(h*3,h*3+3)=="../"||r.slice(h*3,h*3+3)=="..\\";)++h;for(e.write_shift(2,h),e.write_shift(4,r.length-3*h+1),n=0;n<r.length-3*h;++n)e.write_shift(1,r.charCodeAt(n+3*h)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function Io(t,e,n,r){return r||(r=ut(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function BR(t,e,n){var r=n.biff>8?4:2,s=t.read_shift(r),l=t.read_shift(r,"i"),c=t.read_shift(r,"i");return[s,l,c]}function HR(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return{s:{c:r,r:e},e:{c:s,r:n}}}function GE(t,e){return e||(e=ut(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function E1(t,e,n){var r=1536,s=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var l=ut(s);return l.write_shift(2,r),l.write_shift(2,e),s>4&&l.write_shift(2,29282),s>6&&l.write_shift(2,1997),s>8&&(l.write_shift(2,49161),l.write_shift(2,1),l.write_shift(2,1798),l.write_shift(2,0)),l}function UR(t,e){var n=!e||e.biff==8,r=ut(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function $R(t,e){var n=!e||e.biff>=8?2:1,r=ut(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function WR(t,e){var n=ut(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],s=0;s<t.length;++s)r[s]=LR(t[s]);var l=Ys([n].concat(r));return l.parts=[n.length].concat(r.map(function(c){return c.length})),l}function VR(){var t=ut(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function YR(t){var e=ut(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function GR(t,e){var n=t.name||"Arial",r=e&&e.biff==5,s=r?15+n.length:16+2*n.length,l=ut(s);return l.write_shift(2,t.sz*20),l.write_shift(4,0),l.write_shift(2,400),l.write_shift(4,0),l.write_shift(2,0),l.write_shift(1,n.length),r||l.write_shift(1,1),l.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),l}function qR(t,e,n,r){var s=ut(10);return Io(t,e,r,s),s.write_shift(4,n),s}function JR(t,e,n,r,s){var l=!s||s.biff==8,c=ut(8+ +l+(1+l)*n.length);return Io(t,e,r,c),c.write_shift(2,n.length),l&&c.write_shift(1,1),c.write_shift((1+l)*n.length,n,l?"utf16le":"sbcs"),c}function XR(t,e,n,r){var s=n&&n.biff==5;r||(r=ut(s?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(s?1:2,e.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var l=r.length>r.l?r.slice(0,r.l):r;return l.l==null&&(l.l=l.length),l}function KR(t,e){var n=e.biff==8||!e.biff?4:2,r=ut(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function y2(t,e,n,r){var s=n&&n.biff==5;r||(r=ut(s?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var l=0;return t.numFmtId>0&&s&&(l|=1024),r.write_shift(4,l),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function ZR(t){var e=ut(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function QR(t,e,n,r,s,l){var c=ut(8);return Io(t,e,r,c),WE(n,l,c),c}function eM(t,e,n,r){var s=ut(14);return Io(t,e,r,s),Lo(n,s),s}function tM(t,e,n){if(n.biff<8)return nM(t,e,n);for(var r=[],s=t.l+e,l=t.read_shift(n.biff>8?4:2);l--!==0;)r.push(BR(t,n.biff>8?12:6,n));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return r}function nM(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=VE(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function rM(t){var e=ut(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)GE(t[n],e);return e}function sM(t){var e=ut(24),n=Is(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(r[s],16));return Ys([e,zR(t[1])])}function iM(t){var e=t[1].Tooltip,n=ut(10+2*(e.length+1));n.write_shift(2,2048);var r=Is(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var s=0;s<e.length;++s)n.write_shift(2,e.charCodeAt(s));return n.write_shift(2,0),n}function aM(t){return t||(t=ut(4)),t.write_shift(2,1),t.write_shift(2,1),t}function lM(t,e,n){if(!n.cellStyles)return Fa(t,e);var r=n&&n.biff>=12?4:2,s=t.read_shift(r),l=t.read_shift(r),c=t.read_shift(r),d=t.read_shift(r),h=t.read_shift(2);r==2&&(t.l+=2);var g={s,e:l,w:c,ixfe:d,flags:h};return(n.biff>=5||!n.biff)&&(g.level=h>>8&7),g}function oM(t,e){var n=ut(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function cM(t){for(var e=ut(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function uM(t,e,n){var r=ut(15);return nf(r,t,e),r.write_shift(8,n,"f"),r}function dM(t,e,n){var r=ut(9);return nf(r,t,e),r.write_shift(2,n),r}var fM=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=g1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(d,h){var g=[],p=Mo(1);switch(h.type){case"base64":p=da(xl(d));break;case"binary":p=da(d);break;case"buffer":case"array":p=d;break}Di(p,0);var y=p.read_shift(1),_=!!(y&136),b=!1,k=!1;switch(y){case 2:break;case 3:break;case 48:b=!0,_=!0;break;case 49:b=!0,_=!0;break;case 131:break;case 139:break;case 140:k=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+y.toString(16))}var S=0,E=521;y==2&&(S=p.read_shift(2)),p.l+=3,y!=2&&(S=p.read_shift(4)),S>1048576&&(S=1e6),y!=2&&(E=p.read_shift(2));var O=p.read_shift(2),T=h.codepage||1252;y!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(T=t[p[p.l]]),p.l+=1,p.l+=2),k&&(p.l+=36);for(var D=[],F={},Z=Math.min(p.length,y==2?521:E-10-(b?264:0)),K=k?32:11;p.l<Z&&p[p.l]!=13;)switch(F={},F.name=Qh.utils.decode(T,p.slice(p.l,p.l+K)).replace(/[\u0000\r\n].*$/g,""),p.l+=K,F.type=String.fromCharCode(p.read_shift(1)),y!=2&&!k&&(F.offset=p.read_shift(4)),F.len=p.read_shift(1),y==2&&(F.offset=p.read_shift(2)),F.dec=p.read_shift(1),F.name.length&&D.push(F),y!=2&&(p.l+=k?13:14),F.type){case"B":(!b||F.len!=8)&&h.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+F.type)}if(p[p.l]!==13&&(p.l=E-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=E;var L=0,Q=0;for(g[0]=[],Q=0;Q!=D.length;++Q)g[0][Q]=D[Q].name;for(;S-- >0;){if(p[p.l]===42){p.l+=O;continue}for(++p.l,g[++L]=[],Q=0,Q=0;Q!=D.length;++Q){var se=p.slice(p.l,p.l+D[Q].len);p.l+=D[Q].len,Di(se,0);var ce=Qh.utils.decode(T,se);switch(D[Q].type){case"C":ce.trim().length&&(g[L][Q]=ce.replace(/\s+$/,""));break;case"D":ce.length===8?g[L][Q]=new Date(+ce.slice(0,4),+ce.slice(4,6)-1,+ce.slice(6,8)):g[L][Q]=ce;break;case"F":g[L][Q]=parseFloat(ce.trim());break;case"+":case"I":g[L][Q]=k?se.read_shift(-4,"i")^2147483648:se.read_shift(4,"i");break;case"L":switch(ce.trim().toUpperCase()){case"Y":case"T":g[L][Q]=!0;break;case"N":case"F":g[L][Q]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ce+"|")}break;case"M":if(!_)throw new Error("DBF Unexpected MEMO for type "+y.toString(16));g[L][Q]="##MEMO##"+(k?parseInt(ce.trim(),10):se.read_shift(4));break;case"N":ce=ce.replace(/\u0000/g,"").trim(),ce&&ce!="."&&(g[L][Q]=+ce||0);break;case"@":g[L][Q]=new Date(se.read_shift(-8,"f")-621356832e5);break;case"T":g[L][Q]=new Date((se.read_shift(4)-2440588)*864e5+se.read_shift(4));break;case"Y":g[L][Q]=se.read_shift(4,"i")/1e4+se.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":g[L][Q]=-se.read_shift(-8,"f");break;case"B":if(b&&D[Q].len==8){g[L][Q]=se.read_shift(8,"f");break}case"G":case"P":se.l+=D[Q].len;break;case"0":if(D[Q].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+D[Q].type)}}}if(y!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return h&&h.sheetRows&&(g=g.slice(0,h.sheetRows)),h.DBF=D,g}function r(d,h){var g=h||{};g.dateNF||(g.dateNF="yyyymmdd");var p=tu(n(d,g),g);return p["!cols"]=g.DBF.map(function(y){return{wch:y.len,DBF:y}}),delete g.DBF,p}function s(d,h){try{return Wo(r(d,h),h)}catch(g){if(h&&h.WTF)throw g}return{SheetNames:[],Sheets:{}}}var l={B:8,C:250,L:1,D:8,"?":0,"":0};function c(d,h){var g=h||{};if(+g.codepage>=0&&jd(+g.codepage),g.type=="string")throw new Error("Cannot write DBF to JS string");var p=mi(),y=f0(d,{header:1,raw:!0,cellDates:!0}),_=y[0],b=y.slice(1),k=d["!cols"]||[],S=0,E=0,O=0,T=1;for(S=0;S<_.length;++S){if(((k[S]||{}).DBF||{}).name){_[S]=k[S].DBF.name,++O;continue}if(_[S]!=null){if(++O,typeof _[S]=="number"&&(_[S]=_[S].toString(10)),typeof _[S]!="string")throw new Error("DBF Invalid column name "+_[S]+" |"+typeof _[S]+"|");if(_.indexOf(_[S])!==S){for(E=0;E<1024;++E)if(_.indexOf(_[S]+"_"+E)==-1){_[S]+="_"+E;break}}}}var D=rs(d["!ref"]),F=[],Z=[],K=[];for(S=0;S<=D.e.c-D.s.c;++S){var L="",Q="",se=0,ce=[];for(E=0;E<b.length;++E)b[E][S]!=null&&ce.push(b[E][S]);if(ce.length==0||_[S]==null){F[S]="?";continue}for(E=0;E<ce.length;++E){switch(typeof ce[E]){case"number":Q="B";break;case"string":Q="C";break;case"boolean":Q="L";break;case"object":Q=ce[E]instanceof Date?"D":"C";break;default:Q="C"}se=Math.max(se,String(ce[E]).length),L=L&&L!=Q?"C":Q}se>250&&(se=250),Q=((k[S]||{}).DBF||{}).type,Q=="C"&&k[S].DBF.len>se&&(se=k[S].DBF.len),L=="B"&&Q=="N"&&(L="N",K[S]=k[S].DBF.dec,se=k[S].DBF.len),Z[S]=L=="C"||Q=="N"?se:l[L]||0,T+=Z[S],F[S]=L}var ye=p.next(32);for(ye.write_shift(4,318902576),ye.write_shift(4,b.length),ye.write_shift(2,296+32*O),ye.write_shift(2,T),S=0;S<4;++S)ye.write_shift(4,0);for(ye.write_shift(4,0|(+e[Jk]||3)<<8),S=0,E=0;S<_.length;++S)if(_[S]!=null){var te=p.next(32),xe=(_[S].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);te.write_shift(1,xe,"sbcs"),te.write_shift(1,F[S]=="?"?"C":F[S],"sbcs"),te.write_shift(4,E),te.write_shift(1,Z[S]||l[F[S]]||0),te.write_shift(1,K[S]||0),te.write_shift(1,2),te.write_shift(4,0),te.write_shift(1,0),te.write_shift(4,0),te.write_shift(4,0),E+=Z[S]||l[F[S]]||0}var Ce=p.next(264);for(Ce.write_shift(4,13),S=0;S<65;++S)Ce.write_shift(4,0);for(S=0;S<b.length;++S){var at=p.next(T);for(at.write_shift(1,0),E=0;E<_.length;++E)if(_[E]!=null)switch(F[E]){case"L":at.write_shift(1,b[S][E]==null?63:b[S][E]?84:70);break;case"B":at.write_shift(8,b[S][E]||0,"f");break;case"N":var le="0";for(typeof b[S][E]=="number"&&(le=b[S][E].toFixed(K[E]||0)),O=0;O<Z[E]-le.length;++O)at.write_shift(1,32);at.write_shift(1,le,"sbcs");break;case"D":b[S][E]?(at.write_shift(4,("0000"+b[S][E].getFullYear()).slice(-4),"sbcs"),at.write_shift(2,("00"+(b[S][E].getMonth()+1)).slice(-2),"sbcs"),at.write_shift(2,("00"+b[S][E].getDate()).slice(-2),"sbcs")):at.write_shift(8,"00000000","sbcs");break;case"C":var Ve=String(b[S][E]!=null?b[S][E]:"").slice(0,Z[E]);for(at.write_shift(1,Ve,"sbcs"),O=0;O<Z[E]-Ve.length;++O)at.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:s,to_sheet:r,from_sheet:c}}(),hM=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Js(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(_,b){var k=t[b];return typeof k=="number"?U_(k):k},r=function(_,b,k){var S=b.charCodeAt(0)-32<<4|k.charCodeAt(0)-48;return S==59?_:U_(S)};t["|"]=254;function s(_,b){switch(b.type){case"base64":return l(xl(_),b);case"binary":return l(_,b);case"buffer":return l(Rr&&Buffer.isBuffer(_)?_.toString("binary"):Kd(_),b);case"array":return l(L0(_),b)}throw new Error("Unrecognized type "+b.type)}function l(_,b){var k=_.split(/[\n\r]+/),S=-1,E=-1,O=0,T=0,D=[],F=[],Z=null,K={},L=[],Q=[],se=[],ce=0,ye;for(+b.codepage>=0&&jd(+b.codepage);O!==k.length;++O){ce=0;var te=k[O].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),xe=te.replace(/;;/g,"\0").split(";").map(function(V){return V.replace(/\u0000/g,";")}),Ce=xe[0],at;if(te.length>0)switch(Ce){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":xe[1].charAt(0)=="P"&&F.push(te.slice(3).replace(/;;/g,";"));break;case"C":var le=!1,Ve=!1,Ue=!1,Ze=!1,M=-1,oe=-1;for(T=1;T<xe.length;++T)switch(xe[T].charAt(0)){case"A":break;case"X":E=parseInt(xe[T].slice(1))-1,Ve=!0;break;case"Y":for(S=parseInt(xe[T].slice(1))-1,Ve||(E=0),ye=D.length;ye<=S;++ye)D[ye]=[];break;case"K":at=xe[T].slice(1),at.charAt(0)==='"'?at=at.slice(1,at.length-1):at==="TRUE"?at=!0:at==="FALSE"?at=!1:isNaN(hl(at))?isNaN(Od(at).getDate())||(at=ci(at)):(at=hl(at),Z!==null&&lE(Z)&&(at=dE(at))),le=!0;break;case"E":Ze=!0;var P=d8(xe[T].slice(1),{r:S,c:E});D[S][E]=[D[S][E],P];break;case"S":Ue=!0,D[S][E]=[D[S][E],"S5S"];break;case"G":break;case"R":M=parseInt(xe[T].slice(1))-1;break;case"C":oe=parseInt(xe[T].slice(1))-1;break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+te)}if(le&&(D[S][E]&&D[S][E].length==2?D[S][E][0]=at:D[S][E]=at,Z=null),Ue){if(Ze)throw new Error("SYLK shared formula cannot have own formula");var B=M>-1&&D[M][oe];if(!B||!B[1])throw new Error("SYLK shared formula cannot find base");D[S][E][1]=f8(B[1],{r:S-M,c:E-oe})}break;case"F":var j=0;for(T=1;T<xe.length;++T)switch(xe[T].charAt(0)){case"X":E=parseInt(xe[T].slice(1))-1,++j;break;case"Y":for(S=parseInt(xe[T].slice(1))-1,ye=D.length;ye<=S;++ye)D[ye]=[];break;case"M":ce=parseInt(xe[T].slice(1))/20;break;case"F":break;case"G":break;case"P":Z=F[parseInt(xe[T].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(se=xe[T].slice(1).split(" "),ye=parseInt(se[0],10);ye<=parseInt(se[1],10);++ye)ce=parseInt(se[2],10),Q[ye-1]=ce===0?{hidden:!0}:{wch:ce},N1(Q[ye-1]);break;case"C":E=parseInt(xe[T].slice(1))-1,Q[E]||(Q[E]={});break;case"R":S=parseInt(xe[T].slice(1))-1,L[S]||(L[S]={}),ce>0?(L[S].hpt=ce,L[S].hpx=ZE(ce)):ce===0&&(L[S].hidden=!0);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+te)}j<1&&(Z=null);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+te)}}return L.length>0&&(K["!rows"]=L),Q.length>0&&(K["!cols"]=Q),b&&b.sheetRows&&(D=D.slice(0,b.sheetRows)),[D,K]}function c(_,b){var k=s(_,b),S=k[0],E=k[1],O=tu(S,b);return Js(E).forEach(function(T){O[T]=E[T]}),O}function d(_,b){return Wo(c(_,b),b)}function h(_,b,k,S){var E="C;Y"+(k+1)+";X"+(S+1)+";K";switch(_.t){case"n":E+=_.v||0,_.f&&!_.F&&(E+=";E"+C1(_.f,{r:k,c:S}));break;case"b":E+=_.v?"TRUE":"FALSE";break;case"e":E+=_.w||_.v;break;case"d":E+='"'+(_.w||_.v)+'"';break;case"s":E+='"'+_.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function g(_,b){b.forEach(function(k,S){var E="F;W"+(S+1)+" "+(S+1)+" ";k.hidden?E+="0":(typeof k.width=="number"&&!k.wpx&&(k.wpx=o0(k.width)),typeof k.wpx=="number"&&!k.wch&&(k.wch=c0(k.wpx)),typeof k.wch=="number"&&(E+=Math.round(k.wch))),E.charAt(E.length-1)!=" "&&_.push(E)})}function p(_,b){b.forEach(function(k,S){var E="F;";k.hidden?E+="M0;":k.hpt?E+="M"+20*k.hpt+";":k.hpx&&(E+="M"+20*u0(k.hpx)+";"),E.length>2&&_.push(E+"R"+(S+1))})}function y(_,b){var k=["ID;PWXL;N;E"],S=[],E=rs(_["!ref"]),O,T=Array.isArray(_),D=`\r
`;k.push("P;PGeneral"),k.push("F;P0;DG0G8;M255"),_["!cols"]&&g(k,_["!cols"]),_["!rows"]&&p(k,_["!rows"]),k.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var F=E.s.r;F<=E.e.r;++F)for(var Z=E.s.c;Z<=E.e.c;++Z){var K=Ur({r:F,c:Z});O=T?(_[F]||[])[Z]:_[K],!(!O||O.v==null&&(!O.f||O.F))&&S.push(h(O,_,F,Z))}return k.join(D)+D+S.join(D)+D+"E"+D}return{to_workbook:d,to_sheet:c,from_sheet:y}}(),gM=function(){function t(l,c){switch(c.type){case"base64":return e(xl(l),c);case"binary":return e(l,c);case"buffer":return e(Rr&&Buffer.isBuffer(l)?l.toString("binary"):Kd(l),c);case"array":return e(L0(l),c)}throw new Error("Unrecognized type "+c.type)}function e(l,c){for(var d=l.split(`
`),h=-1,g=-1,p=0,y=[];p!==d.length;++p){if(d[p].trim()==="BOT"){y[++h]=[],g=0;continue}if(!(h<0)){var _=d[p].trim().split(","),b=_[0],k=_[1];++p;for(var S=d[p]||"";(S.match(/["]/g)||[]).length&1&&p<d.length-1;)S+=`
`+d[++p];switch(S=S.trim(),+b){case-1:if(S==="BOT"){y[++h]=[],g=0;continue}else if(S!=="EOD")throw new Error("Unrecognized DIF special command "+S);break;case 0:S==="TRUE"?y[h][g]=!0:S==="FALSE"?y[h][g]=!1:isNaN(hl(k))?isNaN(Od(k).getDate())?y[h][g]=k:y[h][g]=ci(k):y[h][g]=hl(k),++g;break;case 1:S=S.slice(1,S.length-1),S=S.replace(/""/g,'"'),S&&S.match(/^=".*"$/)&&(S=S.slice(2,-1)),y[h][g++]=S!==""?S:null;break}if(S==="EOD")break}}return c&&c.sheetRows&&(y=y.slice(0,c.sheetRows)),y}function n(l,c){return tu(t(l,c),c)}function r(l,c){return Wo(n(l,c),c)}var s=function(){var l=function(h,g,p,y,_){h.push(g),h.push(p+","+y),h.push('"'+_.replace(/"/g,'""')+'"')},c=function(h,g,p,y){h.push(g+","+p),h.push(g==1?'"'+y.replace(/"/g,'""')+'"':y)};return function(h){var g=[],p=rs(h["!ref"]),y,_=Array.isArray(h);l(g,"TABLE",0,1,"sheetjs"),l(g,"VECTORS",0,p.e.r-p.s.r+1,""),l(g,"TUPLES",0,p.e.c-p.s.c+1,""),l(g,"DATA",0,0,"");for(var b=p.s.r;b<=p.e.r;++b){c(g,-1,0,"BOT");for(var k=p.s.c;k<=p.e.c;++k){var S=Ur({r:b,c:k});if(y=_?(h[b]||[])[k]:h[S],!y){c(g,1,0,"");continue}switch(y.t){case"n":var E=y.w;!E&&y.v!=null&&(E=y.v),E==null?y.f&&!y.F?c(g,1,0,"="+y.f):c(g,1,0,""):c(g,0,E,"V");break;case"b":c(g,0,y.v?1:0,y.v?"TRUE":"FALSE");break;case"s":c(g,1,0,isNaN(y.v)?y.v:'="'+y.v+'"');break;case"d":y.w||(y.w=to(y.z||gs[14],bi(ci(y.v)))),c(g,0,y.w,"V");break;default:c(g,1,0,"")}}}c(g,-1,0,"EOD");var O=`\r
`,T=g.join(O);return T}}();return{to_workbook:r,to_sheet:n,from_sheet:s}}(),qE=function(){function t(y){return y.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(y){return y.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(y,_){for(var b=y.split(`
`),k=-1,S=-1,E=0,O=[];E!==b.length;++E){var T=b[E].trim().split(":");if(T[0]==="cell"){var D=Is(T[1]);if(O.length<=D.r)for(k=O.length;k<=D.r;++k)O[k]||(O[k]=[]);switch(k=D.r,S=D.c,T[2]){case"t":O[k][S]=t(T[3]);break;case"v":O[k][S]=+T[3];break;case"vtf":var F=T[T.length-1];case"vtc":switch(T[3]){case"nl":O[k][S]=!!+T[4];break;default:O[k][S]=+T[4];break}T[2]=="vtf"&&(O[k][S]=[O[k][S],F])}}}return _&&_.sheetRows&&(O=O.slice(0,_.sheetRows)),O}function r(y,_){return tu(n(y,_),_)}function s(y,_){return Wo(r(y,_),_)}var l=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),h="--SocialCalcSpreadsheetControlSave--";function g(y){if(!y||!y["!ref"])return"";for(var _=[],b=[],k,S="",E=Li(y["!ref"]),O=Array.isArray(y),T=E.s.r;T<=E.e.r;++T)for(var D=E.s.c;D<=E.e.c;++D)if(S=Ur({r:T,c:D}),k=O?(y[T]||[])[D]:y[S],!(!k||k.v==null||k.t==="z")){switch(b=["cell",S,"t"],k.t){case"s":case"str":b.push(e(k.v));break;case"n":k.f?(b[2]="vtf",b[3]="n",b[4]=k.v,b[5]=e(k.f)):(b[2]="v",b[3]=k.v);break;case"b":b[2]="vt"+(k.f?"f":"c"),b[3]="nl",b[4]=k.v?"1":"0",b[5]=e(k.f||(k.v?"TRUE":"FALSE"));break;case"d":var F=bi(ci(k.v));b[2]="vtc",b[3]="nd",b[4]=""+F,b[5]=k.w||to(k.z||gs[14],F);break;case"e":continue}_.push(b.join(":"))}return _.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),_.push("valueformat:1:text-wiki"),_.join(`
`)}function p(y){return[l,c,d,c,g(y),h].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:p}}(),pM=function(){function t(p,y,_,b,k){k.raw?y[_][b]=p:p===""||(p==="TRUE"?y[_][b]=!0:p==="FALSE"?y[_][b]=!1:isNaN(hl(p))?isNaN(Od(p).getDate())?y[_][b]=p:y[_][b]=ci(p):y[_][b]=hl(p))}function e(p,y){var _=y||{},b=[];if(!p||p.length===0)return b;for(var k=p.split(/[\r\n]/),S=k.length-1;S>=0&&k[S].length===0;)--S;for(var E=10,O=0,T=0;T<=S;++T)O=k[T].indexOf(" "),O==-1?O=k[T].length:O++,E=Math.max(E,O);for(T=0;T<=S;++T){b[T]=[];var D=0;for(t(k[T].slice(0,E).trim(),b,T,D,_),D=1;D<=(k[T].length-E)/10+1;++D)t(k[T].slice(E+(D-1)*10,E+D*10).trim(),b,T,D,_)}return _.sheetRows&&(b=b.slice(0,_.sheetRows)),b}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(p){for(var y={},_=!1,b=0,k=0;b<p.length;++b)(k=p.charCodeAt(b))==34?_=!_:!_&&k in n&&(y[k]=(y[k]||0)+1);k=[];for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&k.push([y[b],b]);if(!k.length){y=r;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&k.push([y[b],b])}return k.sort(function(S,E){return S[0]-E[0]||r[S[1]]-r[E[1]]}),n[k.pop()[1]]||44}function l(p,y){var _=y||{},b="",k=_.dense?[]:{},S={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(b=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(b=p.charAt(4),p=p.slice(6)):b=s(p.slice(0,1024)):_&&_.FS?b=_.FS:b=s(p.slice(0,1024));var E=0,O=0,T=0,D=0,F=0,Z=b.charCodeAt(0),K=!1,L=0,Q=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var se=_.dateNF!=null?OD(_.dateNF):null;function ce(){var ye=p.slice(D,F),te={};if(ye.charAt(0)=='"'&&ye.charAt(ye.length-1)=='"'&&(ye=ye.slice(1,-1).replace(/""/g,'"')),ye.length===0)te.t="z";else if(_.raw)te.t="s",te.v=ye;else if(ye.trim().length===0)te.t="s",te.v=ye;else if(ye.charCodeAt(0)==61)ye.charCodeAt(1)==34&&ye.charCodeAt(ye.length-1)==34?(te.t="s",te.v=ye.slice(2,-1).replace(/""/g,'"')):h8(ye)?(te.t="n",te.f=ye.slice(1)):(te.t="s",te.v=ye);else if(ye=="TRUE")te.t="b",te.v=!0;else if(ye=="FALSE")te.t="b",te.v=!1;else if(!isNaN(T=hl(ye)))te.t="n",_.cellText!==!1&&(te.w=ye),te.v=T;else if(!isNaN(Od(ye).getDate())||se&&ye.match(se)){te.z=_.dateNF||gs[14];var xe=0;se&&ye.match(se)&&(ye=DD(ye,_.dateNF,ye.match(se)||[]),xe=1),_.cellDates?(te.t="d",te.v=ci(ye,xe)):(te.t="n",te.v=bi(ci(ye,xe))),_.cellText!==!1&&(te.w=to(te.z,te.v instanceof Date?bi(te.v):te.v)),_.cellNF||delete te.z}else te.t="s",te.v=ye;if(te.t=="z"||(_.dense?(k[E]||(k[E]=[]),k[E][O]=te):k[Ur({c:O,r:E})]=te),D=F+1,Q=p.charCodeAt(D),S.e.c<O&&(S.e.c=O),S.e.r<E&&(S.e.r=E),L==Z)++O;else if(O=0,++E,_.sheetRows&&_.sheetRows<=E)return!0}e:for(;F<p.length;++F)switch(L=p.charCodeAt(F)){case 34:Q===34&&(K=!K);break;case Z:case 10:case 13:if(!K&&ce())break e;break}return F-D>0&&ce(),k["!ref"]=Es(S),k}function c(p,y){return!(y&&y.PRN)||y.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?l(p,y):tu(e(p,y),y)}function d(p,y){var _="",b=y.type=="string"?[0,0,0,0]:TP(p,y);switch(y.type){case"base64":_=xl(p);break;case"binary":_=p;break;case"buffer":y.codepage==65001?_=p.toString("utf8"):y.codepage&&typeof Qh<"u"||(_=Rr&&Buffer.isBuffer(p)?p.toString("binary"):Kd(p));break;case"array":_=L0(p);break;case"string":_=p;break;default:throw new Error("Unrecognized type "+y.type)}return b[0]==239&&b[1]==187&&b[2]==191?_=gd(_.slice(3)):y.type!="string"&&y.type!="buffer"&&y.codepage==65001?_=gd(_):y.type=="binary"&&typeof Qh<"u",_.slice(0,19)=="socialcalc:version:"?qE.to_sheet(y.type=="string"?_:gd(_),y):c(_,y)}function h(p,y){return Wo(d(p,y),y)}function g(p){for(var y=[],_=rs(p["!ref"]),b,k=Array.isArray(p),S=_.s.r;S<=_.e.r;++S){for(var E=[],O=_.s.c;O<=_.e.c;++O){var T=Ur({r:S,c:O});if(b=k?(p[S]||[])[O]:p[T],!b||b.v==null){E.push("          ");continue}for(var D=(b.w||(yl(b),b.w)||"").slice(0,10);D.length<10;)D+=" ";E.push(D+(O===0?" ":""))}y.push(E.join(""))}return y.join(`
`)}return{to_workbook:h,to_sheet:d,from_sheet:g}}(),v2=function(){function t(P,B,j){if(P){Di(P,P.l||0);for(var V=j.Enum||M;P.l<P.length;){var fe=P.read_shift(2),lt=V[fe]||V[65535],et=P.read_shift(2),ht=P.l+et,At=lt.f&&lt.f(P,et,j);if(P.l=ht,B(At,lt,fe))return}}}function e(P,B){switch(B.type){case"base64":return n(da(xl(P)),B);case"binary":return n(da(P),B);case"buffer":case"array":return n(P,B)}throw"Unsupported type "+B.type}function n(P,B){if(!P)return P;var j=B||{},V=j.dense?[]:{},fe="Sheet1",lt="",et=0,ht={},At=[],xn=[],Bt={s:{r:0,c:0},e:{r:0,c:0}},Kt=j.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)j.Enum=M,t(P,function(He,Dn,Ht){switch(Ht){case 0:j.vers=He,He>=4096&&(j.qpro=!0);break;case 6:Bt=He;break;case 204:He&&(lt=He);break;case 222:lt=He;break;case 15:case 51:j.qpro||(He[1].v=He[1].v.slice(1));case 13:case 14:case 16:Ht==14&&(He[2]&112)==112&&(He[2]&15)>1&&(He[2]&15)<15&&(He[1].z=j.dateNF||gs[14],j.cellDates&&(He[1].t="d",He[1].v=dE(He[1].v))),j.qpro&&He[3]>et&&(V["!ref"]=Es(Bt),ht[fe]=V,At.push(fe),V=j.dense?[]:{},Bt={s:{r:0,c:0},e:{r:0,c:0}},et=He[3],fe=lt||"Sheet"+(et+1),lt="");var yt=j.dense?(V[He[0].r]||[])[He[0].c]:V[Ur(He[0])];if(yt){yt.t=He[1].t,yt.v=He[1].v,He[1].z!=null&&(yt.z=He[1].z),He[1].f!=null&&(yt.f=He[1].f);break}j.dense?(V[He[0].r]||(V[He[0].r]=[]),V[He[0].r][He[0].c]=He[1]):V[Ur(He[0])]=He[1];break}},j);else if(P[2]==26||P[2]==14)j.Enum=oe,P[2]==14&&(j.qpro=!0,P.l=0),t(P,function(He,Dn,Ht){switch(Ht){case 204:fe=He;break;case 22:He[1].v=He[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(He[3]>et&&(V["!ref"]=Es(Bt),ht[fe]=V,At.push(fe),V=j.dense?[]:{},Bt={s:{r:0,c:0},e:{r:0,c:0}},et=He[3],fe="Sheet"+(et+1)),Kt>0&&He[0].r>=Kt)break;j.dense?(V[He[0].r]||(V[He[0].r]=[]),V[He[0].r][He[0].c]=He[1]):V[Ur(He[0])]=He[1],Bt.e.c<He[0].c&&(Bt.e.c=He[0].c),Bt.e.r<He[0].r&&(Bt.e.r=He[0].r);break;case 27:He[14e3]&&(xn[He[14e3][0]]=He[14e3][1]);break;case 1537:xn[He[0]]=He[1],He[0]==et&&(fe=He[1]);break}},j);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(V["!ref"]=Es(Bt),ht[lt||fe]=V,At.push(lt||fe),!xn.length)return{SheetNames:At,Sheets:ht};for(var tn={},Hn=[],sn=0;sn<xn.length;++sn)ht[At[sn]]?(Hn.push(xn[sn]||At[sn]),tn[xn[sn]]=ht[xn[sn]]||ht[At[sn]]):(Hn.push(xn[sn]),tn[xn[sn]]={"!ref":"A1"});return{SheetNames:Hn,Sheets:tn}}function r(P,B){var j=B||{};if(+j.codepage>=0&&jd(+j.codepage),j.type=="string")throw new Error("Cannot write WK1 to JS string");var V=mi(),fe=rs(P["!ref"]),lt=Array.isArray(P),et=[];cn(V,0,l(1030)),cn(V,6,h(fe));for(var ht=Math.min(fe.e.r,8191),At=fe.s.r;At<=ht;++At)for(var xn=qs(At),Bt=fe.s.c;Bt<=fe.e.c;++Bt){At===fe.s.r&&(et[Bt]=ni(Bt));var Kt=et[Bt]+xn,tn=lt?(P[At]||[])[Bt]:P[Kt];if(!(!tn||tn.t=="z"))if(tn.t=="n")(tn.v|0)==tn.v&&tn.v>=-32768&&tn.v<=32767?cn(V,13,b(At,Bt,tn.v)):cn(V,14,S(At,Bt,tn.v));else{var Hn=yl(tn);cn(V,15,y(At,Bt,Hn.slice(0,239)))}}return cn(V,1),V.end()}function s(P,B){var j=B||{};if(+j.codepage>=0&&jd(+j.codepage),j.type=="string")throw new Error("Cannot write WK3 to JS string");var V=mi();cn(V,0,c(P));for(var fe=0,lt=0;fe<P.SheetNames.length;++fe)(P.Sheets[P.SheetNames[fe]]||{})["!ref"]&&cn(V,27,Ze(P.SheetNames[fe],lt++));var et=0;for(fe=0;fe<P.SheetNames.length;++fe){var ht=P.Sheets[P.SheetNames[fe]];if(!(!ht||!ht["!ref"])){for(var At=rs(ht["!ref"]),xn=Array.isArray(ht),Bt=[],Kt=Math.min(At.e.r,8191),tn=At.s.r;tn<=Kt;++tn)for(var Hn=qs(tn),sn=At.s.c;sn<=At.e.c;++sn){tn===At.s.r&&(Bt[sn]=ni(sn));var He=Bt[sn]+Hn,Dn=xn?(ht[tn]||[])[sn]:ht[He];if(!(!Dn||Dn.t=="z"))if(Dn.t=="n")cn(V,23,ce(tn,sn,et,Dn.v));else{var Ht=yl(Dn);cn(V,22,L(tn,sn,et,Ht.slice(0,239)))}}++et}}return cn(V,1),V.end()}function l(P){var B=ut(2);return B.write_shift(2,P),B}function c(P){var B=ut(26);B.write_shift(2,4096),B.write_shift(2,4),B.write_shift(4,0);for(var j=0,V=0,fe=0,lt=0;lt<P.SheetNames.length;++lt){var et=P.SheetNames[lt],ht=P.Sheets[et];if(!(!ht||!ht["!ref"])){++fe;var At=Li(ht["!ref"]);j<At.e.r&&(j=At.e.r),V<At.e.c&&(V=At.e.c)}}return j>8191&&(j=8191),B.write_shift(2,j),B.write_shift(1,fe),B.write_shift(1,V),B.write_shift(2,0),B.write_shift(2,0),B.write_shift(1,1),B.write_shift(1,2),B.write_shift(4,0),B.write_shift(4,0),B}function d(P,B,j){var V={s:{c:0,r:0},e:{c:0,r:0}};return B==8&&j.qpro?(V.s.c=P.read_shift(1),P.l++,V.s.r=P.read_shift(2),V.e.c=P.read_shift(1),P.l++,V.e.r=P.read_shift(2),V):(V.s.c=P.read_shift(2),V.s.r=P.read_shift(2),B==12&&j.qpro&&(P.l+=2),V.e.c=P.read_shift(2),V.e.r=P.read_shift(2),B==12&&j.qpro&&(P.l+=2),V.s.c==65535&&(V.s.c=V.e.c=V.s.r=V.e.r=0),V)}function h(P){var B=ut(8);return B.write_shift(2,P.s.c),B.write_shift(2,P.s.r),B.write_shift(2,P.e.c),B.write_shift(2,P.e.r),B}function g(P,B,j){var V=[{c:0,r:0},{t:"n",v:0},0,0];return j.qpro&&j.vers!=20768?(V[0].c=P.read_shift(1),V[3]=P.read_shift(1),V[0].r=P.read_shift(2),P.l+=2):(V[2]=P.read_shift(1),V[0].c=P.read_shift(2),V[0].r=P.read_shift(2)),V}function p(P,B,j){var V=P.l+B,fe=g(P,B,j);if(fe[1].t="s",j.vers==20768){P.l++;var lt=P.read_shift(1);return fe[1].v=P.read_shift(lt,"utf8"),fe}return j.qpro&&P.l++,fe[1].v=P.read_shift(V-P.l,"cstr"),fe}function y(P,B,j){var V=ut(7+j.length);V.write_shift(1,255),V.write_shift(2,B),V.write_shift(2,P),V.write_shift(1,39);for(var fe=0;fe<V.length;++fe){var lt=j.charCodeAt(fe);V.write_shift(1,lt>=128?95:lt)}return V.write_shift(1,0),V}function _(P,B,j){var V=g(P,B,j);return V[1].v=P.read_shift(2,"i"),V}function b(P,B,j){var V=ut(7);return V.write_shift(1,255),V.write_shift(2,B),V.write_shift(2,P),V.write_shift(2,j,"i"),V}function k(P,B,j){var V=g(P,B,j);return V[1].v=P.read_shift(8,"f"),V}function S(P,B,j){var V=ut(13);return V.write_shift(1,255),V.write_shift(2,B),V.write_shift(2,P),V.write_shift(8,j,"f"),V}function E(P,B,j){var V=P.l+B,fe=g(P,B,j);if(fe[1].v=P.read_shift(8,"f"),j.qpro)P.l=V;else{var lt=P.read_shift(2);F(P.slice(P.l,P.l+lt),fe),P.l+=lt}return fe}function O(P,B,j){var V=B&32768;return B&=-32769,B=(V?P:0)+(B>=8192?B-16384:B),(V?"":"$")+(j?ni(B):qs(B))}var T={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},D=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function F(P,B){Di(P,0);for(var j=[],V=0,fe="",lt="",et="",ht="";P.l<P.length;){var At=P[P.l++];switch(At){case 0:j.push(P.read_shift(8,"f"));break;case 1:lt=O(B[0].c,P.read_shift(2),!0),fe=O(B[0].r,P.read_shift(2),!1),j.push(lt+fe);break;case 2:{var xn=O(B[0].c,P.read_shift(2),!0),Bt=O(B[0].r,P.read_shift(2),!1);lt=O(B[0].c,P.read_shift(2),!0),fe=O(B[0].r,P.read_shift(2),!1),j.push(xn+Bt+":"+lt+fe)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:j.push("("+j.pop()+")");break;case 5:j.push(P.read_shift(2));break;case 6:{for(var Kt="";At=P[P.l++];)Kt+=String.fromCharCode(At);j.push('"'+Kt.replace(/"/g,'""')+'"')}break;case 8:j.push("-"+j.pop());break;case 23:j.push("+"+j.pop());break;case 22:j.push("NOT("+j.pop()+")");break;case 20:case 21:ht=j.pop(),et=j.pop(),j.push(["AND","OR"][At-20]+"("+et+","+ht+")");break;default:if(At<32&&D[At])ht=j.pop(),et=j.pop(),j.push(et+D[At]+ht);else if(T[At]){if(V=T[At][1],V==69&&(V=P[P.l++]),V>j.length){console.error("WK1 bad formula parse 0x"+At.toString(16)+":|"+j.join("|")+"|");return}var tn=j.slice(-V);j.length-=V,j.push(T[At][0]+"("+tn.join(",")+")")}else return At<=7?console.error("WK1 invalid opcode "+At.toString(16)):At<=24?console.error("WK1 unsupported op "+At.toString(16)):At<=30?console.error("WK1 invalid opcode "+At.toString(16)):At<=115?console.error("WK1 unsupported function opcode "+At.toString(16)):console.error("WK1 unrecognized opcode "+At.toString(16))}}j.length==1?B[1].f=""+j[0]:console.error("WK1 bad formula parse |"+j.join("|")+"|")}function Z(P){var B=[{c:0,r:0},{t:"n",v:0},0];return B[0].r=P.read_shift(2),B[3]=P[P.l++],B[0].c=P[P.l++],B}function K(P,B){var j=Z(P);return j[1].t="s",j[1].v=P.read_shift(B-4,"cstr"),j}function L(P,B,j,V){var fe=ut(6+V.length);fe.write_shift(2,P),fe.write_shift(1,j),fe.write_shift(1,B),fe.write_shift(1,39);for(var lt=0;lt<V.length;++lt){var et=V.charCodeAt(lt);fe.write_shift(1,et>=128?95:et)}return fe.write_shift(1,0),fe}function Q(P,B){var j=Z(P);j[1].v=P.read_shift(2);var V=j[1].v>>1;if(j[1].v&1)switch(V&7){case 0:V=(V>>3)*5e3;break;case 1:V=(V>>3)*500;break;case 2:V=(V>>3)/20;break;case 3:V=(V>>3)/200;break;case 4:V=(V>>3)/2e3;break;case 5:V=(V>>3)/2e4;break;case 6:V=(V>>3)/16;break;case 7:V=(V>>3)/64;break}return j[1].v=V,j}function se(P,B){var j=Z(P),V=P.read_shift(4),fe=P.read_shift(4),lt=P.read_shift(2);if(lt==65535)return V===0&&fe===3221225472?(j[1].t="e",j[1].v=15):V===0&&fe===3489660928?(j[1].t="e",j[1].v=42):j[1].v=0,j;var et=lt&32768;return lt=(lt&32767)-16446,j[1].v=(1-et*2)*(fe*Math.pow(2,lt+32)+V*Math.pow(2,lt)),j}function ce(P,B,j,V){var fe=ut(14);if(fe.write_shift(2,P),fe.write_shift(1,j),fe.write_shift(1,B),V==0)return fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(2,65535),fe;var lt=0,et=0,ht=0,At=0;return V<0&&(lt=1,V=-V),et=Math.log2(V)|0,V/=Math.pow(2,et-31),At=V>>>0,(At&2147483648)==0&&(V/=2,++et,At=V>>>0),V-=At,At|=2147483648,At>>>=0,V*=Math.pow(2,32),ht=V>>>0,fe.write_shift(4,ht),fe.write_shift(4,At),et+=16383+(lt?32768:0),fe.write_shift(2,et),fe}function ye(P,B){var j=se(P);return P.l+=B-14,j}function te(P,B){var j=Z(P),V=P.read_shift(4);return j[1].v=V>>6,j}function xe(P,B){var j=Z(P),V=P.read_shift(8,"f");return j[1].v=V,j}function Ce(P,B){var j=xe(P);return P.l+=B-10,j}function at(P,B){return P[P.l+B-1]==0?P.read_shift(B,"cstr"):""}function le(P,B){var j=P[P.l++];j>B-1&&(j=B-1);for(var V="";V.length<j;)V+=String.fromCharCode(P[P.l++]);return V}function Ve(P,B,j){if(!(!j.qpro||B<21)){var V=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var fe=P.read_shift(B-21,"cstr");return[V,fe]}}function Ue(P,B){for(var j={},V=P.l+B;P.l<V;){var fe=P.read_shift(2);if(fe==14e3){for(j[fe]=[0,""],j[fe][0]=P.read_shift(2);P[P.l];)j[fe][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return j}function Ze(P,B){var j=ut(5+P.length);j.write_shift(2,14e3),j.write_shift(2,B);for(var V=0;V<P.length;++V){var fe=P.charCodeAt(V);j[j.l++]=fe>127?95:fe}return j[j.l++]=0,j}var M={0:{n:"BOF",f:$E},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:_},14:{n:"NUMBER",f:k},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:at},222:{n:"SHEETNAMELP",f:le},65535:{n:""}},oe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:K},23:{n:"NUMBER17",f:se},24:{n:"NUMBER18",f:Q},25:{n:"FORMULA19",f:ye},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ue},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:te},38:{n:"??"},39:{n:"NUMBER27",f:xe},40:{n:"FORMULA28",f:Ce},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:at},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ve},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:e}}(),mM=/^\s|\s$|[\t\n\r]/;function JE(t,e){if(!e.bookSST)return"";var n=[Ns];n[n.length]=on("sst",null,{xmlns:eu[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var s=t[r],l="<si>";s.r?l+=s.r:(l+="<t",s.t||(s.t=""),s.t.match(mM)&&(l+=' xml:space="preserve"'),l+=">"+Hr(s.t)+"</t>"),l+="</si>",n[n.length]=l}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function xM(t){return[t.read_shift(4),t.read_shift(4)]}function yM(t,e){return e||(e=ut(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var vM=cR;function bM(t){var e=mi();jt(e,159,yM(t));for(var n=0;n<t.length;++n)jt(e,19,vM(t[n]));return jt(e,160),e.end()}function _M(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function XE(t){var e=0,n,r=_M(t),s=r.length+1,l,c,d,h,g;for(n=Mo(s),n[0]=r.length,l=1;l!=s;++l)n[l]=r[l-1];for(l=s-1;l>=0;--l)c=n[l],d=(e&16384)===0?0:1,h=e<<1&32767,g=d|h,e=g^c;return e^52811}var SM=function(){function t(s,l){switch(l.type){case"base64":return e(xl(s),l);case"binary":return e(s,l);case"buffer":return e(Rr&&Buffer.isBuffer(s)?s.toString("binary"):Kd(s),l);case"array":return e(L0(s),l)}throw new Error("Unrecognized type "+l.type)}function e(s,l){var c=l||{},d=c.dense?[]:{},h=s.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var g={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(p,y){Array.isArray(d)&&(d[y]=[]);for(var _=/\\\w+\b/g,b=0,k,S=-1;k=_.exec(p);){switch(k[0]){case"\\cell":var E=p.slice(b,_.lastIndex-k[0].length);if(E[0]==" "&&(E=E.slice(1)),++S,E.length){var O={v:E,t:"s"};Array.isArray(d)?d[y][S]=O:d[Ur({r:y,c:S})]=O}break}b=_.lastIndex}S>g.e.c&&(g.e.c=S)}),d["!ref"]=Es(g),d}function n(s,l){return Wo(t(s,l),l)}function r(s){for(var l=["{\\rtf1\\ansi"],c=rs(s["!ref"]),d,h=Array.isArray(s),g=c.s.r;g<=c.e.r;++g){l.push("\\trowd\\trautofit1");for(var p=c.s.c;p<=c.e.c;++p)l.push("\\cellx"+(p+1));for(l.push("\\pard\\intbl"),p=c.s.c;p<=c.e.c;++p){var y=Ur({r:g,c:p});d=h?(s[g]||[])[p]:s[y],!(!d||d.v==null&&(!d.f||d.F))&&(l.push(" "+(d.w||(yl(d),d.w))),l.push("\\cell"))}l.push("\\pard\\intbl\\row")}return l.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function b2(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var wM=6,gl=wM;function o0(t){return Math.floor((t+Math.round(128/gl)/256)*gl)}function c0(t){return Math.floor((t-5)/gl*100+.5)/100}function px(t){return Math.round((t*gl+5)/gl*256)/256}function N1(t){t.width?(t.wpx=o0(t.width),t.wch=c0(t.wpx),t.MDW=gl):t.wpx?(t.wch=c0(t.wpx),t.width=px(t.wch),t.MDW=gl):typeof t.wch=="number"&&(t.width=px(t.wch),t.wpx=o0(t.width),t.MDW=gl),t.customWidth&&delete t.customWidth}var kM=96,KE=kM;function u0(t){return t*96/KE}function ZE(t){return t*KE/96}function EM(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=on("numFmt",null,{numFmtId:r,formatCode:Hr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=on("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function NM(t){var e=[];return e[e.length]=on("cellXfs",null),t.forEach(function(n){e[e.length]=on("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=on("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function QE(t,e){var n=[Ns,on("styleSheet",null,{xmlns:eu[0],"xmlns:vt":Ls.vt})],r;return t.SSF&&(r=EM(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=NM(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function TM(t,e){var n=t.read_shift(2),r=ri(t);return[n,r]}function CM(t,e,n){n||(n=ut(6+4*e.length)),n.write_shift(2,t),Ps(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function jM(t,e,n){var r={};r.sz=t.read_shift(2)/20;var s=mR(t);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var l=t.read_shift(2);switch(l===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var c=t.read_shift(1);c!=0&&(r.underline=c);var d=t.read_shift(1);d>0&&(r.family=d);var h=t.read_shift(1);switch(h>0&&(r.charset=h),t.l++,r.color=pR(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ri(t),r}function AM(t,e){e||(e=ut(25+4*32)),e.write_shift(2,t.sz*20),xR(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),a0(t.color,e);var r=0;return r=2,e.write_shift(1,r),Ps(t.name,e),e.length>e.l?e.slice(0,e.l):e}var OM=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],um,DM=Fa;function _2(t,e){e||(e=ut(4*3+8*7+16*1)),um||(um=g1(OM));var n=um[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(a0({auto:1},e),a0({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function RM(t,e){var n=t.l+e,r=t.read_shift(2),s=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:s}}function eN(t,e,n){n||(n=ut(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Ku(t,e){return e||(e=ut(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var MM=Fa;function LM(t,e){return e||(e=ut(51)),e.write_shift(1,0),Ku(null,e),Ku(null,e),Ku(null,e),Ku(null,e),Ku(null,e),e.length>e.l?e.slice(0,e.l):e}function IM(t,e){return e||(e=ut(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),i0(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function PM(t,e,n){var r=ut(2052);return r.write_shift(4,t),i0(e,r),i0(n,r),r.length>r.l?r.slice(0,r.l):r}function FM(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&++n}),n!=0&&(jt(t,615,ga(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&jt(t,44,CM(s,e[s]))}),jt(t,616))}}function zM(t){var e=1;jt(t,611,ga(e)),jt(t,43,AM({sz:12,color:{theme:1},name:"Calibri",family:2})),jt(t,612)}function BM(t){var e=2;jt(t,603,ga(e)),jt(t,45,_2({patternType:"none"})),jt(t,45,_2({patternType:"gray125"})),jt(t,604)}function HM(t){var e=1;jt(t,613,ga(e)),jt(t,46,LM()),jt(t,614)}function UM(t){var e=1;jt(t,626,ga(e)),jt(t,47,eN({numFmtId:0},65535)),jt(t,627)}function $M(t,e){jt(t,617,ga(e.length)),e.forEach(function(n){jt(t,47,eN(n,0))}),jt(t,618)}function WM(t){var e=1;jt(t,619,ga(e)),jt(t,48,IM({xfId:0,name:"Normal"})),jt(t,620)}function VM(t){var e=0;jt(t,505,ga(e)),jt(t,506)}function YM(t){var e=0;jt(t,508,PM(e,"TableStyleMedium9","PivotStyleMedium4")),jt(t,509)}function GM(t,e){var n=mi();return jt(n,278),FM(n,t.SSF),zM(n),BM(n),HM(n),UM(n),$M(n,e.cellXfs),WM(n),VM(n),YM(n),jt(n,279),n.end()}function tN(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[Ns];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function qM(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ri(t)}}function JM(t){var e=ut(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Ps(t.name,e),e.slice(0,e.l)}function XM(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function KM(t){var e=ut(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function ZM(t,e){var n=ut(8+2*e.length);return n.write_shift(4,t),Ps(e,n),n.slice(0,n.l)}function QM(t){return t.l+=4,t.read_shift(4)!=0}function e8(t,e){var n=ut(8);return n.write_shift(4,t),n.write_shift(4,1),n}function t8(){var t=mi();return jt(t,332),jt(t,334,ga(1)),jt(t,335,JM({name:"XLDAPR",version:12e4,flags:3496657072})),jt(t,336),jt(t,339,ZM(1,"XLDAPR")),jt(t,52),jt(t,35,ga(514)),jt(t,4096,ga(0)),jt(t,4097,qi(1)),jt(t,36),jt(t,53),jt(t,340),jt(t,337,e8(1)),jt(t,51,KM([[1,0]])),jt(t,338),jt(t,333),t.end()}function nN(){var t=[Ns];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function n8(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=Ur(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Rc=1024;function rN(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[on("xml",null,{"xmlns:v":Ri.v,"xmlns:o":Ri.o,"xmlns:x":Ri.x,"xmlns:mv":Ri.mv}).replace(/\/>/,">"),on("o:shapelayout",on("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),on("v:shapetype",[on("v:stroke",null,{joinstyle:"miter"}),on("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Rc<t*1e3;)Rc+=1e3;return e.forEach(function(l){var c=Is(l[0]),d={color2:"#BEFF82",type:"gradient"};d.type=="gradient"&&(d.angle="-180");var h=d.type=="gradient"?on("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,g=on("v:fill",h,d),p={on:"t",obscured:"t"};++Rc,s=s.concat(["<v:shape"+Rd({id:"_x0000_s"+Rc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(l[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",g,on("v:shadow",null,p),on("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Gs("x:Anchor",[c.c+1,0,c.r+1,0,c.c+3,20,c.r+5,20].join(",")),Gs("x:AutoFill","False"),Gs("x:Row",String(c.r)),Gs("x:Column",String(c.c)),l[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function sN(t){var e=[Ns,on("comments",null,{xmlns:eu[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(s){var l=Hr(s.a);n.indexOf(l)==-1&&(n.push(l),e.push("<author>"+l+"</author>")),s.T&&s.ID&&n.indexOf("tc="+s.ID)==-1&&(n.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var s=0,l=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(h){h.a&&(s=n.indexOf(Hr(h.a))),l.push(h.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),l.length<=1)e.push(Gs("t",Hr(l[0]||"")));else{for(var c=`Comment:
    `+l[0]+`
`,d=1;d<l.length;++d)c+=`Reply:
    `+l[d]+`
`;e.push(Gs("t",Hr(c)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function r8(t,e,n){var r=[Ns,on("ThreadedComments",null,{xmlns:Ls.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var l="";(s[1]||[]).forEach(function(c,d){if(!c.T){delete c.ID;return}c.a&&e.indexOf(c.a)==-1&&e.push(c.a);var h={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};d==0?l=h.id:h.parentId=l,c.ID=h.id,c.a&&(h.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(c.a)).slice(-12)+"}"),r.push(on("threadedComment",Gs("text",c.t||""),h))})}),r.push("</ThreadedComments>"),r.join("")}function s8(t){var e=[Ns,on("personList",null,{xmlns:Ls.TCMNT,"xmlns:x":eu[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(on("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function i8(t){var e={};e.iauthor=t.read_shift(4);var n=qo(t);return e.rfx=n.s,e.ref=Ur(n.s),t.l+=16,e}function a8(t,e){return e==null&&(e=ut(36)),e.write_shift(4,t[1].iauthor),nu(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var l8=ri;function o8(t){return Ps(t.slice(0,54))}function c8(t){var e=mi(),n=[];return jt(e,628),jt(e,630),t.forEach(function(r){r[1].forEach(function(s){n.indexOf(s.a)>-1||(n.push(s.a.slice(0,54)),jt(e,632,o8(s.a)))})}),jt(e,631),jt(e,633),t.forEach(function(r){r[1].forEach(function(s){s.iauthor=n.indexOf(s.a);var l={s:Is(r[0]),e:Is(r[0])};jt(e,635,a8([l,s])),s.t&&s.t.length>0&&jt(e,637,dR(s)),jt(e,636),delete s.iauthor})}),jt(e,634),jt(e,629),e.end()}function u8(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Yr.utils.cfb_add(t,s,e.FileIndex[r].content)}})}var iN=["xlsb","xlsm","xlam","biff8","xla"],d8=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,s,l,c){var d=!1,h=!1;l.length==0?h=!0:l.charAt(0)=="["&&(h=!0,l=l.slice(1,-1)),c.length==0?d=!0:c.charAt(0)=="["&&(d=!0,c=c.slice(1,-1));var g=l.length>0?parseInt(l,10)|0:0,p=c.length>0?parseInt(c,10)|0:0;return d?p+=e.c:--p,h?g+=e.r:--g,s+(d?"":"$")+ni(p)+(h?"":"$")+qs(g)}return function(s,l){return e=l,s.replace(t,n)}}(),T1=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,C1=function(){return function(e,n){return e.replace(T1,function(r,s,l,c,d,h){var g=_1(c)-(l?0:n.c),p=b1(h)-(d?0:n.r),y=p==0?"":d?p+1:"["+p+"]",_=g==0?"":l?g+1:"["+g+"]";return s+"R"+y+"C"+_})}}();function f8(t,e){return t.replace(T1,function(n,r,s,l,c,d){return r+(s=="$"?s+l:ni(_1(l)+e.c))+(c=="$"?c+d:qs(b1(d)+e.r))})}function h8(t){return t.length!=1}function ks(t){t.l+=1}function no(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function aN(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return lN(t);n.biff==12&&(r=4)}var s=t.read_shift(r),l=t.read_shift(r),c=no(t),d=no(t);return{s:{r:s,c:c[0],cRel:c[1],rRel:c[2]},e:{r:l,c:d[0],cRel:d[1],rRel:d[2]}}}function lN(t){var e=no(t),n=no(t),r=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function g8(t,e,n){if(n.biff<8)return lN(t);var r=t.read_shift(n.biff==12?4:2),s=t.read_shift(n.biff==12?4:2),l=no(t),c=no(t);return{s:{r,c:l[0],cRel:l[1],rRel:l[2]},e:{r:s,c:c[0],cRel:c[1],rRel:c[2]}}}function oN(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return p8(t);var r=t.read_shift(n&&n.biff==12?4:2),s=no(t);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function p8(t){var e=no(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function m8(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function x8(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return y8(t);var s=t.read_shift(r>=12?4:2),l=t.read_shift(2),c=(l&16384)>>14,d=(l&32768)>>15;if(l&=16383,d==1)for(;s>524287;)s-=1048576;if(c==1)for(;l>8191;)l=l-16384;return{r:s,c:l,cRel:c,rRel:d}}function y8(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),s==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:s,rRel:r}}function v8(t,e,n){var r=(t[t.l++]&96)>>5,s=aN(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,s]}function b8(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),l=8;if(n)switch(n.biff){case 5:t.l+=12,l=6;break;case 12:l=12;break}var c=aN(t,l,n);return[r,s,c]}function _8(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function S8(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),l=8;if(n)switch(n.biff){case 5:t.l+=12,l=6;break;case 12:l=12;break}return t.l+=l,[r,s]}function w8(t,e,n){var r=(t[t.l++]&96)>>5,s=g8(t,e-1,n);return[r,s]}function k8(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function S2(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function E8(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),s=[],l=0;l<=r;++l)s.push(t.read_shift(n&&n.biff==2?1:2));return s}function N8(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function T8(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function C8(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function j8(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function cN(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function A8(t){return t.read_shift(2),cN(t)}function O8(t){return t.read_shift(2),cN(t)}function D8(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=oN(t,0,n);return[r,s]}function R8(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=x8(t,0,n);return[r,s]}function M8(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var l=oN(t,0,n);return[r,s,l]}function L8(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(n&&n.biff<=3?1:2);return[L6[s],fN[s],r]}function I8(t,e,n){var r=t[t.l++],s=t.read_shift(1),l=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:P8(t);return[s,(l[0]===0?fN:M6)[l[1]]]}function P8(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function F8(t,e,n){t.l+=n&&n.biff==2?3:4}function z8(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function B8(t){return t.l++,ef[t.read_shift(1)]}function H8(t){return t.l++,t.read_shift(2)}function U8(t){return t.l++,t.read_shift(1)!==0}function $8(t){return t.l++,ru(t)}function W8(t,e,n){return t.l++,VE(t,e-1,n)}function V8(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=MR(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=ef[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=ru(t);break;case 2:n[1]=FR(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function Y8(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),s=[],l=0;l!=r;++l)s.push((n.biff==12?qo:HR)(t));return s}function G8(t,e,n){var r=0,s=0;n.biff==12?(r=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--s==0&&(s=256));for(var l=0,c=[];l!=r&&(c[l]=[]);++l)for(var d=0;d!=s;++d)c[l][d]=V8(t,n.biff);return c}function q8(t,e,n){var r=t.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,l=t.read_shift(s);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,l]}function J8(t,e,n){if(n.biff==5)return X8(t);var r=t.read_shift(1)>>>5&3,s=t.read_shift(2),l=t.read_shift(4);return[r,s,l]}function X8(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function K8(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Z8(t,e,n){var r=t.read_shift(1)>>>5&3,s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Q8(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function e6(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),l=4;if(n)switch(n.biff){case 5:l=15;break;case 12:l=6;break}return t.l+=l,[r,s]}var t6=Fa,n6=Fa,r6=Fa;function tf(t,e,n){return t.l+=2,[m8(t)]}function j1(t){return t.l+=6,[]}var s6=tf,i6=j1,a6=j1,l6=tf;function uN(t){return t.l+=2,[$E(t),t.read_shift(2)&1]}var o6=tf,c6=uN,u6=j1,d6=tf,f6=tf,h6=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function g6(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s=t.read_shift(2),l=t.read_shift(2),c=h6[n>>2&31];return{ixti:e,coltype:n&3,rt:c,idx:r,c:s,C:l}}function p6(t){return t.l+=2,[t.read_shift(4)]}function m6(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function x6(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function y6(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function v6(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function b6(t){return t.l+=4,[0,0]}var w2={1:{n:"PtgExp",f:z8},2:{n:"PtgTbl",f:r6},3:{n:"PtgAdd",f:ks},4:{n:"PtgSub",f:ks},5:{n:"PtgMul",f:ks},6:{n:"PtgDiv",f:ks},7:{n:"PtgPower",f:ks},8:{n:"PtgConcat",f:ks},9:{n:"PtgLt",f:ks},10:{n:"PtgLe",f:ks},11:{n:"PtgEq",f:ks},12:{n:"PtgGe",f:ks},13:{n:"PtgGt",f:ks},14:{n:"PtgNe",f:ks},15:{n:"PtgIsect",f:ks},16:{n:"PtgUnion",f:ks},17:{n:"PtgRange",f:ks},18:{n:"PtgUplus",f:ks},19:{n:"PtgUminus",f:ks},20:{n:"PtgPercent",f:ks},21:{n:"PtgParen",f:ks},22:{n:"PtgMissArg",f:ks},23:{n:"PtgStr",f:W8},26:{n:"PtgSheet",f:m6},27:{n:"PtgEndSheet",f:x6},28:{n:"PtgErr",f:B8},29:{n:"PtgBool",f:U8},30:{n:"PtgInt",f:H8},31:{n:"PtgNum",f:$8},32:{n:"PtgArray",f:k8},33:{n:"PtgFunc",f:L8},34:{n:"PtgFuncVar",f:I8},35:{n:"PtgName",f:q8},36:{n:"PtgRef",f:D8},37:{n:"PtgArea",f:v8},38:{n:"PtgMemArea",f:K8},39:{n:"PtgMemErr",f:t6},40:{n:"PtgMemNoMem",f:n6},41:{n:"PtgMemFunc",f:Z8},42:{n:"PtgRefErr",f:Q8},43:{n:"PtgAreaErr",f:_8},44:{n:"PtgRefN",f:R8},45:{n:"PtgAreaN",f:w8},46:{n:"PtgMemAreaN",f:y6},47:{n:"PtgMemNoMemN",f:v6},57:{n:"PtgNameX",f:J8},58:{n:"PtgRef3d",f:M8},59:{n:"PtgArea3d",f:b8},60:{n:"PtgRefErr3d",f:e6},61:{n:"PtgAreaErr3d",f:S8},255:{}},_6={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},S6={1:{n:"PtgElfLel",f:uN},2:{n:"PtgElfRw",f:d6},3:{n:"PtgElfCol",f:s6},6:{n:"PtgElfRwV",f:f6},7:{n:"PtgElfColV",f:l6},10:{n:"PtgElfRadical",f:o6},11:{n:"PtgElfRadicalS",f:u6},13:{n:"PtgElfColS",f:i6},15:{n:"PtgElfColSV",f:a6},16:{n:"PtgElfRadicalLel",f:c6},25:{n:"PtgList",f:g6},29:{n:"PtgSxName",f:p6},255:{}},w6={0:{n:"PtgAttrNoop",f:b6},1:{n:"PtgAttrSemi",f:j8},2:{n:"PtgAttrIf",f:T8},4:{n:"PtgAttrChoose",f:E8},8:{n:"PtgAttrGoto",f:N8},16:{n:"PtgAttrSum",f:F8},32:{n:"PtgAttrBaxcel",f:S2},33:{n:"PtgAttrBaxcel",f:S2},64:{n:"PtgAttrSpace",f:A8},65:{n:"PtgAttrSpaceSemi",f:O8},128:{n:"PtgAttrIfError",f:C8},255:{}};function k6(t,e,n,r){if(r.biff<8)return Fa(t,e);for(var s=t.l+e,l=[],c=0;c!==n.length;++c)switch(n[c][0]){case"PtgArray":n[c][1]=G8(t,0,r),l.push(n[c][1]);break;case"PtgMemArea":n[c][2]=Y8(t,n[c][1],r),l.push(n[c][2]);break;case"PtgExp":r&&r.biff==12&&(n[c][1][1]=t.read_shift(4),l.push(n[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[c][0]}return e=s-t.l,e!==0&&l.push(Fa(t,e)),l}function E6(t,e,n){for(var r=t.l+e,s,l,c=[];r!=t.l;)e=r-t.l,l=t[t.l],s=w2[l]||w2[_6[l]],(l===24||l===25)&&(s=(l===24?S6:w6)[t[t.l+1]]),!s||!s.f?Fa(t,e):c.push([s.n,s.f(t,e,n)]);return c}function N6(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],s=[],l=0;l<r.length;++l){var c=r[l];if(c)switch(c[0]){case 2:s.push('"'+c[1].replace(/"/g,'""')+'"');break;default:s.push(c[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var T6={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function C6(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function dN(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(t[r[0]][0]){case 357:return s=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(l){return l.Name}).join(";;");default:return t[r[0]][0][3]?(s=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function k2(t,e,n){var r=dN(t,e,n);return r=="#REF"?r:C6(r,n)}function Vc(t,e,n,r,s){var l=s&&s.biff||8,c={s:{c:0,r:0}},d=[],h,g,p,y=0,_=0,b,k="";if(!t[0]||!t[0][0])return"";for(var S=-1,E="",O=0,T=t[0].length;O<T;++O){var D=t[0][O];switch(D[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=d.pop(),g=d.pop(),S>=0){switch(t[0][S][1][0]){case 0:E=hs(" ",t[0][S][1][1]);break;case 1:E=hs("\r",t[0][S][1][1]);break;default:if(E="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][S][1][0])}g=g+E,S=-1}d.push(g+T6[D[0]]+h);break;case"PtgIsect":h=d.pop(),g=d.pop(),d.push(g+" "+h);break;case"PtgUnion":h=d.pop(),g=d.pop(),d.push(g+","+h);break;case"PtgRange":h=d.pop(),g=d.pop(),d.push(g+":"+h);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=md(D[1][1],c,s),d.push(xd(p,l));break;case"PtgRefN":p=n?md(D[1][1],n,s):D[1][1],d.push(xd(p,l));break;case"PtgRef3d":y=D[1][1],p=md(D[1][2],c,s),k=k2(r,y,s),d.push(k+"!"+xd(p,l));break;case"PtgFunc":case"PtgFuncVar":var F=D[1][0],Z=D[1][1];F||(F=0),F&=127;var K=F==0?[]:d.slice(-F);d.length-=F,Z==="User"&&(Z=K.shift()),d.push(Z+"("+K.join(",")+")");break;case"PtgBool":d.push(D[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(D[1]);break;case"PtgNum":d.push(String(D[1]));break;case"PtgStr":d.push('"'+D[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(D[1]);break;case"PtgAreaN":b=o2(D[1][1],n?{s:n}:c,s),d.push(om(b,s));break;case"PtgArea":b=o2(D[1][1],c,s),d.push(om(b,s));break;case"PtgArea3d":y=D[1][1],b=D[1][2],k=k2(r,y,s),d.push(k+"!"+om(b,s));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":_=D[1][2];var L=(r.names||[])[_-1]||(r[0]||[])[_],Q=L?L.Name:"SH33TJSNAME"+String(_);Q&&Q.slice(0,6)=="_xlfn."&&!s.xlfn&&(Q=Q.slice(6)),d.push(Q);break;case"PtgNameX":var se=D[1][1];_=D[1][2];var ce;if(s.biff<=5)se<0&&(se=-se),r[se]&&(ce=r[se][_]);else{var ye="";if(((r[se]||[])[0]||[])[0]==14849||(((r[se]||[])[0]||[])[0]==1025?r[se][_]&&r[se][_].itab>0&&(ye=r.SheetNames[r[se][_].itab-1]+"!"):ye=r.SheetNames[_-1]+"!"),r[se]&&r[se][_])ye+=r[se][_].Name;else if(r[0]&&r[0][_])ye+=r[0][_].Name;else{var te=(dN(r,se,s)||"").split(";;");te[_-1]?ye=te[_-1]:ye+="SH33TJSERRX"}d.push(ye);break}ce||(ce={Name:"SH33TJSERRY"}),d.push(ce.Name);break;case"PtgParen":var xe="(",Ce=")";if(S>=0){switch(E="",t[0][S][1][0]){case 2:xe=hs(" ",t[0][S][1][1])+xe;break;case 3:xe=hs("\r",t[0][S][1][1])+xe;break;case 4:Ce=hs(" ",t[0][S][1][1])+Ce;break;case 5:Ce=hs("\r",t[0][S][1][1])+Ce;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][S][1][0])}S=-1}d.push(xe+d.pop()+Ce);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":p={c:D[1][1],r:D[1][0]};var at={c:n.c,r:n.r};if(r.sharedf[Ur(p)]){var le=r.sharedf[Ur(p)];d.push(Vc(le,c,at,r,s))}else{var Ve=!1;for(h=0;h!=r.arrayf.length;++h)if(g=r.arrayf[h],!(p.c<g[0].s.c||p.c>g[0].e.c)&&!(p.r<g[0].s.r||p.r>g[0].e.r)){d.push(Vc(g[1],c,at,r,s)),Ve=!0;break}Ve||d.push(D[1])}break;case"PtgArray":d.push("{"+N6(D[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":S=O;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+D[1].idx+"[#"+D[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(D));default:throw new Error("Unrecognized Formula Token: "+String(D))}var Ue=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&S>=0&&Ue.indexOf(t[0][O][0])==-1){D=t[0][S];var Ze=!0;switch(D[1][0]){case 4:Ze=!1;case 0:E=hs(" ",D[1][1]);break;case 5:Ze=!1;case 1:E=hs("\r",D[1][1]);break;default:if(E="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+D[1][0])}d.push((Ze?E:"")+d.pop()+(Ze?"":E)),S=-1}}if(d.length>1&&s.WTF)throw new Error("bad formula stack");return d[0]}function j6(t){if(t==null){var e=ut(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Lo(t);return Lo(0)}function A6(t,e,n,r,s){var l=Io(e,n,s),c=j6(t.v),d=ut(6),h=33;d.write_shift(2,h),d.write_shift(4,0);for(var g=ut(t.bf.length),p=0;p<t.bf.length;++p)g[p]=t.bf[p];var y=Ys([l,c,d,g]);return y}function I0(t,e,n){var r=t.read_shift(4),s=E6(t,r,n),l=t.read_shift(4),c=l>0?k6(t,l,s,n):null;return[s,c]}var O6=I0,P0=I0,D6=I0,R6=I0,M6={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},fN={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},L6={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function I6(t){var e="of:="+t.replace(T1,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function P6(t){return t.replace(/\./,"!")}var yd=typeof Map<"u";function A1(t,e,n){var r=0,s=t.length;if(n){if(yd?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var l=yd?n.get(e):n[e];r<l.length;++r)if(t[l[r]].t===e)return t.Count++,l[r]}}else for(;r<s;++r)if(t[r].t===e)return t.Count++,r;return t[s]={t:e},t.Count++,t.Unique++,n&&(yd?(n.has(e)||n.set(e,[]),n.get(e).push(s)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(s))),s}function F0(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(gl=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=c0(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=px(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function hN(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function io(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],s=60,l=t.length;if(r==null&&n.ssf){for(;s<392;++s)if(n.ssf[s]==null){oE(e.z,s),n.ssf[s]=e.z,n.revssf[e.z]=r=s;break}}for(s=0;s!=l;++s)if(t[s].numFmtId===r)return s;return t[l]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},l}function F6(t,e,n){if(t&&t["!ref"]){var r=rs(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function z6(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Es(t[n])+'"/>';return e+"</mergeCells>"}function B6(t,e,n,r,s){var l=!1,c={},d=null;if(r.bookType!=="xlsx"&&e.vbaraw){var h=e.SheetNames[n];try{e.Workbook&&(h=e.Workbook.Sheets[n].CodeName||h)}catch{}l=!0,c.codeName=Dd(Hr(h))}if(t&&t["!outline"]){var g={summaryBelow:1,summaryRight:1};t["!outline"].above&&(g.summaryBelow=0),t["!outline"].left&&(g.summaryRight=0),d=(d||"")+on("outlinePr",null,g)}!l&&!d||(s[s.length]=on("sheetPr",d,c))}var H6=["objects","scenarios","selectLockedCells","selectUnlockedCells"],U6=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function $6(t){var e={sheet:1};return H6.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),U6.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=XE(t.password).toString(16).toUpperCase()),on("sheetProtection",null,e)}function W6(t){return hN(t),on("pageMargins",null,t)}function V6(t,e){for(var n=["<cols>"],r,s=0;s!=e.length;++s)(r=e[s])&&(n[n.length]=on("col",null,F0(s,r)));return n[n.length]="</cols>",n.join("")}function Y6(t,e,n,r){var s=typeof t.ref=="string"?t.ref:Es(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var l=n.Workbook.Names,c=Li(s);c.s.r==c.e.r&&(c.e.r=Li(e["!ref"]).e.r,s=Es(c));for(var d=0;d<l.length;++d){var h=l[d];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==r){h.Ref="'"+n.SheetNames[r]+"'!"+s;break}}return d==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),on("autoFilter",null,{ref:s})}function G6(t,e,n,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),on("sheetViews",on("sheetView",null,s),{})}function q6(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",l=t.t,c=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=ef[t.v];break;case"d":r&&r.cellDates?s=ci(t.v,-1).toISOString():(t=_i(t),t.t="n",s=""+(t.v=bi(ci(t.v)))),typeof t.z>"u"&&(t.z=gs[14]);break;default:s=t.v;break}var d=Gs("v",Hr(s)),h={r:e},g=io(r.cellXfs,t,r);switch(g!==0&&(h.s=g),t.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){d=Gs("v",""+A1(r.Strings,t.v,r.revStrings)),h.t="s";break}h.t="str";break}if(t.t!=l&&(t.t=l,t.v=c),typeof t.f=="string"&&t.f){var p=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;d=on("f",Hr(t.f),p)+(t.v!=null?d:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(h.cm=1),on("c",d,h)}function J6(t,e,n,r){var s=[],l=[],c=rs(t["!ref"]),d="",h,g="",p=[],y=0,_=0,b=t["!rows"],k=Array.isArray(t),S={r:g},E,O=-1;for(_=c.s.c;_<=c.e.c;++_)p[_]=ni(_);for(y=c.s.r;y<=c.e.r;++y){for(l=[],g=qs(y),_=c.s.c;_<=c.e.c;++_){h=p[_]+g;var T=k?(t[y]||[])[_]:t[h];T!==void 0&&(d=q6(T,h,t,e))!=null&&l.push(d)}(l.length>0||b&&b[y])&&(S={r:g},b&&b[y]&&(E=b[y],E.hidden&&(S.hidden=1),O=-1,E.hpx?O=u0(E.hpx):E.hpt&&(O=E.hpt),O>-1&&(S.ht=O,S.customHeight=1),E.level&&(S.outlineLevel=E.level)),s[s.length]=on("row",l.join(""),S))}if(b)for(;y<b.length;++y)b&&b[y]&&(S={r:y+1},E=b[y],E.hidden&&(S.hidden=1),O=-1,E.hpx?O=u0(E.hpx):E.hpt&&(O=E.hpt),O>-1&&(S.ht=O,S.customHeight=1),E.level&&(S.outlineLevel=E.level),s[s.length]=on("row","",S));return s.join("")}function gN(t,e,n,r){var s=[Ns,on("worksheet",null,{xmlns:eu[0],"xmlns:r":Ls.r})],l=n.SheetNames[t],c=0,d="",h=n.Sheets[l];h==null&&(h={});var g=h["!ref"]||"A1",p=rs(g);if(p.e.c>16383||p.e.r>1048575){if(e.WTF)throw new Error("Range "+g+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),g=Es(p)}r||(r={}),h["!comments"]=[];var y=[];B6(h,n,t,e,s),s[s.length]=on("dimension",null,{ref:g}),s[s.length]=G6(h,e,t,n),e.sheetFormat&&(s[s.length]=on("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),h["!cols"]!=null&&h["!cols"].length>0&&(s[s.length]=V6(h,h["!cols"])),s[c=s.length]="<sheetData/>",h["!links"]=[],h["!ref"]!=null&&(d=J6(h,e),d.length>0&&(s[s.length]=d)),s.length>c+1&&(s[s.length]="</sheetData>",s[c]=s[c].replace("/>",">")),h["!protect"]&&(s[s.length]=$6(h["!protect"])),h["!autofilter"]!=null&&(s[s.length]=Y6(h["!autofilter"],h,n,t)),h["!merges"]!=null&&h["!merges"].length>0&&(s[s.length]=z6(h["!merges"]));var _=-1,b,k=-1;return h["!links"].length>0&&(s[s.length]="<hyperlinks>",h["!links"].forEach(function(S){S[1].Target&&(b={ref:S[0]},S[1].Target.charAt(0)!="#"&&(k=Br(r,-1,Hr(S[1].Target).replace(/#.*$/,""),Tr.HLINK),b["r:id"]="rId"+k),(_=S[1].Target.indexOf("#"))>-1&&(b.location=Hr(S[1].Target.slice(_+1))),S[1].Tooltip&&(b.tooltip=Hr(S[1].Tooltip)),s[s.length]=on("hyperlink",null,b))}),s[s.length]="</hyperlinks>"),delete h["!links"],h["!margins"]!=null&&(s[s.length]=W6(h["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=Gs("ignoredErrors",on("ignoredError",null,{numberStoredAsText:1,sqref:g}))),y.length>0&&(k=Br(r,-1,"../drawings/drawing"+(t+1)+".xml",Tr.DRAW),s[s.length]=on("drawing",null,{"r:id":"rId"+k}),h["!drawing"]=y),h["!comments"].length>0&&(k=Br(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Tr.VML),s[s.length]=on("legacyDrawing",null,{"r:id":"rId"+k}),h["!legacy"]=k),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function X6(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var l=t.read_shift(1);return t.l=r,l&7&&(n.level=l&7),l&16&&(n.hidden=!0),l&32&&(n.hpt=s/20),n}function K6(t,e,n){var r=ut(145),s=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var l=320;s.hpx?l=u0(s.hpx)*20:s.hpt&&(l=s.hpt*20),r.write_shift(2,l),r.write_shift(1,0);var c=0;s.level&&(c|=s.level),s.hidden&&(c|=16),(s.hpx||s.hpt)&&(c|=32),r.write_shift(1,c),r.write_shift(1,0);var d=0,h=r.l;r.l+=4;for(var g={r:t,c:0},p=0;p<16;++p)if(!(e.s.c>p+1<<10||e.e.c<p<<10)){for(var y=-1,_=-1,b=p<<10;b<p+1<<10;++b){g.c=b;var k=Array.isArray(n)?(n[g.r]||[])[g.c]:n[Ur(g)];k&&(y<0&&(y=b),_=b)}y<0||(++d,r.write_shift(4,y),r.write_shift(4,_))}var S=r.l;return r.l=h,r.write_shift(4,d),r.l=S,r.length>r.l?r.slice(0,r.l):r}function Z6(t,e,n,r){var s=K6(r,n,e);(s.length>17||(e["!rows"]||[])[r])&&jt(t,0,s)}var Q6=qo,eL=nu;function tL(){}function nL(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=fR(t),n}function rL(t,e,n){n==null&&(n=ut(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var s=1;s<3;++s)n.write_shift(1,0);return a0({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),jE(t,n),n.slice(0,n.l)}function sL(t){var e=ea(t);return[e]}function iL(t,e,n){return n==null&&(n=ut(8)),Vo(e,n)}function aL(t){var e=Yo(t);return[e]}function lL(t,e,n){return n==null&&(n=ut(4)),Go(e,n)}function oL(t){var e=ea(t),n=t.read_shift(1);return[e,n,"b"]}function cL(t,e,n){return n==null&&(n=ut(9)),Vo(e,n),n.write_shift(1,t.v?1:0),n}function uL(t){var e=Yo(t),n=t.read_shift(1);return[e,n,"b"]}function dL(t,e,n){return n==null&&(n=ut(5)),Go(e,n),n.write_shift(1,t.v?1:0),n}function fL(t){var e=ea(t),n=t.read_shift(1);return[e,n,"e"]}function hL(t,e,n){return n==null&&(n=ut(9)),Vo(e,n),n.write_shift(1,t.v),n}function gL(t){var e=Yo(t),n=t.read_shift(1);return[e,n,"e"]}function pL(t,e,n){return n==null&&(n=ut(8)),Go(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function mL(t){var e=ea(t),n=t.read_shift(4);return[e,n,"s"]}function xL(t,e,n){return n==null&&(n=ut(12)),Vo(e,n),n.write_shift(4,e.v),n}function yL(t){var e=Yo(t),n=t.read_shift(4);return[e,n,"s"]}function vL(t,e,n){return n==null&&(n=ut(8)),Go(e,n),n.write_shift(4,e.v),n}function bL(t){var e=ea(t),n=ru(t);return[e,n,"n"]}function _L(t,e,n){return n==null&&(n=ut(16)),Vo(e,n),Lo(t.v,n),n}function SL(t){var e=Yo(t),n=ru(t);return[e,n,"n"]}function wL(t,e,n){return n==null&&(n=ut(12)),Go(e,n),Lo(t.v,n),n}function kL(t){var e=ea(t),n=AE(t);return[e,n,"n"]}function EL(t,e,n){return n==null&&(n=ut(12)),Vo(e,n),OE(t.v,n),n}function NL(t){var e=Yo(t),n=AE(t);return[e,n,"n"]}function TL(t,e,n){return n==null&&(n=ut(8)),Go(e,n),OE(t.v,n),n}function CL(t){var e=ea(t),n=S1(t);return[e,n,"is"]}function jL(t){var e=ea(t),n=ri(t);return[e,n,"str"]}function AL(t,e,n){return n==null&&(n=ut(12+4*t.v.length)),Vo(e,n),Ps(t.v,n),n.length>n.l?n.slice(0,n.l):n}function OL(t){var e=Yo(t),n=ri(t);return[e,n,"str"]}function DL(t,e,n){return n==null&&(n=ut(8+4*t.v.length)),Go(e,n),Ps(t.v,n),n.length>n.l?n.slice(0,n.l):n}function RL(t,e,n){var r=t.l+e,s=ea(t);s.r=n["!row"];var l=t.read_shift(1),c=[s,l,"b"];if(n.cellFormula){t.l+=2;var d=P0(t,r-t.l,n);c[3]=Vc(d,null,s,n.supbooks,n)}else t.l=r;return c}function ML(t,e,n){var r=t.l+e,s=ea(t);s.r=n["!row"];var l=t.read_shift(1),c=[s,l,"e"];if(n.cellFormula){t.l+=2;var d=P0(t,r-t.l,n);c[3]=Vc(d,null,s,n.supbooks,n)}else t.l=r;return c}function LL(t,e,n){var r=t.l+e,s=ea(t);s.r=n["!row"];var l=ru(t),c=[s,l,"n"];if(n.cellFormula){t.l+=2;var d=P0(t,r-t.l,n);c[3]=Vc(d,null,s,n.supbooks,n)}else t.l=r;return c}function IL(t,e,n){var r=t.l+e,s=ea(t);s.r=n["!row"];var l=ri(t),c=[s,l,"str"];if(n.cellFormula){t.l+=2;var d=P0(t,r-t.l,n);c[3]=Vc(d,null,s,n.supbooks,n)}else t.l=r;return c}var PL=qo,FL=nu;function zL(t,e){return e==null&&(e=ut(4)),e.write_shift(4,t),e}function BL(t,e){var n=t.l+e,r=qo(t),s=w1(t),l=ri(t),c=ri(t),d=ri(t);t.l=n;var h={rfx:r,relId:s,loc:l,display:d};return c&&(h.Tooltip=c),h}function HL(t,e){var n=ut(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));nu({s:Is(t[0]),e:Is(t[0])},n),k1("rId"+e,n);var r=t[1].Target.indexOf("#"),s=r==-1?"":t[1].Target.slice(r+1);return Ps(s||"",n),Ps(t[1].Tooltip||"",n),Ps("",n),n.slice(0,n.l)}function UL(){}function $L(t,e,n){var r=t.l+e,s=DE(t),l=t.read_shift(1),c=[s];if(c[2]=l,n.cellFormula){var d=O6(t,r-t.l,n);c[1]=d}else t.l=r;return c}function WL(t,e,n){var r=t.l+e,s=qo(t),l=[s];if(n.cellFormula){var c=R6(t,r-t.l,n);l[1]=c,t.l=r}else t.l=r;return l}function VL(t,e,n){n==null&&(n=ut(18));var r=F0(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),n.write_shift(2,s),n}var pN=["left","right","top","bottom","header","footer"];function YL(t){var e={};return pN.forEach(function(n){e[n]=ru(t)}),e}function GL(t,e){return e==null&&(e=ut(6*8)),hN(t),pN.forEach(function(n){Lo(t[n],e)}),e}function qL(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function JL(t,e,n){n==null&&(n=ut(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function XL(t){var e=ut(24);return e.write_shift(4,4),e.write_shift(4,1),nu(t,e),e}function KL(t,e){return e==null&&(e=ut(16*4+2)),e.write_shift(2,t.password?XE(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function ZL(){}function QL(){}function eI(t,e,n,r,s,l,c){if(e.v===void 0)return!1;var d="";switch(e.t){case"b":d=e.v?"1":"0";break;case"d":e=_i(e),e.z=e.z||gs[14],e.v=bi(ci(e.v)),e.t="n";break;case"n":case"e":d=""+e.v;break;default:d=e.v;break}var h={r:n,c:r};switch(h.s=io(s.cellXfs,e,s),e.l&&l["!links"].push([Ur(h),e.l]),e.c&&l["!comments"].push([Ur(h),e.c]),e.t){case"s":case"str":return s.bookSST?(d=A1(s.Strings,e.v,s.revStrings),h.t="s",h.v=d,c?jt(t,18,vL(e,h)):jt(t,7,xL(e,h))):(h.t="str",c?jt(t,17,DL(e,h)):jt(t,6,AL(e,h))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?c?jt(t,13,TL(e,h)):jt(t,2,EL(e,h)):c?jt(t,16,wL(e,h)):jt(t,5,_L(e,h)),!0;case"b":return h.t="b",c?jt(t,15,dL(e,h)):jt(t,4,cL(e,h)),!0;case"e":return h.t="e",c?jt(t,14,pL(e,h)):jt(t,3,hL(e,h)),!0}return c?jt(t,12,lL(e,h)):jt(t,1,iL(e,h)),!0}function tI(t,e,n,r){var s=rs(e["!ref"]||"A1"),l,c="",d=[];jt(t,145);var h=Array.isArray(e),g=s.e.r;e["!rows"]&&(g=Math.max(s.e.r,e["!rows"].length-1));for(var p=s.s.r;p<=g;++p){c=qs(p),Z6(t,e,s,p);var y=!1;if(p<=s.e.r)for(var _=s.s.c;_<=s.e.c;++_){p===s.s.r&&(d[_]=ni(_)),l=d[_]+c;var b=h?(e[p]||[])[_]:e[l];if(!b){y=!1;continue}y=eI(t,b,p,_,r,e,y)}}jt(t,146)}function nI(t,e){!e||!e["!merges"]||(jt(t,177,zL(e["!merges"].length)),e["!merges"].forEach(function(n){jt(t,176,FL(n))}),jt(t,178))}function rI(t,e){!e||!e["!cols"]||(jt(t,390),e["!cols"].forEach(function(n,r){n&&jt(t,60,VL(r,n))}),jt(t,391))}function sI(t,e){!e||!e["!ref"]||(jt(t,648),jt(t,649,XL(rs(e["!ref"]))),jt(t,650))}function iI(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var s=Br(n,-1,r[1].Target.replace(/#.*$/,""),Tr.HLINK);jt(t,494,HL(r,s))}}),delete e["!links"]}function aI(t,e,n,r){if(e["!comments"].length>0){var s=Br(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Tr.VML);jt(t,551,k1("rId"+s)),e["!legacy"]=s}}function lI(t,e,n,r){if(e["!autofilter"]){var s=e["!autofilter"],l=typeof s.ref=="string"?s.ref:Es(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var c=n.Workbook.Names,d=Li(l);d.s.r==d.e.r&&(d.e.r=Li(e["!ref"]).e.r,l=Es(d));for(var h=0;h<c.length;++h){var g=c[h];if(g.Name=="_xlnm._FilterDatabase"&&g.Sheet==r){g.Ref="'"+n.SheetNames[r]+"'!"+l;break}}h==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+l}),jt(t,161,nu(rs(l))),jt(t,162)}}function oI(t,e,n){jt(t,133),jt(t,137,JL(e,n)),jt(t,138),jt(t,134)}function cI(t,e){e["!protect"]&&jt(t,535,KL(e["!protect"]))}function uI(t,e,n,r){var s=mi(),l=n.SheetNames[t],c=n.Sheets[l]||{},d=l;try{n&&n.Workbook&&(d=n.Workbook.Sheets[t].CodeName||d)}catch{}var h=rs(c["!ref"]||"A1");if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575)}return c["!links"]=[],c["!comments"]=[],jt(s,129),(n.vbaraw||c["!outline"])&&jt(s,147,rL(d,c["!outline"])),jt(s,148,eL(h)),oI(s,c,n.Workbook),rI(s,c),tI(s,c,t,e),cI(s,c),lI(s,c,n,t),nI(s,c),iI(s,c,r),c["!margins"]&&jt(s,476,GL(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&sI(s,c),aI(s,c,t,r),jt(s,130),s.end()}function dI(t,e){t.l+=10;var n=ri(t);return{name:n}}var fI=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function hI(t){return!t.Workbook||!t.Workbook.WBProps?"false":WD(t.Workbook.WBProps.date1904)?"true":"false"}var gI="][*?/\\".split("");function mN(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return gI.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function pI(t,e,n){t.forEach(function(r,s){mN(r);for(var l=0;l<s;++l)if(r==t[l])throw new Error("Duplicate Sheet Name: "+r);if(n){var c=e&&e[s]&&e[s].CodeName||r;if(c.charCodeAt(0)==95&&c.length>22)throw new Error("Bad Code Name: Worksheet"+c)}})}function mI(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];pI(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)F6(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}function xN(t){var e=[Ns];e[e.length]=on("workbook",null,{xmlns:eu[0],"xmlns:r":Ls.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(fI.forEach(function(d){t.Workbook.WBProps[d[0]]!=null&&t.Workbook.WBProps[d[0]]!=d[1]&&(r[d[0]]=t.Workbook.WBProps[d[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=on("workbookPr",null,r);var s=t.Workbook&&t.Workbook.Sheets||[],l=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",l=0;l!=t.SheetNames.length&&!(!s[l]||!s[l].Hidden);++l);l==t.SheetNames.length&&(l=0),e[e.length]='<workbookView firstSheet="'+l+'" activeTab="'+l+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",l=0;l!=t.SheetNames.length;++l){var c={name:Hr(t.SheetNames[l].slice(0,31))};if(c.sheetId=""+(l+1),c["r:id"]="rId"+(l+1),s[l])switch(s[l].Hidden){case 1:c.state="hidden";break;case 2:c.state="veryHidden";break}e[e.length]=on("sheet",null,c)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(d){var h={name:d.Name};d.Comment&&(h.comment=d.Comment),d.Sheet!=null&&(h.localSheetId=""+d.Sheet),d.Hidden&&(h.hidden="1"),d.Ref&&(e[e.length]=on("definedName",Hr(d.Ref),h))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function xI(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=gx(t),n.name=ri(t),n}function yI(t,e){return e||(e=ut(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),k1(t.strRelID,e),Ps(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function vI(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var s=e>8?ri(t):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function bI(t,e){e||(e=ut(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),jE(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function _I(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),l=hR(t),c=D6(t,0,n),d=w1(t);t.l=r;var h={Name:l,Ptg:c};return s<268435455&&(h.Sheet=s),d&&(h.Comment=d),h}function SI(t,e){jt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,s={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};jt(t,156,yI(s))}jt(t,144)}function wI(t,e){e||(e=ut(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return Ps("SheetJS",e),Ps(Zh.version,e),Ps(Zh.version,e),Ps("7262",e),e.length>e.l?e.slice(0,e.l):e}function kI(t,e){e||(e=ut(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function EI(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,s=-1,l=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&s==-1?s=r:n[r].Hidden==1&&l==-1&&(l=r);l>s||(jt(t,135),jt(t,158,kI(s)),jt(t,136))}}function NI(t,e){var n=mi();return jt(n,131),jt(n,128,wI()),jt(n,153,bI(t.Workbook&&t.Workbook.WBProps||null)),EI(n,t),SI(n,t),jt(n,132),n.end()}function TI(t,e,n){return(e.slice(-4)===".bin"?NI:xN)(t)}function CI(t,e,n,r,s){return(e.slice(-4)===".bin"?uI:gN)(t,n,r,s)}function jI(t,e,n){return(e.slice(-4)===".bin"?GM:QE)(t,n)}function AI(t,e,n){return(e.slice(-4)===".bin"?bM:JE)(t,n)}function OI(t,e,n){return(e.slice(-4)===".bin"?c8:sN)(t)}function DI(t){return(t.slice(-4)===".bin"?t8:nN)()}function RI(t,e){var n=[];return t.Props&&n.push(jR(t.Props,e)),t.Custprops&&n.push(AR(t.Props,t.Custprops)),n.join("")}function MI(){return""}function LI(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,s){var l=[];l.push(on("NumberFormat",null,{"ss:Format":Hr(gs[r.numFmtId])}));var c={"ss:ID":"s"+(21+s)};n.push(on("Style",l.join(""),c))}),on("Styles",n.join(""))}function yN(t){return on("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+C1(t.Ref,{r:0,c:0})})}function II(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var s=e[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||n.push(yN(s)))}return on("Names",n.join(""))}function PI(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,l=[],c=0;c<s.length;++c){var d=s[c];d.Sheet==n&&(d.Name.match(/^_xlfn\./)||l.push(yN(d)))}return l.join("")}function FI(t,e,n,r){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(on("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(on("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(on("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)s.push(on("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var l=0;l<n&&!(r.Workbook.Sheets[l]&&!r.Workbook.Sheets[l].Hidden);++l);l==n&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(Gs("ProtectContents","True")),t["!protect"].objects&&s.push(Gs("ProtectObjects","True")),t["!protect"].scenarios&&s.push(Gs("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(Gs("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(Gs("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(c){t["!protect"][c[0]]&&s.push("<"+c[1]+"/>")})),s.length==0?"":on("WorksheetOptions",s.join(""),{xmlns:Ri.x})}function zI(t){return t.map(function(e){var n=$D(e.t||""),r=on("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return on("Comment",r,{"ss:Author":e.a})}).join("")}function BI(t,e,n,r,s,l,c){if(!t||t.v==null&&t.f==null)return"";var d={};if(t.f&&(d["ss:Formula"]="="+Hr(C1(t.f,c))),t.F&&t.F.slice(0,e.length)==e){var h=Is(t.F.slice(e.length+1));d["ss:ArrayRange"]="RC:R"+(h.r==c.r?"":"["+(h.r-c.r)+"]")+"C"+(h.c==c.c?"":"["+(h.c-c.c)+"]")}if(t.l&&t.l.Target&&(d["ss:HRef"]=Hr(t.l.Target),t.l.Tooltip&&(d["x:HRefScreenTip"]=Hr(t.l.Tooltip))),n["!merges"])for(var g=n["!merges"],p=0;p!=g.length;++p)g[p].s.c!=c.c||g[p].s.r!=c.r||(g[p].e.c>g[p].s.c&&(d["ss:MergeAcross"]=g[p].e.c-g[p].s.c),g[p].e.r>g[p].s.r&&(d["ss:MergeDown"]=g[p].e.r-g[p].s.r));var y="",_="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":y="Number",_=String(t.v);break;case"b":y="Boolean",_=t.v?"1":"0";break;case"e":y="Error",_=ef[t.v];break;case"d":y="DateTime",_=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||gs[14]);break;case"s":y="String",_=UD(t.v||"");break}var b=io(r.cellXfs,t,r);d["ss:StyleID"]="s"+(21+b),d["ss:Index"]=c.c+1;var k=t.v!=null?_:"",S=t.t=="z"?"":'<Data ss:Type="'+y+'">'+k+"</Data>";return(t.c||[]).length>0&&(S+=zI(t.c)),on("Cell",S,d)}function HI(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=ZE(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function UI(t,e,n,r){if(!t["!ref"])return"";var s=rs(t["!ref"]),l=t["!merges"]||[],c=0,d=[];t["!cols"]&&t["!cols"].forEach(function(E,O){N1(E);var T=!!E.width,D=F0(O,E),F={"ss:Index":O+1};T&&(F["ss:Width"]=o0(D.width)),E.hidden&&(F["ss:Hidden"]="1"),d.push(on("Column",null,F))});for(var h=Array.isArray(t),g=s.s.r;g<=s.e.r;++g){for(var p=[HI(g,(t["!rows"]||[])[g])],y=s.s.c;y<=s.e.c;++y){var _=!1;for(c=0;c!=l.length;++c)if(!(l[c].s.c>y)&&!(l[c].s.r>g)&&!(l[c].e.c<y)&&!(l[c].e.r<g)){(l[c].s.c!=y||l[c].s.r!=g)&&(_=!0);break}if(!_){var b={r:g,c:y},k=Ur(b),S=h?(t[g]||[])[y]:t[k];p.push(BI(S,k,t,e,n,r,b))}}p.push("</Row>"),p.length>2&&d.push(p.join(""))}return d.join("")}function $I(t,e,n){var r=[],s=n.SheetNames[t],l=n.Sheets[s],c=l?PI(l,e,t,n):"";return c.length>0&&r.push("<Names>"+c+"</Names>"),c=l?UI(l,e,t,n):"",c.length>0&&r.push("<Table>"+c+"</Table>"),r.push(FI(l,e,t,n)),r.join("")}function WI(t,e){e||(e={}),t.SSF||(t.SSF=_i(gs)),t.SSF&&(R0(),D0(t.SSF),e.revssf=M0(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],io(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(RI(t,e)),n.push(MI()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(on("Worksheet",$I(r,e,t),{"ss:Name":Hr(t.SheetNames[r])}));return n[2]=LI(t,e),n[3]=II(t),Ns+on("Workbook",n.join(""),{xmlns:Ri.ss,"xmlns:o":Ri.o,"xmlns:x":Ri.x,"xmlns:ss":Ri.ss,"xmlns:dt":Ri.dt,"xmlns:html":Ri.html})}var dm={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function VI(t,e){var n=[],r=[],s=[],l=0,c,d=K_(u2,"n"),h=K_(d2,"n");if(t.Props)for(c=Js(t.Props),l=0;l<c.length;++l)(Object.prototype.hasOwnProperty.call(d,c[l])?n:Object.prototype.hasOwnProperty.call(h,c[l])?r:s).push([c[l],t.Props[c[l]]]);if(t.Custprops)for(c=Js(t.Custprops),l=0;l<c.length;++l)Object.prototype.hasOwnProperty.call(t.Props||{},c[l])||(Object.prototype.hasOwnProperty.call(d,c[l])?n:Object.prototype.hasOwnProperty.call(h,c[l])?r:s).push([c[l],t.Custprops[c[l]]]);var g=[];for(l=0;l<s.length;++l)UE.indexOf(s[l][0])>-1||zE.indexOf(s[l][0])>-1||s[l][1]!=null&&g.push(s[l]);r.length&&Yr.utils.cfb_add(e,"/SummaryInformation",m2(r,dm.SI,h,d2)),(n.length||g.length)&&Yr.utils.cfb_add(e,"/DocumentSummaryInformation",m2(n,dm.DSI,d,u2,g.length?g:null,dm.UDI))}function YI(t,e){var n=e||{},r=Yr.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Yr.utils.cfb_add(r,s,vN(t,n)),n.biff==8&&(t.Props||t.Custprops)&&VI(t,r),n.biff==8&&t.vbaraw&&u8(r,Yr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var GI={0:{f:X6},1:{f:sL},2:{f:kL},3:{f:fL},4:{f:oL},5:{f:bL},6:{f:jL},7:{f:mL},8:{f:IL},9:{f:LL},10:{f:RL},11:{f:ML},12:{f:aL},13:{f:NL},14:{f:gL},15:{f:uL},16:{f:SL},17:{f:OL},18:{f:yL},19:{f:S1},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:_I},40:{},42:{},43:{f:jM},44:{f:TM},45:{f:DM},46:{f:MM},47:{f:RM},48:{},49:{f:aR},50:{},51:{f:XM},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:lM},62:{f:CL},63:{f:n8},64:{f:ZL},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Fa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:qL},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:nL},148:{f:Q6,p:16},151:{f:UL},152:{},153:{f:vI},154:{},155:{},156:{f:xI},157:{},158:{},159:{T:1,f:xM},160:{T:-1},161:{T:1,f:qo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:PL},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:qM},336:{T:-1},337:{f:QM,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:gx},357:{},358:{},359:{},360:{T:1},361:{},362:{f:tM},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:$L},427:{f:WL},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:YL},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:tL},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:BL},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:gx},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:l8},633:{T:1},634:{T:-1},635:{T:1,f:i8},636:{T:-1},637:{f:uR},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:dI},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:QL},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function cn(t,e,n,r){var s=e;if(!isNaN(s)){var l=r||(n||[]).length||0,c=t.next(4);c.write_shift(2,s),c.write_shift(2,l),l>0&&v1(n)&&t.push(n)}}function qI(t,e,n,r){var s=(n||[]).length||0;if(s<=8224)return cn(t,e,n,s);var l=e;if(!isNaN(l)){for(var c=n.parts||[],d=0,h=0,g=0;g+(c[d]||8224)<=8224;)g+=c[d]||8224,d++;var p=t.next(4);for(p.write_shift(2,l),p.write_shift(2,g),t.push(n.slice(h,h+g)),h+=g;h<s;){for(p=t.next(4),p.write_shift(2,60),g=0;g+(c[d]||8224)<=8224;)g+=c[d]||8224,d++;p.write_shift(2,g),t.push(n.slice(h,h+g)),h+=g}}}function nf(t,e,n){return t||(t=ut(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function JI(t,e,n,r){var s=ut(9);return nf(s,t,e),WE(n,r||"b",s),s}function XI(t,e,n){var r=ut(8+2*n.length);return nf(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function KI(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?bi(ci(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?cn(t,2,dM(n,r,s)):cn(t,3,uM(n,r,s));return;case"b":case"e":cn(t,5,JI(n,r,e.v,e.t));return;case"s":case"str":cn(t,4,XI(n,r,(e.v||"").slice(0,255)));return}cn(t,1,nf(null,n,r))}function ZI(t,e,n,r){var s=Array.isArray(e),l=rs(e["!ref"]||"A1"),c,d="",h=[];if(l.e.c>255||l.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");l.e.c=Math.min(l.e.c,255),l.e.r=Math.min(l.e.c,16383),c=Es(l)}for(var g=l.s.r;g<=l.e.r;++g){d=qs(g);for(var p=l.s.c;p<=l.e.c;++p){g===l.s.r&&(h[p]=ni(p)),c=h[p]+d;var y=s?(e[g]||[])[p]:e[c];y&&KI(t,y,g,p)}}}function QI(t,e){for(var n=e||{},r=mi(),s=0,l=0;l<t.SheetNames.length;++l)t.SheetNames[l]==n.sheet&&(s=l);if(s==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return cn(r,n.biff==4?1033:n.biff==3?521:9,E1(t,16,n)),ZI(r,t.Sheets[t.SheetNames[s]],s,n),cn(r,10),r.end()}function eP(t,e,n){cn(t,49,GR({sz:12,name:"Arial"},n))}function tP(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&cn(t,1054,XR(s,e[s],n))})}function nP(t,e){var n=ut(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),cn(t,2151,n),n=ut(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),GE(rs(e["!ref"]||"A1"),n),n.write_shift(4,4),cn(t,2152,n)}function rP(t,e){for(var n=0;n<16;++n)cn(t,224,y2({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){cn(t,224,y2(r,0,e))})}function sP(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];cn(t,440,sM(r)),r[1].Tooltip&&cn(t,2048,iM(r))}delete e["!links"]}function iP(t,e){if(e){var n=0;e.forEach(function(r,s){++n<=256&&r&&cn(t,125,oM(F0(s,r),s))})}}function aP(t,e,n,r,s){var l=16+io(s.cellXfs,e,s);if(e.v==null&&!e.bf){cn(t,513,Io(n,r,l));return}if(e.bf)cn(t,6,A6(e,n,r,s,l));else switch(e.t){case"d":case"n":var c=e.t=="d"?bi(ci(e.v)):e.v;cn(t,515,eM(n,r,c,l));break;case"b":case"e":cn(t,517,QR(n,r,e.v,l,s,e.t));break;case"s":case"str":if(s.bookSST){var d=A1(s.Strings,e.v,s.revStrings);cn(t,253,qR(n,r,d,l))}else cn(t,516,JR(n,r,(e.v||"").slice(0,255),l,s));break;default:cn(t,513,Io(n,r,l))}}function lP(t,e,n){var r=mi(),s=n.SheetNames[t],l=n.Sheets[s]||{},c=(n||{}).Workbook||{},d=(c.Sheets||[])[t]||{},h=Array.isArray(l),g=e.biff==8,p,y="",_=[],b=rs(l["!ref"]||"A1"),k=g?65536:16384;if(b.e.c>255||b.e.r>=k){if(e.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:IV16384");b.e.c=Math.min(b.e.c,255),b.e.r=Math.min(b.e.c,k-1)}cn(r,2057,E1(n,16,e)),cn(r,13,qi(1)),cn(r,12,qi(100)),cn(r,15,oi(!0)),cn(r,17,oi(!1)),cn(r,16,Lo(.001)),cn(r,95,oi(!0)),cn(r,42,oi(!1)),cn(r,43,oi(!1)),cn(r,130,qi(1)),cn(r,128,ZR()),cn(r,131,oi(!1)),cn(r,132,oi(!1)),g&&iP(r,l["!cols"]),cn(r,512,KR(b,e)),g&&(l["!links"]=[]);for(var S=b.s.r;S<=b.e.r;++S){y=qs(S);for(var E=b.s.c;E<=b.e.c;++E){S===b.s.r&&(_[E]=ni(E)),p=_[E]+y;var O=h?(l[S]||[])[E]:l[p];O&&(aP(r,O,S,E,e),g&&O.l&&l["!links"].push([p,O.l]))}}var T=d.CodeName||d.name||s;return g&&cn(r,574,YR((c.Views||[])[0])),g&&(l["!merges"]||[]).length&&cn(r,229,rM(l["!merges"])),g&&sP(r,l),cn(r,442,YE(T)),g&&nP(r,l),cn(r,10),r.end()}function oP(t,e,n){var r=mi(),s=(t||{}).Workbook||{},l=s.Sheets||[],c=s.WBProps||{},d=n.biff==8,h=n.biff==5;if(cn(r,2057,E1(t,5,n)),n.bookType=="xla"&&cn(r,135),cn(r,225,d?qi(1200):null),cn(r,193,RR(2)),h&&cn(r,191),h&&cn(r,192),cn(r,226),cn(r,92,UR("SheetJS",n)),cn(r,66,qi(d?1200:1252)),d&&cn(r,353,qi(0)),d&&cn(r,448),cn(r,317,cM(t.SheetNames.length)),d&&t.vbaraw&&cn(r,211),d&&t.vbaraw){var g=c.CodeName||"ThisWorkbook";cn(r,442,YE(g))}cn(r,156,qi(17)),cn(r,25,oi(!1)),cn(r,18,oi(!1)),cn(r,19,qi(0)),d&&cn(r,431,oi(!1)),d&&cn(r,444,qi(0)),cn(r,61,VR()),cn(r,64,oi(!1)),cn(r,141,qi(0)),cn(r,34,oi(hI(t)=="true")),cn(r,14,oi(!0)),d&&cn(r,439,oi(!1)),cn(r,218,qi(0)),eP(r,t,n),tP(r,t.SSF,n),rP(r,n),d&&cn(r,352,oi(!1));var p=r.end(),y=mi();d&&cn(y,140,aM()),d&&n.Strings&&qI(y,252,WR(n.Strings)),cn(y,10);var _=y.end(),b=mi(),k=0,S=0;for(S=0;S<t.SheetNames.length;++S)k+=(d?12:11)+(d?2:1)*t.SheetNames[S].length;var E=p.length+k+_.length;for(S=0;S<t.SheetNames.length;++S){var O=l[S]||{};cn(b,133,$R({pos:E,hs:O.Hidden||0,dt:0,name:t.SheetNames[S]},n)),E+=e[S].length}var T=b.end();if(k!=T.length)throw new Error("BS8 "+k+" != "+T.length);var D=[];return p.length&&D.push(p),T.length&&D.push(T),_.length&&D.push(_),Ys(D)}function cP(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=_i(gs)),t&&t.SSF&&(R0(),D0(t.SSF),n.revssf=M0(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,O1(n),n.cellXfs=[],io(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)r[r.length]=lP(s,n,t);return r.unshift(oP(t,r,n)),Ys(r)}function vN(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var s=Li(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var l=e||{};switch(l.biff||2){case 8:case 5:return cP(t,e);case 4:case 3:case 2:return QI(t,e)}throw new Error("invalid type "+l.bookType+" for BIFF")}function uP(t,e,n,r){for(var s=t["!merges"]||[],l=[],c=e.s.c;c<=e.e.c;++c){for(var d=0,h=0,g=0;g<s.length;++g)if(!(s[g].s.r>n||s[g].s.c>c)&&!(s[g].e.r<n||s[g].e.c<c)){if(s[g].s.r<n||s[g].s.c<c){d=-1;break}d=s[g].e.r-s[g].s.r+1,h=s[g].e.c-s[g].s.c+1;break}if(!(d<0)){var p=Ur({r:n,c}),y=r.dense?(t[n]||[])[c]:t[p],_=y&&y.v!=null&&(y.h||HD(y.w||(yl(y),y.w)||""))||"",b={};d>1&&(b.rowspan=d),h>1&&(b.colspan=h),r.editable?_='<span contenteditable="true">'+_+"</span>":y&&(b["data-t"]=y&&y.t||"z",y.v!=null&&(b["data-v"]=y.v),y.z!=null&&(b["data-z"]=y.z),y.l&&(y.l.Target||"#").charAt(0)!="#"&&(_='<a href="'+y.l.Target+'">'+_+"</a>")),b.id=(r.id||"sjs")+"-"+p,l.push(on("td",_,b))}}var k="<tr>";return k+l.join("")+"</tr>"}var dP='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',fP="</body></html>";function hP(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function bN(t,e){var n=e||{},r=n.header!=null?n.header:dP,s=n.footer!=null?n.footer:fP,l=[r],c=Li(t["!ref"]);n.dense=Array.isArray(t),l.push(hP(t,c,n));for(var d=c.s.r;d<=c.e.r;++d)l.push(uP(t,c,d,n));return l.push("</table>"+s),l.join("")}function _N(t,e,n){var r=n||{},s=0,l=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var c=typeof r.origin=="string"?Is(r.origin):r.origin;s=c.r,l=c.c}var d=e.getElementsByTagName("tr"),h=Math.min(r.sheetRows||1e7,d.length),g={s:{r:0,c:0},e:{r:s,c:l}};if(t["!ref"]){var p=Li(t["!ref"]);g.s.r=Math.min(g.s.r,p.s.r),g.s.c=Math.min(g.s.c,p.s.c),g.e.r=Math.max(g.e.r,p.e.r),g.e.c=Math.max(g.e.c,p.e.c),s==-1&&(g.e.r=s=p.e.r+1)}var y=[],_=0,b=t["!rows"]||(t["!rows"]=[]),k=0,S=0,E=0,O=0,T=0,D=0;for(t["!cols"]||(t["!cols"]=[]);k<d.length&&S<h;++k){var F=d[k];if(E2(F)){if(r.display)continue;b[S]={hidden:!0}}var Z=F.children;for(E=O=0;E<Z.length;++E){var K=Z[E];if(!(r.display&&E2(K))){var L=K.hasAttribute("data-v")?K.getAttribute("data-v"):K.hasAttribute("v")?K.getAttribute("v"):VD(K.innerHTML),Q=K.getAttribute("data-z")||K.getAttribute("z");for(_=0;_<y.length;++_){var se=y[_];se.s.c==O+l&&se.s.r<S+s&&S+s<=se.e.r&&(O=se.e.c+1-l,_=-1)}D=+K.getAttribute("colspan")||1,((T=+K.getAttribute("rowspan")||1)>1||D>1)&&y.push({s:{r:S+s,c:O+l},e:{r:S+s+(T||1)-1,c:O+l+(D||1)-1}});var ce={t:"s",v:L},ye=K.getAttribute("data-t")||K.getAttribute("t")||"";L!=null&&(L.length==0?ce.t=ye||"z":r.raw||L.trim().length==0||ye=="s"||(L==="TRUE"?ce={t:"b",v:!0}:L==="FALSE"?ce={t:"b",v:!1}:isNaN(hl(L))?isNaN(Od(L).getDate())||(ce={t:"d",v:ci(L)},r.cellDates||(ce={t:"n",v:bi(ce.v)}),ce.z=r.dateNF||gs[14]):ce={t:"n",v:hl(L)})),ce.z===void 0&&Q!=null&&(ce.z=Q);var te="",xe=K.getElementsByTagName("A");if(xe&&xe.length)for(var Ce=0;Ce<xe.length&&!(xe[Ce].hasAttribute("href")&&(te=xe[Ce].getAttribute("href"),te.charAt(0)!="#"));++Ce);te&&te.charAt(0)!="#"&&(ce.l={Target:te}),r.dense?(t[S+s]||(t[S+s]=[]),t[S+s][O+l]=ce):t[Ur({c:O+l,r:S+s})]=ce,g.e.c<O+l&&(g.e.c=O+l),O+=D}}++S}return y.length&&(t["!merges"]=(t["!merges"]||[]).concat(y)),g.e.r=Math.max(g.e.r,S-1+s),t["!ref"]=Es(g),S>=h&&(t["!fullref"]=Es((g.e.r=d.length-k+S-1+s,g))),t}function SN(t,e){var n=e||{},r=n.dense?[]:{};return _N(r,t,e)}function gP(t,e){return Wo(SN(t,e),e)}function E2(t){var e="",n=pP(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function pP(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var mP=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Rd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ns+e}}(),N2=function(){var t=function(l){return Hr(l).replace(/  +/g,function(c){return'<text:s text:c="'+c.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(l,c,d){var h=[];h.push('      <table:table table:name="'+Hr(c.SheetNames[d])+`" table:style-name="ta1">
`);var g=0,p=0,y=Li(l["!ref"]||"A1"),_=l["!merges"]||[],b=0,k=Array.isArray(l);if(l["!cols"])for(p=0;p<=y.e.c;++p)h.push("        <table:table-column"+(l["!cols"][p]?' table:style-name="co'+l["!cols"][p].ods+'"':"")+`></table:table-column>
`);var S="",E=l["!rows"]||[];for(g=0;g<y.s.r;++g)S=E[g]?' table:style-name="ro'+E[g].ods+'"':"",h.push("        <table:table-row"+S+`></table:table-row>
`);for(;g<=y.e.r;++g){for(S=E[g]?' table:style-name="ro'+E[g].ods+'"':"",h.push("        <table:table-row"+S+`>
`),p=0;p<y.s.c;++p)h.push(e);for(;p<=y.e.c;++p){var O=!1,T={},D="";for(b=0;b!=_.length;++b)if(!(_[b].s.c>p)&&!(_[b].s.r>g)&&!(_[b].e.c<p)&&!(_[b].e.r<g)){(_[b].s.c!=p||_[b].s.r!=g)&&(O=!0),T["table:number-columns-spanned"]=_[b].e.c-_[b].s.c+1,T["table:number-rows-spanned"]=_[b].e.r-_[b].s.r+1;break}if(O){h.push(n);continue}var F=Ur({r:g,c:p}),Z=k?(l[g]||[])[p]:l[F];if(Z&&Z.f&&(T["table:formula"]=Hr(I6(Z.f)),Z.F&&Z.F.slice(0,F.length)==F)){var K=Li(Z.F);T["table:number-matrix-columns-spanned"]=K.e.c-K.s.c+1,T["table:number-matrix-rows-spanned"]=K.e.r-K.s.r+1}if(!Z){h.push(e);continue}switch(Z.t){case"b":D=Z.v?"TRUE":"FALSE",T["office:value-type"]="boolean",T["office:boolean-value"]=Z.v?"true":"false";break;case"n":D=Z.w||String(Z.v||0),T["office:value-type"]="float",T["office:value"]=Z.v||0;break;case"s":case"str":D=Z.v==null?"":Z.v,T["office:value-type"]="string";break;case"d":D=Z.w||ci(Z.v).toISOString(),T["office:value-type"]="date",T["office:date-value"]=ci(Z.v).toISOString(),T["table:style-name"]="ce1";break;default:h.push(e);continue}var L=t(D);if(Z.l&&Z.l.Target){var Q=Z.l.Target;Q=Q.charAt(0)=="#"?"#"+P6(Q.slice(1)):Q,Q.charAt(0)!="#"&&!Q.match(/^\w+:/)&&(Q="../"+Q),L=on("text:a",L,{"xlink:href":Q.replace(/&/g,"&amp;")})}h.push("          "+on("table:table-cell",on("text:p",L,{}),T)+`
`)}h.push(`        </table:table-row>
`)}return h.push(`      </table:table>
`),h.join("")},s=function(l,c){l.push(` <office:automatic-styles>
`),l.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),l.push(`   <number:month number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:day number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:year/>
`),l.push(`  </number:date-style>
`);var d=0;c.SheetNames.map(function(g){return c.Sheets[g]}).forEach(function(g){if(g&&g["!cols"]){for(var p=0;p<g["!cols"].length;++p)if(g["!cols"][p]){var y=g["!cols"][p];if(y.width==null&&y.wpx==null&&y.wch==null)continue;N1(y),y.ods=d;var _=g["!cols"][p].wpx+"px";l.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),l.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+_+`"/>
`),l.push(`  </style:style>
`),++d}}});var h=0;c.SheetNames.map(function(g){return c.Sheets[g]}).forEach(function(g){if(g&&g["!rows"]){for(var p=0;p<g["!rows"].length;++p)if(g["!rows"][p]){g["!rows"][p].ods=h;var y=g["!rows"][p].hpx+"px";l.push('  <style:style style:name="ro'+h+`" style:family="table-row">
`),l.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+y+`"/>
`),l.push(`  </style:style>
`),++h}}}),l.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),l.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),l.push(`  </style:style>
`),l.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),l.push(` </office:automatic-styles>
`)};return function(c,d){var h=[Ns],g=Rd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=Rd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(h.push("<office:document"+g+p+`>
`),h.push(PE().replace(/office:document-meta/g,"office:meta"))):h.push("<office:document-content"+g+`>
`),s(h,c),h.push(`  <office:body>
`),h.push(`    <office:spreadsheet>
`);for(var y=0;y!=c.SheetNames.length;++y)h.push(r(c.Sheets[c.SheetNames[y]],c,y));return h.push(`    </office:spreadsheet>
`),h.push(`  </office:body>
`),d.bookType=="fods"?h.push("</office:document>"):h.push("</office:document-content>"),h.join("")}}();function wN(t,e){if(e.bookType=="fods")return N2(t,e);var n=p1(),r="",s=[],l=[];return r="mimetype",ir(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",ir(n,r,N2(t,e)),s.push([r,"text/xml"]),l.push([r,"ContentFile"]),r="styles.xml",ir(n,r,mP(t,e)),s.push([r,"text/xml"]),l.push([r,"StylesFile"]),r="meta.xml",ir(n,r,Ns+PE()),s.push([r,"text/xml"]),l.push([r,"MetadataFile"]),r="manifest.rdf",ir(n,r,CR(l)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",ir(n,r,NR(s)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function d0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xP(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):da(Dd(t))}function yP(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function ro(t){var e=t.reduce(function(s,l){return s+l.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(s){n.set(s,r),r+=s.length}),n}function vP(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var l=0;s>=1;++l,s/=256)t[e+l]=s&255;t[e+15]|=n>=0?0:128}function Md(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function zr(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Uc(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function js(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],s=Md(t,n),l=s&7;s=Math.floor(s/8);var c=0,d;if(s==0)break;switch(l){case 0:{for(var h=n[0];t[n[0]++]>=128;);d=t.slice(h,n[0])}break;case 5:c=4,d=t.slice(n[0],n[0]+c),n[0]+=c;break;case 1:c=8,d=t.slice(n[0],n[0]+c),n[0]+=c;break;case 2:c=Md(t,n),d=t.slice(n[0],n[0]+c),n[0]+=c;break;case 3:case 4:default:throw new Error("PB Type ".concat(l," for Field ").concat(s," at offset ").concat(r))}var g={data:d,type:l};e[s]==null?e[s]=[g]:e[s].push(g)}return e}function $s(t){var e=[];return t.forEach(function(n,r){n.forEach(function(s){s.data&&(e.push(zr(r*8+s.type)),s.type==2&&e.push(zr(s.data.length)),e.push(s.data))})}),ro(e)}function la(t){for(var e,n=[],r=[0];r[0]<t.length;){var s=Md(t,r),l=js(t.slice(r[0],r[0]+s));r[0]+=s;var c={id:Uc(l[1][0].data),messages:[]};l[2].forEach(function(d){var h=js(d.data),g=Uc(h[3][0].data);c.messages.push({meta:h,data:t.slice(r[0],r[0]+g)}),r[0]+=g}),(e=l[3])!=null&&e[0]&&(c.merge=Uc(l[3][0].data)>>>0>0),n.push(c)}return n}function Ec(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:zr(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:zr(+!!n.merge),type:0}]);var s=[];n.messages.forEach(function(c){s.push(c.data),c.meta[3]=[{type:0,data:zr(c.data.length)}],r[2].push({data:$s(c.meta),type:2})});var l=$s(r);e.push(zr(l.length)),e.push(l),s.forEach(function(c){return e.push(c)})}),ro(e)}function bP(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=Md(e,n),s=[];n[0]<e.length;){var l=e[n[0]]&3;if(l==0){var c=e[n[0]++]>>2;if(c<60)++c;else{var d=c-59;c=e[n[0]],d>1&&(c|=e[n[0]+1]<<8),d>2&&(c|=e[n[0]+2]<<16),d>3&&(c|=e[n[0]+3]<<24),c>>>=0,c++,n[0]+=d}s.push(e.slice(n[0],n[0]+c)),n[0]+=c;continue}else{var h=0,g=0;if(l==1?(g=(e[n[0]]>>2&7)+4,h=(e[n[0]++]&224)<<3,h|=e[n[0]++]):(g=(e[n[0]++]>>2)+1,l==2?(h=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(h=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),s=[ro(s)],h==0)throw new Error("Invalid offset 0");if(h>s[0].length)throw new Error("Invalid offset beyond length");if(g>=h)for(s.push(s[0].slice(-h)),g-=h;g>=s[s.length-1].length;)s.push(s[s.length-1]),g-=s[s.length-1].length;s.push(s[0].slice(-h,-h+g))}}var p=ro(s);if(p.length!=r)throw new Error("Unexpected length: ".concat(p.length," != ").concat(r));return p}function oa(t){for(var e=[],n=0;n<t.length;){var r=t[n++],s=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(bP(r,t.slice(n,n+s))),n+=s}if(n!==t.length)throw new Error("data is not a valid framed stream!");return ro(e)}function Nc(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),s=new Uint8Array(4);e.push(s);var l=zr(r),c=l.length;e.push(l),r<=60?(c++,e.push(new Uint8Array([r-1<<2]))):r<=256?(c+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(c+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(c+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(c+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),c+=r,s[0]=0,s[1]=c&255,s[2]=c>>8&255,s[3]=c>>16&255,n+=r}return ro(e)}function fm(t,e){var n=new Uint8Array(32),r=d0(n),s=12,l=0;switch(n[0]=5,t.t){case"n":n[1]=2,vP(n,s,t.v),l|=1,s+=16;break;case"b":n[1]=6,r.setFloat64(s,t.v?1:0,!0),l|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(s,e.indexOf(t.v),!0),l|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,l,!0),n.slice(0,s)}function hm(t,e){var n=new Uint8Array(32),r=d0(n),s=12,l=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(s,t.v,!0),l|=32,s+=8;break;case"b":n[2]=6,r.setFloat64(s,t.v?1:0,!0),l|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(s,e.indexOf(t.v),!0),l|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,l,!0),n.slice(0,s)}function Wl(t){var e=js(t);return Md(e[1][0].data)}function _P(t,e,n){var r,s,l,c;if(!((r=t[6])!=null&&r[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var d=((c=(l=t[8])==null?void 0:l[0])==null?void 0:c.data)&&Uc(t[8][0].data)>0||!1;if(d)throw"Math only works with normal offsets";for(var h=0,g=d0(t[7][0].data),p=0,y=[],_=d0(t[4][0].data),b=0,k=[],S=0;S<e.length;++S){if(e[S]==null){g.setUint16(S*2,65535,!0),_.setUint16(S*2,65535);continue}g.setUint16(S*2,p,!0),_.setUint16(S*2,b,!0);var E,O;switch(typeof e[S]){case"string":E=fm({t:"s",v:e[S]},n),O=hm({t:"s",v:e[S]},n);break;case"number":E=fm({t:"n",v:e[S]},n),O=hm({t:"n",v:e[S]},n);break;case"boolean":E=fm({t:"b",v:e[S]},n),O=hm({t:"b",v:e[S]},n);break;default:throw new Error("Unsupported value "+e[S])}y.push(E),p+=E.length,k.push(O),b+=O.length,++h}for(t[2][0].data=zr(h);S<t[7][0].data.length/2;++S)g.setUint16(S*2,65535,!0),_.setUint16(S*2,65535,!0);return t[6][0].data=ro(y),t[3][0].data=ro(k),h}function SP(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Li(n["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Es(r)));var l=f0(n,{range:r,header:1}),c=["~Sh33tJ5~"];l.forEach(function(B){return B.forEach(function(j){typeof j=="string"&&c.push(j)})});var d={},h=[],g=Yr.read(e.numbers,{type:"base64"});g.FileIndex.map(function(B,j){return[B,g.FullPaths[j]]}).forEach(function(B){var j=B[0],V=B[1];if(j.type==2&&j.name.match(/\.iwa/)){var fe=j.content,lt=oa(fe),et=la(lt);et.forEach(function(ht){h.push(ht.id),d[ht.id]={deps:[],location:V,type:Uc(ht.messages[0].meta[1][0].data)}})}}),h.sort(function(B,j){return B-j});var p=h.filter(function(B){return B>1}).map(function(B){return[B,zr(B)]});g.FileIndex.map(function(B,j){return[B,g.FullPaths[j]]}).forEach(function(B){var j=B[0];if(B[1],!!j.name.match(/\.iwa/)){var V=la(oa(j.content));V.forEach(function(fe){fe.messages.forEach(function(lt){p.forEach(function(et){fe.messages.some(function(ht){return Uc(ht.meta[1][0].data)!=11006&&yP(ht.data,et[1])})&&d[et[0]].deps.push(fe.id)})})})}});for(var y=Yr.find(g,d[1].location),_=la(oa(y.content)),b,k=0;k<_.length;++k){var S=_[k];S.id==1&&(b=S)}var E=Wl(js(b.messages[0].data)[1][0].data);for(y=Yr.find(g,d[E].location),_=la(oa(y.content)),k=0;k<_.length;++k)S=_[k],S.id==E&&(b=S);for(E=Wl(js(b.messages[0].data)[2][0].data),y=Yr.find(g,d[E].location),_=la(oa(y.content)),k=0;k<_.length;++k)S=_[k],S.id==E&&(b=S);for(E=Wl(js(b.messages[0].data)[2][0].data),y=Yr.find(g,d[E].location),_=la(oa(y.content)),k=0;k<_.length;++k)S=_[k],S.id==E&&(b=S);var O=js(b.messages[0].data);{O[6][0].data=zr(r.e.r+1),O[7][0].data=zr(r.e.c+1);var T=Wl(O[46][0].data),D=Yr.find(g,d[T].location),F=la(oa(D.content));{for(var Z=0;Z<F.length&&F[Z].id!=T;++Z);if(F[Z].id!=T)throw"Bad ColumnRowUIDMapArchive";var K=js(F[Z].messages[0].data);K[1]=[],K[2]=[],K[3]=[];for(var L=0;L<=r.e.c;++L){var Q=[];Q[1]=Q[2]=[{type:0,data:zr(L+420690)}],K[1].push({type:2,data:$s(Q)}),K[2].push({type:0,data:zr(L)}),K[3].push({type:0,data:zr(L)})}K[4]=[],K[5]=[],K[6]=[];for(var se=0;se<=r.e.r;++se)Q=[],Q[1]=Q[2]=[{type:0,data:zr(se+726270)}],K[4].push({type:2,data:$s(Q)}),K[5].push({type:0,data:zr(se)}),K[6].push({type:0,data:zr(se)});F[Z].messages[0].data=$s(K)}D.content=Nc(Ec(F)),D.size=D.content.length,delete O[46];var ce=js(O[4][0].data);{ce[7][0].data=zr(r.e.r+1);var ye=js(ce[1][0].data),te=Wl(ye[2][0].data);D=Yr.find(g,d[te].location),F=la(oa(D.content));{if(F[0].id!=te)throw"Bad HeaderStorageBucket";var xe=js(F[0].messages[0].data);for(se=0;se<l.length;++se){var Ce=js(xe[2][0].data);Ce[1][0].data=zr(se),Ce[4][0].data=zr(l[se].length),xe[2][se]={type:xe[2][0].type,data:$s(Ce)}}F[0].messages[0].data=$s(xe)}D.content=Nc(Ec(F)),D.size=D.content.length;var at=Wl(ce[2][0].data);D=Yr.find(g,d[at].location),F=la(oa(D.content));{if(F[0].id!=at)throw"Bad HeaderStorageBucket";for(xe=js(F[0].messages[0].data),L=0;L<=r.e.c;++L)Ce=js(xe[2][0].data),Ce[1][0].data=zr(L),Ce[4][0].data=zr(r.e.r+1),xe[2][L]={type:xe[2][0].type,data:$s(Ce)};F[0].messages[0].data=$s(xe)}D.content=Nc(Ec(F)),D.size=D.content.length;var le=Wl(ce[4][0].data);(function(){for(var B=Yr.find(g,d[le].location),j=la(oa(B.content)),V,fe=0;fe<j.length;++fe){var lt=j[fe];lt.id==le&&(V=lt)}var et=js(V.messages[0].data);{et[3]=[];var ht=[];c.forEach(function(Bt,Kt){ht[1]=[{type:0,data:zr(Kt)}],ht[2]=[{type:0,data:zr(1)}],ht[3]=[{type:2,data:xP(Bt)}],et[3].push({type:2,data:$s(ht)})})}V.messages[0].data=$s(et);var At=Ec(j),xn=Nc(At);B.content=xn,B.size=B.content.length})();var Ve=js(ce[3][0].data);{var Ue=Ve[1][0];delete Ve[2];var Ze=js(Ue.data);{var M=Wl(Ze[2][0].data);(function(){for(var B=Yr.find(g,d[M].location),j=la(oa(B.content)),V,fe=0;fe<j.length;++fe){var lt=j[fe];lt.id==M&&(V=lt)}var et=js(V.messages[0].data);{delete et[6],delete Ve[7];var ht=new Uint8Array(et[5][0].data);et[5]=[];for(var At=0,xn=0;xn<=r.e.r;++xn){var Bt=js(ht);At+=_P(Bt,l[xn],c),Bt[1][0].data=zr(xn),et[5].push({data:$s(Bt),type:2})}et[1]=[{type:0,data:zr(r.e.c+1)}],et[2]=[{type:0,data:zr(r.e.r+1)}],et[3]=[{type:0,data:zr(At)}],et[4]=[{type:0,data:zr(r.e.r+1)}]}V.messages[0].data=$s(et);var Kt=Ec(j),tn=Nc(Kt);B.content=tn,B.size=B.content.length})()}Ue.data=$s(Ze)}ce[3][0].data=$s(Ve)}O[4][0].data=$s(ce)}b.messages[0].data=$s(O);var oe=Ec(_),P=Nc(oe);return y.content=P,y.size=y.content.length,g}function wP(t){return function(n){for(var r=0;r!=t.length;++r){var s=t[r];n[s[0]]===void 0&&(n[s[0]]=s[1]),s[2]==="n"&&(n[s[0]]=Number(n[s[0]]))}}}function O1(t){wP([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function kP(t,e){return e.bookType=="ods"?wN(t,e):e.bookType=="numbers"?SP(t,e):e.bookType=="xlsb"?EP(t,e):NP(t,e)}function EP(t,e){Rc=1024,t&&!t.SSF&&(t.SSF=_i(gs)),t&&t.SSF&&(R0(),D0(t.SSF),e.revssf=M0(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,yd?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=iN.indexOf(e.bookType)>-1,s=ME();O1(e=e||{});var l=p1(),c="",d=0;if(e.cellXfs=[],io(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",ir(l,c,FE(t.Props,e)),s.coreprops.push(c),Br(e.rels,2,c,Tr.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var h=[],g=0;g<t.SheetNames.length;++g)(t.Workbook.Sheets[g]||{}).Hidden!=2&&h.push(t.SheetNames[g]);t.Props.SheetNames=h}for(t.Props.Worksheets=t.Props.SheetNames.length,ir(l,c,BE(t.Props)),s.extprops.push(c),Br(e.rels,3,c,Tr.EXT_PROPS),t.Custprops!==t.Props&&Js(t.Custprops||{}).length>0&&(c="docProps/custom.xml",ir(l,c,HE(t.Custprops)),s.custprops.push(c),Br(e.rels,4,c,Tr.CUST_PROPS)),d=1;d<=t.SheetNames.length;++d){var p={"!id":{}},y=t.Sheets[t.SheetNames[d-1]],_=(y||{})["!type"]||"sheet";switch(_){case"chart":default:c="xl/worksheets/sheet"+d+"."+n,ir(l,c,CI(d-1,c,e,t,p)),s.sheets.push(c),Br(e.wbrels,-1,"worksheets/sheet"+d+"."+n,Tr.WS[0])}if(y){var b=y["!comments"],k=!1,S="";b&&b.length>0&&(S="xl/comments"+d+"."+n,ir(l,S,OI(b,S)),s.comments.push(S),Br(p,-1,"../comments"+d+"."+n,Tr.CMNT),k=!0),y["!legacy"]&&k&&ir(l,"xl/drawings/vmlDrawing"+d+".vml",rN(d,y["!comments"])),delete y["!comments"],delete y["!legacy"]}p["!id"].rId1&&ir(l,IE(c),Bc(p))}return e.Strings!=null&&e.Strings.length>0&&(c="xl/sharedStrings."+n,ir(l,c,AI(e.Strings,c,e)),s.strs.push(c),Br(e.wbrels,-1,"sharedStrings."+n,Tr.SST)),c="xl/workbook."+n,ir(l,c,TI(t,c)),s.workbooks.push(c),Br(e.rels,1,c,Tr.WB),c="xl/theme/theme1.xml",ir(l,c,tN(t.Themes,e)),s.themes.push(c),Br(e.wbrels,-1,"theme/theme1.xml",Tr.THEME),c="xl/styles."+n,ir(l,c,jI(t,c,e)),s.styles.push(c),Br(e.wbrels,-1,"styles."+n,Tr.STY),t.vbaraw&&r&&(c="xl/vbaProject.bin",ir(l,c,t.vbaraw),s.vba.push(c),Br(e.wbrels,-1,"vbaProject.bin",Tr.VBA)),c="xl/metadata."+n,ir(l,c,DI(c)),s.metadata.push(c),Br(e.wbrels,-1,"metadata."+n,Tr.XLMETA),ir(l,"[Content_Types].xml",LE(s,e)),ir(l,"_rels/.rels",Bc(e.rels)),ir(l,"xl/_rels/workbook."+n+".rels",Bc(e.wbrels)),delete e.revssf,delete e.ssf,l}function NP(t,e){Rc=1024,t&&!t.SSF&&(t.SSF=_i(gs)),t&&t.SSF&&(R0(),D0(t.SSF),e.revssf=M0(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,yd?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=iN.indexOf(e.bookType)>-1,s=ME();O1(e=e||{});var l=p1(),c="",d=0;if(e.cellXfs=[],io(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",ir(l,c,FE(t.Props,e)),s.coreprops.push(c),Br(e.rels,2,c,Tr.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var h=[],g=0;g<t.SheetNames.length;++g)(t.Workbook.Sheets[g]||{}).Hidden!=2&&h.push(t.SheetNames[g]);t.Props.SheetNames=h}t.Props.Worksheets=t.Props.SheetNames.length,ir(l,c,BE(t.Props)),s.extprops.push(c),Br(e.rels,3,c,Tr.EXT_PROPS),t.Custprops!==t.Props&&Js(t.Custprops||{}).length>0&&(c="docProps/custom.xml",ir(l,c,HE(t.Custprops)),s.custprops.push(c),Br(e.rels,4,c,Tr.CUST_PROPS));var p=["SheetJ5"];for(e.tcid=0,d=1;d<=t.SheetNames.length;++d){var y={"!id":{}},_=t.Sheets[t.SheetNames[d-1]],b=(_||{})["!type"]||"sheet";switch(b){case"chart":default:c="xl/worksheets/sheet"+d+"."+n,ir(l,c,gN(d-1,e,t,y)),s.sheets.push(c),Br(e.wbrels,-1,"worksheets/sheet"+d+"."+n,Tr.WS[0])}if(_){var k=_["!comments"],S=!1,E="";if(k&&k.length>0){var O=!1;k.forEach(function(T){T[1].forEach(function(D){D.T==!0&&(O=!0)})}),O&&(E="xl/threadedComments/threadedComment"+d+"."+n,ir(l,E,r8(k,p,e)),s.threadedcomments.push(E),Br(y,-1,"../threadedComments/threadedComment"+d+"."+n,Tr.TCMNT)),E="xl/comments"+d+"."+n,ir(l,E,sN(k)),s.comments.push(E),Br(y,-1,"../comments"+d+"."+n,Tr.CMNT),S=!0}_["!legacy"]&&S&&ir(l,"xl/drawings/vmlDrawing"+d+".vml",rN(d,_["!comments"])),delete _["!comments"],delete _["!legacy"]}y["!id"].rId1&&ir(l,IE(c),Bc(y))}return e.Strings!=null&&e.Strings.length>0&&(c="xl/sharedStrings."+n,ir(l,c,JE(e.Strings,e)),s.strs.push(c),Br(e.wbrels,-1,"sharedStrings."+n,Tr.SST)),c="xl/workbook."+n,ir(l,c,xN(t)),s.workbooks.push(c),Br(e.rels,1,c,Tr.WB),c="xl/theme/theme1.xml",ir(l,c,tN(t.Themes,e)),s.themes.push(c),Br(e.wbrels,-1,"theme/theme1.xml",Tr.THEME),c="xl/styles."+n,ir(l,c,QE(t,e)),s.styles.push(c),Br(e.wbrels,-1,"styles."+n,Tr.STY),t.vbaraw&&r&&(c="xl/vbaProject.bin",ir(l,c,t.vbaraw),s.vba.push(c),Br(e.wbrels,-1,"vbaProject.bin",Tr.VBA)),c="xl/metadata."+n,ir(l,c,nN()),s.metadata.push(c),Br(e.wbrels,-1,"metadata."+n,Tr.XLMETA),p.length>1&&(c="xl/persons/person.xml",ir(l,c,s8(p)),s.people.push(c),Br(e.wbrels,-1,"persons/person.xml",Tr.PEOPLE)),ir(l,"[Content_Types].xml",LE(s,e)),ir(l,"_rels/.rels",Bc(e.rels)),ir(l,"xl/_rels/workbook."+n+".rels",Bc(e.wbrels)),delete e.revssf,delete e.ssf,l}function TP(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=xl(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function kN(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Zd(e.file,Yr.write(t,{type:Rr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Yr.write(t,e)}function CP(t,e){var n=_i(e||{}),r=kP(t,n);return jP(r,n)}function jP(t,e){var n={},r=Rr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?Yr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(O0(s))}return e.password&&typeof encrypt_agile<"u"?kN(encrypt_agile(s,e.password),e):e.type==="file"?Zd(e.file,s):e.type=="string"?gd(s):s}function AP(t,e){var n=e||{},r=YI(t,n);return kN(r,n)}function Aa(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return Ad(Dd(r));case"binary":return Dd(r);case"string":return t;case"file":return Zd(e.file,r,"utf8");case"buffer":return Rr?Sl(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Aa(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function OP(t,e){switch(e.type){case"base64":return Ad(t);case"binary":return t;case"string":return t;case"file":return Zd(e.file,t,"binary");case"buffer":return Rr?Sl(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function yh(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?Ad(n):e.type=="string"?gd(n):n;case"file":return Zd(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function EN(t,e){iD(),mI(t);var n=_i(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=EN(t,n);return n.type="array",O0(r)}var s=0;if(n.sheet&&(typeof n.sheet=="number"?s=n.sheet:s=t.SheetNames.indexOf(n.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Aa(WI(t,n),n);case"slk":case"sylk":return Aa(hM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"htm":case"html":return Aa(bN(t.Sheets[t.SheetNames[s]],n),n);case"txt":return OP(NN(t.Sheets[t.SheetNames[s]],n),n);case"csv":return Aa(D1(t.Sheets[t.SheetNames[s]],n),n,"\uFEFF");case"dif":return Aa(gM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"dbf":return yh(fM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"prn":return Aa(pM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"rtf":return Aa(SM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"eth":return Aa(qE.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"fods":return Aa(wN(t,n),n);case"wk1":return yh(v2.sheet_to_wk1(t.Sheets[t.SheetNames[s]],n),n);case"wk3":return yh(v2.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),yh(vN(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),AP(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return CP(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function DP(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function La(t,e,n){var r={};return r.type="file",r.file=e,DP(r),EN(t,r)}function RP(t,e,n,r,s,l,c,d){var h=qs(n),g=d.defval,p=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),y=!0,_=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(_,"__rowNum__",{value:n,enumerable:!1})}catch{_.__rowNum__=n}else _.__rowNum__=n;if(!c||t[n])for(var b=e.s.c;b<=e.e.c;++b){var k=c?t[n][b]:t[r[b]+h];if(k===void 0||k.t===void 0){if(g===void 0)continue;l[b]!=null&&(_[l[b]]=g);continue}var S=k.v;switch(k.t){case"z":if(S==null)break;continue;case"e":S=S==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+k.t)}if(l[b]!=null){if(S==null)if(k.t=="e"&&S===null)_[l[b]]=null;else if(g!==void 0)_[l[b]]=g;else if(p&&S===null)_[l[b]]=null;else continue;else _[l[b]]=p&&(k.t!=="n"||k.t==="n"&&d.rawNumbers!==!1)?S:yl(k,S,d);S!=null&&(y=!1)}}return{row:_,isempty:y}}function f0(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,s=1,l=[],c=0,d="",h={s:{r:0,c:0},e:{r:0,c:0}},g=e||{},p=g.range!=null?g.range:t["!ref"];switch(g.header===1?r=1:g.header==="A"?r=2:Array.isArray(g.header)?r=3:g.header==null&&(r=0),typeof p){case"string":h=rs(p);break;case"number":h=rs(t["!ref"]),h.s.r=p;break;default:h=p}r>0&&(s=0);var y=qs(h.s.r),_=[],b=[],k=0,S=0,E=Array.isArray(t),O=h.s.r,T=0,D={};E&&!t[O]&&(t[O]=[]);var F=g.skipHidden&&t["!cols"]||[],Z=g.skipHidden&&t["!rows"]||[];for(T=h.s.c;T<=h.e.c;++T)if(!(F[T]||{}).hidden)switch(_[T]=ni(T),n=E?t[O][T]:t[_[T]+y],r){case 1:l[T]=T-h.s.c;break;case 2:l[T]=_[T];break;case 3:l[T]=g.header[T-h.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),d=c=yl(n,null,g),S=D[c]||0,!S)D[c]=1;else{do d=c+"_"+S++;while(D[d]);D[c]=S,D[d]=1}l[T]=d}for(O=h.s.r+s;O<=h.e.r;++O)if(!(Z[O]||{}).hidden){var K=RP(t,h,O,_,r,l,E,g);(K.isempty===!1||(r===1?g.blankrows!==!1:g.blankrows))&&(b[k++]=K.row)}return b.length=k,b}var T2=/"/g;function MP(t,e,n,r,s,l,c,d){for(var h=!0,g=[],p="",y=qs(n),_=e.s.c;_<=e.e.c;++_)if(r[_]){var b=d.dense?(t[n]||[])[_]:t[r[_]+y];if(b==null)p="";else if(b.v!=null){h=!1,p=""+(d.rawNumbers&&b.t=="n"?b.v:yl(b,null,d));for(var k=0,S=0;k!==p.length;++k)if((S=p.charCodeAt(k))===s||S===l||S===34||d.forceQuotes){p='"'+p.replace(T2,'""')+'"';break}p=="ID"&&(p='"ID"')}else b.f!=null&&!b.F?(h=!1,p="="+b.f,p.indexOf(",")>=0&&(p='"'+p.replace(T2,'""')+'"')):p="";g.push(p)}return d.blankrows===!1&&h?null:g.join(c)}function D1(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var s=rs(t["!ref"]),l=r.FS!==void 0?r.FS:",",c=l.charCodeAt(0),d=r.RS!==void 0?r.RS:`
`,h=d.charCodeAt(0),g=new RegExp((l=="|"?"\\|":l)+"+$"),p="",y=[];r.dense=Array.isArray(t);for(var _=r.skipHidden&&t["!cols"]||[],b=r.skipHidden&&t["!rows"]||[],k=s.s.c;k<=s.e.c;++k)(_[k]||{}).hidden||(y[k]=ni(k));for(var S=0,E=s.s.r;E<=s.e.r;++E)(b[E]||{}).hidden||(p=MP(t,s,E,y,c,h,l,r),p!=null&&(r.strip&&(p=p.replace(g,"")),(p||r.blankrows!==!1)&&n.push((S++?d:"")+p)));return delete r.dense,n.join("")}function NN(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=D1(t,e);return n}function LP(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var s=rs(t["!ref"]),l="",c=[],d,h=[],g=Array.isArray(t);for(d=s.s.c;d<=s.e.c;++d)c[d]=ni(d);for(var p=s.s.r;p<=s.e.r;++p)for(l=qs(p),d=s.s.c;d<=s.e.c;++d)if(e=c[d]+l,n=g?(t[p]||[])[d]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}h[h.length]=e+"="+r}return h}function TN(t,e,n){var r=n||{},s=+!r.skipHeader,l=t||{},c=0,d=0;if(l&&r.origin!=null)if(typeof r.origin=="number")c=r.origin;else{var h=typeof r.origin=="string"?Is(r.origin):r.origin;c=h.r,d=h.c}var g,p={s:{c:0,r:0},e:{c:d,r:c+e.length-1+s}};if(l["!ref"]){var y=rs(l["!ref"]);p.e.c=Math.max(p.e.c,y.e.c),p.e.r=Math.max(p.e.r,y.e.r),c==-1&&(c=y.e.r+1,p.e.r=c+e.length-1+s)}else c==-1&&(c=0,p.e.r=e.length-1+s);var _=r.header||[],b=0;e.forEach(function(S,E){Js(S).forEach(function(O){(b=_.indexOf(O))==-1&&(_[b=_.length]=O);var T=S[O],D="z",F="",Z=Ur({c:d+b,r:c+E+s});g=Ld(l,Z),T&&typeof T=="object"&&!(T instanceof Date)?l[Z]=T:(typeof T=="number"?D="n":typeof T=="boolean"?D="b":typeof T=="string"?D="s":T instanceof Date?(D="d",r.cellDates||(D="n",T=bi(T)),F=r.dateNF||gs[14]):T===null&&r.nullError&&(D="e",T=0),g?(g.t=D,g.v=T,delete g.w,delete g.R,F&&(g.z=F)):l[Z]=g={t:D,v:T},F&&(g.z=F))})}),p.e.c=Math.max(p.e.c,d+_.length-1);var k=qs(c);if(s)for(b=0;b<_.length;++b)l[ni(b+d)+k]={t:"s",v:_[b]};return l["!ref"]=Es(p),l}function IP(t,e){return TN(null,t,e)}function Ld(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=Is(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Ld(t,Ur(e)):Ld(t,Ur({r:e,c:n||0}))}function PP(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function FP(){return{SheetNames:[],Sheets:{}}}function zP(t,e,n,r){var s=1;if(!n)for(;s<=65535&&t.SheetNames.indexOf(n="Sheet"+s)!=-1;++s,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var l=n.match(/(^.*?)(\d+)$/);s=l&&+l[2]||0;var c=l&&l[1]||n;for(++s;s<=65535&&t.SheetNames.indexOf(n=c+s)!=-1;++s);}if(mN(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function BP(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=PP(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function HP(t,e){return t.z=e,t}function CN(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function UP(t,e,n){return CN(t,"#"+e,n)}function $P(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function WP(t,e,n,r){for(var s=typeof e!="string"?e:rs(e),l=typeof e=="string"?e:Es(e),c=s.s.r;c<=s.e.r;++c)for(var d=s.s.c;d<=s.e.c;++d){var h=Ld(t,c,d);h.t="n",h.F=l,delete h.v,c==s.s.r&&d==s.s.c&&(h.f=n,r&&(h.D=!0))}return t}var Ir={encode_col:ni,encode_row:qs,encode_cell:Ur,encode_range:Es,decode_col:_1,decode_row:b1,split_cell:iR,decode_cell:Is,decode_range:Li,format_cell:yl,sheet_add_aoa:CE,sheet_add_json:TN,sheet_add_dom:_N,aoa_to_sheet:tu,json_to_sheet:IP,table_to_sheet:SN,table_to_book:gP,sheet_to_csv:D1,sheet_to_txt:NN,sheet_to_json:f0,sheet_to_html:bN,sheet_to_formulae:LP,sheet_to_row_object_array:f0,sheet_get_cell:Ld,book_new:FP,book_append_sheet:zP,book_set_sheet_visibility:BP,cell_set_number_format:HP,cell_set_hyperlink:CN,cell_set_internal_link:UP,cell_add_comment:$P,sheet_set_array_formula:WP,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const VP={"2POLE_IN5LOOP":"2P_L",IMACD:"IMACD","2POLE_Direct_Signal":"2P_DS","HIGHEST SWING HIGH":"HSH","LOWEST SWING LOW":"LSL","NORMAL SWING HIGH":"NSH","NORMAL SWING LOW":"NSL",ProGap:"PG",CrossOver:"CO",Spike:"SP",Kicker:"Kicker"},YP=({selectedSignals:t,setSelectedSignals:e,selectedMachines:n,setSelectedMachines:r,selectedIntervals:s,setSelectedIntervals:l,selectedActions:c,setSelectedActions:d,fromDate:h,toDate:g,setFromDate:p,setToDate:y,includeMinClose:_,setIncludeMinClose:b,signalRadioMode:k,setSignalRadioMode:S,machineRadioMode:E,setMachineRadioMode:O,intervalRadioMode:T,setIntervalRadioMode:D,actionRadioMode:F,setActionRadioMode:Z,liveFilter:K,setLiveFilter:L,liveRadioMode:Q,setLiveRadioMode:se,signalToggleAll:ce,setSignalToggleAll:ye,machineToggleAll:te,setMachineToggleAll:xe,machines:Ce,setDateKey:at,assignedCount:le,dateKey:Ve})=>{const Ue=B=>B==null?"":String(B),Ze=B=>{e(j=>{const V={...j,[B]:!j[B]};return localStorage.setItem("selectedSignals",JSON.stringify(V)),V})},M=B=>{const j=Ue(B);r(V=>{const fe={...V,[j]:!V[j]};return localStorage.setItem("selectedMachines",JSON.stringify(fe)),fe})},oe=B=>{l(j=>{const V={...j,[B]:!j[B]};return localStorage.setItem("selectedIntervals",JSON.stringify(V)),V})},P=B=>{d(j=>{const V={...j,[B]:!j[B]};return localStorage.setItem("selectedActions",JSON.stringify(V)),V})};return o.jsxs("div",{className:"w-full max-w-full min-w-0 columns-1 sm:columns-2 md:columns-3 lg:columns-4 xl:columns-5 gap-4",children:[o.jsxs("div",{className:"break-inside-avoid mb-4 bg-gradient-to-br from-blue-50 via-white to-blue-100 dark:from-blue-900 dark:via-gray-900 dark:to-blue-950 rounded-2xl shadow-lg border border-blue-200 dark:border-blue-800 p-4 gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-blue-700 dark:text-blue-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Signal",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-blue-400 via-blue-300 to-blue-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const B=!k;if(S(B),B){const j=Object.keys(t).find(V=>t[V]);if(j){const V={};Object.keys(t).forEach(fe=>{V[fe]=fe===j}),e(V),localStorage.setItem("selectedSignals",JSON.stringify(V))}}},className:"bg-blue-200 dark:bg-blue-800 text-blue-900 dark:text-blue-100 px-2 py-1 rounded text-xs font-semibold hover:bg-blue-300 dark:hover:bg-blue-700 focus:ring-2 focus:ring-blue-400 transition-all",title:"Toggle between radio and checkbox mode",children:k?" Check":" Radio"}),!k&&o.jsx("button",{onClick:()=>{const B={};Object.keys(t).forEach(j=>B[j]=ce),e(B),ye(!ce),localStorage.setItem("selectedSignals",JSON.stringify(B))},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${ce?"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400":"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400"} transition-all`,title:"Select or uncheck all signals",children:ce?" All":" Uncheck"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(t).map(B=>o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[k?o.jsx("input",{type:"radio",name:"signalFilterRadio",checked:t[B],onChange:()=>{const j={};Object.keys(t).forEach(V=>{j[V]=V===B}),e(j),localStorage.setItem("selectedSignals",JSON.stringify(j))},className:"form-radio h-5 w-5 text-green-600",style:{accentColor:"#22c55e"}}):o.jsx("input",{type:"checkbox",checked:t[B],onChange:()=>Ze(B),className:"form-checkbox h-5 w-5 text-blue-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:VP[B]||B})]},B))})]}),o.jsxs("div",{className:"break-inside-avoid mb-4 bg-gradient-to-br from-green-50 via-white to-green-100 dark:from-green-900 dark:via-gray-900 dark:to-green-950 rounded-2xl shadow-lg border border-green-200 dark:border-green-800 p-4 gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-green-700 dark:text-green-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Machine",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-green-400 via-green-300 to-green-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const B=!E;if(O(B),B){const j=Ce.find(V=>n[Ue(V.machineid)]);if(j){const V={};Ce.forEach(fe=>{const lt=Ue(fe.machineid);V[lt]=lt===Ue(j.machineid)}),r(V),localStorage.setItem("selectedMachines",JSON.stringify(V))}}},className:"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 px-2 py-1 rounded text-xs font-semibold hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400 transition-all",title:"Toggle between radio and checkbox mode",children:E?" Check ":" Radio"}),!E&&o.jsx("button",{onClick:()=>{const B=Object.values(n).every(V=>V===!0),j={};Ce.forEach(V=>{const fe=Ue(V.machineid);j[fe]=!B}),r(j),xe(!B),localStorage.setItem("selectedMachines",JSON.stringify(j))},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${Object.values(n).every(B=>B===!1)?"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400":"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400"} transition-all`,title:"Select or uncheck all machines",children:Object.values(n).every(B=>B===!1)?" All":" Uncheck"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Ce.map(B=>o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[E?o.jsx("input",{type:"radio",name:"machineRadio",checked:n[Ue(B.machineid)]===!0,onChange:()=>{const j={};Ce.forEach(V=>{const fe=Ue(V.machineid);j[fe]=fe===Ue(B.machineid)}),r(j),localStorage.setItem("selectedMachines",JSON.stringify(j))},className:"form-radio h-5 w-5 text-green-600",style:{accentColor:"#22c55e"}}):o.jsx("input",{type:"checkbox",checked:n[Ue(B.machineid)]||!1,onChange:()=>M(Ue(B.machineid)),className:"form-checkbox h-5 w-5 text-blue-600"}),o.jsxs("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:[B.machineid,!B.active&&o.jsx("span",{className:"ml-1 text-xs text-red-500",children:"(inactive)"})]})]},B.machineid))})]}),o.jsxs("div",{className:"break-inside-avoid mb-4 bg-gradient-to-br from-purple-50 via-white to-purple-100 dark:from-purple-900 dark:via-gray-900 dark:to-purple-950 rounded-2xl shadow-lg border border-purple-200 dark:border-purple-800 p-4 gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-purple-700 dark:text-purple-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Interval",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-purple-400 via-purple-300 to-purple-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const B=!T;if(D(B),B){const j=Object.keys(s).find(V=>s[V]);if(j){const V={};Object.keys(s).forEach(fe=>{V[fe]=fe===j}),l(V),localStorage.setItem("selectedIntervals",JSON.stringify(V))}}},className:"bg-purple-200 dark:bg-purple-800 text-purple-900 dark:text-purple-100 px-2 py-1 rounded text-xs font-semibold hover:bg-purple-300 dark:hover:bg-purple-700 focus:ring-2 focus:ring-purple-400 transition-all",title:"Toggle between radio and checkbox mode",children:T?" Check":" Radio"}),!T&&o.jsx("button",{onClick:()=>{const B=Object.values(s).every(V=>V),j={};Object.keys(s).forEach(V=>{j[V]=!B}),l(j),localStorage.setItem("selectedIntervals",JSON.stringify(j))},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${Object.values(s).every(B=>!B)?"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400":"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400"} transition-all`,title:"Select or uncheck all intervals",children:Object.values(s).every(B=>!B)?" All":" Uncheck"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(s).map(B=>o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[T?o.jsx("input",{type:"radio",name:"intervalFilterRadio",checked:s[B],onChange:()=>{const j={};Object.keys(s).forEach(V=>{j[V]=V===B}),l(j),localStorage.setItem("selectedIntervals",JSON.stringify(j))},className:"form-radio h-5 w-5 text-green-600",style:{accentColor:"#22c55e"}}):o.jsx("input",{type:"checkbox",checked:s[B],onChange:()=>oe(B),className:"form-checkbox h-5 w-5 text-blue-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:B})]},B))})]}),o.jsxs("div",{className:"break-inside-avoid mb-4 bg-gradient-to-br from-pink-50 via-white to-pink-100 dark:from-pink-900 dark:via-gray-900 dark:to-pink-950 rounded-2xl shadow-lg border border-pink-200 dark:border-pink-800 p-4 gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-pink-700 dark:text-pink-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Action",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-pink-400 via-pink-300 to-pink-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const B=!F;if(Z(B),B){const j=Object.keys(c).find(V=>c[V]);if(j){const V={BUY:!1,SELL:!1};V[j]=!0,d(V),localStorage.setItem("selectedActions",JSON.stringify(V))}}},className:"bg-pink-200 dark:bg-pink-800 text-pink-900 dark:text-pink-100 px-2 py-1 rounded text-xs font-semibold hover:bg-pink-300 dark:hover:bg-pink-700 focus:ring-2 focus:ring-pink-400 transition-all",title:"Toggle between radio and checkbox mode",children:F?" Check":" Radio"}),!F&&o.jsx("button",{onClick:()=>{const B=Object.values(c).every(V=>V),j={BUY:!B,SELL:!B};d(j),localStorage.setItem("selectedActions",JSON.stringify(j))},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${Object.values(c).every(B=>!B)?"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400":"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400"} transition-all`,title:"Select or uncheck all actions",children:Object.values(c).every(B=>!B)?" All":" Uncheck"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["BUY","SELL"].map(B=>o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[F?o.jsx("input",{type:"radio",name:"actionRadio",checked:c[B],onChange:()=>{const j={BUY:!1,SELL:!1};j[B]=!0,d(j),localStorage.setItem("selectedActions",JSON.stringify(j))},className:"form-radio h-5 w-5 text-green-600",style:{accentColor:"#22c55e"}}):o.jsx("input",{type:"checkbox",checked:c[B],onChange:()=>P(B),className:"form-checkbox h-5 w-5 text-blue-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:B})]},B))})]}),o.jsxs("div",{className:"break-inside-avoid mb-4 bg-gradient-to-br from-emerald-50 via-white to-teal-50 dark:from-emerald-900 dark:via-gray-900 dark:to-teal-950 rounded-2xl shadow-lg border border-emerald-200 dark:border-emerald-800 p-4 gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-emerald-700 dark:text-emerald-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Live",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-emerald-400 via-emerald-300 to-teal-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const B=!Q;if(se==null||se(B),B){const V=(K??{true:!0}).true?"true":"false";L==null||L({true:V==="true",false:V==="false"})}},className:"bg-emerald-200 dark:bg-emerald-800 text-emerald-900 dark:text-emerald-100 px-2 py-1 rounded text-xs font-semibold hover:bg-emerald-300 dark:hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-400 transition-all",title:"Toggle between radio and checkbox mode",children:Q?" Check":" Radio"}),!Q&&o.jsx("button",{onClick:()=>{const B=K??{true:!0,false:!0},j=B.true&&B.false;L==null||L({true:!j,false:!j})},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${K!=null&&K.true&&(K!=null&&K.false)?"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400":"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400"} transition-all`,title:"Uncheck or select all",children:K!=null&&K.true&&(K!=null&&K.false)?" Uncheck":" All"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[Q?o.jsx("input",{type:"radio",name:"liveFilterRadio",checked:!!(K!=null&&K.true),onChange:()=>L==null?void 0:L({true:!0,false:!1}),className:"form-radio h-5 w-5 text-emerald-600",style:{accentColor:"#10b981"}}):o.jsx("input",{type:"checkbox",checked:(K==null?void 0:K.true)??!0,onChange:()=>L==null?void 0:L(B=>({...B,true:!B.true})),className:"form-checkbox h-5 w-5 text-emerald-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:"True"})]}),o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[Q?o.jsx("input",{type:"radio",name:"liveFilterRadio",checked:!!(K!=null&&K.false),onChange:()=>L==null?void 0:L({true:!1,false:!0}),className:"form-radio h-5 w-5 text-emerald-600",style:{accentColor:"#10b981"}}):o.jsx("input",{type:"checkbox",checked:(K==null?void 0:K.false)??!0,onChange:()=>L==null?void 0:L(B=>({...B,false:!B.false})),className:"form-checkbox h-5 w-5 text-emerald-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:"False"})]})]})]}),o.jsxs("div",{className:"break-inside-avoid mb-4 bg-gradient-to-br from-yellow-50 via-white to-yellow-100 dark:from-yellow-900 dark:via-gray-900 dark:to-yellow-950 rounded-2xl shadow-lg border border-yellow-200 dark:border-yellow-800 p-2 gap-1 justify-start items-stretch",children:[o.jsx("div",{className:"flex items-center gap-2 mb-1",children:o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-yellow-700 dark:text-yellow-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Date & Time",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]})}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-800 dark:text-gray-200 mb-0.5",children:"From"}),o.jsx("input",{type:"datetime-local",value:h?Mt(h).format("YYYY-MM-DDTHH:mm"):"",onChange:B=>{const j=B.target.value;p(j?Mt(j):null)},className:"border border-gray-300 dark:border-gray-700 rounded px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-800 dark:text-white",placeholder:"From"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-800 dark:text-gray-200 mb-0.5",children:"To"}),o.jsx("input",{type:"datetime-local",value:g?Mt(g).format("YYYY-MM-DDTHH:mm"):"",onChange:B=>{const j=B.target.value;y(j?Mt(j):null)},className:"border border-gray-300 dark:border-gray-700 rounded px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-800 dark:text-white",placeholder:"To"})]}),o.jsx("button",{type:"button",onClick:()=>{p(null),y(null),at(B=>B+1)},className:"bg-yellow-400 dark:bg-yellow-700 text-yellow-900 dark:text-yellow-100 px-2 py-1 rounded mt-1 hover:bg-yellow-500 dark:hover:bg-yellow-800 focus:ring-1 focus:ring-yellow-400 transition-all font-semibold text-xs",children:"Reset"})]})]})]})},GP=({title:t,value:e,isSelected:n,onClick:r,sticker:s,onStickerClick:l})=>{const[c,d]=Kr.useState(()=>localStorage.getItem(`boxTag-${t}`)||""),[h,g]=x.useState(!1),[p,y]=x.useState(""),[_,b]=x.useState("#FFF9C4"),[k,S]=x.useState(1),E=x.useRef(null),O=[{name:"Yellow",value:"#FFF9C4"},{name:"Orange",value:"#FFE0B2"},{name:"Green",value:"#C8E6C9"},{name:"Blue",value:"#BBDEFB"},{name:"Pink",value:"#F8BBD0"}],T=[{name:"Small",value:1},{name:"Large",value:1.2},{name:"Largest",value:1.4}],D=Q=>{Q.stopPropagation(),y(""),b("#FFF9C4"),S(1),g(!0)},F=Q=>{Q.stopPropagation(),d(""),localStorage.removeItem(`boxTag-${t}`)},Z=Q=>{Q.stopPropagation();const se=JSON.stringify({text:p,color:_,scale:k});d(se),localStorage.setItem(`boxTag-${t}`,se),g(!1)},K=Q=>{Q.stopPropagation(),g(!1)},L=Q=>{let se=0;return Q.split(/([+-]?[\d.]+)/g).map((ce,ye)=>{if(!isNaN(ce)&&ce.trim()!==""){const xe=parseFloat(ce)<0?"text-red-400":"text-green-300";return se++,o.jsx("span",{className:`relative px-[3px] font-semibold text-[46px] ${xe}`,onMouseEnter:Ce=>{const at=["Running","Closed","Total"];let le=window.dashboardTooltip;le||(le=document.createElement("div"),le.id="dashboardTooltip",le.style.cssText=`
                  position: fixed;
                  background: #222;
                  color: #fff;
                  padding: 6px 12px;
                  border-radius: 5px;
                  font-size: 18px;
                  font-weight: 600;
                  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
                  z-index: 9999;
                  pointer-events: none;
                  opacity: 0;
                  transition: opacity 0.1s ease;
                `,document.body.appendChild(le),window.dashboardTooltip=le),le.innerText=at[se-1]||"",le.style.left=`${Ce.clientX+10}px`,le.style.top=`${Ce.clientY+10}px`,le.style.opacity="0",requestAnimationFrame(()=>{le.style.display="block",requestAnimationFrame(()=>{le.style.opacity="1"})})},onMouseMove:Ce=>{window.dashboardTooltip&&(window.dashboardTooltip.style.left=`${Ce.clientX+10}px`,window.dashboardTooltip.style.top=`${Ce.clientY+10}px`)},onMouseLeave:()=>{window.dashboardTooltip&&(window.dashboardTooltip.style.display="none")},children:ce},ye)}else return o.jsx("span",{className:"text-white text-sm px-[1px] opacity-80",children:ce},ye)})};return o.jsxs("div",{className:"relative group",children:[n&&o.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow-lg z-20 border border-yellow-600 animate-pulse",children:"Selected"}),c&&(()=>{const Q=JSON.parse(c);return o.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1 px-3 py-1.5 rounded-full z-10 shadow-lg border border-gray-300 dark:border-gray-700",style:{backgroundColor:Q.color||"yellow",fontSize:`calc(1.1rem * var(--app-font-scale) * ${Q.scale||1})`},children:[o.jsx("span",{className:"font-bold mr-1",children:""}),Q.text,o.jsx("button",{onClick:F,className:"ml-1 text-red-700 font-bold hover:text-red-900",children:""})]})})(),o.jsx("button",{ref:E,onClick:D,className:"absolute top-2 left-2 bg-gray-200 text-black text-xs w-5 h-5 rounded-full z-10 shadow hover:bg-gray-300 border border-gray-400 flex items-center justify-center",style:{transform:"translate(-110%, -110%)"},title:"Add tag",children:"+"}),h&&o.jsxs("div",{className:"absolute top-8 left-2 z-30 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg p-4 w-64 animate-fade-in",style:{minWidth:220},children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Tag Name"}),o.jsx("input",{className:"w-full px-2 py-1 rounded border border-gray-300 dark:bg-gray-800 dark:text-white",value:p,onChange:Q=>y(Q.target.value),placeholder:"Enter tag name",autoFocus:!0})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Color"}),o.jsx("div",{className:"flex gap-2",children:O.map(Q=>o.jsx("button",{className:`w-7 h-7 rounded-full border-2 ${_===Q.value?"border-black dark:border-white scale-110":"border-gray-300"} transition-all`,style:{backgroundColor:Q.value},onClick:se=>{se.stopPropagation(),b(Q.value)},title:Q.name},Q.value))})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Size"}),o.jsx("div",{className:"flex gap-2",children:T.map(Q=>o.jsx("button",{className:`px-2 py-1 rounded border-2 ${k===Q.value?"border-blue-500 bg-blue-100 dark:bg-blue-900":"border-gray-300"} transition-all text-xs font-semibold`,onClick:se=>{se.stopPropagation(),S(Q.value)},title:Q.name,children:Q.name},Q.value))})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-black text-xs font-semibold",onClick:K,children:"Cancel"}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold",onClick:Z,disabled:!p.trim(),children:"Save"})]})]}),o.jsxs("div",{className:`cursor-pointer p-8 rounded-2xl border-2 border-transparent transition-all duration-300 transform bg-gradient-to-br from-blue-800/90 to-indigo-900/90 dark:from-blue-900/80 dark:to-gray-900/90 group-hover:scale-105 group-hover:shadow-2xl group-hover:border-yellow-400/70 group-focus-within:scale-105 group-focus-within:shadow-2xl group-focus-within:border-yellow-400/90 group-active:scale-100 group-active:shadow-lg group-active:border-yellow-500/90
      ${n?"ring-4 ring-yellow-400 border-yellow-600 scale-105 shadow-2xl bg-yellow-100/80 dark:bg-yellow-900/30":"hover:ring-2 hover:ring-yellow-400/60"}
      `,onClick:r,tabIndex:0,title:t.replace(/_/g," "),children:[s&&o.jsx("button",{className:"absolute -top-2 -right-2 z-20 bg-pink-600 text-white text-[10px] md:text-xs font-bold px-2 py-1 rounded-full shadow-lg border border-pink-300 hover:bg-pink-700 animate-pulse ring-2 ring-pink-300",onClick:Q=>{Q.stopPropagation(),l&&l()},title:"View newly added trades",children:s}),o.jsx("h2",{className:"text-lg font-semibold text-center text-sky-300 mb-2 truncate",title:t.replace(/_/g," "),children:t.replace(/_/g," ")}),o.jsx("div",{className:"text-2xl font-bold text-center leading-snug whitespace-nowrap overflow-x-auto",children:typeof e=="string"?o.jsx("span",{className:"text-[22px] leading-snug inline-block min-w-full pointer-events-none",children:o.jsx("div",{className:"flex flex-wrap justify-end gap-[3px] pointer-events-auto",style:{pointerEvents:"auto"},children:L(e)})}):e})]})]})};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jN=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:c,...d},h)=>x.createElement("svg",{ref:h,...JP,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:jN("lucide",s),...d},[...c.map(([g,p])=>x.createElement(g,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=(t,e)=>{const n=x.forwardRef(({className:r,...s},l)=>x.createElement(XP,{ref:l,iconNode:e,className:jN(`lucide-${qP(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ZP=Xs("Activity",KP);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],AN=Xs("ChartNoAxesColumnIncreasing",QP);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],tF=Xs("ChevronDown",eF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rF=Xs("ChevronRight",nF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],iF=Xs("FileText",sF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ON=Xs("House",aF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],oF=Xs("LayoutGrid",lF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],uF=Xs("LoaderCircle",cF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fF=Xs("Lock",dF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],gF=Xs("Mail",hF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],mF=Xs("Menu",pF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],yF=Xs("Play",xF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bF=Xs("Settings",vF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],SF=Xs("Shield",_F);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"4i38lg"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"mlte4a"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]],kF=Xs("SquareStack",wF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],NF=Xs("Users",EF);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],CF=Xs("X",TF),jF="http://150.241.244.130:10000";let Id=null,C2=!1,j2=!1;function DN(){var e;if(typeof window>"u")return!1;const t=((e=window.location)==null?void 0:e.hostname)||"";return t==="localhost"||t==="127.0.0.1"}function AF(){var e,n,r;let t="https://api.clubinfotech.com";if(t!==void 0&&t!==""){if(typeof window<"u"&&((e=window.location)==null?void 0:e.protocol)==="https:"&&t.startsWith("http://")){if(t.startsWith("http://150.241.244.130"))return"";t="https://"+t.slice(7)}return t}if(typeof window<"u"&&DN())return"";if(typeof window<"u"&&((n=window.location)!=null&&n.origin)){const s=window.location.origin;if(s.startsWith("http://150.241.244.130")||s.startsWith("https://localhost"))return""}return typeof window<"u"&&((r=window.location)==null?void 0:r.protocol)==="https:"?"":jF}function RN(){var e;return typeof window>"u"?!1:(((e=window.location)==null?void 0:e.hostname)||"")==="150.241.244.130"}function A2(t){if(!t||typeof t!="string")return t;const e=t.trim().replace(/\/+$/,"");return!e||e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e}function Oa(){return RN()?"":A2(Id||AF())}function mx(){var l,c;if(typeof window>"u"||RN())return Promise.resolve();const t=typeof import.meta<"u"&&"/live_cloud-lab_live/"||"/",e=t==="./"||t==="."?"":t.replace(/\/$/,"")||"",n=(e?e+"/":"")+"api-config.json",r=new URL(n,window.location.origin).href,s=r+(r.includes("?")?"&":"?")+"t="+Date.now();return(c=(l=window.location)==null?void 0:l.hostname)!=null&&c.includes("github.io")&&!j2&&(j2=!0,console.log("[LAB] Fetching api-config.json:",r)),fetch(s).then(d=>{var h,g;if((g=(h=window.location)==null?void 0:h.hostname)!=null&&g.includes("github.io")&&!d.ok&&(console.error(`[LAB] api-config.json not found (${d.status}). Set API_BASE_URL secret and run Deploy frontend to GitHub Pages.`),d.status===404&&e)){const p=new URL("api-config.json",window.location.origin).href;return fetch(p+"?t="+Date.now()).catch(()=>d)}return d.ok?d.json():null}).then(d=>{var p,y,_,b;if(!d)return;const g=(typeof d.apiBaseUrl=="string"?d.apiBaseUrl:typeof d.tunnelUrl=="string"?d.tunnelUrl:"").replace(/\/$/,"").trim();if(g){const k=Id;Id=g,(y=(p=window.location)==null?void 0:p.hostname)!=null&&y.includes("github.io")&&console.log("[LAB] API base from api-config.json:",g),(k!==g||!k)&&window.dispatchEvent(new CustomEvent("api-config-loaded"))}else(b=(_=window.location)==null?void 0:_.hostname)!=null&&b.includes("github.io")&&!C2&&(C2=!0,console.warn("[LAB] api-config.json has empty apiBaseUrl. Set API_BASE_URL to your cloud URL (e.g. http://150.241.244.130:10000) and run Deploy frontend to GitHub Pages."))}).catch(d=>{var h,g;(g=(h=window.location)==null?void 0:h.hostname)!=null&&g.includes("github.io")&&console.error("[LAB] api-config.json fetch failed:",d.message)})}typeof window<"u"&&mx();const OF=typeof window<"u"?Oa():"";var zw,Bw;typeof window<"u"&&((Bw=(zw=window.location)==null?void 0:zw.hostname)!=null&&Bw.includes("github.io"))&&(console.log("[LAB] Page URL:",window.location.href),!OF&&!Id&&console.log("[LAB] Set API_BASE_URL secret to your cloud URL (e.g. http://150.241.244.130:10000) and run Deploy frontend to GitHub Pages."));function Rn(t){var s,l;const e=Oa(),n=typeof window<"u"&&((l=(s=window.location)==null?void 0:s.hostname)==null?void 0:l.includes("github.io"));if(!e)return n&&console.warn("[api()] No API base URL  set API_BASE_URL and redeploy, or wait for api-config.json"),t;const r=`${e.replace(/\/$/,"")}${t.startsWith("/")?t:`/${t}`}`;return n&&console.log(`[api()] Built URL: ${r} (base: ${e}, path: ${t})`),r}function Nn(t,e={}){const n=typeof t=="string"&&t.startsWith("http")?t:Rn(t);return fetch(n,{...e,credentials:"include"}).then(r=>(r.status===401&&typeof window<"u"&&window.dispatchEvent(new CustomEvent("lab-unauthorized")),r))}function gm(t=""){const e=typeof import.meta<"u"?"/live_cloud-lab_live/".replace(/\/$/,""):"",n=e?`${e}/live-trade-view`:"/live-trade-view";return`${window.location.origin}${n}${t?`?${t}`:""}`}const ud=t=>{if(t===!0||t==="true"||t===1||t==="1")return!0;if(t===!1||t==="false"||t===0||t==="0"||t===null||t===void 0)return!1;if(typeof t=="string"){const e=parseFloat(t);return!isNaN(e)&&e>0}return!1},ua=t=>{if(t===!0||t==="true"||t===1||t==="1")return!0;if(typeof t=="string"){const e=parseFloat(t);return!isNaN(e)&&e>0}return!1},Nr=(t,e=2,n="")=>{const r=parseFloat(t);return isNaN(r)?"N/A":`${n}${r.toFixed(e)}`},O2=t=>{if(!t)return"";let e=String(t).replace(/<[^>]+>/g,"").replace(/\s+/g,"").replace(/[^A-Z0-9]/gi,"").toUpperCase();return e.startsWith("BINANCE")&&(e=e.slice(7)),e=e.replace(/PERPETUALCONTRACT|PERP|CHART/gi,"").replace(/\d{6,}$/,""),e||""},Zu=t=>{if(!t)return"N/A";const e=Mt.utc(t);if(e.isValid())return e.format("YYYY-MM-DD HH:mm:ss");try{return String(t).replace("T"," ").replace("Z","")}catch{return String(t)}},DF=t=>{if(!t)return"N/A";const e=Mt.utc(t);if(e.isValid())return e.format("YYYY-MM-DD");try{const n=String(t).replace("T"," ").replace("Z","");return n.split(" ")[0]||n}catch{return String(t)}},$c=(t,e)=>({"S No":e+1,"M.Id":t.machineid||"N/A","":"copy",Unique_ID:t.unique_id||"N/A",macd_action:t.macd_action??t.MACD_Action??t.macdAction??"N/A","Candle_":Zu(t.candel_time),"Fetcher_":Zu(t.fetcher_trade_time),"Operator_":Zu(t.operator_trade_time),Pair:t.pair?`<div style="display:flex; flex-direction:column; align-items:center;">
          <a href="https://www.binance.com/en/futures/${t.pair}" target="_blank" rel="noopener noreferrer" style="color:#1d4ed8;text-decoration:underline;">${t.pair}</a>
          <button onclick="window.open('https://www.tradingview.com/chart/?symbol=BINANCE:${t.pair}.P', '_blank')" style="margin-top:2px;font-size:10px;padding:2px 6px;background:#eee;border:1px solid #aaa;border-radius:4px;cursor:pointer;">
             Chart
          </button>
        </div>`:"N/A","":t.interval||"N/A","":t.action||"N/A",Investment:Nr(t.investment,2,"$"),PL:Nr(t.pl_after_comm,2),"_BUY":Nr(t.hedge_buy_pl,2),"_SELL":Nr(t.hedge_sell_pl,2),Type:t.type||"N/A","Operator_":Zu(t.operator_close_time),"":t.signalfrom||"N/A",PJ:(()=>{const n=t.profit_journey;return n===!0||n==="true"||n===1||typeof n=="string"&&parseFloat(n)>0?"":""})(),CJ:(()=>{const n=t.commision_journey;return n===!0||n==="true"||n===1||typeof n=="string"&&parseFloat(n)>0?"":""})(),Stop_Price:Nr(t.stop_price,6),Save_Price:Nr(t.save_price,6),Min_Comm:Nr(t.min_comm,6),"":ud(t.hedge)?" Yes":" No","1-1":ua(t.hedge_1_1_bool)?" Yes":" No","_Order_Size":t.hedge_order_size||"N/A","Min_Comm_After_":Nr(t.min_comm_after_hedge,6),Min_Profit:Nr(t.min_profit,2,"$"),Buy_Qty:t.buy_qty||0,Buy_Price:Nr(t.buy_price,6),Buy_PL:Nr(t.buy_pl,6),Added_Qty:t.added_qty||"N/A",Sell_Qty:t.sell_qty||0,Sell_Price:Nr(t.sell_price,6),Sell_PL:Nr(t.sell_pl,6),Close_Price:Nr(t.close_price,6),Commission:Nr(t.commission,2,"$"),Date:DF(t.candel_time),Swing1:Nr(t.swing1,6),Swing2:Nr(t.swing2,6),Swing3:Nr(t.swing3,6),Swing4:Nr(t.swing4,6),Swing5:Nr(t.swing5,6),HSHighP:Nr(t.hedge_swing_high_point,6),HSLowP:Nr(t.hedge_swing_low_point,6),THighP:Nr(t.temp_high_point,6),TlowP:Nr(t.temp_low_point,6),Min_Close:t.min_close||"N/A",Exist_In_Exchange:ua(t.exist_in_exchange)?" Yes":" No",Exchange_Position:t.exchange_position||"N/A",Auto:ua(t.auto)?" Yes":" No",Created_At:Zu(t.created_at),Update_Table:ua(t.update_table)?" Yes":" No",Position_Amt:Nr(t.position_amt,6),Entry_Price:Nr(t.entry_price,6),Unrealized_Profit:Nr(t.unrealized_profit,2),Leverage:t.leverage_val??t.leverage??"N/A",Position_Side:t.position_side||"N/A",Swing6:Nr(t.swing6,6),Swing7:Nr(t.swing7,6),Swing8:Nr(t.swing8,6),Swing9:Nr(t.swing9,6),Swing10:Nr(t.swing10,6)}),RF=({title:t,tradeData:e,clientData:n,activeSubReport:r,setActiveSubReport:s})=>{var Qn;const l=Kr.useMemo(()=>t.replace(/\s+/g,"_").trim(),[t]),[c,d]=x.useState(()=>{try{const me=localStorage.getItem("chartSettings"),We=me?JSON.parse(me):{};return{layout:We.layout??3,showVolume:We.showVolume??!1,showRSI:We.showRSI??!1,showMACD:We.showMACD??!0,height:We.height??500,interval:We.interval??"15"}}catch{return{layout:3,showVolume:!1,showRSI:!1,showMACD:!0,height:500,interval:"15"}}});x.useEffect(()=>{localStorage.setItem("chartSettings",JSON.stringify(c))},[c]);const[h,g]=x.useState(()=>{const me=localStorage.getItem("remarksMap");return me?JSON.parse(me):{}}),[p,y]=x.useState(14),[_,b]=x.useState(()=>{const me=localStorage.getItem("remarksWidth");return me?parseInt(me):300});x.useEffect(()=>{localStorage.setItem("remarksMap",JSON.stringify(h))},[h]),x.useEffect(()=>{localStorage.setItem("remarksWidth",_)},[_]);const[k,S]=x.useState(()=>{const me=localStorage.getItem("reportFontSizeLevel");return me?parseInt(me,10):3});x.useEffect(()=>{localStorage.setItem("reportFontSizeLevel",k)},[k]);const E="tableColumnOrder_global",[O,T]=x.useState([]),[D,F]=x.useState(!1),[Z,K]=x.useState(null),L=x.useCallback((me,We)=>{if(We==="Client_Stats"){const Ge=n.filter(ie=>ie.machineid===me);se(Ge.map((ie,Pe)=>({"S No":Pe+1,"Machine ID":ie.machineid||"N/A","Client Name":ie.name||"N/A",Active:ua(ie.active)?"":"","Last Ping":ie.lastping||"N/A",Region:ie.region||"N/A"})))}else s(me)},[n]),[Q,se]=x.useState([]),[ce,ye]=x.useState([]),[te,xe]=x.useState({}),[Ce,at]=x.useState(null),[le,Ve]=Kr.useState({key:null,direction:"asc"}),[Ue,Ze]=x.useState(null),[M,oe]=x.useState({}),[P,B]=x.useState(""),[j,V]=x.useState(null);x.useEffect(()=>{if(j){const me=setTimeout(()=>V(null),1200);return()=>clearTimeout(me)}},[j]);function fe(){document.querySelectorAll("th .filter-icon").forEach(me=>{const We=me.getAttribute("data-index");M[We]?(me.innerText="",me.style.color="green"):(me.innerText="",me.style.color="")})}function lt(me,We){document.querySelectorAll(".filter-popup").forEach(ct=>ct.remove());const Ge=[...document.querySelectorAll("tbody tr td:nth-child("+(me+1)+")")].map(ct=>ct.innerText.trim()),ie={};Ge.forEach(ct=>ie[ct]=(ie[ct]||0)+1);const Pe=Object.keys(ie),z=document.createElement("div");z.className="filter-popup",z.style.position="fixed",z.style.background="white",z.style.color="black",z.style.padding="12px",z.style.borderRadius="8px",z.style.zIndex="999999",z.style.maxHeight="500px",z.style.overflowY="auto",z.style.display="flex",z.style.flexDirection="column",z.style.gap="8px";const pe=[],Fe=document.createElement("button");Fe.innerText=" Reset Column",Fe.onclick=ct=>{ct.stopPropagation();const ft={...M};delete ft[me],oe(ft),z.remove()},z.appendChild(Fe);const bt=document.createElement("button");bt.innerText=" Apply",bt.onclick=ct=>{ct.stopPropagation();const ft=pe.filter(Xt=>Xt.checked).map(Xt=>Xt.value);M[me]=ft.length===Pe.length?void 0:ft,oe({...M}),z.remove(),fe()},z.appendChild(bt);const dt=document.createElement("button");dt.innerText=" Select All",dt.style.backgroundColor="#4caf50",dt.style.color="white";let Zt=!0;dt.onclick=()=>{Zt=!Zt,pe.forEach(ct=>ct.checked=Zt),dt.innerText=Zt?" Select All":" Deselect All",dt.style.backgroundColor=Zt?"#4caf50":"#f44336"},z.appendChild(dt),Pe.forEach(ct=>{const ft=document.createElement("label");ft.style.display="flex",ft.style.alignItems="center",ft.style.gap="6px";const Xt=document.createElement("input");Xt.type="checkbox",Xt.value=ct,Xt.checked=!0,ft.appendChild(Xt),ft.appendChild(document.createTextNode(` ${ct} (${ie[ct]})`)),z.appendChild(ft),pe.push(Xt)}),document.body.appendChild(z);const kt=We.target.getBoundingClientRect();z.style.top=`${kt.bottom+10}px`,z.style.left=`${kt.left}px`,setTimeout(()=>{const ct=ft=>{z.contains(ft.target)||(z.remove(),document.removeEventListener("click",ct))};document.addEventListener("click",ct)},100)}function et(me,We,Ge){let ie=document.getElementById("copyPopup");ie||(ie=document.createElement("div"),ie.id="copyPopup",ie.innerText=" Copy Selected",ie.style.position="fixed",ie.style.background="black",ie.style.color="white",ie.style.padding="10px 20px",ie.style.borderRadius="8px",ie.style.fontSize="13px",ie.style.fontWeight="bold",ie.style.cursor="pointer",ie.style.zIndex="999999",ie.style.opacity="1",ie.style.pointerEvents="auto",ie.style.boxShadow="0 5px 15px rgba(0,0,0,0.3)",ie.style.userSelect="none",ie.style.transition="opacity 0.3s ease, transform 0.2s ease",ie.addEventListener("mouseenter",()=>{ie.style.backgroundColor="#333",ie.style.transform="scale(1.05)"}),ie.addEventListener("mouseleave",()=>{ie.style.backgroundColor="black",ie.style.transform="scale(1)"}),ie.addEventListener("click",z=>{z.stopPropagation(),navigator.clipboard.writeText(me).then(()=>{ie.innerText=" Copied!",setTimeout(()=>{ie&&ie.remove()},800)})}),document.body.appendChild(ie)),ie.style.left=`${We-window.scrollX}px`,ie.style.top=`${Ge-window.scrollY}px`,ie.style.display="block",ie.style.opacity="1";const Pe=z=>{ie.contains(z.target)||(ie.remove(),document.removeEventListener("click",Pe))};setTimeout(()=>{document.addEventListener("click",Pe)},10)}x.useEffect(()=>{const me=We=>{const Ge=window.getSelection();if(!Ge)return;const ie=Ge.toString().trim();if(!ie){const Pe=document.getElementById("copyPopup");Pe&&Pe.remove();return}setTimeout(()=>{try{const z=Ge.getRangeAt(0).getBoundingClientRect(),pe=z.left+window.scrollX+z.width/2,Fe=z.bottom+window.scrollY+10;et(ie,pe,Fe)}catch(Pe){console.error("Copy popup positioning error:",Pe)}},0)};return document.addEventListener("mouseup",me),()=>{document.removeEventListener("mouseup",me)}},[]),x.useEffect(()=>{const me=We=>{document.querySelectorAll(".filter-popup").forEach(ie=>{ie.contains(We.target)||(ie.remove(),setActivePopupIndex(null))})};return document.addEventListener("click",me),()=>document.removeEventListener("click",me)},[]);const ht=x.useMemo(()=>{let me=[...Q];const We=ie=>{if(ie==null)return"";if(typeof ie!="string")return String(ie).trim();const Pe=document.createElement("div");return Pe.innerHTML=ie,(Pe.textContent||"").replace(/\s+/g," ").trim()},Ge=O.length?O:Q[0]?Object.keys(Q[0]):[];return Object.entries(M).forEach(([ie,Pe])=>{if(!Pe)return;const z=Pe.map(We),pe=parseInt(ie),Fe=Ge[pe];Fe&&(me=me.filter(bt=>{const dt=We(bt[Fe]);return z.includes(dt)}))}),le.key?[...me].sort((ie,Pe)=>{const z=ie[le.key]||"",pe=Pe[le.key]||"";return!isNaN(z)&&!isNaN(pe)?le.direction==="asc"?z-pe:pe-z:le.direction==="asc"?z.localeCompare(pe):pe.localeCompare(z)}):me},[Q,le,M]);x.useEffect(()=>{if(!ht.length)return;const me=Object.keys(ht[0]);let We=[];try{We=JSON.parse(localStorage.getItem(E)||"[]")}catch{We=[]}let Ge;Array.isArray(We)&&We.length?Ge=We:(Ge=["Investment","PL","Pair"].filter(dt=>me.includes(dt)),me.forEach(dt=>{Ge.includes(dt)||Ge.push(dt)}));const ie=Ge.filter(bt=>me.includes(bt)||bt==="Live"),Pe=me.filter(bt=>!ie.includes(bt));let z=[...ie,...Pe];z.includes("Live")||z.push("Live");const pe=z.indexOf("Investment"),Fe=z.indexOf("PL");if(pe!==-1&&Fe!==-1&&pe>Fe){const bt=[...z];bt.splice(pe,1),bt.splice(Fe,0,"Investment"),z=bt}z.join("|")!==O.join("|")&&(T(z),localStorage.setItem(E,JSON.stringify(z)))},[ht,E,O]);const At=me=>K(me),xn=(me,We)=>{me.preventDefault(),!(!Z||Z===We)&&T(Ge=>{const ie=Ge.indexOf(Z),Pe=Ge.indexOf(We);if(ie===-1||Pe===-1)return Ge;const z=[...Ge];return z.splice(ie,1),z.splice(Pe,0,Z),localStorage.setItem(E,JSON.stringify(z)),z})},Bt=()=>{if(!ht.length)return;const me=Object.keys(ht[0]),We=me.includes("Live")?me:[...me,"Live"];T(We),localStorage.setItem(E,JSON.stringify(We))},Kt=x.useMemo(()=>le.key?[...Q].sort((me,We)=>{const Ge=me[le.key]||"",ie=We[le.key]||"";return!isNaN(Ge)&&!isNaN(ie)?le.direction==="asc"?Ge-ie:ie-Ge:le.direction==="asc"?Ge.localeCompare(ie):ie.localeCompare(Ge)}):Q,[Q,le]);x.useEffect(()=>{if(console.log(" TableView useEffect - title:",t,"tradeData length:",e==null?void 0:e.length),!t||!e||e.length===0)return;let me=[...e];switch(t){case"Total_Closed_Stats":me=me.filter(Pe=>Pe.type==="close"||Pe.type==="hedge_close");break;case"Direct_Closed_Stats":me=me.filter(Pe=>{const z=ud(Pe.hedge);return Pe.type==="close"&&!z});break;case"Hedge_Closed_Stats":me=me.filter(Pe=>Pe.type==="hedge_close");break;case"Total_Running_Stats":me=me.filter(Pe=>Pe.type==="running"||Pe.type==="hedge_hold");break;case"Assigned_New":me=me.filter(Pe=>Pe.type==="assign"||Pe.type==="back_close");break;case"Direct_Running_Stats":me=me.filter(Pe=>{const z=ud(Pe.hedge)||Pe.type==="hedge_hold";return Pe.type==="running"&&!z});break;case"Hedge_Running_Stats":me=me.filter(Pe=>{const z=ud(Pe.hedge)||Pe.type==="hedge_hold",pe=ua(Pe.hedge_1_1_bool);return(Pe.type==="running"||Pe.type==="hedge_hold")&&z&&!pe});break;case"Hedge_on_Hold":me=me.filter(Pe=>{const z=ud(Pe.hedge)||Pe.type==="hedge_hold",pe=ua(Pe.hedge_1_1_bool);return(Pe.type==="running"||Pe.type==="hedge_hold")&&z&&pe});break;case"Closed_Count_Stats":me=me.filter(Pe=>{if(r==="loss")return Pe.type==="close"&&Pe.pl_after_comm<0;if(r==="profit")return Pe.type==="close"&&Pe.pl_after_comm>0;if(r==="pj"){const z=ua(Pe.profit_journey);return Pe.type==="close"&&z}return!0});break;case"Buy_Sell_Stats":me=me.filter(Pe=>["BUY","SELL"].includes(Pe.action)?r==="buy"?Pe.action==="BUY":r==="sell"?Pe.action==="SELL":!0:!1);break;case"Journey_Stats_Running":me=me.filter(Pe=>{const z=ua(Pe.profit_journey),pe=ua(Pe.commision_journey);return r==="pj"?z&&Pe.pl_after_comm>0&&(Pe.type==="running"||Pe.type==="hedge_hold"):r==="cj"?pe&&Pe.pl_after_comm>0&&(Pe.type==="running"||Pe.type==="hedge_hold")&&!z:r==="bc"?Pe.pl_after_comm<0&&(Pe.type==="running"||Pe.type==="hedge_hold"):!0});break;case"Client_Stats":const ie=n.map((Pe,z)=>({"S No":z+1,"Machine ID":Pe.machineid||"N/A","Client Name":Pe.name||"N/A",Active:ua(Pe.active)?"":"","Last Ping":Pe.lastping||"N/A",Region:Pe.region||"N/A"}));se(ie);return;case"Min_Close_Profit":me=me.filter(Pe=>Pe.type==="close"&&Pe.min_close==="Min_close"&&Pe.pl_after_comm>0);break;case"Min_Close_Loss":me=me.filter(Pe=>Pe.type==="close"&&Pe.min_close==="Min_close"&&Pe.pl_after_comm<0);break;default:console.log(" TableView - No case match for title:",t);break}console.log(" TableView after switch - filteredTrades length:",me.length);let We=me.map((ie,Pe)=>$c(ie,Pe));const Ge=P.trim().toLowerCase();Ge.length>0&&(We=We.filter(ie=>Object.values(ie).some(Pe=>String(Pe).toLowerCase().includes(Ge)))),console.log(" TableView final result length:",We.length),console.log(" TableView final result sample:",We.slice(0,1)),se(We),ye(me)},[t,e,r,n,P]),x.useEffect(()=>{const me=Pe=>Pe.exist_in_exchange===!0||Pe.exist_in_exchange==="true"||Pe.exist_in_exchange===1,We=[...new Set(ce.filter(me).map(Pe=>O2(Pe.pair||Pe.symbol)).filter(Boolean))];if(!We.length){xe({});return}const Ge=async()=>{const Pe={};for(const z of We)try{const Fe=await(await Nn(Rn(`/api/open-position?symbol=${encodeURIComponent(z)}`))).json().catch(()=>({}));Pe[z]=Fe}catch{Pe[z]={ok:!1,error:"Network error"}}xe(Pe)};Ge();const ie=setInterval(Ge,60*1e3);return()=>clearInterval(ie)},[ce]);const tn=(me,We,Ge=3)=>{if(!We||We.length===0)return;const ie=window.open("","_blank","width=1200,height=600"),Pe=Object.keys(We[0]),z=`
  <html>
  <head>
  <title>${me.replace(/_/g," ")} Report</title>
  <style>
  body { font-family: Arial; margin:20px; background:#f2f2f7; font-size: ${12+(Ge-8)*2}px; }
  table { width:100%; border-collapse: collapse; cursor:pointer; }
  th, td { padding:6px 8px; border-bottom:1px solid #ccc; text-align:center; }
  th { background:#288994; color:white; position:sticky; top:0; z-index:3; }
  </style>
  </head>
  <body>
  
    <table>
      <thead>
        <tr>
          ${Pe.map(pe=>`<th>${pe}</th>`).join("")}
        </tr>
      </thead>
      <tbody>
        ${We.map(pe=>`<tr>${Pe.map(Fe=>`<td>${pe[Fe]}</td>`).join("")}</tr>`).join("")}
      </tbody>
    </table>
  </body>
  </html>
  `;ie.document.write(z)},Hn=me=>{Ve(We=>({key:me,direction:We.key===me&&We.direction==="asc"?"desc":"asc"}))},sn=me=>me==null?"":typeof me=="string"?me.replace(/<[^>]+>/g,"").trim():String(me).trim(),He=x.useCallback(me=>{if(!me||!Q.length||!ce.length)return null;const We=sn(me.Unique_ID);if(!We||We==="n/a")return null;const Ge=Q.findIndex(ie=>sn(ie.Unique_ID)===We);return Ge>=0?ce[Ge]:null},[Q,ce]),Dn=Xc(),Ht=ce.length>0&&ce.every(me=>me.type==="running"||me.type==="hedge_hold");let yt=[];switch(l){case"Closed_Count_Stats":yt=["loss","profit","pj"];break;case"Buy_Sell_Stats":yt=["buy","sell"];break;case"Journey_Stats_Running":yt=["pj","cj","bc"];break;case"Client_Stats":yt=n.map(me=>me.MachineId);break;default:yt=[]}const dn=yt.length>0&&o.jsx("div",{className:"flex gap-2 mb-2",children:yt.map(me=>o.jsx("button",{onClick:()=>L(me,l),className:`px-3 py-1 text-sm rounded transition-all duration-150 ease-in-out ${r===me?"bg-yellow-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:me.toUpperCase()},me))}),Wt=(Qn=P==null?void 0:P.trim())==null?void 0:Qn.toLowerCase(),an=Wt&&Wt.length>0,Un=Q.length===0;if(console.log(" TableView render - filteredData.length:",Q.length),Un&&!an)return o.jsxs("div",{className:"mt-6 p-6 bg-[#f2f2f7] text-[#222] shadow-md rounded-lg max-w-full",children:[o.jsxs("div",{className:"flex gap-2 my-4",children:[o.jsx("input",{type:"text",placeholder:" Type to search...",value:P,onChange:me=>{const We=me.target.value.toLowerCase();B(me.target.value);const Ge=e.filter(ie=>Object.values(ie).some(Pe=>String(Pe).toLowerCase().includes(We)));se(Ge)},className:"px-3 py-2 border rounded-md w-64 text-sm dark:bg-black dark:text-white"}),o.jsx("button",{onClick:()=>{oe({}),se(e)},className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded",children:" Reset Filters"}),dn]}),o.jsxs("p",{className:"text-center text-gray-500 mt-4",children:[" No relevant data available for ",t]})]});const Cn=()=>{if(!Q||!Array.isArray(Q))return["BTCUSDT","ETHUSDT"];const me=[...new Set(Q.filter(We=>We.Pair).map(We=>{let Ge=We.Pair;return typeof Ge=="string"&&(Ge=Ge.replace(/<[^>]+>/g,"").toUpperCase().trim(),Ge.startsWith("BINANCE")&&(Ge=Ge.slice(7)),Ge=Ge.split("_")[0]),Ge}).filter(We=>We))];return console.log("ChartGrid Base Symbols:",me),me.length?me:["BTCUSDT","ETHUSDT"]};return o.jsxs("div",{className:"mt-6 p-6 bg-[#f5ecd7] dark:bg-[#181a20] text-[#222] dark:text-white shadow-md rounded-lg max-w-full",children:[o.jsx("div",{className:"flex flex-wrap items-center gap-2 w-full bg-gradient-to-r from-gray-100 via-white to-gray-200 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 rounded-xl shadow-md p-3 mb-2 transition-colors duration-300",style:{marginBottom:0,paddingBottom:0},children:o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("button",{onClick:()=>S(me=>Math.max(1,me-1)),className:"bg-gray-200 text-black p-2 rounded flex items-center justify-center transition-all duration-150",title:"Decrease Font Size",children:[o.jsx("span",{className:"sr-only",children:"Decrease Font Size"}),o.jsx("span",{style:{fontSize:18},children:"A"})]}),o.jsxs("button",{onClick:()=>S(me=>Math.min(20,me+1)),className:"bg-gray-200 text-black p-2 rounded flex items-center justify-center transition-all duration-150",title:"Increase Font Size",children:[o.jsx("span",{className:"sr-only",children:"Increase Font Size"}),o.jsx("span",{style:{fontSize:18},children:"A+"})]}),o.jsxs("button",{onClick:()=>tn(t,Kt,k),className:"bg-blue-500 hover:bg-blue-600 focus:ring-2 focus:ring-blue-400 text-white p-2 rounded flex items-center justify-center gap-1 transition-all duration-150",title:"Open in New Tab",children:[o.jsx(iF,{size:18}),o.jsx("span",{className:"text-xs font-semibold",children:"Tab"})]}),o.jsxs("button",{onClick:()=>{const me=Cn(),We=ht;window.open("/chart-grid","_blank"),localStorage.setItem("chartGridSymbols",JSON.stringify(me)),localStorage.setItem("chartGridTrades",JSON.stringify(We)),setTimeout(()=>{const Ge=new BroadcastChannel("chart-grid-data");Ge.postMessage({symbols:me,trades:We}),Ge.close()},500)},className:"bg-purple-600 hover:bg-purple-700 focus:ring-2 focus:ring-purple-400 text-white p-2 rounded flex items-center justify-center gap-1 transition-all duration-150",title:"Chart Grid",children:[o.jsx(AN,{size:18}),o.jsx("span",{className:"text-xs font-semibold",children:"Chart"})]}),o.jsx("input",{type:"text",placeholder:"Search...",value:P,onChange:me=>{const We=me.target.value.toLowerCase();B(me.target.value);const Ge=e.filter(ie=>Object.values(ie).some(Pe=>String(Pe).toLowerCase().includes(We)));se(Ge)},className:"px-3 py-2 border rounded-md w-48 text-sm focus:ring-2 focus:ring-blue-400 transition-all duration-150 dark:bg-black dark:text-white",title:"Search"}),o.jsxs("button",{onClick:()=>{const me=ht.map(ie=>{let Pe=ie.Pair;return typeof Pe=="string"&&(Pe=Pe.replace(/<[^>]+>/g,"")),{...ie,Pair:Pe,Remarks:h[Pe]||""}}),We=Ir.book_new(),Ge=Ir.json_to_sheet(me);Ir.book_append_sheet(We,Ge,"Dashboard Report"),La(We,"Dashboard_Trade_Report.xlsx")},className:"bg-green-600 hover:bg-green-700 focus:ring-2 focus:ring-green-400 text-white p-2 rounded flex items-center justify-center gap-1 transition-all duration-150",title:"Export to Excel",children:[o.jsx(ON,{size:18}),o.jsx("span",{className:"text-xs font-semibold",children:"Excel"})]}),o.jsxs("button",{onClick:()=>{oe({}),se(e),setSelectedIntervals({"1m":!0,"3m":!0,"5m":!0,"15m":!0,"30m":!0,"1h":!0,"4h":!0,"1d":!0}),typeof setGlobalInterval=="function"&&setGlobalInterval(null),localStorage.removeItem("globalInterval"),setTimeout(()=>{document.querySelectorAll('input[name="interval-radio"]').forEach(me=>{me.checked=!1})},0)},className:"bg-yellow-600 hover:bg-yellow-700 focus:ring-2 focus:ring-yellow-400 text-white p-2 rounded flex items-center justify-center gap-1 transition-all duration-150",title:"Reset Filters",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582M20 20v-5h-.581M5.582 9A7.978 7.978 0 014 12c0 4.418 3.582 8 8 8a7.978 7.978 0 006.418-3M15 9V4h5m-1.418 5A7.978 7.978 0 0020 12c0 4.418-3.582 8-8 8a7.978 7.978 0 01-6.418-3"})}),o.jsx("span",{className:"text-xs font-semibold",children:"Reset"})]}),o.jsxs("button",{onClick:()=>F(!0),className:"bg-gray-700 hover:bg-gray-800 focus:ring-2 focus:ring-gray-400 text-white p-2 rounded flex items-center justify-center gap-1 transition-all duration-150",title:"Reorder columns",children:[o.jsx("span",{role:"img","aria-label":"settings",children:""}),o.jsx("span",{className:"text-xs font-semibold hidden sm:inline",children:"Columns"})]}),Ht&&o.jsx("button",{onClick:()=>Dn("/live-running-trades",{state:{trades:ce,formattedRows:ht}}),className:"bg-emerald-600 hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-400 text-white p-2 rounded flex items-center justify-center gap-1 transition-all duration-150",title:"Live show all  bulk actions",children:o.jsx("span",{className:"text-xs font-semibold",children:"Live show all"})}),Ue!==null&&(()=>{const me=ht[Ue]||{},We=["Stop_Price","Save_Price","Buy_Price","Sell_Price"];let Ge=me.Pair;return typeof Ge=="string"&&(Ge=Ge.replace(/<[^>]+>/g,"")),o.jsx("div",{className:"flex flex-wrap items-center gap-3 p-1 border border-gray-300 bg-white dark:bg-gray-800 rounded text-sm ml-2 transition-all duration-150",children:We.map(ie=>{const Pe=me[ie]||"N/A";return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",style:{fontSize:"16px"},children:[ie.replace(/_/g," "),":"]}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 border border-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-150",style:{fontSize:"16px"},onClick:()=>{navigator.clipboard.writeText(Pe),V(ie)},children:j===ie?" Copied!":`${Pe} `})]},ie)})})})()]})}),o.jsxs("div",{className:"w-full flex items-start gap-2",style:{marginBottom:0,paddingBottom:0},children:[o.jsxs("div",{className:"flex flex-col items-center justify-between h-full",children:[o.jsx("button",{className:"px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-sm mb-1 dark:bg-black dark:text-white",onClick:()=>y(me=>Math.min(30,me+2)),children:"A+"}),o.jsx("button",{className:"px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-sm mt-1 dark:bg-black dark:text-white",onClick:()=>y(me=>Math.max(10,me-2)),children:"A"})]}),o.jsx("textarea",{className:"border border-gray-300 rounded p-2 resize-y w-full min-h-[48px] max-h-[200px] transition-all duration-200 dark:bg-black dark:text-white",style:{fontSize:`${p}px`,marginBottom:0,paddingBottom:0},placeholder:Ue===null?"Select a row to add remarks":"Write your remarks here...",value:(()=>{if(Ue===null)return"";let We=(ht[Ue]||{}).Pair;return typeof We=="string"&&(We=We.replace(/<[^>]+>/g,"")),h[We]||""})(),onChange:me=>{if(Ue===null)return;let Ge=(ht[Ue]||{}).Pair;typeof Ge=="string"&&(Ge=Ge.replace(/<[^>]+>/g,"")),g(ie=>({...ie,[Ge]:me.target.value}))},disabled:Ue===null})]}),o.jsx("div",{className:"flex flex-wrap items-center gap-4",style:{fontSize:`${12+(k-3)*2}px`},children:o.jsx("div",{style:{minHeight:"40px"}})}),(()=>{let me=[];switch(l){case"Closed_Count_Stats":me=["loss","profit","pj"];break;case"Buy_Sell_Stats":me=["buy","sell"];break;case"Journey_Stats_Running":me=["pj","cj","bc"];break;case"Client_Stats":me=n.map(We=>We.MachineId);break;default:me=[]}return me.length>0?o.jsx("div",{className:"flex gap-2 mb-2",children:me.map(We=>o.jsx("button",{onClick:()=>L(We,l),className:`px-3 py-1 text-sm rounded transition-all duration-150 ease-in-out ${r===We?"bg-yellow-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:We.toUpperCase()},We))}):null})(),o.jsxs("div",{className:"relative overflow-auto max-h-[600px] border border-gray-300 rounded-lg bg-[#f5ecd7] dark:bg-[#181a20]",children:[D&&o.jsxs("div",{className:"absolute z-40 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow-xl p-4 w-64 mx-4 my-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Column order"}),o.jsx("button",{onClick:()=>F(!1),className:"text-sm px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Close"})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-2",children:"Drag to rearrange. Applies immediately."}),o.jsx("div",{className:"space-y-2 max-h-64 overflow-auto",children:(O.length?O:Object.keys(Kt[0]||{})).map(me=>o.jsxs("div",{draggable:!0,onDragStart:()=>At(me),onDragOver:We=>xn(We,me),className:`flex items-center gap-2 px-2 py-1 border rounded cursor-move text-sm ${Z===me?"bg-yellow-100 dark:bg-yellow-900":"bg-gray-50 dark:bg-gray-800"}`,children:[o.jsx("span",{className:"opacity-70",children:""}),o.jsx("span",{className:"text-gray-800 dark:text-gray-100 truncate",children:me.replace(/_/g," ")})]},me))}),o.jsxs("div",{className:"flex items-center justify-between mt-3",children:[o.jsx("button",{className:"text-xs px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600",onClick:()=>F(!1),children:"Done"}),o.jsx("button",{className:"text-xs px-3 py-1 rounded bg-red-200 hover:bg-red-300 dark:bg-red-700 dark:hover:bg-red-600 text-red-900 dark:text-white",onClick:Bt,children:"Reset"})]})]}),o.jsxs("table",{className:"w-full border-collapse",style:{fontSize:`${12+(k-3)*2}px`},children:[o.jsx("thead",{className:"sticky top-0 z-30 bg-teal-700 text-white",style:{fontSize:"inherit"},children:o.jsx("tr",{children:(O.length?O:[...Object.keys(Kt[0]||{}),"Live"]).map((me,We)=>{const Ge=me==="",ie=me==="Live";return o.jsx("th",{onClick:!Ge&&!ie?()=>Hn(me):void 0,className:`relative px-4 py-2 text-left whitespace-nowrap ${Ge||ie?"cursor-default":"cursor-pointer"} ${We===0&&"min-w-[50px] max-w-[50px] sticky left-0 bg-teal-700 text-white z-[5]"} ${We===1&&"min-w-[60px] max-w-[60px] sticky left-[50px] bg-teal-700 text-white z-[5]"} ${We===2&&"min-w-[30px] max-w-[30px] sticky left-[110px] bg-teal-700 text-white z-[5] text-center"} ${We===3&&"min-w-[170px] max-w-[170px] sticky left-[140px] bg-teal-700 text-white z-[5]"}`,style:{fontSize:"inherit"},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:ie?"Live":me.replace(/_/g," ")}),!Ge&&o.jsx("span",{className:"ml-1",children:le.key===me?le.direction==="asc"?o.jsx("span",{className:"text-yellow-300",children:""}):o.jsx("span",{className:"text-yellow-300",children:""}):o.jsx("span",{className:"opacity-60",children:""})}),!Ge&&!ie&&o.jsx("span",{className:"ml-1 cursor-pointer filter-icon","data-index":We,onClick:Pe=>{Pe.stopPropagation(),lt(We,Pe)},children:""})]})},me)})})}),o.jsx("tbody",{children:ht.map((me,We)=>{var bt;const Ge=He(me),ie=Ge&&(Ge.exist_in_exchange===!0||Ge.exist_in_exchange==="true"||Ge.exist_in_exchange===1),Pe=ie?O2(Ge.pair||Ge.symbol):"",z=Pe?te[Pe]:null,pe=sn(me.Unique_ID)||`row-${We}`,Fe=Ce===pe;return o.jsxs(Kr.Fragment,{children:[o.jsx("tr",{className:`cursor-pointer ${Ue===We?"bg-amber-200 dark:bg-amber-400 text-black":"hover:bg-green-200 dark:hover:bg-[#3d4451] dark:hover:text-white"}`,style:{fontSize:`${12+(k-3)*2}px`},onClick:()=>Ze(dt=>dt===We?null:We),children:(O.length?O:[...Object.keys(me),"Live"]).map((dt,Zt)=>{if(dt==="Live")return o.jsx("td",{className:"px-2 py-1 whitespace-nowrap align-middle text-center",onClick:ct=>ct.stopPropagation(),children:o.jsx("button",{type:"button",onClick:()=>{const ct=He(me),ft=`liveTradeViewState_${Date.now()}`;try{localStorage.setItem(ft,JSON.stringify({formattedRow:me,rawTrade:ct}))}catch{}const Xt=gm(`stateKey=${encodeURIComponent(ft)}`);window.open(Xt,"_blank","noopener,noreferrer")},className:"px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-semibold transition-colors",title:"Open live trade view in new tab",children:"Live"})},Zt);const Vt=me[dt],kt=typeof Vt=="string"?Vt:Vt!=null?String(Vt):"";return dt==="Pair"?o.jsx("td",{className:`
                        px-2 py-1 whitespace-nowrap align-top text-sm select-text
                        ${Ue===We?"text-amber-900":"text-sky-500 dark:text-yellow-300"}
                        ${Zt===0&&"min-w-[50px] max-w-[50px] sticky left-0 bg-[#046e7a] text-white z-[5] text-xs"}
                        ${Zt===1&&"min-w-[60px] max-w-[60px] sticky left-[50px] bg-[#046e7a] text-white z-[5] text-[10px] font-light"}
                        ${Zt===2&&"min-w-[30px] max-w-[30px] sticky left-[110px] bg-[#046e7a] text-white z-[5] text-center"}
                        ${Zt===3&&"min-w-[170px] max-w-[170px] sticky left-[140px] bg-[#046e7a] text-white z-[5] text-[12px] leading-snug"}
                      `,style:{fontSize:"inherit"},dangerouslySetInnerHTML:{__html:Ue===We?kt.replace(/color:(#[A-Fa-f0-9]{6}|[a-zA-Z]+)/g,"color:#b45309"):kt.replace(/color:(#[A-Fa-f0-9]{6}|[a-zA-Z]+)/g,"color:#0ea5e9")}},Zt):dt===""?o.jsx("td",{className:`
                        px-1 py-1 whitespace-nowrap align-top text-sm
                        ${Zt===2&&"min-w-[30px] max-w-[30px] sticky left-[110px] bg-[#046e7a] text-white z-[5] text-center"}
                      `,style:{fontSize:"inherit"},children:o.jsx("button",{onClick:ct=>{ct.stopPropagation();const ft=me.Unique_ID;ft&&ft!=="N/A"&&navigator.clipboard.writeText(ft).then(()=>{const Xt=ct.target,pn=Xt.textContent;Xt.textContent="",Xt.className="text-green-400 text-xs px-1 py-0.5 rounded hover:bg-gray-600 transition-all",setTimeout(()=>{Xt.textContent=pn,Xt.className="text-gray-300 hover:text-white text-xs px-1 py-0.5 rounded hover:bg-gray-600 transition-all cursor-pointer"},1e3)}).catch(()=>{const Xt=document.createElement("textarea");Xt.value=ft,document.body.appendChild(Xt),Xt.select(),document.execCommand("copy"),document.body.removeChild(Xt);const pn=ct.target,Yn=pn.textContent;pn.textContent="",pn.className="text-green-400 text-xs px-1 py-0.5 rounded hover:bg-gray-600 transition-all",setTimeout(()=>{pn.textContent=Yn,pn.className="text-gray-300 hover:text-white text-xs px-1 py-0.5 rounded hover:bg-gray-600 transition-all cursor-pointer"},1e3)})},className:"text-gray-300 hover:text-white text-xs px-1 py-0.5 rounded hover:bg-gray-600 transition-all cursor-pointer",title:"Click to copy Unique ID",children:""})},Zt):Zt===0?o.jsx("td",{className:`
                          px-2 py-1 whitespace-nowrap align-top text-sm select-text
                          min-w-[50px] max-w-[50px] sticky left-0 bg-[#046e7a] text-white z-[5] text-xs
                        `,style:{fontSize:"inherit"},onClick:ie?ct=>{ct.stopPropagation(),at(ft=>ft===pe?null:pe)}:void 0,children:ie?o.jsxs("span",{className:"inline-flex items-center gap-1 cursor-pointer",title:"Toggle exchange data",children:[Fe?o.jsx(tF,{size:14}):o.jsx(rF,{size:14}),kt]}):kt},Zt):o.jsx("td",{className:`
                          px-2 py-1 whitespace-nowrap align-top text-sm select-text
                          ${Zt===1&&"min-w-[60px] max-w-[60px] sticky left-[50px] bg-[#046e7a] text-white z-[5] text-[10px] font-light"}
                          ${Zt===2&&"min-w-[30px] max-w-[30px] sticky left-[110px] bg-[#046e7a] text-white z-[5] text-center"}
                          ${Zt===3&&"min-w-[170px] max-w-[170px] sticky left-[140px] bg-[#046e7a] text-white z-[5] text-[12px] leading-snug"}
                          ${["Candle_Time","Fetcher_Trade_Time","Operator_Trade_Time","Operator_Close_Time"].includes(dt)?"text-[11px]":""}
                          ${["Type","Action","Interval","CJ","PJ"].includes(dt)?"min-w-[60px] max-w-[60px] text-center":""}
                          ${dt==="Unique_ID"?"text-black":""}
                        `,style:{fontSize:dt==="Unique_ID"?`${8+(k-2)*2}px`:"inherit"},children:dt==="Unique_ID"&&typeof kt=="string"&&kt.match(/\d{4}-\d{2}-\d{2}/)?(()=>{const ct=kt.match(/\d{4}-\d{2}-\d{2}/);if(!ct)return kt;const ft=kt.indexOf(ct[0]),Xt=kt.slice(0,ft),pn=kt.slice(ft).replace("T"," ");return o.jsxs("div",{className:"cursor-pointer font-bold text-yellow-400 hover:underline hover:text-yellow-300",onClick:Yn=>{Yn.stopPropagation(),window.open(gm(`uid=${encodeURIComponent(kt)}`),"_blank")},title:"Click to view live trade details",children:[o.jsx("div",{className:"leading-tight",children:Xt}),o.jsx("div",{className:"opacity-80 -mt-[2px] leading-tight",children:pn})]})})():dt==="Unique_ID"&&typeof kt=="string"&&kt!=="N/A"?o.jsx("div",{className:"cursor-pointer font-bold text-yellow-400 hover:underline hover:text-yellow-300",onClick:ct=>{ct.stopPropagation(),window.open(gm(`uid=${encodeURIComponent(kt)}`),"_blank")},title:"Click to view live trade details",children:kt}):dt==="PL"?kt!=="N/A"?o.jsx("span",{className:Ue===We?parseFloat(kt)>=0?"text-green-800":"text-black":parseFloat(kt)>=0?"text-green-400":"text-red-400",children:kt}):kt:dt==="PL_After_Comm"&&kt!=="N/A"?`$${kt}`:kt},Zt)})},We),Fe&&ie&&o.jsx("tr",{className:"bg-gray-100 dark:bg-gray-800",children:o.jsx("td",{colSpan:O.length||Object.keys(me).length+1,className:"p-3 align-top",children:o.jsxs("div",{className:"text-xs",children:[o.jsxs("div",{className:"font-semibold text-teal-700 dark:text-teal-400 mb-1",children:["Exchange position: ",Pe]}),z!=null&&z.ok&&((bt=z==null?void 0:z.positions)!=null&&bt.length)?o.jsxs("table",{className:"w-full border border-gray-300 dark:border-gray-600 rounded overflow-hidden",children:[o.jsx("thead",{children:o.jsx("tr",{className:"bg-teal-100 dark:bg-teal-900/40",children:z.positions[0]&&Object.keys(z.positions[0]).map(dt=>o.jsx("th",{className:"px-2 py-1 text-left border-b border-gray-300 dark:border-gray-600 font-medium",children:dt.replace(/([A-Z])/g," $1").trim()},dt))})}),o.jsx("tbody",{children:z.positions.map((dt,Zt)=>o.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-700 last:border-0",children:Object.keys(dt).map(Vt=>{const kt=dt[Vt],ct=parseFloat(kt),ft=!isNaN(ct)&&typeof kt!="boolean",Xt=kt==null?"":ft?Vt.toLowerCase().includes("price")||Vt.toLowerCase().includes("profit")||Vt.toLowerCase().includes("margin")?ct.toFixed(4):ct.toFixed(2):String(kt),pn=Vt==="unRealizedProfit"&&ft?ct>=0?"text-green-600":"text-red-600":"";return o.jsx("td",{className:`px-2 py-1 ${pn}`,children:Xt},Vt)})},Zt))})]}):(z==null?void 0:z.ok)===!1?o.jsx("span",{className:"text-amber-600",children:(z==null?void 0:z.error)||"Failed to fetch"}):o.jsx("span",{className:"text-gray-500",children:"Loading exchange data"})]})})},`ex-${We}`)]},We)})})]})]})]})},Qu=({icon:t,text:e,isOpen:n,to:r,target:s})=>o.jsxs(nk,{to:r,target:s,className:({isActive:l})=>`flex items-center space-x-4 px-4 py-3 hover:bg-gray-700 rounded-lg cursor-pointer transition-all ${l?"bg-gray-700 text-blue-400":"text-white"}`,children:[o.jsx(t,{size:24}),o.jsx("span",{className:`transition-all ${n?"block":"hidden"}`,children:e.replace(/_/g," ")})]}),R1=({isOpen:t,toggleSidebar:e})=>o.jsxs("div",{className:`fixed h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white transition-all duration-300 ${t?"w-64":"w-20"}`,children:[o.jsxs("div",{className:"flex items-center justify-between p-5",children:[o.jsx("h2",{className:`text-xl font-bold transition-all ${t?"block":"hidden"}`,children:"LAB"}),o.jsx("button",{onClick:e,className:"focus:outline-none",children:t?o.jsx(CF,{size:24}):o.jsx(mF,{size:24})})]}),o.jsx("nav",{className:"mt-10",children:o.jsxs("ul",{className:"space-y-4",children:[o.jsx("li",{children:o.jsx(Qu,{icon:ON,text:"Dashboard",isOpen:t,to:"/"})}),o.jsx("li",{children:o.jsx(Qu,{icon:AN,text:"Trades",isOpen:t,to:"/trades"})}),o.jsx("li",{children:o.jsx(Qu,{icon:NF,text:"Clients",isOpen:t,to:"/clients"})}),o.jsx("li",{children:o.jsx(Qu,{icon:ZP,text:"Reports & Logs",isOpen:t,to:"/reports"})}),o.jsx("li",{children:o.jsx(Qu,{icon:kF,text:"Binance Trade History",isOpen:t,to:"/income-history",target:"_blank"})})]})})]}),D2="tradingview-widget-script";function MF(){if(!document.getElementById(D2)){const t=document.createElement("script");t.id=D2,t.src="https://s3.tradingview.com/tv.js",t.async=!0,document.body.appendChild(t)}}const LF=[{key:"RSI@tv-basicstudies",label:"RSI-9"},{key:"MACD@tv-basicstudies",label:"MACD"},{key:"Volume@tv-basicstudies",label:"Volume"}],R2={"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},M2=t=>{if(!t)return"BTCUSDT";let e=t.replace(/<[^>]+>/g,"").replace(/\s+/g,"").replace(/[^A-Z0-9]/gi,"").replace("PERPETUALCONTRACT","").replace("PERP","").replace("Chart","").toUpperCase();return e.startsWith("BINANCE")&&(e=e.slice(7)),e=e.replace(/\d{6,}$/,""),e},IF=({symbols:t=[],trades:e=[]})=>{const n=(oe,P)=>{try{const B=localStorage.getItem(`chartGridSetting_${oe}`);if(B!==null)return JSON.parse(B)}catch{}return P},[r,s]=x.useState(t),[l,c]=x.useState(e),[d,h]=x.useState(n("source","tradingview")),[g,p]=x.useState(n("interval","15m")),[y,_]=x.useState(n("indicators",["RSI@tv-basicstudies","MACD@tv-basicstudies","Volume@tv-basicstudies"])),[b,k]=x.useState(n("layout",3)),[S,E]=x.useState(0),[O,T]=x.useState(n("pageSize",50)),[D,F]=x.useState(n("chartSize",{width:400,height:400})),[Z,K]=x.useState(14),L=x.useRef();x.useEffect(()=>{const oe=new BroadcastChannel("chart-grid-data");if(oe.onmessage=P=>{P.data.symbols&&(s(P.data.symbols),localStorage.setItem("chartGridSymbols",JSON.stringify(P.data.symbols))),P.data.trades&&(c(P.data.trades),localStorage.setItem("chartGridTrades",JSON.stringify(P.data.trades)))},(!t||t.length===0)&&r.length===0){const P=localStorage.getItem("chartGridSymbols");P&&s(JSON.parse(P))}if((!e||e.length===0)&&l.length===0){const P=localStorage.getItem("chartGridTrades");P&&c(JSON.parse(P))}return()=>oe.close()},[]),x.useEffect(()=>{d==="tradingview"&&MF()},[d]),x.useEffect(()=>{d!=="tradingview"||!window.TradingView||Q().forEach((oe,P)=>{const B=M2(oe.Pair),j=`tv_chart_${P}`,V=document.getElementById(j);V&&(V.innerHTML=""),new window.TradingView.widget({container_id:j,autosize:!0,symbol:`BINANCE:${B}PERP`,interval:R2[g]||"15",timezone:"Etc/UTC",theme:"dark",style:"8",locale:"en",studies:y,overrides:{volumePaneSize:y.includes("Volume@tv-basicstudies")?"medium":"0","paneProperties.topMargin":10,"paneProperties.bottomMargin":15,"paneProperties.rightMargin":20,"scalesProperties.fontSize":11},studies_overrides:{"RSI@tv-basicstudies.length":9},hide_side_toolbar:!1,allow_symbol_change:!1,details:!0,withdateranges:!0,hideideas:!0,toolbar_bg:"#222",height:D.height,width:D.width})})},[d,g,y,b,S,D,l,O]);const Q=()=>l.slice(S*O,(S+1)*O),se=Math.ceil(l.length/O),ce=x.useRef(),[ye,te]=x.useState(!1),[xe,Ce]=x.useState({x:0,y:0,width:400,height:400}),at=oe=>{te(!0),Ce({x:oe.clientX,y:oe.clientY,width:D.width,height:D.height})},le=oe=>{if(!ye)return;const P=oe.clientX-xe.x,B=oe.clientY-xe.y;F({width:Math.max(200,xe.width+P),height:Math.max(200,xe.height+B)})},Ve=()=>te(!1);x.useEffect(()=>(ye?(window.addEventListener("mousemove",le),window.addEventListener("mouseup",Ve)):(window.removeEventListener("mousemove",le),window.removeEventListener("mouseup",Ve)),()=>{window.removeEventListener("mousemove",le),window.removeEventListener("mouseup",Ve)}),[ye]);const[Ue,Ze]=x.useState({}),M=(oe,P,B)=>{P&&(navigator.clipboard.writeText(P.toString()),Ze(j=>({...j,[`${B}_${oe}`]:!0})),setTimeout(()=>Ze(j=>({...j,[`${B}_${oe}`]:!1})),1200))};return x.useEffect(()=>{localStorage.setItem("chartGridSetting_source",JSON.stringify(d))},[d]),x.useEffect(()=>{localStorage.setItem("chartGridSetting_interval",JSON.stringify(g))},[g]),x.useEffect(()=>{localStorage.setItem("chartGridSetting_indicators",JSON.stringify(y))},[y]),x.useEffect(()=>{localStorage.setItem("chartGridSetting_layout",JSON.stringify(b))},[b]),x.useEffect(()=>{localStorage.setItem("chartGridSetting_pageSize",JSON.stringify(O))},[O]),x.useEffect(()=>{localStorage.setItem("chartGridSetting_chartSize",JSON.stringify(D))},[D]),o.jsxs("div",{className:"w-full h-full min-h-screen bg-black",children:[o.jsxs("div",{className:"w-full text-center text-white py-2 text-sm font-semibold",children:["Total Trades: ",l.length]}),o.jsxs("div",{ref:L,className:"sticky top-0 z-40 bg-[#181818] shadow p-4 flex flex-wrap gap-4 items-center justify-between",style:{borderBottom:"1px solid #222"},children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center text-white",children:[o.jsxs("label",{children:["Source:",o.jsxs("select",{value:d,onChange:oe=>h(oe.target.value),className:"ml-2 border rounded px-2 py-1 bg-[#222] text-white",children:[o.jsx("option",{value:"tradingview",children:"TradingView"}),o.jsx("option",{value:"binance",children:"Binance"})]})]}),o.jsxs("label",{children:["Interval:",o.jsx("select",{value:g,onChange:oe=>p(oe.target.value),className:"ml-2 border rounded px-2 py-1 bg-[#222] text-white",children:Object.keys(R2).map(oe=>o.jsx("option",{value:oe,children:oe},oe))})]}),o.jsx("label",{children:"Indicators:"}),LF.map(oe=>o.jsxs("label",{className:"ml-2 flex items-center gap-1",children:[o.jsx("input",{type:"checkbox",checked:y.includes(oe.key),onChange:P=>{_(B=>P.target.checked?[...B,oe.key]:B.filter(j=>j!==oe.key))}}),o.jsx("span",{className:"text-white",children:oe.label})]},oe.key)),o.jsxs("label",{children:["Layout:",o.jsx("select",{value:b,onChange:oe=>k(Number(oe.target.value)),className:"ml-2 border rounded px-2 py-1 bg-[#222] text-white",children:[1,2,3,4,5,6].map(oe=>o.jsxs("option",{value:oe,children:[oe," per row"]},oe))})]}),o.jsxs("label",{children:["Page Size:",o.jsx("select",{value:O,onChange:oe=>{T(Number(oe.target.value)),E(0)},className:"ml-2 border rounded px-2 py-1 bg-[#222] text-white",children:[10,20,50,100,200].map(oe=>o.jsx("option",{value:oe,children:oe},oe))})]}),o.jsxs("label",{children:["Font Size:",o.jsx("select",{value:Z,onChange:oe=>K(Number(oe.target.value)),className:"ml-2 border rounded px-2 py-1 bg-[#222] text-white",children:[12,14,16,18,20].map(oe=>o.jsxs("option",{value:oe,children:[oe,"px"]},oe))})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-white",children:[o.jsx("button",{disabled:S===0,onClick:()=>E(oe=>Math.max(0,oe-1)),className:"px-2 py-1 bg-[#222] rounded text-white",children:"Prev"}),o.jsxs("span",{children:["Page ",S+1," / ",se]}),o.jsx("button",{disabled:S>=se-1,onClick:()=>E(oe=>Math.min(se-1,oe+1)),className:"px-2 py-1 bg-[#222] rounded text-white",children:"Next"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-white",children:[o.jsx("span",{children:"Chart Size:"}),o.jsx("div",{ref:ce,onMouseDown:at,style:{width:24,height:24,background:ye?"#333":"#222",cursor:"nwse-resize",borderRadius:4,display:"inline-block",border:"1px solid #444",color:"#fff"},title:"Drag to resize charts",children:"45"}),o.jsxs("span",{children:[D.width,"x",D.height]})]})]}),o.jsx("div",{className:"grid gap-6 p-6",style:{gridTemplateColumns:`repeat(${b}, minmax(0, 1fr))`,background:"#111"},children:Q().map((oe,P)=>{const B=M2(oe.Pair);return o.jsxs("div",{className:"bg-[#181818] rounded-lg p-2 flex flex-col items-center shadow relative",style:{minHeight:D.height,minWidth:D.width},children:[o.jsxs("div",{className:"font-bold mb-1 text-white",children:[B," ",d==="tradingview"?"4c8":"7e1"," CHART"]}),d==="tradingview"?o.jsx("div",{id:`tv_chart_${P}`,style:{width:"100%",height:D.height}}):o.jsx("iframe",{title:B,src:`https://www.binance.com/en/futures/${B}`,style:{width:"100%",height:D.height,border:0},sandbox:"allow-scripts allow-same-origin allow-popups"}),o.jsxs("div",{className:"mt-2 text-white w-full flex flex-col gap-1",style:{fontSize:Z},children:[o.jsxs("div",{children:["PL: ",o.jsx("b",{children:oe.PL??"N/A"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"cursor-pointer hover:underline px-1",onClick:()=>M("Buy_Price",oe.Buy_Price,P),title:"Click to copy",children:["Buy: ",o.jsx("b",{children:oe.Buy_Price??"N/A"}),Ue[`${P}_Buy_Price`]&&o.jsx("span",{className:"ml-1 text-green-400",children:"Copied!"})]}),o.jsx("span",{className:"mx-1",children:"|"}),o.jsxs("span",{className:"cursor-pointer hover:underline px-1",onClick:()=>M("Sell_Price",oe.Sell_Price,P),title:"Click to copy",children:["Sell: ",o.jsx("b",{children:oe.Sell_Price??"N/A"}),Ue[`${P}_Sell_Price`]&&o.jsx("span",{className:"ml-1 text-green-400",children:"Copied!"})]})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"cursor-pointer hover:underline px-1",onClick:()=>M("Stop_Price",oe.Stop_Price,P),title:"Click to copy",children:["Stop: ",o.jsx("b",{children:oe.Stop_Price??"N/A"}),Ue[`${P}_Stop_Price`]&&o.jsx("span",{className:"ml-1 text-green-400",children:"Copied!"})]}),o.jsx("span",{className:"mx-1",children:"|"}),o.jsxs("span",{className:"cursor-pointer hover:underline px-1",onClick:()=>M("Save_Price",oe.Save_Price,P),title:"Click to copy",children:["Save: ",o.jsx("b",{children:oe.Save_Price??"N/A"}),Ue[`${P}_Save_Price`]&&o.jsx("span",{className:"ml-1 text-green-400",children:"Copied!"})]})]})]})]},P)})})]})};function es(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function Do(t,e){return t.width===e.width&&t.height===e.height}var PF=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,r={next:e};return this._observers.push(r),{unsubscribe:function(){n._observers=n._observers.filter(function(s){return s!==r})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function FF(t){return new PF(t)}var zF=function(){function t(e,n,r){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=es({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(l){return l},this._allowResizeObserver=(s=r==null?void 0:r.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return es({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=es(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;Do(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var r=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(r,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,r=es(this._transformBitmapSize(e,this._canvasElementClientSize)),s=Do(this.bitmapSize,r)?null:r;n===null&&s===null||n!==null&&s!==null&&Do(n,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(n,s))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var r=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(r,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}HF().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=L2(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=FF(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var r=L2(this._canvasElement);if(r!==null){var s=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:r.devicePixelRatio,l=this._canvasElement.getClientRects(),c=l[0]!==void 0?UF(l[0],s):es({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(c)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var r=n.find(function(c){return c.target===e._canvasElement});if(!(!r||!r.devicePixelContentBoxSize||!r.devicePixelContentBoxSize[0])){var s=r.devicePixelContentBoxSize[0],l=es({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function BF(t,e){return new zF(t,e.transform,e.options)}function L2(t){return t.ownerDocument.defaultView}function HF(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(r){return"devicePixelContentBoxSize"in r})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function UF(t,e){return es({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var $F=function(){function t(e,n,r){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,r.width===0||r.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=r,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Po(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var r=t.bitmapSize;if(r.width===0||r.height===0)return null;var s=t.canvasElement.getContext("2d",e);return s===null?null:new $F(s,n,r)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const WF={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},VF={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},YF={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},GF={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},qF={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},JF={color:"#26a69a",base:0},MN={color:"#2196f3"},LN={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var I2,P2;function Fo(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function IN(t,e,n,r){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(n,e+s),t.lineTo(r,e+s),t.stroke()}function so(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function ui(t){if(t===void 0)throw new Error("Value is undefined");return t}function Jt(t){if(t===null)throw new Error("Value is null");return t}function Mc(t){return Jt(ui(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(I2||(I2={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(P2||(P2={}));const F2={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Gi(t){return t<0?0:t>255?255:Math.round(t)||0}function PN(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const XF=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,KF=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,ZF=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,QF=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Pd(t){(t=t.toLowerCase())in F2&&(t=F2[t]);{const e=QF.exec(t)||ZF.exec(t);if(e)return[Gi(parseInt(e[1],10)),Gi(parseInt(e[2],10)),Gi(parseInt(e[3],10)),PN(e.length<5?1:parseFloat(e[4]))]}{const e=KF.exec(t);if(e)return[Gi(parseInt(e[1],16)),Gi(parseInt(e[2],16)),Gi(parseInt(e[3],16)),1]}{const e=XF.exec(t);if(e)return[Gi(17*parseInt(e[1],16)),Gi(17*parseInt(e[2],16)),Gi(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function FN(t){return .199*t[0]+.687*t[1]+.114*t[2]}function z0(t){const e=Pd(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:FN(e)>160?"black":"white"}}class ys{constructor(){this.h=[]}l(e,n,r){const s={o:e,_:n,u:r===!0};this.h.push(s)}v(e){const n=this.h.findIndex(r=>e===r.o);n>-1&&this.h.splice(n,1)}p(e){this.h=this.h.filter(n=>n._!==e)}m(e,n,r){const s=[...this.h];this.h=this.h.filter(l=>!l.u),s.forEach(l=>l.o(e,n,r))}M(){return this.h.length>0}S(){this.h=[]}}function xa(t,...e){for(const n of e)for(const r in n)n[r]!==void 0&&Object.prototype.hasOwnProperty.call(n,r)&&!["__proto__","constructor","prototype"].includes(r)&&(typeof n[r]!="object"||t[r]===void 0||Array.isArray(n[r])?t[r]=n[r]:xa(t[r],n[r]));return t}function Ma(t){return typeof t=="number"&&isFinite(t)}function Fd(t){return typeof t=="number"&&t%1==0}function rf(t){return typeof t=="string"}function vh(t){return typeof t=="boolean"}function ll(t){const e=t;if(!e||typeof e!="object")return e;let n,r,s;for(r in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(r)&&(s=e[r],n[r]=s&&typeof s=="object"?ll(s):s);return n}function e7(t){return t!==null}function zd(t){return t===null?void 0:t}const M1="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Yc(t,e,n){return e===void 0&&(e=M1),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class t7{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,n=this.j(),r=this.H();return e.P===n&&e.D===r||(e.P=n,e.D=r,e.R=Yc(n,r),e.L=2.5/12*n,e.B=e.L,e.A=n/12*e.T,e.I=n/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class L1{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,n,r){this.Y.forEach(s=>{s.X(e,n,r)})}}class va{X(e,n,r){e.useBitmapCoordinateSpace(s=>this.K(s,n,r))}}let n7=class extends va{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.G===null||this.G.tt===null)return;const s=this.G.tt,l=this.G,c=Math.max(1,Math.floor(n))%2/2,d=h=>{e.beginPath();for(let g=s.to-1;g>=s.from;--g){const p=l.it[g],y=Math.round(p.nt*n)+c,_=p.st*r,b=h*r+c;e.moveTo(y,_),e.arc(y,_,b,0,2*Math.PI)}e.fill()};l.et>0&&(e.fillStyle=l.rt,d(l.ht+l.et)),e.fillStyle=l.lt,d(l.ht)}};function r7(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const s7={from:0,to:1};class i7{constructor(e,n){this.ut=new L1,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=n,this.ut.Z(this.ct)}bt(e){const n=this.F.wt();n.length!==this.ct.length&&(this.dt=n.map(r7),this.ct=this.dt.map(r=>{const s=new n7;return s.J(r),s}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,n=this.F.wt(),r=this.vt.xt(),s=this.F.St();n.forEach((l,c)=>{var d;const h=this.dt[c],g=l.kt(r);if(e||g===null||!l.yt())return void(h.tt=null);const p=Jt(l.Ct());h.lt=g.Tt,h.ht=g.ht,h.et=g.Pt,h.it[0]._t=g._t,h.it[0].st=l.Dt().Rt(g._t,p.Vt),h.rt=(d=g.Ot)!==null&&d!==void 0?d:this.F.Bt(h.it[0].st/l.Dt().At()),h.it[0].ot=r,h.it[0].nt=s.It(r),h.tt=s7})}}class a7 extends va{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null)return;const l=this.zt.Lt.yt,c=this.zt.Et.yt;if(!l&&!c)return;const d=Math.round(this.zt.nt*r),h=Math.round(this.zt.st*s);e.lineCap="butt",l&&d>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*r),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,Fo(e,this.zt.Lt.Nt),function(g,p,y,_){g.beginPath();const b=g.lineWidth%2?.5:0;g.moveTo(p+b,y),g.lineTo(p+b,_),g.stroke()}(e,d,0,n.height)),c&&h>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*s),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,Fo(e,this.zt.Et.Nt),IN(e,h,0,n.width))}}class l7{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new a7(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),n=Jt(this.jt.Ht()),r=n.$t().W().crosshair,s=this.Ft;if(r.mode===2)return s.Et.yt=!1,void(s.Lt.yt=!1);s.Et.yt=e&&this.jt.Ut(n),s.Lt.yt=e&&this.jt.qt(),s.Et.et=r.horzLine.width,s.Et.Nt=r.horzLine.style,s.Et.V=r.horzLine.color,s.Lt.et=r.vertLine.width,s.Lt.Nt=r.vertLine.style,s.Lt.V=r.vertLine.color,s.nt=this.jt.Yt(),s.st=this.jt.Zt()}}function o7(t,e,n,r,s,l){t.fillRect(e+l,n,r-2*l,l),t.fillRect(e+l,n+s-l,r-2*l,l),t.fillRect(e,n,l,s),t.fillRect(e+r-l,n,l,s)}function B0(t,e,n,r,s,l){t.save(),t.globalCompositeOperation="copy",t.fillStyle=l,t.fillRect(e,n,r,s),t.restore()}function z2(t,e,n,r,s,l){t.beginPath(),t.roundRect?t.roundRect(e,n,r,s,l):(t.lineTo(e+r-l[1],n),l[1]!==0&&t.arcTo(e+r,n,e+r,n+l[1],l[1]),t.lineTo(e+r,n+s-l[2]),l[2]!==0&&t.arcTo(e+r,n+s,e+r-l[2],n+s,l[2]),t.lineTo(e+l[3],n+s),l[3]!==0&&t.arcTo(e,n+s,e,n+s-l[3],l[3]),t.lineTo(e,n+l[0]),l[0]!==0&&t.arcTo(e,n,e+l[0],n,l[0]))}function B2(t,e,n,r,s,l,c=0,d=[0,0,0,0],h=""){if(t.save(),!c||!h||h===l)return z2(t,e,n,r,s,d),t.fillStyle=l,t.fill(),void t.restore();const g=c/2;var p;z2(t,e+g,n+g,r-c,s-c,(p=-g,d.map(y=>y===0?y:y+p))),l!=="transparent"&&(t.fillStyle=l,t.fill()),h!=="transparent"&&(t.lineWidth=c,t.strokeStyle=h,t.closePath(),t.stroke()),t.restore()}function zN(t,e,n,r,s,l,c){t.save(),t.globalCompositeOperation="copy";const d=t.createLinearGradient(0,0,0,s);d.addColorStop(0,l),d.addColorStop(1,c),t.fillStyle=d,t.fillRect(e,n,r,s),t.restore()}class H2{constructor(e,n){this.J(e,n)}J(e,n){this.zt=e,this.Xt=n}At(e,n){return this.zt.yt?e.P+e.L+e.B:0}X(e,n,r,s){if(!this.zt.yt||this.zt.Kt.length===0)return;const l=this.zt.V,c=this.Xt.t,d=e.useBitmapCoordinateSpace(h=>{const g=h.context;g.font=n.R;const p=this.Gt(h,n,r,s),y=p.Jt;return p.Qt?B2(g,y.ti,y.ii,y.ni,y.si,c,y.ei,[y.ht,0,0,y.ht],c):B2(g,y.ri,y.ii,y.ni,y.si,c,y.ei,[0,y.ht,y.ht,0],c),this.zt.hi&&(g.fillStyle=l,g.fillRect(y.ri,y.li,y.ai-y.ri,y.oi)),this.zt._i&&(g.fillStyle=n.O,g.fillRect(p.Qt?y.ui-y.ei:0,y.ii,y.ei,y.ci-y.ii)),p});e.useMediaCoordinateSpace(({context:h})=>{const g=d.di;h.font=n.R,h.textAlign=d.Qt?"right":"left",h.textBaseline="middle",h.fillStyle=l,h.fillText(this.zt.Kt,g.fi,(g.ii+g.ci)/2+g.pi)})}Gt(e,n,r,s){var l;const{context:c,bitmapSize:d,mediaSize:h,horizontalPixelRatio:g,verticalPixelRatio:p}=e,y=this.zt.hi||!this.zt.mi?n.T:0,_=this.zt.bi?n.C:0,b=n.L+this.Xt.wi,k=n.B+this.Xt.gi,S=n.A,E=n.I,O=this.zt.Kt,T=n.P,D=r.Mi(c,O),F=Math.ceil(r.xi(c,O)),Z=T+b+k,K=n.C+S+E+F+y,L=Math.max(1,Math.floor(p));let Q=Math.round(Z*p);Q%2!=L%2&&(Q+=1);const se=_>0?Math.max(1,Math.floor(_*g)):0,ce=Math.round(K*g),ye=Math.round(y*g),te=(l=this.Xt.Si)!==null&&l!==void 0?l:this.Xt.ki,xe=Math.round(te*p)-Math.floor(.5*p),Ce=Math.floor(xe+L/2-Q/2),at=Ce+Q,le=s==="right",Ve=le?h.width-_:_,Ue=le?d.width-se:se;let Ze,M,oe;return le?(Ze=Ue-ce,M=Ue-ye,oe=Ve-y-S-_):(Ze=Ue+ce,M=Ue+ye,oe=Ve+y+S),{Qt:le,Jt:{ii:Ce,li:xe,ci:at,ni:ce,si:Q,ht:2*g,ei:se,ti:Ze,ri:Ue,ai:M,oi:L,ui:d.width},di:{ii:Ce/p,ci:at/p,fi:oe,pi:D}}}}class H0{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||H2)(this.Ci,this.yi),this.Ri=new(e||H2)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,n=!1){return Math.max(this.Pi.At(e,n),this.Ri.At(e,n))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class c7 extends H0{constructor(e,n,r){super(),this.jt=e,this.Li=n,this.Ei=r}zi(e,n,r){if(e.yt=!1,this.jt.W().mode===2)return;const s=this.jt.W().horzLine;if(!s.labelVisible)return;const l=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||l===null)return;const c=z0(s.labelBackgroundColor);r.t=c.t,e.V=c.i;const d=2/12*this.Li.P();r.wi=d,r.gi=d;const h=this.Ei(this.Li);r.ki=h.ki,e.Kt=this.Li.Fi(h._t,l),e.yt=!0}}const u7=/[1-9]/g;class BN{constructor(){this.zt=null}J(e){this.zt=e}X(e,n){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const r=e.useMediaCoordinateSpace(({context:_})=>(_.font=n.R,Math.round(n.Wi.xi(_,Jt(this.zt).Kt,u7))));if(r<=0)return;const s=n.ji,l=r+2*s,c=l/2,d=this.zt.Hi;let h=this.zt.ki,g=Math.floor(h-c)+.5;g<0?(h+=Math.abs(0-g),g=Math.floor(h-c)+.5):g+l>d&&(h-=Math.abs(d-(g+l)),g=Math.floor(h-c)+.5);const p=g+l,y=Math.ceil(0+n.C+n.T+n.L+n.P+n.B);e.useBitmapCoordinateSpace(({context:_,horizontalPixelRatio:b,verticalPixelRatio:k})=>{const S=Jt(this.zt);_.fillStyle=S.t;const E=Math.round(g*b),O=Math.round(0*k),T=Math.round(p*b),D=Math.round(y*k),F=Math.round(2*b);if(_.beginPath(),_.moveTo(E,O),_.lineTo(E,D-F),_.arcTo(E,D,E+F,D,F),_.lineTo(T-F,D),_.arcTo(T,D,T,D-F,F),_.lineTo(T,O),_.fill(),S.hi){const Z=Math.round(S.ki*b),K=O,L=Math.round((K+n.T)*k);_.fillStyle=S.V;const Q=Math.max(1,Math.floor(b)),se=Math.floor(.5*b);_.fillRect(Z-se,K,Q,L-K)}}),e.useMediaCoordinateSpace(({context:_})=>{const b=Jt(this.zt),k=0+n.C+n.T+n.L+n.P/2;_.font=n.R,_.textAlign="left",_.textBaseline="middle",_.fillStyle=b.V;const S=n.Wi.Mi(_,"Apr0");_.translate(g+s,k+S),_.fillText(b.Kt,0,0)})}}class d7{constructor(e,n,r){this.ft=!0,this.Wt=new BN,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=n,this.Ei=r}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const n=this.vt.W().vertLine;if(!n.labelVisible)return;const r=this.$i.St();if(r.Ni())return;e.Hi=r.Hi();const s=this.Ei();if(s===null)return;e.ki=s.ki;const l=r.Ui(this.vt.xt());e.Kt=r.qi(Jt(l)),e.yt=!0;const c=z0(n.labelBackgroundColor);e.t=c.t,e.V=c.i,e.hi=r.W().ticksVisible}}class I1{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var U2;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(U2||(U2={}));class f7 extends I1{constructor(e,n){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=n,this.dn=new i7(e,this),this.fn=((s,l)=>c=>{const d=l(),h=s();if(c===Jt(this.tn).vn())return{_t:h,ki:d};{const g=Jt(c.Ct());return{_t:c.pn(d,g),ki:d}}})(()=>this.nn,()=>this.an);const r=((s,l)=>()=>{const c=this.$i.St().mn(s()),d=l();return c&&Number.isFinite(d)?{ot:c,ki:d}:null})(()=>this.sn,()=>this.Yt());this.bn=new d7(this,e,r),this.wn=new l7(this)}W(){return this.cn}gn(e,n){this._n=e,this.un=n}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,n,r){this.hn||(this.hn=!0),this.en=!0,this.yn(e,n,r)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,n){this.en&&this.tn===e||this.rn.clear();const r=[];return this.tn===e&&r.push(this.Dn(this.rn,n,this.fn)),r}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,n,r){this.Bn(e,n,r)&&this.Vn()}Bn(e,n,r){const s=this.ln,l=this.an,c=this.nn,d=this.sn,h=this.tn,g=this.On(r);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=r;const p=g!==null?g.Ct():null;return g!==null&&p!==null?(this.nn=n,this.an=g.Rt(n,p)):(this.nn=NaN,this.an=NaN),s!==this.ln||l!==this.an||d!==this.sn||c!==this.nn||h!==this.tn}Tn(){const e=this.$i.wt().map(r=>r.In().An()).filter(e7),n=e.length===0?null:Math.max(...e);this.sn=n!==null?n:NaN}Dn(e,n,r){let s=e.get(n);return s===void 0&&(s=new c7(this,n,r),e.set(n,s)),s}}function U0(t){return t==="left"||t==="right"}class Ws{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,n){const r=function(s,l){return s===void 0?l:{Fn:Math.max(s.Fn,l.Fn),Wn:s.Wn||l.Wn}}(this.zn.get(e),n);this.zn.set(e,r)}jn(){return this.En}Hn(e){const n=this.zn.get(e);return n===void 0?{Fn:this.En}:{Fn:Math.max(this.En,n.Fn),Wn:n.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const n of e.Ln)this.ns(n);this.En=Math.max(this.En,e.En),e.zn.forEach((n,r)=>{this.Nn(r,n)})}static ss(){return new Ws(2)}static es(){return new Ws(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(n=>n.qn===5);e!==-1&&this.Ln.splice(e,1)}}const $2=".";function ol(t,e){if(!Ma(t))return"n/a";if(!Fd(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class $0{constructor(e,n){if(n||(n=1),Ma(e)&&Fd(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=n,this.hs()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const n=this.Li/this.rs;let r=Math.floor(e),s="";const l=this._s!==void 0?this._s:NaN;if(n>1){let c=+(Math.round(e*n)-r*n).toFixed(this._s);c>=n&&(c-=n,r+=1),s=$2+ol(+c.toFixed(this._s)*this.rs,l)}else r=Math.round(r*n)/n,l>0&&(s=$2+ol(0,l));return r.toFixed(0)+s}}class HN extends $0{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class h7{constructor(e){this.us=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.cs(e):e<999995?n+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.cs(e/1e9)+"B")}cs(e){let n;const r=Math.pow(10,this.us);return n=(e=Math.round(e*r)/r)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(s,l)=>l)}}function UN(t,e,n,r,s,l,c){if(e.length===0||r.from>=e.length||r.to<=0)return;const{context:d,horizontalPixelRatio:h,verticalPixelRatio:g}=t,p=e[r.from];let y=l(t,p),_=p;if(r.to-r.from<2){const b=s/2;d.beginPath();const k={nt:p.nt-b,st:p.st},S={nt:p.nt+b,st:p.st};d.moveTo(k.nt*h,k.st*g),d.lineTo(S.nt*h,S.st*g),c(t,y,k,S)}else{const b=(S,E)=>{c(t,y,_,E),d.beginPath(),y=S,_=E};let k=_;d.beginPath(),d.moveTo(p.nt*h,p.st*g);for(let S=r.from+1;S<r.to;++S){k=e[S];const E=l(t,k);switch(n){case 0:d.lineTo(k.nt*h,k.st*g);break;case 1:d.lineTo(k.nt*h,e[S-1].st*g),E!==y&&(b(E,k),d.lineTo(k.nt*h,e[S-1].st*g)),d.lineTo(k.nt*h,k.st*g);break;case 2:{const[O,T]=g7(e,S-1,S);d.bezierCurveTo(O.nt*h,O.st*g,T.nt*h,T.st*g,k.nt*h,k.st*g);break}}n!==1&&E!==y&&(b(E,k),d.moveTo(k.nt*h,k.st*g))}(_!==k||_===k&&n===1)&&c(t,y,_,k)}}const W2=6;function pm(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function V2(t,e){return{nt:t.nt/e,st:t.st/e}}function g7(t,e,n){const r=Math.max(0,e-1),s=Math.min(t.length-1,n+1);var l,c;return[(l=t[e],c=V2(pm(t[n],t[r]),W2),{nt:l.nt+c.nt,st:l.st+c.st}),pm(t[n],V2(pm(t[s],t[e]),W2))]}function p7(t,e,n,r,s){const{context:l,horizontalPixelRatio:c,verticalPixelRatio:d}=e;l.lineTo(s.nt*c,t*d),l.lineTo(r.nt*c,t*d),l.closePath(),l.fillStyle=n,l.fill()}class $N extends va{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var n;if(this.G===null)return;const{it:r,tt:s,ds:l,et:c,Nt:d,fs:h}=this.G,g=(n=this.G.vs)!==null&&n!==void 0?n:this.G.ps?0:e.mediaSize.height;if(s===null)return;const p=e.context;p.lineCap="butt",p.lineJoin="round",p.lineWidth=c,Fo(p,d),p.lineWidth=1,UN(e,r,h,s,l,this.bs.bind(this),p7.bind(null,g))}}function xx(t,e,n){return Math.min(Math.max(t,e),n)}function bh(t,e,n){return e-t<=n}function WN(t){const e=Math.ceil(t);return e%2==0?e-1:e}class P1{ws(e,n){const r=this.gs,{Ms:s,xs:l,Ss:c,ks:d,ys:h,vs:g}=n;if(this.Cs===void 0||r===void 0||r.Ms!==s||r.xs!==l||r.Ss!==c||r.ks!==d||r.vs!==g||r.ys!==h){const p=e.context.createLinearGradient(0,0,0,h);if(p.addColorStop(0,s),g!=null){const y=xx(g*e.verticalPixelRatio/h,0,1);p.addColorStop(y,l),p.addColorStop(y,c)}p.addColorStop(1,d),this.Cs=p,this.gs=n}return this.Cs}}class m7 extends $N{constructor(){super(...arguments),this.Ts=new P1}bs(e,n){return this.Ts.ws(e,{Ms:n.Ps,xs:"",Ss:"",ks:n.Rs,ys:e.bitmapSize.height})}}function x7(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class VN extends va{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:n,tt:r,ds:s,fs:l,et:c,Nt:d,Ds:h}=this.G;if(r===null)return;const g=e.context;g.lineCap="butt",g.lineWidth=c*e.verticalPixelRatio,Fo(g,d),g.lineJoin="round";const p=this.Vs.bind(this);l!==void 0&&UN(e,n,l,r,s,p,x7),h&&function(y,_,b,k,S){const{horizontalPixelRatio:E,verticalPixelRatio:O,context:T}=y;let D=null;const F=Math.max(1,Math.floor(E))%2/2,Z=b*O+F;for(let K=k.to-1;K>=k.from;--K){const L=_[K];if(L){const Q=S(y,L);Q!==D&&(T.beginPath(),D!==null&&T.fill(),T.fillStyle=Q,D=Q);const se=Math.round(L.nt*E)+F,ce=L.st*O;T.moveTo(se,ce),T.arc(se,ce,Z,0,2*Math.PI)}}T.fill()}(e,n,h,r,p)}}class YN extends VN{Vs(e,n){return n.lt}}function GN(t,e,n,r,s=0,l=e.length){let c=l-s;for(;0<c;){const d=c>>1,h=s+d;r(e[h],n)===t?(s=h+1,c-=d+1):c=d}return s}const sf=GN.bind(null,!0),qN=GN.bind(null,!1);function y7(t,e){return t.ot<e}function v7(t,e){return e<t.ot}function JN(t,e,n){const r=e.Os(),s=e.ui(),l=sf(t,r,y7),c=qN(t,s,v7);if(!n)return{from:l,to:c};let d=l,h=c;return l>0&&l<t.length&&t[l].ot>=r&&(d=l-1),c>0&&c<t.length&&t[c-1].ot<=s&&(h=c+1),{from:d,to:h}}class F1{constructor(e,n,r){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=n,this.Fs=r}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),n=this.Ns.St();if(this.qs(),n.Ni()||e.Ni())return;const r=n.Xs();if(r===null||this.Es.In().Ks()===0)return;const s=this.Es.Ct();s!==null&&(this.Ls=JN(this.zs,r,this.Fs),this.Gs(e,n,s.Vt),this.Js())}}class W0 extends F1{constructor(e,n){super(e,n,!0)}Gs(e,n,r){n.Qs(this.zs,zd(this.Ls)),e.te(this.zs,r,zd(this.Ls))}ie(e,n){return{ot:e,_t:n,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>{const r=n.Vt[3];return this.se(n.ee,r,e)})}}class b7 extends W0{constructor(e,n){super(e,n),this.js=new L1,this.re=new m7,this.he=new YN,this.js.Z([this.re,this.he])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class _7 extends va{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(n),this.ae>=2&&Math.max(1,Math.floor(n))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(n)):this.ae;let s=null;const l=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*n);for(let c=this.zt.tt.from;c<this.zt.tt.to;++c){const d=this.zt.In[c];s!==d.ce&&(e.fillStyle=d.ce,s=d.ce);const h=Math.floor(.5*this.oe),g=Math.round(d.nt*n),p=g-h,y=this.oe,_=p+y-1,b=Math.min(d.de,d.fe),k=Math.max(d.de,d.fe),S=Math.round(b*r)-h,E=Math.round(k*r)+h,O=Math.max(E-S,this.oe);e.fillRect(p,S,y,O);const T=Math.ceil(1.5*this.ae);if(l){if(this.zt.ve){const K=g-T;let L=Math.max(S,Math.round(d.pe*r)-h),Q=L+y-1;Q>S+O-1&&(Q=S+O-1,L=Q-y+1),e.fillRect(K,L,p-K,Q-L+1)}const D=g+T;let F=Math.max(S,Math.round(d.me*r)-h),Z=F+y-1;Z>S+O-1&&(Z=S+O-1,F=Z-y+1),e.fillRect(_+1,F,D-_,Z-F+1)}}}_e(e){const n=Math.floor(e);return Math.max(n,Math.floor(function(r,s){return Math.floor(.3*r*s)}(Jt(this.zt).le,e)))}}class XN extends F1{constructor(e,n){super(e,n,!1)}Gs(e,n,r){n.Qs(this.zs,zd(this.Ls)),e.be(this.zs,r,zd(this.Ls))}we(e,n,r){return{ot:e,ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>this.se(n.ee,n,e))}}class S7 extends XN{constructor(){super(...arguments),this.js=new _7}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class w7 extends $N{constructor(){super(...arguments),this.Ts=new P1}bs(e,n){const r=this.G;return this.Ts.ws(e,{Ms:n.ke,xs:n.ye,Ss:n.Ce,ks:n.Te,ys:e.bitmapSize.height,vs:r.vs})}}class k7 extends VN{constructor(){super(...arguments),this.Pe=new P1}Vs(e,n){const r=this.G;return this.Pe.ws(e,{Ms:n.Re,xs:n.Re,Ss:n.De,ks:n.De,ys:e.bitmapSize.height,vs:r.vs})}}class E7 extends W0{constructor(e,n){super(e,n),this.js=new L1,this.Ve=new w7,this.Oe=new k7,this.js.Z([this.Ve,this.Oe])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const n=this.Es.W(),r=this.Es.Dt().Rt(n.baseValue.price,e.Vt),s=this.Ns.St().le();this.Ve.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineType,vs:r,ps:!1,tt:this.Ls,ds:s}),this.Oe.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineVisible?n.lineType:void 0,Ds:n.pointMarkersVisible?n.pointMarkersRadius||n.lineWidth/2+2:void 0,vs:r,tt:this.Ls,ds:s})}}class N7 extends va{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:n}=e;this.ae=function(l,c){if(l>=2.5&&l<=4)return Math.floor(3*c);const d=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),h=Math.floor(l*d*c),g=Math.floor(l*c),p=Math.min(h,g);return Math.max(Math.floor(c),p)}(this.zt.le,n),this.ae>=2&&Math.floor(n)%2!=this.ae%2&&this.ae--;const r=this.zt.In;this.zt.Be&&this.Ae(e,r,this.zt.tt),this.zt._i&&this.Ie(e,r,this.zt.tt);const s=this.ze(n);(!this.zt._i||this.ae>2*s)&&this.Le(e,r,this.zt.tt)}Ae(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:l,verticalPixelRatio:c}=e;let d="",h=Math.min(Math.floor(l),Math.floor(this.zt.le*l));h=Math.max(Math.floor(l),Math.min(h,this.ae));const g=Math.floor(.5*h);let p=null;for(let y=r.from;y<r.to;y++){const _=n[y];_.Ee!==d&&(s.fillStyle=_.Ee,d=_.Ee);const b=Math.round(Math.min(_.pe,_.me)*c),k=Math.round(Math.max(_.pe,_.me)*c),S=Math.round(_.de*c),E=Math.round(_.fe*c);let O=Math.round(l*_.nt)-g;const T=O+h-1;p!==null&&(O=Math.max(p+1,O),O=Math.min(O,T));const D=T-O+1;s.fillRect(O,S,D,b-S),s.fillRect(O,k+1,D,E-k),p=T}}ze(e){let n=Math.floor(1*e);this.ae<=2*n&&(n=Math.floor(.5*(this.ae-1)));const r=Math.max(Math.floor(e),n);return this.ae<=2*r?Math.max(Math.floor(e),Math.floor(1*e)):r}Ie(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:l,verticalPixelRatio:c}=e;let d="";const h=this.ze(l);let g=null;for(let p=r.from;p<r.to;p++){const y=n[p];y.Ne!==d&&(s.fillStyle=y.Ne,d=y.Ne);let _=Math.round(y.nt*l)-Math.floor(.5*this.ae);const b=_+this.ae-1,k=Math.round(Math.min(y.pe,y.me)*c),S=Math.round(Math.max(y.pe,y.me)*c);if(g!==null&&(_=Math.max(g+1,_),_=Math.min(_,b)),this.zt.le*l>2*h)o7(s,_,k,b-_+1,S-k+1,h);else{const E=b-_+1;s.fillRect(_,k,E,S-k+1)}g=b}}Le(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:l,verticalPixelRatio:c}=e;let d="";const h=this.ze(l);for(let g=r.from;g<r.to;g++){const p=n[g];let y=Math.round(Math.min(p.pe,p.me)*c),_=Math.round(Math.max(p.pe,p.me)*c),b=Math.round(p.nt*l)-Math.floor(.5*this.ae),k=b+this.ae-1;if(p.ce!==d){const S=p.ce;s.fillStyle=S,d=S}this.zt._i&&(b+=h,y+=h,k-=h,_-=h),y>_||s.fillRect(b,y,k-b+1,_-y+1)}}}class T7 extends XN{constructor(){super(...arguments),this.js=new N7}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class C7{constructor(e,n){this.Fe=e,this.Li=n}X(e,n,r){this.Fe.draw(e,this.Li,n,r)}}class mm extends F1{constructor(e,n,r){super(e,n,!1),this.wn=r,this.js=new C7(this.wn.renderer(),s=>{const l=e.Ct();return l===null?null:e.Dt().Rt(s,l.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>Object.assign(Object.assign({ot:n.ee,nt:NaN},e.$s(n.ee)),{He:n.$e}))}Gs(e,n){n.Qs(this.zs,zd(this.Ls))}Js(){this.wn.update({bars:this.zs.map(j7),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function j7(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class A7 extends va{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(n);const s=Math.max(1,Math.floor(r)),l=Math.round(this.zt.Ye*r)-Math.floor(s/2),c=l+s;for(let d=this.zt.tt.from;d<this.zt.tt.to;d++){const h=this.zt.it[d],g=this.Ue[d-this.zt.tt.from],p=Math.round(h.st*r);let y,_;e.fillStyle=h.ce,p<=l?(y=p,_=c):(y=l,_=p-Math.floor(s/2)+s),e.fillRect(g.Os,y,g.ui-g.Os+1,_-y)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const n=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),r=Math.round(this.zt.le*e)-n;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const c=this.zt.it[l],d=Math.round(c.nt*e);let h,g;if(r%2){const p=(r-1)/2;h=d-p,g=d+p}else{const p=r/2;h=d-p,g=d+p-1}this.Ue[l-this.zt.tt.from]={Os:h,ui:g,Ze:d,Xe:c.nt*e,ot:c.ot}}for(let l=this.zt.tt.from+1;l<this.zt.tt.to;l++){const c=this.Ue[l-this.zt.tt.from],d=this.Ue[l-this.zt.tt.from-1];c.ot===d.ot+1&&c.Os-d.ui!==n+1&&(d.Ze>d.Xe?d.ui=c.Os-n-1:c.Os=d.ui+n+1)}let s=Math.ceil(this.zt.le*e);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const c=this.Ue[l-this.zt.tt.from];c.ui<c.Os&&(c.ui=c.Os);const d=c.ui-c.Os+1;s=Math.min(d,s)}if(n>0&&s<4)for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const c=this.Ue[l-this.zt.tt.from];c.ui-c.Os+1>s&&(c.Ze>c.Xe?c.ui-=1:c.Os+=1)}}}class O7 extends W0{constructor(){super(...arguments),this.js=new A7}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,Jt(this.Es.Ct()).Vt)};this.js.J(e)}}class D7 extends W0{constructor(){super(...arguments),this.js=new YN}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W(),n={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(n)}}const R7=/[2-9]/g;class Bd{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,n,r){return this.sr(e,n,r).width}Mi(e,n,r){const s=this.sr(e,n,r);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}sr(e,n,r){const s=r||R7,l=String(n).replace(s,"0");if(this.tr.has(l))return ui(this.tr.get(l)).er;if(this.Ke===this.ir){const d=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(d),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const c=e.measureText(l);return e.restore(),c.width===0&&n.length||(this.tr.set(l,{er:c,rr:this.Ge}),this.Qe[this.Ge]=l,this.Ke++,this.Ge++),c}}class M7{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,n,r){this.hr=e,this.k=n,this.lr=r}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class KN{constructor(e,n,r){this.ur=e,this.ar=new Bd(50),this.cr=n,this.F=r,this.j=-1,this.Wt=new M7(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const n=e.vr(this.cr)?e.pr():this.cr.Dt();if(n===null)return null;const r=e.mr(n);if(r==="overlay")return null;const s=this.F.br();return s.P!==this.j&&(this.j=s.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),s,r),this.Wt}}class L7 extends va{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,n){var r;if(!(!((r=this.zt)===null||r===void 0)&&r.yt))return null;const{st:s,et:l,gr:c}=this.zt;return n>=s-l-7&&n<=s+l+7?{Mr:this.zt,gr:c}:null}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null||this.zt.yt===!1)return;const l=Math.round(this.zt.st*s);l<0||l>n.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*r),Fo(e,this.zt.Nt),IN(e,l,0,n.width))}}class z1{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new L7,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class I7 extends z1{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),n=e.Cr().Cr;if(n!==2&&n!==3)return;const r=this.Es.W();if(!r.baseLineVisible||!this.Es.yt())return;const s=this.Es.Ct();s!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(s.Vt,s.Vt),this.Sr.V=r.baseLineColor,this.Sr.et=r.baseLineWidth,this.Sr.Nt=r.baseLineStyle)}}class P7 extends va{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){const s=this.zt;if(s===null)return;const l=Math.max(1,Math.floor(n)),c=l%2/2,d=Math.round(s.Xe.x*n)+c,h=s.Xe.y*r;e.fillStyle=s.Tr,e.beginPath();const g=Math.max(2,1.5*s.Pr)*n;e.arc(d,h,g,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.Rr,e.beginPath(),e.arc(d,h,s.ht*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=l,e.strokeStyle=s.Dr,e.beginPath(),e.arc(d,h,s.ht*n+l/2,0,2*Math.PI,!1),e.stroke()}}const F7=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Y2(t,e,n,r){return function(s,l){if(s==="transparent")return s;const c=Pd(s),d=c[3];return`rgba(${c[0]}, ${c[1]}, ${c[2]}, ${l*d})`}(t,n+(r-n)*e)}function G2(t,e){const n=t%2600/2600;let r;for(const h of F7)if(n>=h.Vr&&n<=h.Or){r=h;break}so(r!==void 0,"Last price animation internal logic error");const s=(n-r.Vr)/(r.Or-r.Vr);return{Rr:Y2(e,s,r.Ir,r.zr),Dr:Y2(e,s,r.Lr,r.Er),ht:(l=s,c=r.Br,d=r.Ar,c+(d-c)*l)};var l,c,d}class z7{constructor(e){this.Wt=new P7,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),n=this.Wr-e;if(n>0)return void(n<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),n=e.Xs(),r=this.jr.Ct();if(n===null||r===null)return;const s=this.jr.Zr(!0);if(s.Xr||!n.Kr(s.ee))return;const l={x:e.It(s.ee),y:this.jr.Dt().Rt(s._t,r.Vt)},c=s.V,d=this.jr.W().lineWidth,h=G2(this.Gr(),c);this.Wt.J({Tr:c,Pr:d,Rr:h.Rr,Dr:h.Dr,ht:h.ht,Xe:l})}Yr(){const e=this.Wt.$e();if(e!==null){const n=G2(this.Gr(),e.Tr);e.Rr=n.Rr,e.Dr=n.Dr,e.ht=n.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function vd(t,e){return WN(Math.min(Math.max(t,12),30)*e)}function Hd(t,e){switch(t){case"arrowDown":case"arrowUp":return vd(e,1);case"circle":return vd(e,.8);case"square":return vd(e,.7)}}function ZN(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(vd(t,1))}function q2(t){return Math.max(vd(t,.1),3)}function J2(t,e,n){return e?t:n?Math.ceil(t/2):0}function QN(t,e,n,r,s){const l=Hd("square",n),c=(l-1)/2,d=t-c,h=e-c;return r>=d&&r<=d+l&&s>=h&&s<=h+l}function X2(t,e,n,r){const s=(Hd("arrowUp",r)-1)/2*n.Jr,l=(WN(r/2)-1)/2*n.Jr;e.beginPath(),t?(e.moveTo(n.nt-s,n.st),e.lineTo(n.nt,n.st-s),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+l,n.st),e.lineTo(n.nt+l,n.st+s),e.lineTo(n.nt-l,n.st+s),e.lineTo(n.nt-l,n.st)):(e.moveTo(n.nt-s,n.st),e.lineTo(n.nt,n.st+s),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+l,n.st),e.lineTo(n.nt+l,n.st-s),e.lineTo(n.nt-l,n.st-s),e.lineTo(n.nt-l,n.st)),e.fill()}function B7(t,e,n,r,s,l){return QN(e,n,r,s,l)}class H7 extends va{constructor(){super(...arguments),this.zt=null,this.ar=new Bd,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,n){this.j===e&&this.H===n||(this.j=e,this.H=n,this.Qr=Yc(e,n),this.ar.nr())}wr(e,n){if(this.zt===null||this.zt.tt===null)return null;for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const s=this.zt.it[r];if($7(s,e,n))return{Mr:s.th,gr:s.gr}}return null}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r},s,l){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let c=this.zt.tt.from;c<this.zt.tt.to;c++){const d=this.zt.it[c];d.Kt!==void 0&&(d.Kt.Hi=this.ar.xi(e,d.Kt.ih),d.Kt.At=this.j,d.Kt.nt=d.nt-d.Kt.Hi/2),U7(d,e,n,r)}}}}function U7(t,e,n,r){e.fillStyle=t.V,t.Kt!==void 0&&function(s,l,c,d,h,g){s.save(),s.scale(h,g),s.fillText(l,c,d),s.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,n,r),function(s,l,c){if(s.Ks!==0){switch(s.nh){case"arrowDown":return void X2(!1,l,c,s.Ks);case"arrowUp":return void X2(!0,l,c,s.Ks);case"circle":return void function(d,h,g){const p=(Hd("circle",g)-1)/2;d.beginPath(),d.arc(h.nt,h.st,p*h.Jr,0,2*Math.PI,!1),d.fill()}(l,c,s.Ks);case"square":return void function(d,h,g){const p=Hd("square",g),y=(p-1)*h.Jr/2,_=h.nt-y,b=h.st-y;d.fillRect(_,b,p*h.Jr,p*h.Jr)}(l,c,s.Ks)}s.nh}}(t,e,function(s,l,c){const d=Math.max(1,Math.floor(l))%2/2;return{nt:Math.round(s.nt*l)+d,st:s.st*c,Jr:l}}(t,n,r))}function $7(t,e,n){return!(t.Kt===void 0||!function(r,s,l,c,d,h){const g=c/2;return d>=r&&d<=r+l&&h>=s-g&&h<=s+g}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,n))||function(r,s,l){if(r.Ks===0)return!1;switch(r.nh){case"arrowDown":case"arrowUp":return B7(0,r.nt,r.st,r.Ks,s,l);case"circle":return function(c,d,h,g,p){const y=2+Hd("circle",h)/2,_=c-g,b=d-p;return Math.sqrt(_*_+b*b)<=y}(r.nt,r.st,r.Ks,s,l);case"square":return QN(r.nt,r.st,r.Ks,s,l)}}(t,e,n)}function W7(t,e,n,r,s,l,c,d,h){const g=Ma(n)?n:n.Se,p=Ma(n)?n:n.Me,y=Ma(n)?n:n.xe,_=Ma(e.size)?Math.max(e.size,0):1,b=ZN(d.le())*_,k=b/2;switch(t.Ks=b,e.position){case"inBar":return t.st=c.Rt(g,h),void(t.Kt!==void 0&&(t.Kt.st=t.st+k+l+.6*s));case"aboveBar":return t.st=c.Rt(p,h)-k-r.sh,t.Kt!==void 0&&(t.Kt.st=t.st-k-.6*s,r.sh+=1.2*s),void(r.sh+=b+l);case"belowBar":return t.st=c.Rt(y,h)+k+r.eh,t.Kt!==void 0&&(t.Kt.st=t.st+k+l+.6*s,r.eh+=1.2*s),void(r.eh+=b+l)}e.position}class V7{constructor(e,n){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new H7,this.jr=e,this.$i=n,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const n=this.$i.W().layout;return this.Wt._r(n.fontSize,n.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),n=q2(e),r=1.5*ZN(e)+2*n,s=this.fh();this.ah={above:J2(r,s.aboveBar,s.inBar),below:J2(r,s.belowBar,s.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),n=this.$i.St(),r=this.jr.dh();this.rh&&(this.zt.it=r.map(p=>({ot:p.time,nt:0,st:0,Ks:0,nh:p.shape,V:p.color,th:p.th,gr:p.id,Kt:void 0})),this.rh=!1);const s=this.$i.W().layout;this.zt.tt=null;const l=n.Xs();if(l===null)return;const c=this.jr.Ct();if(c===null||this.zt.it.length===0)return;let d=NaN;const h=q2(n.le()),g={sh:h,eh:h};this.zt.tt=JN(this.zt.it,l,!0);for(let p=this.zt.tt.from;p<this.zt.tt.to;p++){const y=r[p];y.time!==d&&(g.sh=h,g.eh=h,d=y.time);const _=this.zt.it[p];_.nt=n.It(y.time),y.text!==void 0&&y.text.length>0&&(_.Kt={ih:y.text,nt:0,st:0,Hi:0,At:0});const b=this.jr.ph(y.time);b!==null&&W7(_,y,b,g,s.fontSize,h,e,n,c.Vt)}this.ft=!1}}class Y7 extends z1{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const n=this.Es.W();if(!n.priceLineVisible||!this.Es.yt())return;const r=this.Es.Zr(n.priceLineSource===0);r.Xr||(e.yt=!0,e.st=r.ki,e.V=this.Es.mh(r.V),e.et=n.priceLineWidth,e.Nt=n.priceLineStyle)}}class G7 extends H0{constructor(e){super(),this.jt=e}zi(e,n,r){e.yt=!1,n.yt=!1;const s=this.jt;if(!s.yt())return;const l=s.W(),c=l.lastValueVisible,d=s.bh()!=="",h=l.seriesLastValueMode===0,g=s.Zr(!1);if(g.Xr)return;c&&(e.Kt=this.wh(g,c,h),e.yt=e.Kt.length!==0),(d||h)&&(n.Kt=this.gh(g,c,d,h),n.yt=n.Kt.length>0);const p=s.mh(g.V),y=z0(p);r.t=y.t,r.ki=g.ki,n.Ot=s.$t().Bt(g.ki/s.Dt().At()),e.Ot=p,e.V=y.i,n.V=y.i}gh(e,n,r,s){let l="";const c=this.jt.bh();return r&&c.length!==0&&(l+=`${c} `),n&&s&&(l+=this.jt.Dt().Mh()?e.xh:e.Sh),l.trim()}wh(e,n,r){return n?r?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function K2(t,e,n,r){const s=Number.isFinite(e),l=Number.isFinite(n);return s&&l?t(e,n):s||l?s?e:n:r}class xi{constructor(e,n){this.kh=e,this.yh=n}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new xi(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new xi(K2(Math.min,this.Ph(),e.Ph(),-1/0),K2(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Ma(e)||this.yh-this.kh===0)return;const n=.5*(this.yh+this.kh);let r=this.yh-n,s=this.kh-n;r*=e,s*=e,this.yh=n+r,this.kh=n+s}Oh(e){Ma(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new xi(e.minValue,e.maxValue)}}class h0{constructor(e,n){this.Ih=e,this.zh=n||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new h0(xi.Ah(e.priceRange),e.margins)}}class q7 extends z1{constructor(e,n){super(e),this.Nh=n}yr(){const e=this.Sr;e.yt=!1;const n=this.Nh.W();if(!this.Es.yt()||!n.lineVisible)return;const r=this.Nh.Fh();r!==null&&(e.yt=!0,e.st=r,e.V=n.color,e.et=n.lineWidth,e.Nt=n.lineStyle,e.gr=this.Nh.W().id)}}class J7 extends H0{constructor(e,n){super(),this.jr=e,this.Nh=n}zi(e,n,r){e.yt=!1,n.yt=!1;const s=this.Nh.W(),l=s.axisLabelVisible,c=s.title!=="",d=this.jr;if(!l||!d.yt())return;const h=this.Nh.Fh();if(h===null)return;c&&(n.Kt=s.title,n.yt=!0),n.Ot=d.$t().Bt(h/d.Dt().At()),e.Kt=this.Wh(s.price),e.yt=!0;const g=z0(s.axisLabelColor||s.color);r.t=g.t;const p=s.axisLabelTextColor||g.i;e.V=p,n.V=p,r.ki=h}Wh(e){const n=this.jr.Ct();return n===null?"":this.jr.Dt().Fi(e,n.Vt)}}class X7{constructor(e,n){this.jr=e,this.cn=n,this.jh=new q7(e,this),this.ur=new J7(e,this),this.Hh=new KN(this.ur,e,e.$t())}$h(e){xa(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,n=e.Dt();if(e.$t().St().Ni()||n.Ni())return null;const r=e.Ct();return r===null?null:n.Rt(this.cn.price,r.Vt)}}class K7 extends I1{constructor(e){super(),this.$i=e}$t(){return this.$i}}const Z7={Bar:(t,e,n,r)=>{var s;const l=e.upColor,c=e.downColor,d=Jt(t(n,r)),h=Mc(d.Vt[0])<=Mc(d.Vt[3]);return{ce:(s=d.V)!==null&&s!==void 0?s:h?l:c}},Candlestick:(t,e,n,r)=>{var s,l,c;const d=e.upColor,h=e.downColor,g=e.borderUpColor,p=e.borderDownColor,y=e.wickUpColor,_=e.wickDownColor,b=Jt(t(n,r)),k=Mc(b.Vt[0])<=Mc(b.Vt[3]);return{ce:(s=b.V)!==null&&s!==void 0?s:k?d:h,Ne:(l=b.Ot)!==null&&l!==void 0?l:k?g:p,Ee:(c=b.Xh)!==null&&c!==void 0?c:k?y:_}},Custom:(t,e,n,r)=>{var s;return{ce:(s=Jt(t(n,r)).V)!==null&&s!==void 0?s:e.color}},Area:(t,e,n,r)=>{var s,l,c,d;const h=Jt(t(n,r));return{ce:(s=h.lt)!==null&&s!==void 0?s:e.lineColor,lt:(l=h.lt)!==null&&l!==void 0?l:e.lineColor,Ps:(c=h.Ps)!==null&&c!==void 0?c:e.topColor,Rs:(d=h.Rs)!==null&&d!==void 0?d:e.bottomColor}},Baseline:(t,e,n,r)=>{var s,l,c,d,h,g;const p=Jt(t(n,r));return{ce:p.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(s=p.Re)!==null&&s!==void 0?s:e.topLineColor,De:(l=p.De)!==null&&l!==void 0?l:e.bottomLineColor,ke:(c=p.ke)!==null&&c!==void 0?c:e.topFillColor1,ye:(d=p.ye)!==null&&d!==void 0?d:e.topFillColor2,Ce:(h=p.Ce)!==null&&h!==void 0?h:e.bottomFillColor1,Te:(g=p.Te)!==null&&g!==void 0?g:e.bottomFillColor2}},Line:(t,e,n,r)=>{var s,l;const c=Jt(t(n,r));return{ce:(s=c.V)!==null&&s!==void 0?s:e.color,lt:(l=c.V)!==null&&l!==void 0?l:e.color}},Histogram:(t,e,n,r)=>{var s;return{ce:(s=Jt(t(n,r)).V)!==null&&s!==void 0?s:e.color}}};class Q7{constructor(e){this.Kh=(n,r)=>r!==void 0?r.Vt:this.jr.In().Gh(n),this.jr=e,this.Jh=Z7[e.Qh()]}$s(e,n){return this.Jh(this.Kh,this.jr.W(),e,n)}}var Z2;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(Z2||(Z2={}));const Vl=30;class ez{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,n=0){const r=this.hl(e,n);return r===null?null:Object.assign(Object.assign({},this.al(r)),{ee:this.rl(r)})}ne(){return this.tl}ol(e,n,r){if(this.Ni())return null;let s=null;for(const l of r)s=_h(s,this._l(e,n,l));return s}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,n){const r=this.ul(e);if(r===null&&n!==0)switch(n){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return r}cl(e){let n=this.fl(e);return n>0&&(n-=1),n!==this.tl.length&&this.rl(n)<e?n:null}dl(e){const n=this.vl(e);return n!==this.tl.length&&e<this.rl(n)?n:null}ul(e){const n=this.fl(e);return n===this.tl.length||e<this.tl[n].ee?null:n}fl(e){return sf(this.tl,e,(n,r)=>n.ee<r)}vl(e){return qN(this.tl,e,(n,r)=>n.ee>r)}pl(e,n,r){let s=null;for(let l=e;l<n;l++){const c=this.tl[l].Vt[r];Number.isNaN(c)||(s===null?s={ml:c,bl:c}:(c<s.ml&&(s.ml=c),c>s.bl&&(s.bl=c)))}return s}_l(e,n,r){if(this.Ni())return null;let s=null;const l=Jt(this.el()),c=Jt(this.An()),d=Math.max(e,l),h=Math.min(n,c),g=Math.ceil(d/Vl)*Vl,p=Math.max(g,Math.floor(h/Vl)*Vl);{const _=this.fl(d),b=this.vl(Math.min(h,g,n));s=_h(s,this.pl(_,b,r))}let y=this.il.get(r);y===void 0&&(y=new Map,this.il.set(r,y));for(let _=Math.max(g+1,d);_<p;_+=Vl){const b=Math.floor(_/Vl);let k=y.get(b);if(k===void 0){const S=this.fl(b*Vl),E=this.vl((b+1)*Vl-1);k=this.pl(S,E,r),y.set(b,k)}s=_h(s,k)}{const _=this.fl(p),b=this.vl(h);s=_h(s,this.pl(_,b,r))}return s}}function _h(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class tz{constructor(e){this.wl=e}X(e,n,r){this.wl.draw(e)}gl(e,n,r){var s,l;(l=(s=this.wl).drawBackground)===null||l===void 0||l.call(s,e)}}class xm{constructor(e){this.tr=null,this.wn=e}gt(){var e;const n=this.wn.renderer();if(n===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===n)return this.tr.xl;const r=new tz(n);return this.tr={Ml:n,xl:r},r}Sl(){var e,n,r;return(r=(n=(e=this.wn).zOrder)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:"normal"}}function eT(t){var e,n,r,s,l;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(r=(n=t.visible)===null||n===void 0?void 0:n.call(t))===null||r===void 0||r,hi:(l=(s=t.tickVisible)===null||s===void 0?void 0:s.call(t))===null||l===void 0||l}}class nz{constructor(e,n){this.Wt=new BN,this.kl=e,this.yl=n}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},eT(this.kl))),this.Wt}}class rz extends H0{constructor(e,n){super(),this.kl=e,this.Li=n}zi(e,n,r){const s=eT(this.kl);r.t=s.t,e.V=s.V;const l=2/12*this.Li.P();r.wi=l,r.gi=l,r.ki=s.ki,r.Si=s.Si,e.Kt=s.Kt,e.yt=s.yt,e.hi=s.hi}}class sz{constructor(e,n){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=n}Ol(){return this.Vl}Vn(){var e,n;(n=(e=this.Vl).updateAllViews)===null||n===void 0||n.call(e)}Pn(){var e,n,r,s;const l=(r=(n=(e=this.Vl).paneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Cl)===null||s===void 0?void 0:s.Ml)===l)return this.Cl.xl;const c=l.map(d=>new xm(d));return this.Cl={Ml:l,xl:c},c}Qi(){var e,n,r,s;const l=(r=(n=(e=this.Vl).timeAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Tl)===null||s===void 0?void 0:s.Ml)===l)return this.Tl.xl;const c=this.jr.$t().St(),d=l.map(h=>new nz(h,c));return this.Tl={Ml:l,xl:d},d}Rn(){var e,n,r,s;const l=(r=(n=(e=this.Vl).priceAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Pl)===null||s===void 0?void 0:s.Ml)===l)return this.Pl.xl;const c=this.jr.Dt(),d=l.map(h=>new rz(h,c));return this.Pl={Ml:l,xl:d},d}Bl(){var e,n,r,s;const l=(r=(n=(e=this.Vl).priceAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Rl)===null||s===void 0?void 0:s.Ml)===l)return this.Rl.xl;const c=l.map(d=>new xm(d));return this.Rl={Ml:l,xl:c},c}Al(){var e,n,r,s;const l=(r=(n=(e=this.Vl).timeAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Dl)===null||s===void 0?void 0:s.Ml)===l)return this.Dl.xl;const c=l.map(d=>new xm(d));return this.Dl={Ml:l,xl:c},c}Il(e,n){var r,s,l;return(l=(s=(r=this.Vl).autoscaleInfo)===null||s===void 0?void 0:s.call(r,e,n))!==null&&l!==void 0?l:null}wr(e,n){var r,s,l;return(l=(s=(r=this.Vl).hitTest)===null||s===void 0?void 0:s.call(r,e,n))!==null&&l!==void 0?l:null}}function ym(t,e,n,r){t.forEach(s=>{e(s).forEach(l=>{l.Sl()===n&&r.push(l)})})}function vm(t){return t.Pn()}function iz(t){return t.Bl()}function az(t){return t.Al()}class B1 extends K7{constructor(e,n,r,s,l){super(e),this.zt=new ez,this.jh=new Y7(this),this.zl=[],this.Ll=new I7(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=n,this.$l=r;const c=new G7(this);this.rn=[c],this.Hh=new KN(c,this,e),r!=="Area"&&r!=="Line"&&r!=="Baseline"||(this.El=new z7(this)),this.Ul(),this.ql(l)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const n={Xr:!0},r=this.Dt();if(this.$t().St().Ni()||r.Ni()||this.zt.Ni())return n;const s=this.$t().St().Xs(),l=this.Ct();if(s===null||l===null)return n;let c,d;if(e){const y=this.zt.sl();if(y===null)return n;c=y,d=y.ee}else{const y=this.zt.ll(s.ui(),-1);if(y===null||(c=this.zt.Gh(y.ee),c===null))return n;d=y.ee}const h=c.Vt[3],g=this.Us().$s(d,{Vt:c}),p=r.Rt(h,l.Vt);return{Xr:!1,_t:h,Kt:r.Fi(h,l.Vt),xh:r.Yl(h),Sh:r.Zl(h,l.Vt),V:g.ce,ki:p,ee:d}}Us(){return this.Nl!==null||(this.Nl=new Q7(this)),this.Nl}W(){return this.cn}$h(e){const n=e.priceScaleId;n!==void 0&&n!==this.cn.priceScaleId&&this.$t().Xl(this,n),xa(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,n){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(n&&n.ta?this.El.$r():e.length===0&&this.El.Hr());const r=this.$t().dr(this);this.$t().ia(r),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const n=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const n=new X7(this,e);return this.zl.push(n),this.$t().Gl(this),n}ra(e){const n=this.zl.indexOf(e);n!==-1&&this.zl.splice(n,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const n=e.Os();return this.zt.ll(n,1)}In(){return this.zt}ph(e){const n=this.zt.Gh(e);return n===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3]}:n.Vt[3]}aa(e){const n=[];ym(this.Hl,vm,"top",n);const r=this.El;return r!==null&&r.yt()&&(this.jl===null&&r.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),r.Ur(),n.unshift(r)),n}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const n=this.zl.map(r=>r.qh());return e.push(...n),ym(this.Hl,vm,"normal",e),e}ua(){return this.ca(vm,"bottom")}da(e){return this.ca(iz,e)}fa(e){return this.ca(az,e)}va(e,n){return this.Hl.map(r=>r.wr(e,n)).filter(r=>r!==null)}Ji(e){return[this.Hh,...this.zl.map(n=>n.Yh())]}Rn(e,n){if(n!==this.Yi&&!this._a())return[];const r=[...this.rn];for(const s of this.zl)r.push(s.Zh());return this.Hl.forEach(s=>{r.push(...s.Rn())}),r}Qi(){const e=[];return this.Hl.forEach(n=>{e.push(...n.Qi())}),e}Il(e,n){if(this.cn.autoscaleInfoProvider!==void 0){const r=this.cn.autoscaleInfoProvider(()=>{const s=this.pa(e,n);return s===null?null:s.Bh()});return h0.Ah(r)}return this.pa(e,n)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const n of this.rn)n.bt();for(const n of this.zl)n.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(n=>n.Vn())}Dt(){return Jt(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const n=this.zt.Gh(e);return n===null?null:{_t:n.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new sz(e,this))}ya(e){this.Hl=this.Hl.filter(n=>n.Ol()!==e)}Ca(){if(this.wn instanceof mm)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof mm)return e=>this.wn.je(e)}_a(){return!U0(this.Dt().Pa())}pa(e,n){if(!Fd(e)||!Fd(n)||this.zt.Ni())return null;const r=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],s=this.zt.ol(e,n,r);let l=s!==null?new xi(s.ml,s.bl):null;if(this.Qh()==="Histogram"){const d=this.cn.base,h=new xi(d,d);l=l!==null?l.ts(h):h}let c=this.dn.uh();return this.Hl.forEach(d=>{const h=d.Il(e,n);if(h!=null&&h.priceRange){const b=new xi(h.priceRange.minValue,h.priceRange.maxValue);l=l!==null?l.ts(b):b}var g,p,y,_;h!=null&&h.margins&&(g=c,p=h.margins,c={above:Math.max((y=g==null?void 0:g.above)!==null&&y!==void 0?y:0,p.above),below:Math.max((_=g==null?void 0:g.below)!==null&&_!==void 0?_:0,p.below)})}),new h0(l,c)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const n=this.cn.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new h7(this.cn.priceFormat.precision);break;case"percent":this.wa=new HN(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new $0(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const n=Jt(this.zt.el());this.Wl=this.Fl.map((r,s)=>{const l=Jt(e.Va(r.time,!0)),c=l<n?1:-1;return{time:Jt(this.zt.ll(l,c)).ee,position:r.position,shape:r.shape,color:r.color,id:r.id,th:s,text:r.text,size:r.size,originalTime:r.originalTime}})}ql(e){switch(this.dn=new V7(this,this.$t()),this.$l){case"Bar":this.wn=new S7(this,this.$t());break;case"Candlestick":this.wn=new T7(this,this.$t());break;case"Line":this.wn=new D7(this,this.$t());break;case"Custom":this.wn=new mm(this,this.$t(),ui(e));break;case"Area":this.wn=new b7(this,this.$t());break;case"Baseline":this.wn=new E7(this,this.$t());break;case"Histogram":this.wn=new O7(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,n){const r=[];return ym(this.Hl,e,n,r),r}}class lz{constructor(e){this.cn=e}Oa(e,n,r){let s=e;if(this.cn.mode===0)return s;const l=r.vn(),c=l.Ct();if(c===null)return s;const d=l.Rt(e,c),h=r.Ba().filter(p=>p instanceof B1).reduce((p,y)=>{if(r.vr(y)||!y.yt())return p;const _=y.Dt(),b=y.In();if(_.Ni()||!b.Kr(n))return p;const k=b.Gh(n);if(k===null)return p;const S=Mc(y.Ct());return p.concat([_.Rt(k.Vt[3],S.Vt)])},[]);if(h.length===0)return s;h.sort((p,y)=>Math.abs(p-d)-Math.abs(y-d));const g=h[0];return s=l.pn(g,c),s}}class oz extends va{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null)return;const l=Math.max(1,Math.floor(r));e.lineWidth=l,function(c,d){c.save(),c.lineWidth%2&&c.translate(.5,.5),d(),c.restore()}(e,()=>{const c=Jt(this.zt);if(c.Aa){e.strokeStyle=c.Ia,Fo(e,c.za),e.beginPath();for(const d of c.La){const h=Math.round(d.Ea*r);e.moveTo(h,-l),e.lineTo(h,n.height+l)}e.stroke()}if(c.Na){e.strokeStyle=c.Fa,Fo(e,c.Wa),e.beginPath();for(const d of c.ja){const h=Math.round(d.Ea*s);e.moveTo(-l,h),e.lineTo(n.width+l,h)}e.stroke()}})}}class cz{constructor(e){this.Wt=new oz,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,n={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(r=>({Ea:r.coord}))};this.Wt.J(n),this.ft=!1}return this.Wt}}class uz{constructor(e){this.wn=new cz(e)}qh(){return this.wn}}const bm={$a:4,Ua:1e-4};function Lc(t,e){const n=100*(t-e)/e;return e<0?-n:n}function dz(t,e){const n=Lc(t.Ph(),e),r=Lc(t.Rh(),e);return new xi(n,r)}function bd(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function fz(t,e){const n=bd(t.Ph(),e),r=bd(t.Rh(),e);return new xi(n,r)}function g0(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.log10(n+e.Ua)+e.$a;return t<0?-r:r}function _d(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.pow(10,n-e.$a)-e.Ua;return t<0?-r:r}function ed(t,e){if(t===null)return null;const n=g0(t.Ph(),e),r=g0(t.Rh(),e);return new xi(n,r)}function Sh(t,e){if(t===null)return null;const n=_d(t.Ph(),e),r=_d(t.Rh(),e);return new xi(n,r)}function _m(t){if(t===null)return bm;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return bm;const n=Math.ceil(Math.abs(Math.log10(e))),r=bm.$a+n;return{$a:r,Ua:1/Math.pow(10,r)}}class Sm{constructor(e,n){if(this.qa=e,this.Ya=n,function(r){if(r<0)return!1;for(let s=r;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let r=this.qa;r!==1;){if(r%2==0)this.Za.push(2),r/=2;else{if(r%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),r/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,n,r){const s=this.qa===0?0:1/this.qa;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),c=0,d=this.Ya[0];for(;;){const y=bh(l,s,1e-14)&&l>s+1e-14,_=bh(l,r*d,1e-14),b=bh(l,1,1e-14);if(!(y&&_&&b))break;l/=d,d=this.Ya[++c%this.Ya.length]}if(l<=s+1e-14&&(l=s),l=Math.max(1,l),this.Za.length>0&&(h=l,g=1,p=1e-14,Math.abs(h-g)<p))for(c=0,d=this.Za[0];bh(l,r*d,1e-14)&&l>s+1e-14;)l/=d,d=this.Za[++c%this.Za.length];var h,g,p;return l}}class Q2{constructor(e,n,r,s){this.Ka=[],this.Li=e,this.qa=n,this.Ga=r,this.Ja=s}Xa(e,n){if(e<n)throw new Error("high < low");const r=this.Li.At(),s=(e-n)*this.Qa()/r,l=new Sm(this.qa,[2,2.5,2]),c=new Sm(this.qa,[2,2,2.5]),d=new Sm(this.qa,[2.5,2,2]),h=[];return h.push(l.Xa(e,n,s),c.Xa(e,n,s),d.Xa(e,n,s)),function(g){if(g.length<1)throw Error("array is empty");let p=g[0];for(let y=1;y<g.length;++y)g[y]<p&&(p=g[y]);return p}(h)}io(){const e=this.Li,n=e.Ct();if(n===null)return void(this.Ka=[]);const r=e.At(),s=this.Ga(r-1,n),l=this.Ga(0,n),c=this.Li.W().entireTextOnly?this.no()/2:0,d=c,h=r-1-c,g=Math.max(s,l),p=Math.min(s,l);if(g===p)return void(this.Ka=[]);let y=this.Xa(g,p),_=g%y;_+=_<0?y:0;const b=g>=p?1:-1;let k=null,S=0;for(let E=g-_;E>p;E-=y){const O=this.Ja(E,n,!0);k!==null&&Math.abs(O-k)<this.Qa()||O<d||O>h||(S<this.Ka.length?(this.Ka[S].Ea=O,this.Ka[S].so=e.eo(E)):this.Ka.push({Ea:O,so:e.eo(E)}),S++,k=O,e.ro()&&(y=this.Xa(E*b,p)))}this.Ka.length=S}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function tT(t){return t.slice().sort((e,n)=>Jt(e.Xi())-Jt(n.Xi()))}var eS;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(eS||(eS={}));const tS=new HN,nS=new $0(100,1);class hz{constructor(e,n,r,s){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new ys,this.vo=new ys,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=nS,this.xo=_m(null),this.So=e,this.cn=n,this.ko=r,this.yo=s,this.Co=new Q2(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(xa(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const n=ui(e.scaleMargins.top),r=ui(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(r<0||r>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${r}`);if(n+r>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+r}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const n=this.Cr();let r=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),n.Cr===1&&e.Cr!==n.Cr&&(function(l,c){if(l===null)return!1;const d=_d(l.Ph(),c),h=_d(l.Rh(),c);return isFinite(d)&&isFinite(h)}(this.Ih,this.xo)?(r=Sh(this.Ih,this.xo),r!==null&&this.Ao(r)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==n.Cr&&(r=ed(this.Ih,this.xo),r!==null&&this.Ao(r));const s=n.Cr!==this.cn.mode;s&&(n.Cr===2||this.Mh())&&this.Ra(),s&&(n.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&n.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(n,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,n){const r=this.Ih;(n||r===null&&e!==null||r!==null&&!r.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,n){return this.Mh()?e=Lc(e,n):this.Oo()&&(e=bd(e,n)),this.Po(e,n)}te(e,n,r){this.Wo();const s=this.Fo(),l=Jt(this.Lh()),c=l.Ph(),d=l.Rh(),h=this.Eo()-1,g=this.Bo(),p=h/(d-c),y=r===void 0?0:r.from,_=r===void 0?e.length:r.to,b=this.Ho();for(let k=y;k<_;k++){const S=e[k],E=S._t;if(isNaN(E))continue;let O=E;b!==null&&(O=b(S._t,n));const T=s+p*(O-c),D=g?T:this.ho-1-T;S.st=D}}be(e,n,r){this.Wo();const s=this.Fo(),l=Jt(this.Lh()),c=l.Ph(),d=l.Rh(),h=this.Eo()-1,g=this.Bo(),p=h/(d-c),y=r===void 0?0:r.from,_=r===void 0?e.length:r.to,b=this.Ho();for(let k=y;k<_;k++){const S=e[k];let E=S.ge,O=S.Me,T=S.xe,D=S.Se;b!==null&&(E=b(S.ge,n),O=b(S.Me,n),T=b(S.xe,n),D=b(S.Se,n));let F=s+p*(E-c),Z=g?F:this.ho-1-F;S.pe=Z,F=s+p*(O-c),Z=g?F:this.ho-1-F,S.de=Z,F=s+p*(T-c),Z=g?F:this.ho-1-F,S.fe=Z,F=s+p*(D-c),Z=g?F:this.ho-1-F,S.me=Z}}pn(e,n){const r=this.To(e,n);return this.$o(r,n)}$o(e,n){let r=e;return this.Mh()?r=function(s,l){return l<0&&(s=-s),s/100*l+l}(r,n):this.Oo()&&(r=function(s,l){return s-=100,l<0&&(s=-s),s/100*l+l}(r,n)),r}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let n=0;n<this.po.length;n++){const r=this.po[n];r.Xi()===null&&r.Ki(n+1),e.push(r)}return e=tT(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const n of this.po){const r=n.Ct();r!==null&&(e===null||r.la<e.la)&&(e=r)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const n=this.Co.Ha();return this.bo={Ha:n,Xo:e},this.fo.m(),n}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=Jt(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let n=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const r=Jt(this.ao).Th();n=Math.max(n,.1),r.Vh(n),this.Ao(r)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=Jt(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const n=Jt(this.Lh()).Dh()/(this.Eo()-1);let r=e-this.Mo;this.Bo()&&(r*=-1);const s=r*n,l=Jt(this.ao).Th();l.Oh(s),this.Ao(l,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,n){switch(this.cn.mode){case 2:return this.s_(Lc(e,n));case 3:return this.ba().format(bd(e,n));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,Jt(this.e_()).ba())}Zl(e,n){return e=Lc(e,n),this.s_(e,tS)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let n=100;e!==null&&(n=Math.round(1/e.ma())),this.wa=nS,this.Mh()?(this.wa=tS,n=100):this.Oo()?(this.wa=new $0(100,1),n=100):e!==null&&(this.wa=e.ba()),this.Co=new Q2(this,n,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,n){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?g0(e,this.xo):e;const r=Jt(this.Lh()),s=this.Fo()+(this.Eo()-1)*(e-r.Ph())/r.Dh();return this.jo(s)}To(e,n){if(this.Wo(),this.Ni())return 0;const r=this.jo(e),s=Jt(this.Lh()),l=s.Ph()+s.Dh()*((r-this.Fo())/(this.Eo()-1));return this.ro()?_d(l,this.xo):l}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let n=null;const r=this.r_();let s=0,l=0;for(const h of r){if(!h.yt())continue;const g=h.Ct();if(g===null)continue;const p=h.Il(e.Os(),e.ui());let y=p&&p.Lh();if(y!==null){switch(this.cn.mode){case 1:y=ed(y,this.xo);break;case 2:y=dz(y,g.Vt);break;case 3:y=fz(y,g.Vt)}if(n=n===null?y:n.ts(Jt(y)),p!==null){const _=p.Eh();_!==null&&(s=Math.max(s,_.above),l=Math.max(l,_.below))}}}if(s===this.co&&l===this.do||(this.co=s,this.do=l,this.bo=null,this.Do()),n!==null){if(n.Ph()===n.Rh()){const h=this.e_(),g=5*(h===null||this.Mh()||this.Oo()?1:h.ma());this.ro()&&(n=Sh(n,this.xo)),n=new xi(n.Ph()-g,n.Rh()+g),this.ro()&&(n=ed(n,this.xo))}if(this.ro()){const h=Sh(n,this.xo),g=_m(h);if(c=g,d=this.xo,c.$a!==d.$a||c.Ua!==d.Ua){const p=this.ao!==null?Sh(this.ao,this.xo):null;this.xo=g,n=ed(h,g),p!==null&&(this.ao=ed(p,g))}}this.Ao(n)}else this.Ih===null&&(this.Ao(new xi(-.5,.5)),this.xo=_m(null));var c,d;this.oo._o=!0}Ho(){return this.Mh()?Lc:this.Oo()?bd:this.ro()?e=>g0(e,this.xo):null}a_(e,n,r){return n===void 0?(r===void 0&&(r=this.ba()),r.format(e)):n(e)}Wh(e,n){return this.a_(e,this.yo.priceFormatter,n)}s_(e,n){return this.a_(e,this.yo.percentageFormatter,n)}}class gz{constructor(e,n){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new ys,this.yl=e,this.$i=n,this.d_=new uz(this);const r=n.W();this.f_=this.v_("left",r.leftPriceScale),this.p_=this.v_("right",r.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(r)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const n=Array.from(this.o_.values());for(const r of n){const s=Jt(r[0].Dt());s.$h(e.overlayPriceScales),e.localization&&s.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?ui(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(n=>{if(this.vr(n)){const r=n.Dt();r!==null&&r.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const n=e.Dt();return n===null||this.f_!==n&&this.p_!==n}qo(e,n,r){const s=r!==void 0?r:this.C_().y_+1;this.T_(e,n,s)}Zo(e){const n=this.po.indexOf(e);so(n!==-1,"removeDataSource: invalid data source"),this.po.splice(n,1);const r=Jt(e.Dt()).Pa();if(this.o_.has(r)){const l=ui(this.o_.get(r)),c=l.indexOf(e);c!==-1&&(l.splice(c,1),l.length===0&&this.o_.delete(r))}const s=e.Dt();s&&s.Ba().indexOf(e)>=0&&s.Zo(e),s!==null&&(s.Yo(),this.P_(s)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,n){e.Go(n)}O_(e,n){e.Jo(n),this.k_()}B_(e){e.Qo()}A_(e,n){e.t_(n)}I_(e,n){e.i_(n),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const n=this.yl.Xs();e.Ro({Wn:!0}),n!==null&&e.h_(n),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=tT(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const n=e.r_();if(n&&n.length>0&&!this.yl.Ni()){const r=this.yl.Xs();r!==null&&e.h_(r)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let n=0,r=0;for(let s=0;s<e.length;s++){const l=e[s].Xi();l!==null&&(l<n&&(n=l),l>r&&(r=l))}return{H_:n,y_:r}}T_(e,n,r){let s=this.w_(n);if(s===null&&(s=this.v_(n,this.$i.W().overlayPriceScales)),this.po.push(e),!U0(n)){const l=this.o_.get(n)||[];l.push(e),this.o_.set(n,l)}s.qo(e),e.Gi(s),e.Ki(r),this.P_(s),this.mo=null}m_(e,n,r){n.Cr!==r.Cr&&this.L_(e)}v_(e,n){const r=Object.assign({visible:!0,autoScale:!0},ll(n)),s=new hz(e,r,this.$i.W().layout,this.$i.W().localization);return s.Lo(this.At()),s}}class pz{constructor(e,n,r=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=n,this.ir=r}Y_(e){const n=e.time,r=this.q_.cacheKey(n),s=this.tr.get(r);if(s!==void 0)return s.Z_;if(this.Ke===this.ir){const c=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(ui(c)),this.Je++,this.Ke--}const l=this.U_(e);return this.tr.set(r,{Z_:l,rr:this.Ge}),this.Qe.set(this.Ge,r),this.Ke++,this.Ge++,l}}class Sd{constructor(e,n){so(e<=n,"right should be >= left"),this.X_=e,this.K_=n}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function rS(t,e){return t===null||e===null?t===e:t.Ch(e)}class mz{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,n){this.nu(n),this.tr=null;for(let r=n;r<e.length;++r){const s=e[r];let l=this.J_.get(s.timeWeight);l===void 0&&(l=[],this.J_.set(s.timeWeight,l)),l.push({index:r,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}su(e,n){const r=Math.ceil(n/e);return this.tr!==null&&this.tr.eu===r||(this.tr={Ha:this.ru(r),eu:r}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const n=[];this.J_.forEach((r,s)=>{e<=r[0].index?n.push(s):r.splice(sf(r,e,l=>l.index<e),1/0)});for(const r of n)this.J_.delete(r)}ru(e){let n=[];for(const r of Array.from(this.J_.keys()).sort((s,l)=>l-s)){if(!this.J_.get(r))continue;const s=n;n=[];const l=s.length;let c=0;const d=ui(this.J_.get(r)),h=d.length;let g=1/0,p=-1/0;for(let y=0;y<h;y++){const _=d[y],b=_.index;for(;c<l;){const k=s[c],S=k.index;if(!(S<b)){g=S;break}c++,n.push(k),p=S,g=1/0}if(g-b>=e&&b-p>=e)n.push(_),p=b;else if(this.Q_)return s}for(;c<l;c++)n.push(s[c])}return n}}class Wc{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Sd(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new Wc(null)}}function xz(t,e){return t.weight>e.weight?t:e}class yz{constructor(e,n,r,s){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new mz,this.du=new Map,this.fu=Wc.ou(),this.vu=!0,this.pu=new ys,this.mu=new ys,this.bu=new ys,this.wu=null,this.gu=null,this.Mu=[],this.cn=n,this.yo=r,this.xu=n.rightOffset,this.Su=n.barSpacing,this.$i=e,this.q_=s,this.ku(),this.cu.tu(n.uniformDistribution)}W(){return this.cn}yu(e){xa(this.yo,e),this.Cu(),this.ku()}$h(e,n){var r;xa(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((r=e.barSpacing)!==null&&r!==void 0?r:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var n,r;return(r=(n=this.uu[e])===null||n===void 0?void 0:n.time)!==null&&r!==void 0?r:null}Ui(e){var n;return(n=this.uu[e])!==null&&n!==void 0?n:null}Va(e,n){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return n?this.uu.length-1:null;const r=sf(this.uu,this.q_.key(e),(s,l)=>this.q_.key(s.time)<l);return this.q_.key(e)<this.q_.key(this.uu[r].time)?n?r:null:r}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const n={from:e.Os(),to:e.ui()};return this.Ou(n)}Ou(e){const n=Math.round(e.from),r=Math.round(e.to),s=Jt(this.Bu()),l=Jt(this.Au());return{from:Jt(this.Ui(Math.max(s,n))),to:Jt(this.Ui(Math.min(l,r)))}}Iu(e){return{from:Jt(this.Va(e.from,!0)),to:Jt(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const n=this.Du(),r=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&r!==0){const s=this.Su*e/r;this.Su=s}if(this.cn.fixLeftEdge&&n!==null&&n.Os()<=0){const s=r-e;this.xu-=Math.round(s/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Fd(e))return 0;const n=this.Eu()+this.xu-e;return this.__-(n+.5)*this.Su-1}Qs(e,n){const r=this.Eu(),s=n===void 0?0:n.from,l=n===void 0?e.length:n.to;for(let c=s;c<l;c++){const d=e[c].ot,h=r+this.xu-d,g=this.__-(h+.5)*this.Su-1;e[c].nt=g}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,n=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),r=Math.round(n/e),s=Jt(this.Xs()),l=Math.max(s.Os(),s.Os()-r),c=Math.max(s.ui(),s.ui()-r),d=this.cu.su(e,n),h=this.Bu()+r,g=this.Au()-r,p=this.$u(),y=this.cn.fixLeftEdge||p,_=this.cn.fixRightEdge||p;let b=0;for(const k of d){if(!(l<=k.index&&k.index<=c))continue;let S;b<this.Mu.length?(S=this.Mu[b],S.coord=this.It(k.index),S.label=this.Uu(k),S.weight=k.weight):(S={needAlignCoordinate:!1,coord:this.It(k.index),label:this.Uu(k),weight:k.weight},this.Mu.push(S)),this.Su>n/2&&!p?S.needAlignCoordinate=!1:S.needAlignCoordinate=y&&k.index<=h||_&&k.index>=g,b++}return this.Mu.length=b,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,n){const r=this.Fu(e),s=this.le(),l=s+n*(s/10);this.Gn(l),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(r-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const n=xx(this.__-e,0,this.__),r=xx(this.__-Jt(this.wo),0,this.__);n!==0&&r!==0&&this.Gn(this.wu.le*n/r)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const n=(this.Mo-e)/this.le();this.xu=Jt(this.wu).Hu+n,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const r=this.xu,s=performance.now();this.$i.Zn({Qu:l=>(l-s)/n>=1,tc:l=>{const c=(l-s)/n;return c>=1?e:r+(e-r)*c}})}bt(e,n){this.vu=!0,this.uu=e,this.cu.iu(e,n),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const n=e.G_();this.ju(this.__/n),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),n=this.Au();e!==null&&n!==null&&this.rc(new Sd(e,n+this.cn.rightOffset))}lc(e){const n=new Sd(e.from,e.to);this.rc(n)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:n}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const n=this.ac(e),r=this.Eu()+this.xu-n;return Math.round(1e6*r)/1e6}ju(e){const n=this.Su;this.Su=e,this.zu(),n!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(Wc.ou());const e=this.Eu(),n=this.__/this.Su,r=this.xu+e,s=new Sd(r-n+1,r);this._c(new Wc(s))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const n=.5*this.__;this.Su>n&&(this.Su=n,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const n=this.dc();this.xu>n&&(this.xu=n,this.vu=!0)}cc(){const e=this.Bu(),n=this._u;return e===null||n===null?null:e-n-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let n=this.du.get(e.weight);return n===void 0&&(n=new pz(r=>this.fc(r),this.q_),this.du.set(e.weight,n)),n.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const n=this.fu;this.fu=e,rS(n.lu(),this.fu.lu())||this.pu.m(),rS(n.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const n=this.Xs();if(n===null)return;const r=n.Os()-e;if(r<0){const s=this.xu-r-1;this.Jn(s)}this.zu()}Pu(){this.Lu(),this.zu()}}class vz{X(e,n,r){e.useMediaCoordinateSpace(s=>this.K(s,n,r))}gl(e,n,r){e.useMediaCoordinateSpace(s=>this.vc(s,n,r))}vc(e,n,r){}}class bz extends vz{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:n,mediaSize:r}=e;let s=0;for(const c of this.zt.bc){if(c.Kt.length===0)continue;n.font=c.R;const d=this.wc(n,c.Kt);d>r.width?c.Zu=r.width/d:c.Zu=1,s+=c.gc*c.Zu}let l=0;switch(this.zt.Mc){case"top":l=0;break;case"center":l=Math.max((r.height-s)/2,0);break;case"bottom":l=Math.max(r.height-s,0)}n.fillStyle=this.zt.V;for(const c of this.zt.bc){n.save();let d=0;switch(this.zt.xc){case"left":n.textAlign="left",d=c.gc/2;break;case"center":n.textAlign="center",d=r.width/2;break;case"right":n.textAlign="right",d=r.width-1-c.gc/2}n.translate(d,l),n.textBaseline="top",n.font=c.R,n.scale(c.Zu,c.Zu),n.fillText(c.Kt,0,c.Sc),n.restore(),l+=c.gc*c.Zu}}wc(e,n){const r=this.kc(e.font);let s=r.get(n);return s===void 0&&(s=e.measureText(n).width,r.set(n,s)),s}kc(e){let n=this.mc.get(e);return n===void 0&&(n=new Map,this.mc.set(e,n)),n}}class _z{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new bz(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),n=this.Ft;n.yt=e.visible,n.yt&&(n.V=e.color,n.xc=e.horzAlign,n.Mc=e.vertAlign,n.bc=[{Kt:e.text,R:Yc(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class Sz extends I1{constructor(e,n){super(),this.cn=n,this.wn=new _z(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var sS,iS,aS,lS,oS;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(sS||(sS={}));class wz{constructor(e,n,r){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new ys,this.Rc=new ys,this.Dc=null,this.Vc=e,this.cn=n,this.q_=r,this.Oc=new t7(this),this.yl=new yz(this,n.timeScale,this.cn.localization,r),this.vt=new f7(this,n.crosshair),this.Bc=new lz(n.crosshair),this.Ac=new Sz(this,n.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(Ws.es())}Uh(){this.Nc(Ws.ss())}oa(){this.Nc(new Ws(1))}Gl(e){const n=this.Fc(e);this.Nc(n)}Wc(){return this.Tc}jc(e){const n=this.Tc;this.Tc=e,n!==null&&this.Gl(n.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){xa(this.cn,e),this.yc.forEach(n=>n.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,n){if(e==="left")return void this.$h({leftPriceScale:n});if(e==="right")return void this.$h({rightPriceScale:n});const r=this.Uc(e);r!==null&&(r.Dt.$h(n),this.Pc.m())}Uc(e){for(const n of this.yc){const r=n.w_(e);if(r!==null)return{Ht:n,Dt:r}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,n){e.Lo(n),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(n=>n.S_(e)),this.Wu()}Ic(e){const n=new gz(this.yl,this);e!==void 0?this.yc.splice(e,0,n):this.yc.push(n);const r=e===void 0?this.yc.length-1:e,s=Ws.es();return s.Nn(r,{Fn:0,Wn:!0}),this.Nc(s),n}V_(e,n,r){e.V_(n,r)}O_(e,n,r){e.O_(n,r),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,n){e.B_(n),this.Nc(this.Gc(e,2))}A_(e,n,r){n.Vo()||e.A_(n,r)}I_(e,n,r){n.Vo()||(e.I_(n,r),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,n){n.Vo()||(e.z_(n),this.Nc(this.Gc(e,2)))}E_(e,n){e.E_(n),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,n){const r=this.St();if(r.Ni()||n===0)return;const s=r.Hi();e=Math.max(1,Math.min(e,s)),r.Zu(e,n),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,n,r,s,l){this.vt.gn(e,n);let c=NaN,d=this.yl.Nu(e);const h=this.yl.Xs();h!==null&&(d=Math.min(Math.max(h.Os(),d),h.ui()));const g=s.vn(),p=g.Ct();p!==null&&(c=g.pn(n,p)),c=this.Bc.Oa(c,d,s),this.vt.kn(d,c,s),this.oa(),l||this.Rc.m(this.vt.xt(),{x:e,y:n},r)}ad(e,n,r){const s=r.vn(),l=s.Ct(),c=s.Rt(e,Jt(l)),d=this.yl.Va(n,!0),h=this.yl.It(Jt(d));this.ld(h,c,null,r,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const n=this.vt.xn(),r=this.vt.Sn();this.ld(n,r,null,e)}this.vt.Vn()}_d(e,n,r){const s=this.yl.mn(0);n!==void 0&&r!==void 0&&this.yl.bt(n,r);const l=this.yl.mn(0),c=this.yl.Eu(),d=this.yl.Xs();if(d!==null&&s!==null&&l!==null){const h=d.Kr(c),g=this.q_.key(s)>this.q_.key(l),p=e!==null&&e>c&&!g,y=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,_=h&&(r!==void 0||y)&&this.yl.W().shiftVisibleRangeOnNewBar;if(p&&!_){const b=e-c;this.yl.Jn(this.yl.Hu()-b)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const n=this.yc.find(r=>r.Uo().includes(e));return n===void 0?null:n}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,n,r){const s=this.yc[0],l=this.fd(n,e,s,r);return this.Cc.push(l),this.Cc.length===1?this.Kl():this.Uh(),l}vd(e){const n=this.dr(e),r=this.Cc.indexOf(e);so(r!==-1,"Series not found"),this.Cc.splice(r,1),Jt(n).Zo(e),e.S&&e.S()}Xl(e,n){const r=Jt(this.dr(e));r.Zo(e);const s=this.Uc(n);if(s===null){const l=e.Xi();r.qo(e,n,l)}else{const l=s.Ht===r?e.Xi():void 0;s.Ht.qo(e,n,l)}}hc(){const e=Ws.ss();e.$n(),this.Nc(e)}pd(e){const n=Ws.ss();n.Yn(e),this.Nc(n)}Kn(){const e=Ws.ss();e.Kn(),this.Nc(e)}Gn(e){const n=Ws.ss();n.Gn(e),this.Nc(n)}Jn(e){const n=Ws.ss();n.Jn(e),this.Nc(n)}Zn(e){const n=Ws.ss();n.Zn(e),this.Nc(n)}Un(){const e=Ws.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const n=this.Ec,r=this.zc;if(n===r)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==r||this.Dc.Rs!==n)this.Dc={Ps:r,Rs:n,wd:new Map};else{const l=this.Dc.wd.get(e);if(l!==void 0)return l}const s=function(l,c,d){const[h,g,p,y]=Pd(l),[_,b,k,S]=Pd(c),E=[Gi(h+d*(_-h)),Gi(g+d*(b-g)),Gi(p+d*(k-p)),PN(y+d*(S-y))];return`rgba(${E[0]}, ${E[1]}, ${E[2]}, ${E[3]})`}(r,n,e/100);return this.Dc.wd.set(e,s),s}Gc(e,n){const r=new Ws(n);if(e!==null){const s=this.yc.indexOf(e);r.Nn(s,{Fn:n})}return r}Fc(e,n){return n===void 0&&(n=2),this.Gc(this.dr(e),n)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(n=>n.j_().qh().bt())}fd(e,n,r,s){const l=new B1(this,e,n,r,s),c=e.priceScaleId!==void 0?e.priceScaleId:this.md();return r.qo(l,c),U0(c)||l.$h(e),l}Lc(e){const n=this.cn.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}}function yx(t){return!Ma(t)&&!rf(t)}function nT(t){return Ma(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(iS||(iS={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(aS||(aS={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(lS||(lS={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(oS||(oS={}));const cS=t=>t.getUTCFullYear();function kz(t,e,n){return e.replace(/yyyy/g,(r=>ol(cS(r),4))(t)).replace(/yy/g,(r=>ol(cS(r)%100,2))(t)).replace(/MMMM/g,((r,s)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(t,n)).replace(/MMM/g,((r,s)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(t,n)).replace(/MM/g,(r=>ol((s=>s.getUTCMonth()+1)(r),2))(t)).replace(/dd/g,(r=>ol((s=>s.getUTCDate())(r),2))(t))}class rT{constructor(e="yyyy-MM-dd",n="default"){this.gd=e,this.Md=n}Y_(e){return kz(e,this.gd,this.Md)}}class Ez{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",ol(e.getUTCHours(),2)).replace("%m",ol(e.getUTCMinutes(),2)).replace("%s",ol(e.getUTCSeconds(),2))}}const Nz={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class Tz{constructor(e={}){const n=Object.assign(Object.assign({},Nz),e);this.Td=new rT(n.Sd,n.Cd),this.Pd=new Ez(n.kd),this.Rd=n.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function wh(t){return 60*t*60*1e3}function wm(t){return 60*t*1e3}const kh=[{Dd:(uS=1,1e3*uS),Vd:10},{Dd:wm(1),Vd:20},{Dd:wm(5),Vd:21},{Dd:wm(30),Vd:22},{Dd:wh(1),Vd:30},{Dd:wh(3),Vd:31},{Dd:wh(6),Vd:32},{Dd:wh(12),Vd:33}];var uS;function dS(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=kh.length-1;n>=0;--n)if(Math.floor(e.getTime()/kh[n].Dd)!==Math.floor(t.getTime()/kh[n].Dd))return kh[n].Vd;return 0}function km(t){let e=t;if(rf(t)&&(e=H1(t)),!yx(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(n.getTime()/1e3),Bd:e}}function fS(t){if(!nT(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function H1(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function hS(t){rf(t.time)&&(t.time=H1(t.time))}class gS{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(hS)}(e):hS(e)}createConverterToInternalObj(e){return Jt(function(n){return n.length===0?null:yx(n[0].time)||rf(n[0].time)?km:fS}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.Bd===void 0?new Date(1e3*n.Od).getTime():new Date(Date.UTC(n.Bd.year,n.Bd.month-1,n.Bd.day)).getTime()}convertHorzItemToInternal(e){return nT(n=e)?fS(n):yx(n)?km(n):km(H1(n));var n}updateFormatter(e){if(!this.cn)return;const n=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new Tz({Sd:n,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new rT(n,e.locale)}formatHorzItem(e){const n=e;return this.Ad.Y_(new Date(1e3*n.Od))}formatTickmark(e,n){const r=function(l,c,d){switch(l){case 0:case 10:return c?d?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return c?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),s=this.cn.timeScale;if(s.tickMarkFormatter!==void 0){const l=s.tickMarkFormatter(e.originalTime,r,n.locale);if(l!==null)return l}return function(l,c,d){const h={};switch(c){case 0:h.year="numeric";break;case 1:h.month="short";break;case 2:h.day="numeric";break;case 3:h.hour12=!1,h.hour="2-digit",h.minute="2-digit";break;case 4:h.hour12=!1,h.hour="2-digit",h.minute="2-digit",h.second="2-digit"}const g=l.Bd===void 0?new Date(1e3*l.Od):new Date(Date.UTC(l.Bd.year,l.Bd.month-1,l.Bd.day));return new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()).toLocaleString(d,h)}(e.time,r,n.locale)}maxTickMarkWeight(e){let n=e.reduce(xz,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(r,s=0){if(r.length===0)return;let l=s===0?null:r[s-1].time.Od,c=l!==null?new Date(1e3*l):null,d=0;for(let h=s;h<r.length;++h){const g=r[h],p=new Date(1e3*g.time.Od);c!==null&&(g.timeWeight=dS(p,c)),d+=g.time.Od-(l||g.time.Od),l=g.time.Od,c=p}if(s===0&&r.length>1){const h=Math.ceil(d/(r.length-1)),g=new Date(1e3*(r[0].time.Od-h));r[0].timeWeight=dS(new Date(1e3*r[0].time.Od),g)}})(e,n)}static Id(e){return xa({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Gc=typeof window<"u";function pS(){return!!Gc&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Em(){return!!Gc&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function vx(t){return t+t%2}function Nm(t,e){return t.zd-e.zd}function Tm(t,e,n){const r=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(r)*Math.min(Math.abs(r),n)}class Cz{constructor(e,n,r,s){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=n,this.qd=r,this.rs=s}Yd(e,n){if(this.Ld!==null){if(this.Ld.ot===n)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:n,zd:e}}Vr(e,n){if(this.Ld===null||this.Ed===null||n-this.Ld.ot>50)return;let r=0;const s=Tm(this.Ld,this.Ed,this.Ud),l=Nm(this.Ld,this.Ed),c=[s],d=[l];if(r+=l,this.Nd!==null){const g=Tm(this.Ed,this.Nd,this.Ud);if(Math.sign(g)===Math.sign(s)){const p=Nm(this.Ed,this.Nd);if(c.push(g),d.push(p),r+=p,this.Fd!==null){const y=Tm(this.Nd,this.Fd,this.Ud);if(Math.sign(y)===Math.sign(s)){const _=Nm(this.Nd,this.Fd);c.push(y),d.push(_),r+=_}}}}let h=0;for(let g=0;g<c.length;++g)h+=d[g]/r*c[g];Math.abs(h)<this.$d||(this.Wd={zd:e,ot:n},this.Hd=h,this.jd=function(g,p){const y=Math.log(p);return Math.log(1*y/-g)/y}(Math.abs(h),this.qd))}tc(e){const n=Jt(this.Wd),r=e-n.ot;return n.zd+this.Hd*(Math.pow(this.qd,r)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const n=e-Jt(this.Wd).ot;return Math.min(n,this.jd)}}class jz{constructor(e,n){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=n,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return FN(Pd(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function zo(t,e){const n=Jt(t.ownerDocument).createElement("canvas");t.appendChild(n);const r=BF(n,{options:{allowResizeObserver:!1},transform:(s,l)=>({width:Math.max(s.width,l.width),height:Math.max(s.height,l.height)})});return r.resizeCanvasElement(e),r}function Bo(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function bx(t,e,n,r){t.gl&&t.gl(e,n,r)}function Hh(t,e,n,r){t.X(e,n,r)}function _x(t,e,n,r){const s=t(n,r);for(const l of s){const c=l.gt();c!==null&&e(c)}}function Az(t){Gc&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class U1{constructor(e,n,r){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Em(),this.Af=s=>{this.If(s)},this.zf=s=>{if(this.Lf(s)){const l=this.Ef(s);if(++this._f,this.uf&&this._f>1){const{Nf:c}=this.Ff(Ta(s),this.cf);c<30&&!this.wf&&this.Wf(l,this.Hf.jf),this.$f()}}else{const l=this.Ef(s);if(++this.hf,this.lf&&this.hf>1){const{Nf:c}=this.Ff(Ta(s),this.af);c<5&&!this.bf&&this.Uf(l,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=n,this.cn=r,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const n=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",n)},this.Zf.addEventListener("mousemove",n),this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.tv),this.Bf=!0}iv(e){const n=Cm(e.changedTouches,Jt(this.Of));if(n===null||(this.Vf=Eh(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const r=this.Ff(Ta(n),Jt(this.pf)),{nv:s,sv:l,Nf:c}=r;if(this.mf||!(c<5)){if(!this.mf){const d=.5*s,h=l>=d&&!this.cn.ev(),g=d>l&&!this.cn.rv();h||g||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const d=this.Ef(e,n);this.Wf(d,this.Hf.hv),Tc(e)}}}lv(e){if(e.button!==0)return;const n=this.Ff(Ta(e),Jt(this.vf)),{Nf:r}=n;if(r>=5&&(this.bf=!0,this.Yf()),this.bf){const s=this.Ef(e);this.Uf(s,this.Hf.av)}}Ff(e,n){const r=Math.abs(n.nt-e.nt),s=Math.abs(n.st-e.st);return{nv:r,sv:s,Nf:r+s}}ov(e){let n=Cm(e.changedTouches,Jt(this.Of));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Of=null,this.Vf=Eh(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const r=this.Ef(e,n);if(this.Wf(r,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:s}=this.Ff(Ta(n),this.cf);s<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}else this.wf||(this.Wf(r,this.Hf.uv),this.Hf.uv&&Tc(e));this._f===0&&Tc(e),e.touches.length===0&&this.ff&&(this.ff=!1,Tc(e))}If(e){if(e.button!==0)return;const n=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),pS()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(n,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:r}=this.Ff(Ta(e),this.af);r<5&&!this.bf&&this.Uf(n,this.Hf.qf),this.Yf()}else this.bf||this.Uf(n,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const n=e.changedTouches[0];this.Of=n.identifier,this.Vf=Eh(e);const r=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=Ta(n),this.yf&&(this.yf(),this.yf=null);{const l=this.iv.bind(this),c=this.ov.bind(this);this.yf=()=>{r.removeEventListener("touchmove",l),r.removeEventListener("touchend",c)},r.addEventListener("touchmove",l,{passive:!1}),r.addEventListener("touchend",c,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const s=this.Ef(e,n);this.Wf(s,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=Ta(n))}mv(e){if(e.button!==0)return;const n=this.Zf.ownerDocument.documentElement;pS()&&n.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=Ta(e),this.kf&&(this.kf(),this.kf=null);{const s=this.lv.bind(this),l=this.If.bind(this);this.kf=()=>{n.removeEventListener("mousemove",s),n.removeEventListener("mouseup",l)},n.addEventListener("mousemove",s),n.addEventListener("mouseup",l)}if(this.Df=!0,this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=Ta(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,n=r=>{this.Hf.wv&&(r.composed&&this.Zf.contains(r.composedPath()[0])||r.target&&this.Zf.contains(r.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",n)},this.gf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Em()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),Az(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const n=mS(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,n),Tc(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const n=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,st:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Tf=mS(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const n=this.Ef(e);this.Uf(n,this.Hf.Pv),this.Bf=!Em()}vv(e){const n=Cm(e.touches,Jt(this.Of));if(n===null)return;const r=this.Ef(e,n);this.Wf(r,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Eh(e)<this.Vf+500}Wf(e,n){n&&n.call(this.Hf,e)}Uf(e,n){n&&n.call(this.Hf,e)}Ef(e,n){const r=n||e,s=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY,screenX:r.screenX,screenY:r.screenY,localX:r.clientX-s.left,localY:r.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:r.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&Tc(e)}}}}function mS(t,e){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function Tc(t){t.cancelable&&t.preventDefault()}function Ta(t){return{nt:t.pageX,st:t.pageY}}function Eh(t){return t.timeStamp||performance.now()}function Cm(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}function Nh(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function Oz(t,e,n){for(const r of t){const s=r.gt();if(s!==null&&s.wr){const l=s.wr(e,n);if(l!==null)return{Bv:r,Iv:l}}}return null}function jm(t,e){return n=>{var r,s,l,c;return((s=(r=n.Dt())===null||r===void 0?void 0:r.Pa())!==null&&s!==void 0?s:"")!==e?[]:(c=(l=n.da)===null||l===void 0?void 0:l.call(n,t))!==null&&c!==void 0?c:[]}}function xS(t,e,n,r){if(!t.length)return;let s=0;const l=n/2,c=t[0].At(r,!0);let d=e===1?l-(t[0].Vi()-c/2):t[0].Vi()-c/2-l;d=Math.max(0,d);for(let h=1;h<t.length;h++){const g=t[h],p=t[h-1],y=p.At(r,!1),_=g.Vi(),b=p.Vi();if(e===1?_>b-y:_<b+y){const k=b-y*e;g.Oi(k);const S=k-e*y/2;if((e===1?S<0:S>n)&&d>0){const E=e===1?-1-S:S-n,O=Math.min(E,d);for(let T=s;T<t.length;T++)t[T].Oi(t[T].Vi()+e*O);d-=O}}else s=h,d=e===1?b-y-_:_-(b+y)}}class yS{constructor(e,n,r,s){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Bd(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=n,this.ko=n.layout,this.Oc=r,this.qv=s==="left",this.Yv=jm("normal",s),this.Zv=jm("top",s),this.Xv=jm("bottom",s),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=zo(this.Kv,es({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const l=this.Gv.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Jv=zo(this.Kv,es({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const c=this.Jv.canvasElement;c.style.position="absolute",c.style.zIndex="2",c.style.left="0",c.style.top="0";const d={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new U1(this.Jv.canvasElement,d,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Bo(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Bo(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const n=this.ap(),r=Jt(this.Gv.canvasElement.getContext("2d"));r.save();const s=this.Li.Ha();r.font=this._p(),s.length>0&&(e=Math.max(this.Fv.xi(r,s[0].so),this.Fv.xi(r,s[s.length-1].so)));const l=this.up();for(let g=l.length;g--;){const p=this.Fv.xi(r,l[g].Kt());p>e&&(e=p)}const c=this.Li.Ct();if(c!==null&&this.Ev!==null&&(d=this.cn.crosshair).mode!==2&&d.horzLine.visible&&d.horzLine.labelVisible){const g=this.Li.pn(1,c),p=this.Li.pn(this.Ev.height-2,c);e=Math.max(e,this.Fv.xi(r,this.Li.Fi(Math.floor(Math.min(g,p))+.11111111111111,c)),this.Fv.xi(r,this.Li.Fi(Math.ceil(Math.max(g,p))-.11111111111111,c)))}var d;r.restore();const h=e||34;return vx(Math.ceil(n.C+n.T+n.A+n.I+5+h))}cp(e){this.Ev!==null&&Do(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return Jt(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,Jt(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const r=Po(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s),this.Ie(s)}),this.tn.bp(r,this.Xv),this.wp(r),this.tn.bp(r,this.Yv),this.gp(r))}this.Jv.applySuggestedBitmapSize();const n=Po(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Mp(n),this.tn.bp(n,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!0,n.V_(r,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp(),s=this.Li;n.O_(r,s,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),n=this.tn.fp(),r=this.Li;this.Nv&&(this.Nv=!1,e.B_(n,r))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!1,n.B_(r,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],n=this.Li===null?void 0:this.Li;return(r=>{for(let s=0;s<r.length;++s){const l=r[s].Rn(this.tn.fp(),n);for(let c=0;c<l.length;c++)e.push(l[c])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:n}){const{width:r,height:s}=n,l=this.tn.fp().$t(),c=l.q(),d=l.bd();c===d?B0(e,0,0,r,s,c):zN(e,0,0,r,s,c,d)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const s=Math.max(1,Math.floor(this.ap().C*r));let l;l=this.qv?n.width-s:0,e.fillRect(l,0,s,n.height)}wp(e){if(this.Ev===null||this.Li===null)return;const n=this.Li.Ha(),r=this.Li.W(),s=this.ap(),l=this.qv?this.Ev.width-s.T:0;r.borderVisible&&r.ticksVisible&&e.useBitmapCoordinateSpace(({context:c,horizontalPixelRatio:d,verticalPixelRatio:h})=>{c.fillStyle=r.borderColor;const g=Math.max(1,Math.floor(h)),p=Math.floor(.5*h),y=Math.round(s.T*d);c.beginPath();for(const _ of n)c.rect(Math.floor(l*d),Math.round(_.Ea*h)-p,y,g);c.fill()}),e.useMediaCoordinateSpace(({context:c})=>{var d;c.font=this._p(),c.fillStyle=(d=r.textColor)!==null&&d!==void 0?d:this.ko.textColor,c.textAlign=this.qv?"right":"left",c.textBaseline="middle";const h=this.qv?Math.round(l-s.A):Math.round(l+s.T+s.A),g=n.map(p=>this.Fv.Mi(c,p.so));for(let p=n.length;p--;){const y=n[p];c.fillText(y.so,h,y.Ea+g[p])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],n=this.Li.Uo().slice(),r=this.tn.fp(),s=this.ap();this.Li===r.pr()&&this.tn.fp().Uo().forEach(c=>{r.vr(c)&&n.push(c)});const l=this.Li;n.forEach(c=>{c.Rn(r,l).forEach(d=>{d.Oi(null),d.Bi()&&e.push(d)})}),e.forEach(c=>c.Oi(c.ki())),this.Li.W().alignLabels&&this.yp(e,s)}yp(e,n){if(this.Ev===null)return;const r=this.Ev.height/2,s=e.filter(c=>c.ki()<=r),l=e.filter(c=>c.ki()>r);s.sort((c,d)=>d.ki()-c.ki()),l.sort((c,d)=>c.ki()-d.ki());for(const c of e){const d=Math.floor(c.At(n)/2),h=c.ki();h>-d&&h<d&&c.Oi(d),h>this.Ev.height-d&&h<this.Ev.height+d&&c.Oi(this.Ev.height-d)}xS(s,1,this.Ev.height,n),xS(l,-1,this.Ev.height,n)}gp(e){if(this.Ev===null)return;const n=this.up(),r=this.ap(),s=this.qv?"right":"left";n.forEach(l=>{l.Ai()&&l.gt(Jt(this.Li)).X(e,r,this.Fv,s)})}Mp(e){if(this.Ev===null||this.Li===null)return;const n=this.tn.$v().$t(),r=[],s=this.tn.fp(),l=n.Zc().Rn(s,this.Li);l.length&&r.push(l);const c=this.ap(),d=this.qv?"right":"left";r.forEach(h=>{h.forEach(g=>{g.gt(Jt(this.Li)).X(e,c,this.Fv,d)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Yc(this.ko.fontSize,this.ko.fontFamily)}}function Dz(t,e){var n,r;return(r=(n=t.ua)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function Th(t,e){var n,r;return(r=(n=t.Pn)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function Rz(t,e){var n,r;return(r=(n=t.Ji)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function Mz(t,e){var n,r;return(r=(n=t.aa)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}class $1{constructor(e,n){this.Ev=es({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new ys,this.Op=new ys,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=n,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(r),this.Gv=zo(r,es({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=zo(r,es({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const l=this.Jv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new U1(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Bo(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Bo(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return Jt(this.Np)}qp(e){var n,r;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l($1.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(n=this.Pp)!==null&&n!==void 0?n:new jz(this.Wp,this.Qd),this.Pp.bt()):((r=this.Pp)===null||r===void 0||r.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(Jt(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(Jt(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const n=e.localX,r=e.localY;this.Gp(n,r,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var n;if(!this.Np)return;this.Kp();const r=e.localX,s=e.localY;this.Gp(r,s,e);const l=this.wr(r,s);this.Qd.Qp((n=l==null?void 0:l.Lv)!==null&&n!==void 0?n:null),this.$i().jc(l&&{Hc:l.Hc,Iv:l.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const n={x:e.localX,y:e.localY};this.rm(n,n,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,n){if(!this.Qd.W().handleScale.pinch)return;const r=5*(n-this.Bp);this.Bp=n,this.$i().Qc(e.nt,r)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const n=this.$i().Zc();this.Ip!==null&&n.yt()&&(this.Lp={x:n.Yt(),y:n.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const n=e.localX,r=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const s=Jt(this.Lp),l=s.x+(n-this.Ip.x),c=s.y+(r-this.Ip.y);this.Gp(l,c,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,n){const r=this.Np;return r===null?null:function(s,l,c){const d=s.Uo(),h=function(g,p,y){var _,b;let k,S;for(const T of g){const D=(b=(_=T.va)===null||_===void 0?void 0:_.call(T,p,y))!==null&&b!==void 0?b:[];for(const F of D)E=F.zOrder,(!(O=k==null?void 0:k.zOrder)||E==="top"&&O!=="top"||E==="normal"&&O==="bottom")&&(k=F,S=T)}var E,O;return k&&S?{zv:k,Hc:S}:null}(d,l,c);if((h==null?void 0:h.zv.zOrder)==="top")return Nh(h);for(const g of d){if(h&&h.Hc===g&&h.zv.zOrder!=="bottom"&&!h.zv.isBackground)return Nh(h);const p=Oz(g.Pn(s),l,c);if(p!==null)return{Hc:g,Bv:p.Bv,Iv:p.Iv};if(h&&h.Hc===g&&h.zv.zOrder!=="bottom"&&h.zv.isBackground)return Nh(h)}return h!=null&&h.zv?Nh(h):null}(r,e,n)}_m(e,n){Jt(n==="left"?this.Cp:this.Tp).cp(es({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Do(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=Jt(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const n of e.Ba())if(e.vr(n)){const r=n.Dt();r!==null&&e.P_(r),n.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const r=Po(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s)}),this.Np&&(this.fm(r,Dz),this.vm(r),this.pm(r),this.fm(r,Th),this.fm(r,Rz)))}this.Jv.applySuggestedBitmapSize();const n=Po(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.bm(n),this.fm(n,Mz))}wm(){return this.Cp}gm(){return this.Tp}bp(e,n){this.fm(e,n)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,n){const r=n.localX,s=n.localY;e.M()&&e.m(this.$i().St().Nu(r),{x:r,y:s},n)}mp({context:e,bitmapSize:n}){const{width:r,height:s}=n,l=this.$i(),c=l.q(),d=l.bd();c===d?B0(e,0,0,r,s,d):zN(e,0,0,r,s,c,d)}vm(e){const n=Jt(this.Np).j_().qh().gt();n!==null&&n.X(e,!1)}pm(e){const n=this.$i().Yc();this.Mm(e,Th,bx,n),this.Mm(e,Th,Hh,n)}bm(e){this.Mm(e,Th,Hh,this.$i().Zc())}fm(e,n){const r=Jt(this.Np).Uo();for(const s of r)this.Mm(e,n,bx,s);for(const s of r)this.Mm(e,n,Hh,s)}Mm(e,n,r,s){const l=Jt(this.Np),c=l.$t().Wc(),d=c!==null&&c.Hc===s,h=c!==null&&d&&c.Iv!==void 0?c.Iv.Mr:void 0;_x(n,g=>r(g,e,d,h),s,l)}Zp(){if(this.Np===null)return;const e=this.Qd,n=this.Np.R_().W().visible,r=this.Np.D_().W().visible;n||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),r||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const s=e.$t().ud();n&&this.Cp===null&&(this.Cp=new yS(this,e.W(),s,"left"),this.jp.appendChild(this.Cp.lp())),r&&this.Tp===null&&(this.Tp=new yS(this,e.W(),s,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,n,r){this.$i().ld(this.Sm(e),this.km(n),r,Jt(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,n,r){this.Ip=e,this.zp=!1,this.Gp(n.x,n.y,r);const s=this.$i().Zc();this.Lp={x:s.Yt(),y:s.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const n=this.$i(),r=this.fp();if(n.z_(r,r.vn()),this.Rp=null,this.Dp=!1,n.ed(),this.Ep!==null){const s=performance.now(),l=n.St();this.Ep.Vr(l.Hu(),s),this.Ep.Qu(s)||n.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Jt(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const n=this.$i(),r=n.St();if(r.Ni())return;const s=this.Qd.W(),l=s.handleScroll,c=s.kineticScroll;if((!l.pressedMouseMove||e.Dv)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!e.Dv))return;const d=this.Np.vn(),h=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:h,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&c.touch||!e.Dv&&c.mouse){const g=r.le();this.Ep=new Cz(.2/g,7/g,.997,15/g),this.Ep.Yd(r.Hu(),this.Rp.Od)}else this.Ep=null;d.Ni()||n.A_(this.Np,d,e.localY),n.nd(e.localX),this.Dp=!0}this.Dp&&(d.Ni()||n.I_(this.Np,d,e.localY),n.sd(e.localX),this.Ep!==null&&this.Ep.Yd(r.Hu(),h))}}class vS{constructor(e,n,r,s,l){this.ft=!0,this.Ev=es({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=r.ud,this.cn=n,this.Tm=s,this.Pm=l,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=zo(this.Kv,es({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Bo(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Do(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const n=Po(this.Gv);n!==null&&n.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r)})}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const l=Math.floor(this.Oc.W().C*r),c=Math.floor(this.Oc.W().C*s),d=this.qv?n.width-l:0;e.fillRect(d,0,l,c)}mp({context:e,bitmapSize:n}){B0(e,0,0,n.width,n.height,this.Pm())}}function W1(t){return e=>{var n,r;return(r=(n=e.fa)===null||n===void 0?void 0:n.call(e,t))!==null&&r!==void 0?r:[]}}const Lz=W1("normal"),Iz=W1("top"),Pz=W1("bottom");class Fz{constructor(e,n){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=es({width:0,height:0}),this.Om=new ys,this.Fv=new Bd(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=n,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=zo(this.Im,es({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=zo(this.Im,es({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const s=this.Jv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new U1(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Bo(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Bo(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,n,r){Do(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(es({width:n,height:e.height})),this.Dm!==null&&this.Dm.cp(es({width:r,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const r=Po(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s),this.Ie(s),this.$m(r,Pz)}),this.wp(r),this.$m(r,Lz)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const n=Po(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],n),this.$m(n,Iz))}$m(e,n){const r=this.Qd.$t().wt();for(const s of r)_x(n,l=>bx(l,e,!1,void 0),s,void 0);for(const s of r)_x(n,l=>Hh(l,e,!1,void 0),s,void 0)}mp({context:e,bitmapSize:n}){B0(e,0,0,n.width,n.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:n,verticalPixelRatio:r}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const s=Math.max(1,Math.floor(this.jm().C*r));e.fillRect(0,0,n.width,s)}}wp(e){const n=this.Qd.$t().St(),r=n.Ha();if(!r||r.length===0)return;const s=this.q_.maxTickMarkWeight(r),l=this.jm(),c=n.W();c.borderVisible&&c.ticksVisible&&e.useBitmapCoordinateSpace(({context:d,horizontalPixelRatio:h,verticalPixelRatio:g})=>{d.strokeStyle=this.qm(),d.fillStyle=this.qm();const p=Math.max(1,Math.floor(h)),y=Math.floor(.5*h);d.beginPath();const _=Math.round(l.T*g);for(let b=r.length;b--;){const k=Math.round(r[b].coord*h);d.rect(k-y,0,p,_)}d.fill()}),e.useMediaCoordinateSpace(({context:d})=>{const h=l.C+l.T+l.L+l.P/2;d.textAlign="center",d.textBaseline="middle",d.fillStyle=this.$(),d.font=this._p();for(const g of r)if(g.weight<s){const p=g.needAlignCoordinate?this.Ym(d,g.coord,g.label):g.coord;d.fillText(g.label,p,h)}this.Qd.W().timeScale.allowBoldLabels&&(d.font=this.Zm());for(const g of r)if(g.weight>=s){const p=g.needAlignCoordinate?this.Ym(d,g.coord,g.label):g.coord;d.fillText(g.label,p,h)}})}Ym(e,n,r){const s=this.Fv.xi(e,r),l=s/2,c=Math.floor(n-l)+.5;return c<0?n+=Math.abs(0-c):c+s>this.Ev.width&&(n-=Math.abs(this.Ev.width-(c+s))),n}Um(e,n){const r=this.jm();for(const s of e)for(const l of s.Qi())l.gt().X(n,r)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Yc(this.j(),this.cn.fontFamily)}Zm(){return Yc(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Bd,Hm:0});const e=this.k,n=this._p();if(e.R!==n){const r=this.j();e.P=r,e.R=n,e.L=3*r/12,e.B=3*r/12,e.ji=9*r/12,e.N=0,e.Hm=4*r/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),n=e.W();n.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),n.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const r={ud:this.Qd.$t().ud()},s=()=>n.leftPriceScale.borderVisible&&e.St().W().borderVisible,l=()=>e.bd();n.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new vS("left",n,r,s,l),this.Bm.appendChild(this.Rm.lp())),n.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new vS("right",n,r,s,l),this.Am.appendChild(this.Dm.lp()))}}const zz=!!Gc&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Gc&&(!((Am=navigator==null?void 0:navigator.userAgentData)===null||Am===void 0)&&Am.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Am;class Bz{constructor(e,n,r){var s;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new ys,this.Op=new ys,this.Rc=new ys,this.ib=null,this.nb=null,this.Jd=e,this.cn=n,this.q_=r,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(s=this.Xd).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),Om(this.cn)&&this.hb(!0),this.$i=new wz(this.Vc.bind(this),this.cn,r),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new Fz(this,this.q_),this.sb.appendChild(this.ab.lp());const l=n.autoSize&&this.ob();let c=this.cn.width,d=this.cn.height;if(l||c===0||d===0){const h=e.getBoundingClientRect();c=c||h.width,d=d||h.height}this._b(c,d),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],Jt(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,n,r=!1){if(this.ho===n&&this.__===e)return;const s=function(d){const h=Math.floor(d.width),g=Math.floor(d.height);return es({width:h-h%2,height:g-g%2})}(es({width:e,height:n}));this.ho=s.height,this.__=s.width;const l=this.ho+"px",c=this.__+"px";Jt(this.Xd).style.height=l,Jt(this.Xd).style.width=c,this.sb.style.height=l,this.sb.style.width=c,r?this.mb(Ws.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=Ws.es());for(let n=0;n<this.Xm.length;n++)this.Xm[n].vp(e.Hn(n).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const n=Om(this.cn);this.$i.$h(e);const r=Om(this.cn);r!==n&&this.hb(r),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=Jt(n.getContext("2d"));return this.gb(r),n}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:Jt(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return ui(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let n=0,r=0;const s=this.Xm[0],l=(d,h)=>{let g=0;for(let p=0;p<this.Xm.length;p++){const y=this.Xm[p],_=Jt(d==="left"?y.wm():y.gm()),b=_.xp();e!==null&&_.Sp(e,h,g),g+=b.height}};this.xb()&&(l("left",0),n+=Jt(s.wm()).xp().width);for(let d=0;d<this.Xm.length;d++){const h=this.Xm[d],g=h.xp();e!==null&&h.Sp(e,n,r),r+=g.height}n+=s.xp().width,this.Sb()&&(l("right",n),n+=Jt(s.gm()).xp().width);const c=(d,h,g)=>{Jt(d==="left"?this.ab.Lm():this.ab.Em()).Sp(Jt(e),h,g)};if(this.cn.timeScale.visible){const d=this.ab.xp();if(e!==null){let h=0;this.xb()&&(c("left",h,r),h=Jt(s.wm()).xp().width),this.ab.Sp(e,h,r),h+=d.width,this.Sb()&&c("right",h,r)}r+=d.height}return es({width:n,height:r})}Pb(){let e=0,n=0,r=0;for(const k of this.Xm)this.xb()&&(n=Math.max(n,Jt(k.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(r=Math.max(r,Jt(k.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=k.M_();n=vx(n),r=vx(r);const s=this.__,l=this.ho,c=Math.max(s-n-r,0),d=this.cn.timeScale.visible;let h=d?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var g;h=(g=h)+g%2;const p=0+h,y=l<p?0:l-p,_=y/e;let b=0;for(let k=0;k<this.Xm.length;++k){const S=this.Xm[k];S.qp(this.$i.qc()[k]);let E=0,O=0;O=k===this.Xm.length-1?y-b:Math.round(S.M_()*_),E=Math.max(O,2),b+=E,S.cp(es({width:c,height:E})),this.xb()&&S._m(n,"left"),this.Sb()&&S._m(r,"right"),S.fp()&&this.$i.Kc(S.fp(),E)}this.ab.Fm(es({width:d?c:0,height:h}),d?n:0,d?r:0),this.$i.S_(c),this.Gm!==n&&(this.Gm=n),this.Jm!==r&&(this.Jm=r)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return zz?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const n=this.Rb(e),r=n*e.deltaX/100,s=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.cn.handleScale.mouseWheel){const l=Math.sign(s)*Math.min(1,Math.abs(s)),c=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(c,l)}r!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*r)}mb(e,n){var r;const s=e.jn();s===3&&this.Db(),s!==3&&s!==2||(this.Vb(e),this.Ob(e,n),this.ab.bt(),this.Xm.forEach(l=>{l.Xp()}),((r=this.Qm)===null||r===void 0?void 0:r.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,n),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,n){for(const r of e.Qn())this.ns(r,n)}Vb(e){const n=this.$i.qc();for(let r=0;r<n.length;r++)e.Hn(r).Wn&&n[r].N_()}ns(e,n){const r=this.$i.St();switch(e.qn){case 0:r.hc();break;case 1:r.lc(e.Vt);break;case 2:r.Gn(e.Vt);break;case 3:r.Jn(e.Vt);break;case 4:r.qu();break;case 5:e.Vt.Qu(n)||r.Jn(e.Vt.tc(n))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(n=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const r=this.Qm;this.Qm=null,this.mb(r,n);for(const s of r.Qn())if(s.qn===5&&!s.Vt.Qu(n)){this.$t().Zn(s.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),n=e.length,r=this.Xm.length;for(let s=n;s<r;s++){const l=ui(this.Xm.pop());this.sb.removeChild(l.lp()),l.lm().p(this),l.am().p(this),l.S()}for(let s=r;s<n;s++){const l=new $1(this,e[s]);l.lm().l(this.Bb.bind(this),this),l.am().l(this.Ab.bind(this),this),this.Xm.push(l),this.sb.insertBefore(l.lp(),this.ab.lp())}for(let s=0;s<n;s++){const l=e[s],c=this.Xm[s];c.fp()!==l?c.qp(l):c.Up()}this.cb(),this.Pb()}Ib(e,n,r){var s;const l=new Map;e!==null&&this.$i.wt().forEach(p=>{const y=p.In().ll(e);y!==null&&l.set(p,y)});let c;if(e!==null){const p=(s=this.$i.St().Ui(e))===null||s===void 0?void 0:s.originalTime;p!==void 0&&(c=p)}const d=this.$t().Wc(),h=d!==null&&d.Hc instanceof B1?d.Hc:void 0,g=d!==null&&d.Iv!==void 0?d.Iv.gr:void 0;return{zb:c,ee:e??void 0,Lb:n??void 0,Eb:h,Nb:l,Fb:g,Wb:r??void 0}}Bb(e,n,r){this.Vp.m(()=>this.Ib(e,n,r))}Ab(e,n,r){this.Op.m(()=>this.Ib(e,n,r))}lb(e,n,r){this.Rc.m(()=>this.Ib(e,n,r))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const n=e.find(r=>r.target===this.Jd);n&&this._b(n.contentRect.width,n.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function Om(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function Hz(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function sT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n}function bS(t,e,n,r){const s=n.value,l={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.color!==void 0&&(l.V=n.color),l}function Uz(t,e,n,r){const s=n.value,l={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.lineColor!==void 0&&(l.lt=n.lineColor),n.topColor!==void 0&&(l.Ps=n.topColor),n.bottomColor!==void 0&&(l.Rs=n.bottomColor),l}function $z(t,e,n,r){const s=n.value,l={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.topLineColor!==void 0&&(l.Re=n.topLineColor),n.bottomLineColor!==void 0&&(l.De=n.bottomLineColor),n.topFillColor1!==void 0&&(l.ke=n.topFillColor1),n.topFillColor2!==void 0&&(l.ye=n.topFillColor2),n.bottomFillColor1!==void 0&&(l.Ce=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(l.Te=n.bottomFillColor2),l}function Wz(t,e,n,r){const s={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(s.V=n.color),s}function Vz(t,e,n,r){const s={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(s.V=n.color),n.borderColor!==void 0&&(s.Ot=n.borderColor),n.wickColor!==void 0&&(s.Xh=n.wickColor),s}function Yz(t,e,n,r,s){const l=ui(s)(n),c=Math.max(...l),d=Math.min(...l),h=l[l.length-1],g=[h,c,d,h],p=n,{time:y,color:_}=p;return{ee:e,ot:t,Vt:g,zb:r,$e:sT(p,["time","color"]),V:_}}function Ch(t){return t.Vt!==void 0}function _S(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function No(t){return(e,n,r,s,l,c)=>function(d,h){return h?h(d):(g=d).open===void 0&&g.value===void 0;var g}(r,c)?_S({ot:e,ee:n,zb:s},r):_S(t(e,n,r,s,l),r)}function SS(t){return{Candlestick:No(Vz),Bar:No(Wz),Area:No(Uz),Baseline:No($z),Histogram:No(bS),Line:No(bS),Custom:No(Yz)}[t]}function wS(t){return{ee:0,Hb:new Map,la:t}}function kS(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function ES(t){let e;return t.forEach(n=>{e===void 0&&(e=n.zb)}),ui(e)}class Gz{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,n){let r=this.qb.size!==0,s=!1;const l=this.Yb.get(e);if(l!==void 0)if(this.Yb.size===1)r=!1,s=!0,this.qb.clear();else for(const h of this.Xb)h.pointData.Hb.delete(e)&&(s=!0);let c=[];if(n.length!==0){const h=n.map(b=>b.time),g=this.q_.createConverterToInternalObj(n),p=SS(e.Qh()),y=e.Ca(),_=e.Ta();c=n.map((b,k)=>{const S=g(b.time),E=this.q_.key(S);let O=this.qb.get(E);O===void 0&&(O=wS(S),this.qb.set(E,O),s=!0);const T=p(S,O.ee,b,h[k],y,_);return O.Hb.set(e,T),T})}r&&this.Gb(),this.Jb(e,c);let d=-1;if(s){const h=[];this.qb.forEach(g=>{h.push({timeWeight:0,time:g.la,pointData:g,originalTime:ES(g.Hb)})}),h.sort((g,p)=>this.q_.key(g.time)-this.q_.key(p.time)),d=this.Qb(h)}return this.tw(e,d,function(h,g,p){const y=kS(h,p),_=kS(g,p);if(y!==void 0&&_!==void 0)return{ta:y.Ub>=_.Ub&&y.$b>=_.$b}}(this.Yb.get(e),l,this.q_))}vd(e){return this.Kb(e,[])}iw(e,n){const r=n;(function(S){S.zb===void 0&&(S.zb=S.time)})(r),this.q_.preprocessData(n);const s=this.q_.createConverterToInternalObj([n])(n.time),l=this.Zb.get(e);if(l!==void 0&&this.q_.key(s)<this.q_.key(l))throw new Error(`Cannot update oldest data, last time=${l}, new time=${s}`);let c=this.qb.get(this.q_.key(s));const d=c===void 0;c===void 0&&(c=wS(s),this.qb.set(this.q_.key(s),c));const h=SS(e.Qh()),g=e.Ca(),p=e.Ta(),y=h(s,c.ee,n,r.zb,g,p);c.Hb.set(e,y),this.nw(e,y);const _={ta:Ch(y)};if(!d)return this.tw(e,-1,_);const b={timeWeight:0,time:c.la,pointData:c,originalTime:ES(c.Hb)},k=sf(this.Xb,this.q_.key(b.time),(S,E)=>this.q_.key(S.time)<E);this.Xb.splice(k,0,b);for(let S=k;S<this.Xb.length;++S)Dm(this.Xb[S].pointData,S);return this.q_.fillWeightsForPoints(this.Xb,k),this.tw(e,k,_)}nw(e,n){let r=this.Yb.get(e);r===void 0&&(r=[],this.Yb.set(e,r));const s=r.length!==0?r[r.length-1]:null;s===null||this.q_.key(n.ot)>this.q_.key(s.ot)?Ch(n)&&r.push(n):Ch(n)?r[r.length-1]=n:r.splice(-1,1),this.Zb.set(e,n.ot)}Jb(e,n){n.length!==0?(this.Yb.set(e,n.filter(Ch)),this.Zb.set(e,n[n.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let n=-1;for(let r=0;r<this.Xb.length&&r<e.length;++r){const s=this.Xb[r],l=e[r];if(this.q_.key(s.time)!==this.q_.key(l.time)){n=r;break}l.timeWeight=s.timeWeight,Dm(l.pointData,r)}if(n===-1&&this.Xb.length!==e.length&&(n=Math.min(this.Xb.length,e.length)),n===-1)return-1;for(let r=n;r<e.length;++r)Dm(e[r].pointData,r);return this.q_.fillWeightsForPoints(e,n),this.Xb=e,n}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].ee))}),e}tw(e,n,r){const s={ew:new Map,St:{Eu:this.sw()}};if(n!==-1)this.Yb.forEach((l,c)=>{s.ew.set(c,{$e:l,rw:c===e?r:void 0})}),this.Yb.has(e)||s.ew.set(e,{$e:[],rw:r}),s.St.hw=this.Xb,s.St.lw=n;else{const l=this.Yb.get(e);s.ew.set(e,{$e:l||[],rw:r})}return s}}function Dm(t,e){t.ee=e,t.Hb.forEach(n=>{n.ee=e})}function V1(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function NS(t){const e=V1(t);return t.V!==void 0&&(e.color=t.V),e}function qz(t){const e=V1(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function Jz(t){const e=V1(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function iT(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function Xz(t){const e=iT(t);return t.V!==void 0&&(e.color=t.V),e}function Kz(t){const e=iT(t),{V:n,Ot:r,Xh:s}=t;return n!==void 0&&(e.color=n),r!==void 0&&(e.borderColor=r),s!==void 0&&(e.wickColor=s),e}function Sx(t){return{Area:qz,Line:NS,Baseline:Jz,Histogram:NS,Bar:Xz,Candlestick:Kz,Custom:Zz}[t]}function Zz(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const Qz={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},eB={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},tB={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:M1,attributionLogo:!0},Rm={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},nB={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},rB={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:M1,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function TS(){return{width:0,height:0,autoSize:!1,layout:tB,crosshair:Qz,grid:eB,overlayPriceScales:Object.assign({},Rm),leftPriceScale:Object.assign(Object.assign({},Rm),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Rm),{visible:!0}),timeScale:nB,watermark:rB,localization:{locale:Gc?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class sB{constructor(e,n){this.aw=e,this.ow=n}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return U0(this.ow)?this.aw.Mb(this.ow):0}Li(){return Jt(this.aw.$t().Uc(this.ow)).Dt}}function CS(t,e,n){const r=sT(t,["time","originalTime"]),s=Object.assign({time:e},r);return n!==void 0&&(s.originalTime=n),s}const iB={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class aB{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class lB{constructor(e,n,r,s,l){this.uw=new ys,this.Es=e,this.cw=n,this.dw=r,this.q_=l,this.fw=s}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().Rt(e,n.Vt)}coordinateToPrice(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().pn(e,n.Vt)}barsInLogicalRange(e){if(e===null)return null;const n=new Wc(new Sd(e.from,e.to)).lu(),r=this.Es.In();if(r.Ni())return null;const s=r.ll(n.Os(),1),l=r.ll(n.ui(),-1),c=Jt(r.el()),d=Jt(r.An());if(s!==null&&l!==null&&s.ee>l.ee)return{barsBefore:e.from-c,barsAfter:d-e.to};const h={barsBefore:s===null||s.ee===c?e.from-c:s.ee-c,barsAfter:l===null||l.ee===d?d-e.to:d-l.ee};return s!==null&&l!==null&&(h.from=s.zb,h.to=l.zb),h}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,n){const r=this.Es.In().ll(e,n);return r===null?null:Sx(this.seriesType())(r)}data(){const e=Sx(this.seriesType());return this.Es.In().ne().map(n=>e(n))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const n=e.map(r=>CS(r,this.q_.convertHorzItemToInternal(r.time),r.time));this.Es.na(n)}markers(){return this.Es.sa().map(e=>CS(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return ll(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const n=xa(ll(iB),e),r=this.Es.ea(n);return new aB(r)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class oB{constructor(e,n,r){this.ww=new ys,this.mu=new ys,this.Om=new ys,this.$i=e,this.yl=e.St(),this.ab=n,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=r}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,n){n?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},r=this.yl.Iu(n);this.$i.pd(r)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){so(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const n=this.$i.St();return n.Ni()?null:n.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const n=this.q_.convertHorzItemToInternal(e),r=this.yl.Va(n,!1);return r===null?null:this.yl.It(r)}coordinateToTime(e){const n=this.$i.St(),r=n.Nu(e),s=n.Ui(r);return s===null?null:s.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},ll(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function cB(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(n){if(n>=1)return 0;let r=0;for(;r<8;r++){const s=Math.round(n);if(Math.abs(s-n)<1e-8)return r;n*=10}return r}(e.minMove))}function jS(t){return function(e){if(vh(e.handleScale)){const r=e.handleScale;e.handleScale={axisDoubleClickReset:{time:r,price:r},axisPressedMouseMove:{time:r,price:r},mouseWheel:r,pinch:r}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:r,axisDoubleClickReset:s}=e.handleScale;vh(r)&&(e.handleScale.axisPressedMouseMove={time:r,price:r}),vh(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const n=e.handleScroll;vh(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class uB{constructor(e,n,r){this.Sw=new Map,this.kw=new Map,this.yw=new ys,this.Cw=new ys,this.Tw=new ys,this.Pw=new Gz(n);const s=r===void 0?ll(TS()):xa(ll(TS()),jS(r));this.q_=n,this.aw=new Bz(e,s,n),this.aw.lm().l(c=>{this.yw.M()&&this.yw.m(this.Rw(c()))},this),this.aw.am().l(c=>{this.Cw.M()&&this.Cw.m(this.Rw(c()))},this),this.aw.Xc().l(c=>{this.Tw.M()&&this.Tw.m(this.Rw(c()))},this);const l=this.aw.$t();this.Dw=new oB(l,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,n,r){this.autoSizeActive()||this.aw._b(e,n,r)}addCustomSeries(e,n){const r=Mc(e),s=Object.assign(Object.assign({},MN),r.defaultOptions());return this.Vw("Custom",s,n,r)}addAreaSeries(e){return this.Vw("Area",GF,e)}addBaselineSeries(e){return this.Vw("Baseline",qF,e)}addBarSeries(e){return this.Vw("Bar",VF,e)}addCandlestickSeries(e={}){return function(n){n.borderColor!==void 0&&(n.borderUpColor=n.borderColor,n.borderDownColor=n.borderColor),n.wickColor!==void 0&&(n.wickUpColor=n.wickColor,n.wickDownColor=n.wickColor)}(e),this.Vw("Candlestick",WF,e)}addHistogramSeries(e){return this.Vw("Histogram",JF,e)}addLineSeries(e){return this.Vw("Line",YF,e)}removeSeries(e){const n=ui(this.Sw.get(e)),r=this.Pw.vd(n);this.aw.$t().vd(n),this.Ow(r),this.Sw.delete(e),this.kw.delete(n)}pw(e,n){this.Ow(this.Pw.Kb(e,n))}bw(e,n){this.Ow(this.Pw.iw(e,n))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new sB(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(jS(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,n,r){const s=this.Sw.get(r);if(s===void 0)return;const l=this.aw.$t().dr(s);l!==null&&this.aw.$t().ad(e,n,l)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,n,r={},s){cB(r.priceFormat);const l=xa(ll(LN),ll(n),r),c=this.aw.$t().dd(e,l,s),d=new lB(c,this,this,this,this.q_);return this.Sw.set(d,c),this.kw.set(c,d),d}Ow(e){const n=this.aw.$t();n._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((r,s)=>s.J(r.$e,r.rw)),n.Wu()}Bw(e){return ui(this.kw.get(e))}Rw(e){const n=new Map;e.Nb.forEach((s,l)=>{const c=l.Qh(),d=Sx(c)(s);if(c!=="Custom")so(Hz(d));else{const h=l.Ta();so(!h||h(d)===!1)}n.set(this.Bw(l),d)});const r=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:r,hoveredObjectId:e.Fb,seriesData:n,sourceEvent:e.Wb}}}function dB(t,e,n){let r;if(rf(t)){const l=document.getElementById(t);so(l!==null,`Cannot find element in DOM with id=${t}`),r=l}else r=t;const s=new uB(r,e,n);return e.setOptions(s.options()),s}function fB(t,e){return dB(t,new gS,gS.Id(e))}Object.assign(Object.assign({},LN),MN);class AS{constructor(e,n,r){this.next=r,r&&(r.prev=this),this.prev=n,n&&(n.next=this),this.data=e}}class hB{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new AS(e,this._tail),this._length===0&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new AS(e,void 0,this._head),this._length===0&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(e!==void 0)return this._next=e.next,this._current=e,e.data}}let gB={};function pB(t){return gB[t]}function mB(t){let e=pB("precision");return e?parseFloat(t.toPrecision(e)):t}class Fs{constructor(e){this.format=e.format||mB}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class Ud extends Fs{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=function*(r){var s=new hB,l=0,c=1,d=yield,h;for(s.push(0);;)c<r?(c++,s.push(d),l=l+d):(l=l-s.shift()+d,h=l/r,s.push(d)),d=yield h};this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var s=this.generator.next(r);s.value!==void 0&&this.result.push(this.format(s.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Ud.calculate=xB;function xB(t){Fs.reverseInputs(t);var e=new Ud(t).result;return t.reversedInput&&e.reverse(),Fs.reverseInputs(t),e}class p0 extends Fs{constructor(e){super(e);var n=e.period,r=e.values,s=2/(n+1),l;this.result=[],l=new Ud({period:n,values:[]});var c=function*(){for(var d=yield,h;;)h!==void 0&&d!==void 0?(h=(d-h)*s+h,d=yield h):(d=yield,h=l.nextValue(d),h&&(d=yield h))};this.generator=c(),this.generator.next(),this.generator.next(),r.forEach(d=>{var h=this.generator.next(d);h.value!=null&&this.result.push(this.format(h.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}p0.calculate=yB;function yB(t){Fs.reverseInputs(t);var e=new p0(t).result;return t.reversedInput&&e.reverse(),Fs.reverseInputs(t),e}class Y1 extends Fs{constructor(e){super(e);var n=e.SimpleMAOscillator?Ud:p0,r=e.SimpleMASignal?Ud:p0,s=new n({period:e.fastPeriod,values:[],format:h=>h}),l=new n({period:e.slowPeriod,values:[],format:h=>h}),c=new r({period:e.signalPeriod,values:[],format:h=>h}),d=this.format;this.result=[],this.generator=function*(){for(var h=0,g,p,y,_,b,k;;){if(h<e.slowPeriod){g=yield,b=s.nextValue(g),k=l.nextValue(g),h++;continue}b&&k&&(p=b-k,y=c.nextValue(p)),_=p-y,g=yield{MACD:d(p),signal:y?d(y):void 0,histogram:isNaN(_)?void 0:d(_)},b=s.nextValue(g),k=l.nextValue(g)}}(),this.generator.next(),e.values.forEach(h=>{var g=this.generator.next(h);g.value!=null&&this.result.push(g.value)})}nextValue(e){var n=this.generator.next(e).value;return n}}Y1.calculate=vB;function vB(t){Fs.reverseInputs(t);var e=new Y1(t).result;return t.reversedInput&&e.reverse(),Fs.reverseInputs(t),e}class G1 extends Fs{constructor(e){super(e);let n=e.values,r=e.period,s=this.format;this.generator=function*(l){var c=yield,d=1,h=0,g,p,y=c;for(c=yield;;)p=c-y,p=p>0?p:0,p>0&&(h=h+p),d<l?d++:g===void 0?g=h/l:g=(g*(l-1)+p)/l,y=c,g=g!==void 0?s(g):void 0,c=yield g}(r),this.generator.next(),this.result=[],n.forEach(l=>{var c=this.generator.next(l);c.value!==void 0&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}G1.calculate=bB;function bB(t){Fs.reverseInputs(t);var e=new G1(t).result;return t.reversedInput&&e.reverse(),Fs.reverseInputs(t),e}class q1 extends Fs{constructor(e){super(e);let n=e.values,r=e.period,s=this.format;this.generator=function*(l){var c=yield,d=1,h=0,g,p,y=c;for(c=yield;;)p=y-c,p=p>0?p:0,p>0&&(h=h+p),d<l?d++:g===void 0?g=h/l:g=(g*(l-1)+p)/l,y=c,g=g!==void 0?s(g):void 0,c=yield g}(r),this.generator.next(),this.result=[],n.forEach(l=>{var c=this.generator.next(l);c.value!==void 0&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}q1.calculate=_B;function _B(t){Fs.reverseInputs(t);var e=new q1(t).result;return t.reversedInput&&e.reverse(),Fs.reverseInputs(t),e}class J1 extends Fs{constructor(e){super(e);var n=e.period,r=e.values,s=new G1({period:n,values:[]}),l=new q1({period:n,values:[]});this.generator=function*(c){for(var d=yield,h,g,p,y;;)h=s.nextValue(d),g=l.nextValue(d),h!==void 0&&g!==void 0&&(g===0?y=100:h===0?y=0:(p=h/g,p=isNaN(p)?0:p,y=parseFloat((100-100/(1+p)).toFixed(2)))),d=yield y}(),this.generator.next(),this.result=[],r.forEach(c=>{var d=this.generator.next(c);d.value!==void 0&&this.result.push(d.value)})}nextValue(e){return this.generator.next(e).value}}J1.calculate=SB;function SB(t){Fs.reverseInputs(t);var e=new J1(t).result;return t.reversedInput&&e.reverse(),Fs.reverseInputs(t),e}function aT(t,e){return function(){return t.apply(e,arguments)}}const{toString:wB}=Object.prototype,{getPrototypeOf:X1}=Object,{iterator:V0,toStringTag:lT}=Symbol,Y0=(t=>e=>{const n=wB.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ba=t=>(t=t.toLowerCase(),e=>Y0(e)===t),G0=t=>e=>typeof e===t,{isArray:su}=Array,$d=G0("undefined");function kB(t){return t!==null&&!$d(t)&&t.constructor!==null&&!$d(t.constructor)&&yi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const oT=ba("ArrayBuffer");function EB(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&oT(t.buffer),e}const NB=G0("string"),yi=G0("function"),cT=G0("number"),q0=t=>t!==null&&typeof t=="object",TB=t=>t===!0||t===!1,Uh=t=>{if(Y0(t)!=="object")return!1;const e=X1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(lT in t)&&!(V0 in t)},CB=ba("Date"),jB=ba("File"),AB=ba("Blob"),OB=ba("FileList"),DB=t=>q0(t)&&yi(t.pipe),RB=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||yi(t.append)&&((e=Y0(t))==="formdata"||e==="object"&&yi(t.toString)&&t.toString()==="[object FormData]"))},MB=ba("URLSearchParams"),[LB,IB,PB,FB]=["ReadableStream","Request","Response","Headers"].map(ba),zB=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function af(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),su(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const l=n?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let d;for(r=0;r<c;r++)d=l[r],e.call(null,t[d],d,t)}}function uT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const jo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dT=t=>!$d(t)&&t!==jo;function wx(){const{caseless:t}=dT(this)&&this||{},e={},n=(r,s)=>{const l=t&&uT(e,s)||s;Uh(e[l])&&Uh(r)?e[l]=wx(e[l],r):Uh(r)?e[l]=wx({},r):su(r)?e[l]=r.slice():e[l]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&af(arguments[r],n);return e}const BB=(t,e,n,{allOwnKeys:r}={})=>(af(e,(s,l)=>{n&&yi(s)?t[l]=aT(s,n):t[l]=s},{allOwnKeys:r}),t),HB=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),UB=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},$B=(t,e,n,r)=>{let s,l,c;const d={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),l=s.length;l-- >0;)c=s[l],(!r||r(c,t,e))&&!d[c]&&(e[c]=t[c],d[c]=!0);t=n!==!1&&X1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},WB=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},VB=t=>{if(!t)return null;if(su(t))return t;let e=t.length;if(!cT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},YB=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&X1(Uint8Array)),GB=(t,e)=>{const r=(t&&t[V0]).call(t);let s;for(;(s=r.next())&&!s.done;){const l=s.value;e.call(t,l[0],l[1])}},qB=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},JB=ba("HTMLFormElement"),XB=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),OS=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),KB=ba("RegExp"),fT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};af(n,(s,l)=>{let c;(c=e(s,l,t))!==!1&&(r[l]=c||s)}),Object.defineProperties(t,r)},ZB=t=>{fT(t,(e,n)=>{if(yi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(yi(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},QB=(t,e)=>{const n={},r=s=>{s.forEach(l=>{n[l]=!0})};return su(t)?r(t):r(String(t).split(e)),n},e9=()=>{},t9=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function n9(t){return!!(t&&yi(t.append)&&t[lT]==="FormData"&&t[V0])}const r9=t=>{const e=new Array(10),n=(r,s)=>{if(q0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const l=su(r)?[]:{};return af(r,(c,d)=>{const h=n(c,s+1);!$d(h)&&(l[d]=h)}),e[s]=void 0,l}}return r};return n(t,0)},s9=ba("AsyncFunction"),i9=t=>t&&(q0(t)||yi(t))&&yi(t.then)&&yi(t.catch),hT=((t,e)=>t?setImmediate:e?((n,r)=>(jo.addEventListener("message",({source:s,data:l})=>{s===jo&&l===n&&r.length&&r.shift()()},!1),s=>{r.push(s),jo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",yi(jo.postMessage)),a9=typeof queueMicrotask<"u"?queueMicrotask.bind(jo):typeof process<"u"&&process.nextTick||hT,l9=t=>t!=null&&yi(t[V0]),it={isArray:su,isArrayBuffer:oT,isBuffer:kB,isFormData:RB,isArrayBufferView:EB,isString:NB,isNumber:cT,isBoolean:TB,isObject:q0,isPlainObject:Uh,isReadableStream:LB,isRequest:IB,isResponse:PB,isHeaders:FB,isUndefined:$d,isDate:CB,isFile:jB,isBlob:AB,isRegExp:KB,isFunction:yi,isStream:DB,isURLSearchParams:MB,isTypedArray:YB,isFileList:OB,forEach:af,merge:wx,extend:BB,trim:zB,stripBOM:HB,inherits:UB,toFlatObject:$B,kindOf:Y0,kindOfTest:ba,endsWith:WB,toArray:VB,forEachEntry:GB,matchAll:qB,isHTMLForm:JB,hasOwnProperty:OS,hasOwnProp:OS,reduceDescriptors:fT,freezeMethods:ZB,toObjectSet:QB,toCamelCase:XB,noop:e9,toFiniteNumber:t9,findKey:uT,global:jo,isContextDefined:dT,isSpecCompliantForm:n9,toJSONObject:r9,isAsyncFn:s9,isThenable:i9,setImmediate:hT,asap:a9,isIterable:l9};function Kn(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}it.inherits(Kn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:it.toJSONObject(this.config),code:this.code,status:this.status}}});const gT=Kn.prototype,pT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pT[t]={value:t}});Object.defineProperties(Kn,pT);Object.defineProperty(gT,"isAxiosError",{value:!0});Kn.from=(t,e,n,r,s,l)=>{const c=Object.create(gT);return it.toFlatObject(t,c,function(h){return h!==Error.prototype},d=>d!=="isAxiosError"),Kn.call(c,t.message,e,n,r,s),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const o9=null;function kx(t){return it.isPlainObject(t)||it.isArray(t)}function mT(t){return it.endsWith(t,"[]")?t.slice(0,-2):t}function DS(t,e,n){return t?t.concat(e).map(function(s,l){return s=mT(s),!n&&l?"["+s+"]":s}).join(n?".":""):e}function c9(t){return it.isArray(t)&&!t.some(kx)}const u9=it.toFlatObject(it,{},null,function(e){return/^is[A-Z]/.test(e)});function J0(t,e,n){if(!it.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=it.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,E){return!it.isUndefined(E[S])});const r=n.metaTokens,s=n.visitor||p,l=n.dots,c=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&it.isSpecCompliantForm(e);if(!it.isFunction(s))throw new TypeError("visitor must be a function");function g(k){if(k===null)return"";if(it.isDate(k))return k.toISOString();if(it.isBoolean(k))return k.toString();if(!h&&it.isBlob(k))throw new Kn("Blob is not supported. Use a Buffer instead.");return it.isArrayBuffer(k)||it.isTypedArray(k)?h&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function p(k,S,E){let O=k;if(k&&!E&&typeof k=="object"){if(it.endsWith(S,"{}"))S=r?S:S.slice(0,-2),k=JSON.stringify(k);else if(it.isArray(k)&&c9(k)||(it.isFileList(k)||it.endsWith(S,"[]"))&&(O=it.toArray(k)))return S=mT(S),O.forEach(function(D,F){!(it.isUndefined(D)||D===null)&&e.append(c===!0?DS([S],F,l):c===null?S:S+"[]",g(D))}),!1}return kx(k)?!0:(e.append(DS(E,S,l),g(k)),!1)}const y=[],_=Object.assign(u9,{defaultVisitor:p,convertValue:g,isVisitable:kx});function b(k,S){if(!it.isUndefined(k)){if(y.indexOf(k)!==-1)throw Error("Circular reference detected in "+S.join("."));y.push(k),it.forEach(k,function(O,T){(!(it.isUndefined(O)||O===null)&&s.call(e,O,it.isString(T)?T.trim():T,S,_))===!0&&b(O,S?S.concat(T):[T])}),y.pop()}}if(!it.isObject(t))throw new TypeError("data must be an object");return b(t),e}function RS(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function K1(t,e){this._pairs=[],t&&J0(t,this,e)}const xT=K1.prototype;xT.append=function(e,n){this._pairs.push([e,n])};xT.toString=function(e){const n=e?function(r){return e.call(this,r,RS)}:RS;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function d9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yT(t,e,n){if(!e)return t;const r=n&&n.encode||d9;it.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let l;if(s?l=s(e,n):l=it.isURLSearchParams(e)?e.toString():new K1(e,n).toString(r),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class MS{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){it.forEach(this.handlers,function(r){r!==null&&e(r)})}}const vT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},f9=typeof URLSearchParams<"u"?URLSearchParams:K1,h9=typeof FormData<"u"?FormData:null,g9=typeof Blob<"u"?Blob:null,p9={isBrowser:!0,classes:{URLSearchParams:f9,FormData:h9,Blob:g9},protocols:["http","https","file","blob","url","data"]},Z1=typeof window<"u"&&typeof document<"u",Ex=typeof navigator=="object"&&navigator||void 0,m9=Z1&&(!Ex||["ReactNative","NativeScript","NS"].indexOf(Ex.product)<0),x9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",y9=Z1&&window.location.href||"http://localhost",v9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Z1,hasStandardBrowserEnv:m9,hasStandardBrowserWebWorkerEnv:x9,navigator:Ex,origin:y9},Symbol.toStringTag,{value:"Module"})),ei={...v9,...p9};function b9(t,e){return J0(t,new ei.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,l){return ei.isNode&&it.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function _9(t){return it.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function S9(t){const e={},n=Object.keys(t);let r;const s=n.length;let l;for(r=0;r<s;r++)l=n[r],e[l]=t[l];return e}function bT(t){function e(n,r,s,l){let c=n[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),h=l>=n.length;return c=!c&&it.isArray(s)?s.length:c,h?(it.hasOwnProp(s,c)?s[c]=[s[c],r]:s[c]=r,!d):((!s[c]||!it.isObject(s[c]))&&(s[c]=[]),e(n,r,s[c],l)&&it.isArray(s[c])&&(s[c]=S9(s[c])),!d)}if(it.isFormData(t)&&it.isFunction(t.entries)){const n={};return it.forEachEntry(t,(r,s)=>{e(_9(r),s,n,0)}),n}return null}function w9(t,e,n){if(it.isString(t))try{return(e||JSON.parse)(t),it.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const lf={transitional:vT,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,l=it.isObject(e);if(l&&it.isHTMLForm(e)&&(e=new FormData(e)),it.isFormData(e))return s?JSON.stringify(bT(e)):e;if(it.isArrayBuffer(e)||it.isBuffer(e)||it.isStream(e)||it.isFile(e)||it.isBlob(e)||it.isReadableStream(e))return e;if(it.isArrayBufferView(e))return e.buffer;if(it.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return b9(e,this.formSerializer).toString();if((d=it.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return J0(d?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||s?(n.setContentType("application/json",!1),w9(e)):e}],transformResponse:[function(e){const n=this.transitional||lf.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(it.isResponse(e)||it.isReadableStream(e))return e;if(e&&it.isString(e)&&(r&&!this.responseType||s)){const c=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?Kn.from(d,Kn.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ei.classes.FormData,Blob:ei.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};it.forEach(["delete","get","head","post","put","patch"],t=>{lf.headers[t]={}});const k9=it.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),E9=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(c){s=c.indexOf(":"),n=c.substring(0,s).trim().toLowerCase(),r=c.substring(s+1).trim(),!(!n||e[n]&&k9[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},LS=Symbol("internals");function td(t){return t&&String(t).trim().toLowerCase()}function $h(t){return t===!1||t==null?t:it.isArray(t)?t.map($h):String(t)}function N9(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const T9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Mm(t,e,n,r,s){if(it.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!it.isString(e)){if(it.isString(r))return e.indexOf(r)!==-1;if(it.isRegExp(r))return r.test(e)}}function C9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function j9(t,e){const n=it.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,l,c){return this[r].call(this,e,s,l,c)},configurable:!0})})}let vi=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function l(d,h,g){const p=td(h);if(!p)throw new Error("header name must be a non-empty string");const y=it.findKey(s,p);(!y||s[y]===void 0||g===!0||g===void 0&&s[y]!==!1)&&(s[y||h]=$h(d))}const c=(d,h)=>it.forEach(d,(g,p)=>l(g,p,h));if(it.isPlainObject(e)||e instanceof this.constructor)c(e,n);else if(it.isString(e)&&(e=e.trim())&&!T9(e))c(E9(e),n);else if(it.isObject(e)&&it.isIterable(e)){let d={},h,g;for(const p of e){if(!it.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[g=p[0]]=(h=d[g])?it.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(d,n)}else e!=null&&l(n,e,r);return this}get(e,n){if(e=td(e),e){const r=it.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return N9(s);if(it.isFunction(n))return n.call(this,s,r);if(it.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=td(e),e){const r=it.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Mm(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function l(c){if(c=td(c),c){const d=it.findKey(r,c);d&&(!n||Mm(r,r[d],d,n))&&(delete r[d],s=!0)}}return it.isArray(e)?e.forEach(l):l(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const l=n[r];(!e||Mm(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const n=this,r={};return it.forEach(this,(s,l)=>{const c=it.findKey(r,l);if(c){n[c]=$h(s),delete n[l];return}const d=e?C9(l):String(l).trim();d!==l&&delete n[l],n[d]=$h(s),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return it.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&it.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[LS]=this[LS]={accessors:{}}).accessors,s=this.prototype;function l(c){const d=td(c);r[d]||(j9(s,c),r[d]=!0)}return it.isArray(e)?e.forEach(l):l(e),this}};vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);it.reduceDescriptors(vi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});it.freezeMethods(vi);function Lm(t,e){const n=this||lf,r=e||n,s=vi.from(r.headers);let l=r.data;return it.forEach(t,function(d){l=d.call(n,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function _T(t){return!!(t&&t.__CANCEL__)}function iu(t,e,n){Kn.call(this,t??"canceled",Kn.ERR_CANCELED,e,n),this.name="CanceledError"}it.inherits(iu,Kn,{__CANCEL__:!0});function ST(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Kn("Request failed with status code "+n.status,[Kn.ERR_BAD_REQUEST,Kn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function A9(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function O9(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const g=Date.now(),p=r[l];c||(c=g),n[s]=h,r[s]=g;let y=l,_=0;for(;y!==s;)_+=n[y++],y=y%t;if(s=(s+1)%t,s===l&&(l=(l+1)%t),g-c<e)return;const b=p&&g-p;return b?Math.round(_*1e3/b):void 0}}function D9(t,e){let n=0,r=1e3/e,s,l;const c=(g,p=Date.now())=>{n=p,s=null,l&&(clearTimeout(l),l=null),t.apply(null,g)};return[(...g)=>{const p=Date.now(),y=p-n;y>=r?c(g,p):(s=g,l||(l=setTimeout(()=>{l=null,c(s)},r-y)))},()=>s&&c(s)]}const m0=(t,e,n=3)=>{let r=0;const s=O9(50,250);return D9(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,h=c-r,g=s(h),p=c<=d;r=c;const y={loaded:c,total:d,progress:d?c/d:void 0,bytes:h,rate:g||void 0,estimated:g&&d&&p?(d-c)/g:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(y)},n)},IS=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},PS=t=>(...e)=>it.asap(()=>t(...e)),R9=ei.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ei.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ei.origin),ei.navigator&&/(msie|trident)/i.test(ei.navigator.userAgent)):()=>!0,M9=ei.hasStandardBrowserEnv?{write(t,e,n,r,s,l){const c=[t+"="+encodeURIComponent(e)];it.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),it.isString(r)&&c.push("path="+r),it.isString(s)&&c.push("domain="+s),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function L9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function I9(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function wT(t,e,n){let r=!L9(e);return t&&(r||n==!1)?I9(t,e):e}const FS=t=>t instanceof vi?{...t}:t;function Ho(t,e){e=e||{};const n={};function r(g,p,y,_){return it.isPlainObject(g)&&it.isPlainObject(p)?it.merge.call({caseless:_},g,p):it.isPlainObject(p)?it.merge({},p):it.isArray(p)?p.slice():p}function s(g,p,y,_){if(it.isUndefined(p)){if(!it.isUndefined(g))return r(void 0,g,y,_)}else return r(g,p,y,_)}function l(g,p){if(!it.isUndefined(p))return r(void 0,p)}function c(g,p){if(it.isUndefined(p)){if(!it.isUndefined(g))return r(void 0,g)}else return r(void 0,p)}function d(g,p,y){if(y in e)return r(g,p);if(y in t)return r(void 0,g)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(g,p,y)=>s(FS(g),FS(p),y,!0)};return it.forEach(Object.keys(Object.assign({},t,e)),function(p){const y=h[p]||s,_=y(t[p],e[p],p);it.isUndefined(_)&&y!==d||(n[p]=_)}),n}const kT=t=>{const e=Ho({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:l,headers:c,auth:d}=e;e.headers=c=vi.from(c),e.url=yT(wT(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let h;if(it.isFormData(n)){if(ei.hasStandardBrowserEnv||ei.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((h=c.getContentType())!==!1){const[g,...p]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];c.setContentType([g||"multipart/form-data",...p].join("; "))}}if(ei.hasStandardBrowserEnv&&(r&&it.isFunction(r)&&(r=r(e)),r||r!==!1&&R9(e.url))){const g=s&&l&&M9.read(l);g&&c.set(s,g)}return e},P9=typeof XMLHttpRequest<"u",F9=P9&&function(t){return new Promise(function(n,r){const s=kT(t);let l=s.data;const c=vi.from(s.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:g}=s,p,y,_,b,k;function S(){b&&b(),k&&k(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let E=new XMLHttpRequest;E.open(s.method.toUpperCase(),s.url,!0),E.timeout=s.timeout;function O(){if(!E)return;const D=vi.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),Z={data:!d||d==="text"||d==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:D,config:t,request:E};ST(function(L){n(L),S()},function(L){r(L),S()},Z),E=null}"onloadend"in E?E.onloadend=O:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(O)},E.onabort=function(){E&&(r(new Kn("Request aborted",Kn.ECONNABORTED,t,E)),E=null)},E.onerror=function(){r(new Kn("Network Error",Kn.ERR_NETWORK,t,E)),E=null},E.ontimeout=function(){let F=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const Z=s.transitional||vT;s.timeoutErrorMessage&&(F=s.timeoutErrorMessage),r(new Kn(F,Z.clarifyTimeoutError?Kn.ETIMEDOUT:Kn.ECONNABORTED,t,E)),E=null},l===void 0&&c.setContentType(null),"setRequestHeader"in E&&it.forEach(c.toJSON(),function(F,Z){E.setRequestHeader(Z,F)}),it.isUndefined(s.withCredentials)||(E.withCredentials=!!s.withCredentials),d&&d!=="json"&&(E.responseType=s.responseType),g&&([_,k]=m0(g,!0),E.addEventListener("progress",_)),h&&E.upload&&([y,b]=m0(h),E.upload.addEventListener("progress",y),E.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(p=D=>{E&&(r(!D||D.type?new iu(null,t,E):D),E.abort(),E=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const T=A9(s.url);if(T&&ei.protocols.indexOf(T)===-1){r(new Kn("Unsupported protocol "+T+":",Kn.ERR_BAD_REQUEST,t));return}E.send(l||null)})},z9=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const l=function(g){if(!s){s=!0,d();const p=g instanceof Error?g:this.reason;r.abort(p instanceof Kn?p:new iu(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new Kn(`timeout ${e} of ms exceeded`,Kn.ETIMEDOUT))},e);const d=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(l):g.removeEventListener("abort",l)}),t=null)};t.forEach(g=>g.addEventListener("abort",l));const{signal:h}=r;return h.unsubscribe=()=>it.asap(d),h}},B9=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},H9=async function*(t,e){for await(const n of U9(t))yield*B9(n,e)},U9=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},zS=(t,e,n,r)=>{const s=H9(t,e);let l=0,c,d=h=>{c||(c=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:g,value:p}=await s.next();if(g){d(),h.close();return}let y=p.byteLength;if(n){let _=l+=y;n(_)}h.enqueue(new Uint8Array(p))}catch(g){throw d(g),g}},cancel(h){return d(h),s.return()}},{highWaterMark:2})},X0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ET=X0&&typeof ReadableStream=="function",$9=X0&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),NT=(t,...e)=>{try{return!!t(...e)}catch{return!1}},W9=ET&&NT(()=>{let t=!1;const e=new Request(ei.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),BS=64*1024,Nx=ET&&NT(()=>it.isReadableStream(new Response("").body)),x0={stream:Nx&&(t=>t.body)};X0&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!x0[e]&&(x0[e]=it.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Kn(`Response type '${e}' is not supported`,Kn.ERR_NOT_SUPPORT,r)})})})(new Response);const V9=async t=>{if(t==null)return 0;if(it.isBlob(t))return t.size;if(it.isSpecCompliantForm(t))return(await new Request(ei.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(it.isArrayBufferView(t)||it.isArrayBuffer(t))return t.byteLength;if(it.isURLSearchParams(t)&&(t=t+""),it.isString(t))return(await $9(t)).byteLength},Y9=async(t,e)=>{const n=it.toFiniteNumber(t.getContentLength());return n??V9(e)},G9=X0&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:l,timeout:c,onDownloadProgress:d,onUploadProgress:h,responseType:g,headers:p,withCredentials:y="same-origin",fetchOptions:_}=kT(t);g=g?(g+"").toLowerCase():"text";let b=z9([s,l&&l.toAbortSignal()],c),k;const S=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let E;try{if(h&&W9&&n!=="get"&&n!=="head"&&(E=await Y9(p,r))!==0){let Z=new Request(e,{method:"POST",body:r,duplex:"half"}),K;if(it.isFormData(r)&&(K=Z.headers.get("content-type"))&&p.setContentType(K),Z.body){const[L,Q]=IS(E,m0(PS(h)));r=zS(Z.body,BS,L,Q)}}it.isString(y)||(y=y?"include":"omit");const O="credentials"in Request.prototype;k=new Request(e,{..._,signal:b,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:O?y:void 0});let T=await fetch(k,_);const D=Nx&&(g==="stream"||g==="response");if(Nx&&(d||D&&S)){const Z={};["status","statusText","headers"].forEach(se=>{Z[se]=T[se]});const K=it.toFiniteNumber(T.headers.get("content-length")),[L,Q]=d&&IS(K,m0(PS(d),!0))||[];T=new Response(zS(T.body,BS,L,()=>{Q&&Q(),S&&S()}),Z)}g=g||"text";let F=await x0[it.findKey(x0,g)||"text"](T,t);return!D&&S&&S(),await new Promise((Z,K)=>{ST(Z,K,{data:F,headers:vi.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:k})})}catch(O){throw S&&S(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new Kn("Network Error",Kn.ERR_NETWORK,t,k),{cause:O.cause||O}):Kn.from(O,O&&O.code,t,k)}}),Tx={http:o9,xhr:F9,fetch:G9};it.forEach(Tx,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const HS=t=>`- ${t}`,q9=t=>it.isFunction(t)||t===null||t===!1,TT={getAdapter:t=>{t=it.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let l=0;l<e;l++){n=t[l];let c;if(r=n,!q9(n)&&(r=Tx[(c=String(n)).toLowerCase()],r===void 0))throw new Kn(`Unknown adapter '${c}'`);if(r)break;s[c||"#"+l]=r}if(!r){const l=Object.entries(s).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(HS).join(`
`):" "+HS(l[0]):"as no adapter specified";throw new Kn("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:Tx};function Im(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new iu(null,t)}function US(t){return Im(t),t.headers=vi.from(t.headers),t.data=Lm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),TT.getAdapter(t.adapter||lf.adapter)(t).then(function(r){return Im(t),r.data=Lm.call(t,t.transformResponse,r),r.headers=vi.from(r.headers),r},function(r){return _T(r)||(Im(t),r&&r.response&&(r.response.data=Lm.call(t,t.transformResponse,r.response),r.response.headers=vi.from(r.response.headers))),Promise.reject(r)})}const CT="1.10.0",K0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{K0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const $S={};K0.transitional=function(e,n,r){function s(l,c){return"[Axios v"+CT+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,d)=>{if(e===!1)throw new Kn(s(c," has been removed"+(n?" in "+n:"")),Kn.ERR_DEPRECATED);return n&&!$S[c]&&($S[c]=!0,console.warn(s(c," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,c,d):!0}};K0.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function J9(t,e,n){if(typeof t!="object")throw new Kn("options must be an object",Kn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const l=r[s],c=e[l];if(c){const d=t[l],h=d===void 0||c(d,l,t);if(h!==!0)throw new Kn("option "+l+" must be "+h,Kn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Kn("Unknown option "+l,Kn.ERR_BAD_OPTION)}}const Wh={assertOptions:J9,validators:K0},Ca=Wh.validators;let Ro=class{constructor(e){this.defaults=e||{},this.interceptors={request:new MS,response:new MS}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ho(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:l}=n;r!==void 0&&Wh.assertOptions(r,{silentJSONParsing:Ca.transitional(Ca.boolean),forcedJSONParsing:Ca.transitional(Ca.boolean),clarifyTimeoutError:Ca.transitional(Ca.boolean)},!1),s!=null&&(it.isFunction(s)?n.paramsSerializer={serialize:s}:Wh.assertOptions(s,{encode:Ca.function,serialize:Ca.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Wh.assertOptions(n,{baseUrl:Ca.spelling("baseURL"),withXsrfToken:Ca.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=l&&it.merge(l.common,l[n.method]);l&&it.forEach(["delete","get","head","post","put","patch","common"],k=>{delete l[k]}),n.headers=vi.concat(c,l);const d=[];let h=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(h=h&&S.synchronous,d.unshift(S.fulfilled,S.rejected))});const g=[];this.interceptors.response.forEach(function(S){g.push(S.fulfilled,S.rejected)});let p,y=0,_;if(!h){const k=[US.bind(this),void 0];for(k.unshift.apply(k,d),k.push.apply(k,g),_=k.length,p=Promise.resolve(n);y<_;)p=p.then(k[y++],k[y++]);return p}_=d.length;let b=n;for(y=0;y<_;){const k=d[y++],S=d[y++];try{b=k(b)}catch(E){S.call(this,E);break}}try{p=US.call(this,b)}catch(k){return Promise.reject(k)}for(y=0,_=g.length;y<_;)p=p.then(g[y++],g[y++]);return p}getUri(e){e=Ho(this.defaults,e);const n=wT(e.baseURL,e.url,e.allowAbsoluteUrls);return yT(n,e.params,e.paramsSerializer)}};it.forEach(["delete","get","head","options"],function(e){Ro.prototype[e]=function(n,r){return this.request(Ho(r||{},{method:e,url:n,data:(r||{}).data}))}});it.forEach(["post","put","patch"],function(e){function n(r){return function(l,c,d){return this.request(Ho(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Ro.prototype[e]=n(),Ro.prototype[e+"Form"]=n(!0)});let X9=class jT{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(s=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](s);r._listeners=null}),this.promise.then=s=>{let l;const c=new Promise(d=>{r.subscribe(d),l=d}).then(s);return c.cancel=function(){r.unsubscribe(l)},c},e(function(l,c,d){r.reason||(r.reason=new iu(l,c,d),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new jT(function(s){e=s}),cancel:e}}};function K9(t){return function(n){return t.apply(null,n)}}function Z9(t){return it.isObject(t)&&t.isAxiosError===!0}const Cx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cx).forEach(([t,e])=>{Cx[e]=t});function AT(t){const e=new Ro(t),n=aT(Ro.prototype.request,e);return it.extend(n,Ro.prototype,e,{allOwnKeys:!0}),it.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return AT(Ho(t,s))},n}const ts=AT(lf);ts.Axios=Ro;ts.CanceledError=iu;ts.CancelToken=X9;ts.isCancel=_T;ts.VERSION=CT;ts.toFormData=J0;ts.AxiosError=Kn;ts.Cancel=ts.CanceledError;ts.all=function(e){return Promise.all(e)};ts.spread=K9;ts.isAxiosError=Z9;ts.mergeConfig=Ho;ts.AxiosHeaders=vi;ts.formToJSON=t=>bT(it.isHTMLForm(t)?new FormData(t):t);ts.getAdapter=TT.getAdapter;ts.HttpStatusCode=Cx;ts.default=ts;const{Axios:AW,AxiosError:OW,CanceledError:DW,isCancel:RW,CancelToken:MW,VERSION:LW,all:IW,Cancel:PW,isAxiosError:FW,spread:zW,toFormData:BW,AxiosHeaders:HW,HttpStatusCode:UW,formToJSON:$W,getAdapter:WW,mergeConfig:VW}=ts,Q9=Rn("/api/klines");function eH(t){return Math.floor(t/1e3)}function tH(t){return t?t.replace(/[^A-Z0-9]/gi,"").replace(/(PERP|USDTFUT|USDTPERP|USDTPERF|USDTPER)/,"").replace(/\d{6,}$/,"").toUpperCase():""}function Yl(t,e){return t[e]??t[e.toLowerCase()]??t[e.replace("_","").toLowerCase()]??"N/A"}function jx(t){return/^[A-Z]+USDT$/.test(t)}const nH=({symbol:t,trade:e,interval:n="15m",theme:r="dark",width:s=400,height:l=300})=>{x.useRef();const c=x.useRef(),[d,h]=x.useState(null);return x.useEffect(()=>{let g,p,y,_,b,k,S,E=!1;async function O(){h(null);const T=tH(t);if(!jx(T)){h("Invalid or unsupported symbol");return}const F={"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d"}[n]||"15m",Z=`${Q9}?symbol=${T}&interval=${F}&limit=200`;try{const{data:K}=await ts.get(Z);if(E)return;if(!K||!Array.isArray(K)||K.length===0){h("No data for this symbol"),console.warn("[CustomChart] No data for",T,K);return}const L=K.map(at=>({time:eH(at[0]),open:+at[1],high:+at[2],low:+at[3],close:+at[4],value:+at[5],volume:+at[5]})),Q=L.map(at=>at.close),se=J1.calculate({period:9,values:Q}),ce=Y1.calculate({values:Q,fastPeriod:12,slowPeriod:26,signalPeriod:9,SimpleMAOscillator:!1,SimpleMASignal:!1});g=fB(c.current,{width:s,height:l,layout:{background:{color:r==="dark"?"#181818":"#fff"},textColor:r==="dark"?"#fff":"#222"},grid:{vertLines:{color:"#222"},horzLines:{color:"#222"}},timeScale:{timeVisible:!0,secondsVisible:!1},rightPriceScale:{visible:!1}}),p=g.addCandlestickSeries(),p.setData(L),y=g.addLineSeries({color:"#fbc02d",lineWidth:2,priceScaleId:"rsi"}),y.setData(se.map((at,le)=>({time:L[le+(L.length-se.length)].time,value:at}))),g.addLineSeries({color:"#42a5f5",lineWidth:2,priceScaleId:"macd"}).setData(ce.map((at,le)=>({time:L[le+(L.length-ce.length)].time,value:at.MACD}))),g.addLineSeries({color:"#ff9800",lineWidth:2,priceScaleId:"macd"}).setData(ce.map((at,le)=>({time:L[le+(L.length-ce.length)].time,value:at.signal})));const xe=g.addHistogramSeries({priceScaleId:"macd",scaleMargins:{top:.7,bottom:0}}),Ce=ce.map((at,le,Ve)=>{const Ue=at.MACD-at.signal;let Ze="#26a69a";return le>0?Ue>0&&Ue>Ve[le-1].MACD-Ve[le-1].signal?Ze="#26a69a":Ue>0?Ze="#b2dfdb":Ue<0&&Ue<Ve[le-1].MACD-Ve[le-1].signal?Ze="#ef5350":Ze="#ffcdd2":Ze=Ue>=0?"#26a69a":"#ef5350",{time:L[le+(L.length-ce.length)].time,value:Ue,color:Ze}});xe.setData(Ce),Yl(e,"Buy_Price")!=="N/A"&&(_=p.createPriceLine({price:+Yl(e,"Buy_Price"),color:"#00e676",lineWidth:2,lineStyle:2,title:"Buy"})),Yl(e,"Sell_Price")!=="N/A"&&(b=p.createPriceLine({price:+Yl(e,"Sell_Price"),color:"#ff1744",lineWidth:2,lineStyle:2,title:"Sell"})),Yl(e,"Stop_Price")!=="N/A"&&(k=p.createPriceLine({price:+Yl(e,"Stop_Price"),color:"#ffd600",lineWidth:2,lineStyle:2,title:"Stop"})),Yl(e,"Save_Price")!=="N/A"&&(S=p.createPriceLine({price:+Yl(e,"Save_Price"),color:"#00b0ff",lineWidth:2,lineStyle:2,title:"Save"}))}catch(K){h("No data for this symbol (CORS or symbol error)"),console.error("[CustomChart] Error fetching data for",T,K)}}return O(),()=>{E=!0,g&&g.remove()}},[t,e,n,r,s,l]),o.jsx("div",{style:{width:s,height:l,background:r==="dark"?"#181818":"#fff",borderRadius:8,position:"relative"},children:d?o.jsx("div",{style:{color:"#fff",textAlign:"center",paddingTop:l/2-30,fontWeight:"bold"},children:d}):o.jsx("div",{ref:c,style:{width:s,height:l}})})},rH=({trades:t=[],layout:e=3,interval:n="15m",theme:r="dark"})=>{const[s,l]=x.useState(e),[c,d]=x.useState(n),[h,g]=x.useState(r),[p,y]=x.useState(0),[_,b]=x.useState(10),[k,S]=x.useState(14),[E,O]=x.useState({}),[T,D]=x.useState(400),F=t.filter(L=>jx(L.Pair.replace(/<[^>]+>/g,"").replace(/[^A-Z0-9]/gi,"").toUpperCase())),Z=F.slice(p*_,(p+1)*_),K=Math.ceil(F.length/_);return o.jsxs("div",{style:{background:h==="dark"?"#111":"#fff",minHeight:"100vh",padding:24},children:[o.jsxs("div",{style:{marginBottom:16,color:h==="dark"?"#fff":"#222"},children:[o.jsxs("label",{children:["Interval:",o.jsx("select",{value:c,onChange:L=>d(L.target.value),style:{marginLeft:8},children:["1m","3m","5m","15m","30m","1h","4h","1d"].map(L=>o.jsx("option",{value:L,children:L},L))})]}),o.jsxs("label",{style:{marginLeft:16},children:["Layout:",o.jsx("select",{value:s,onChange:L=>l(Number(L.target.value)),style:{marginLeft:8},children:[1,2,3,4,5,6].map(L=>o.jsxs("option",{value:L,children:[L," per row"]},L))})]}),o.jsxs("label",{style:{marginLeft:16},children:["Theme:",o.jsx("select",{value:h,onChange:L=>g(L.target.value),style:{marginLeft:8},children:["dark","light"].map(L=>o.jsx("option",{value:L,children:L},L))})]}),o.jsxs("label",{style:{marginLeft:16},children:["Page Size:",o.jsx("select",{value:_,onChange:L=>{b(Number(L.target.value)),y(0)},style:{marginLeft:8},children:[5,10,20,50,100].map(L=>o.jsx("option",{value:L,children:L},L))})]}),o.jsxs("label",{style:{marginLeft:16},children:["Font Size:",o.jsx("select",{value:k,onChange:L=>S(Number(L.target.value)),style:{marginLeft:8},children:[12,14,16,18,20].map(L=>o.jsxs("option",{value:L,children:[L,"px"]},L))})]}),o.jsxs("label",{style:{marginLeft:16},children:["Grid Width:",o.jsx("input",{type:"range",min:200,max:800,value:T,onChange:L=>D(Number(L.target.value)),style:{marginLeft:8,verticalAlign:"middle"}}),o.jsxs("span",{style:{marginLeft:8},children:[T,"px"]})]}),o.jsxs("span",{style:{marginLeft:16},children:["Page ",p+1," / ",K]}),o.jsx("button",{disabled:p===0,onClick:()=>y(L=>Math.max(0,L-1)),style:{marginLeft:8},children:"Prev"}),o.jsx("button",{disabled:p>=K-1,onClick:()=>y(L=>Math.min(K-1,L+1)),style:{marginLeft:8},children:"Next"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${s}, ${T}px)`,gap:24},children:Z.map((L,Q)=>{const se=L.Pair.replace(/<[^>]+>/g,"").replace(/[^A-Z0-9]/gi,"").toUpperCase(),ce=jx(se),ye=E[Q]||{width:T,height:300},te=Kr.useRef(),[xe,Ce]=Kr.useState(!1),[at,le]=Kr.useState({x:0,y:0,width:ye.width,height:ye.height}),Ve=oe=>{Ce(!0),le({x:oe.clientX,y:oe.clientY,width:ye.width,height:ye.height})},Ue=oe=>{if(!xe)return;const P=oe.clientX-at.x,B=oe.clientY-at.y;O(j=>({...j,[Q]:{width:Math.max(200,at.width+P),height:Math.max(150,at.height+B)}}))},Ze=()=>Ce(!1);Kr.useEffect(()=>(xe?(window.addEventListener("mousemove",Ue),window.addEventListener("mouseup",Ze)):(window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",Ze)),()=>{window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",Ze)}),[xe]);const M=oe=>O(P=>({...P,[Q]:{...ye,height:Number(oe.target.value)}}));return o.jsxs("div",{style:{background:h==="dark"?"#181818":"#f9f9f9",borderRadius:8,padding:8},children:[o.jsx("div",{style:{color:h==="dark"?"#fff":"#222",fontWeight:"bold",marginBottom:4},children:L.Pair}),ce?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[o.jsx("label",{style:{color:h==="dark"?"#fff":"#222",fontSize:13,marginRight:8},children:"Chart Height:"}),o.jsx("input",{type:"range",min:150,max:800,value:ye.height,onChange:M,style:{flex:1,accentColor:"#6366f1",marginRight:8},title:"Adjust chart height"}),o.jsxs("span",{style:{color:h==="dark"?"#fff":"#222",fontSize:13,minWidth:40,textAlign:"right"},children:[ye.height,"px"]})]}),o.jsxs("div",{style:{position:"relative",width:ye.width,height:ye.height},children:[o.jsx(nH,{symbol:se,trade:L,interval:c,theme:h,width:T,height:ye.height}),o.jsx("div",{ref:te,onMouseDown:Ve,style:{position:"absolute",right:8,bottom:8,width:32,height:32,background:xe?"#444":"#222",cursor:"nwse-resize",borderRadius:6,border:"2px solid #888",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,boxShadow:xe?"0 0 8px #888":"none",fontSize:22,fontWeight:"bold",userSelect:"none"},title:"Drag to resize chart",children:o.jsxs("span",{style:{fontFamily:"monospace",letterSpacing:1},children:["",o.jsx("br",{}),""]})})]})]}):o.jsx("div",{style:{width:400,height:300,display:"flex",alignItems:"center",justifyContent:"center",color:"#f00",background:"#222",borderRadius:8},children:"Invalid or unsupported symbol"}),o.jsxs("div",{style:{color:h==="dark"?"#fff":"#222",fontSize:k,marginTop:8},children:["PL: ",o.jsx("b",{children:L.PL??"N/A"}),o.jsx("br",{}),"Buy: ",o.jsx("b",{children:L.Buy_Price??"N/A"})," | Sell: ",o.jsx("b",{children:L.Sell_Price??"N/A"}),o.jsx("br",{}),"Stop: ",o.jsx("b",{children:L.Stop_Price??"N/A"})," | Save: ",o.jsx("b",{children:L.Save_Price??"N/A"}),o.jsx("br",{}),"Unique ID: ",o.jsx("b",{children:L.Unique_id??L.Unique_ID??"N/A"}),o.jsx("br",{}),"Type: ",o.jsx("b",{children:L.Action??L.Type??"N/A"}),o.jsx("br",{}),"Candle Date: ",o.jsx("b",{children:L.Candel_time??L.Candle_time??"N/A"}),o.jsx("br",{}),"Operator Time: ",o.jsx("b",{children:L.Operator_Trade_time??"N/A"}),o.jsx("br",{}),"Closing Time: ",o.jsx("b",{children:L.Operator_Close_time??"N/A"})]})]},Q)})})]})};var Pm={exports:{}},Fm,WS;function sH(){if(WS)return Fm;WS=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Fm=t,Fm}var zm,VS;function iH(){if(VS)return zm;VS=1;var t=sH();function e(){}function n(){}return n.resetWarningCache=e,zm=function(){function r(c,d,h,g,p,y){if(y!==t){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function s(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return l.PropTypes=l,l},zm}var YS;function aH(){return YS||(YS=1,Pm.exports=iH()()),Pm.exports}var lH=aH();const Gl=Ix(lH),oH={"2POLE_IN5LOOP":"2P_L",IMACD:"IMACD","2POLE_Direct_Signal":"2P_DS","HIGHEST SWING HIGH":"HSH","LOWEST SWING LOW":"LSL","NORMAL SWING HIGH":"NSH","NORMAL SWING LOW":"NSL",ProGap:"PG",CrossOver:"CO",Spike:"SP",Kicker:"Kicker"},Z0=({canonicalSignalKeys:t,selectedSignals:e,setSelectedSignals:n,signalRadioMode:r,setSignalRadioMode:s,signalToggleAll:l,setSignalToggleAll:c,allMachines:d,selectedMachines:h,setSelectedMachines:g,machineRadioMode:p,setMachineRadioMode:y,machineToggleAll:_,setMachineToggleAll:b,selectedActions:k,setSelectedActions:S,actionRadioMode:E,setActionRadioMode:O,actionToggleAll:T,setActionToggleAll:D,liveFilter:F,setLiveFilter:Z,liveRadioMode:K,setLiveRadioMode:L,trades:Q,darkMode:se})=>{const ce=te=>te.machineid??te.MachineId??"",ye=Array.from(new Set(Q.flatMap(te=>[te.Action,te.action,te.SignalType,te.signal_type].filter(Boolean))));return console.log(" [PairStatsFilters] Available actions:",ye),console.log(" [PairStatsFilters] Sample trade:",Q[0]),o.jsxs("div",{className:"w-full flex flex-wrap gap-4 mb-1",style:{background:se?"#181a20":"#fff",borderRadius:"1.25rem",boxShadow:se?"0 2px 8px 0 rgba(0,0,0,0.22), 0 1.5px 6px 0 rgba(0,0,0,0.13)":"0 2px 8px 0 rgba(0,0,0,0.08), 0 1.5px 6px 0 rgba(0,0,0,0.06)",border:se?"1.5px solid #232526":"1.5px solid #e5e7eb",padding:"1.25rem",marginBottom:"0.25rem"},children:[o.jsxs("div",{className:"flex-1 min-w-[260px] break-inside-avoid rounded-2xl shadow-lg p-4 gap-2 w-full",style:{background:se?"linear-gradient(to bottom right, #1e293b 0%, #334155 100%)":"linear-gradient(to bottom right, #e0eafc 0%, #cfdef3 100%)",border:se?"1.5px solid #334155":"1.5px solid #bcd0ee"},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-blue-700 dark:text-blue-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Signal",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-blue-400 via-blue-300 to-blue-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const te=!r;if(s(te),te){const xe=t.find(Ce=>e[Ce]);if(xe){const Ce={};t.forEach(at=>{Ce[at]=at===xe}),n(Ce),localStorage.setItem("pair_stats_selected_signals",JSON.stringify(Ce))}}},className:"bg-blue-200 dark:bg-blue-800 text-blue-900 dark:text-blue-100 px-2 py-1 rounded text-xs font-semibold hover:bg-blue-300 dark:hover:bg-blue-700 focus:ring-2 focus:ring-blue-400 transition-all",title:"Toggle between radio and checkbox mode",children:r?" Check":" Radio"}),!r&&o.jsx("button",{onClick:()=>{const te={};t.forEach(xe=>te[xe]=l),n(te),c(!l),localStorage.setItem("pair_stats_selected_signals",JSON.stringify(te))},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${l?"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400":"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400"} transition-all`,title:"Select or uncheck all signals",children:l?" All":" Uncheck"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(te=>o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[r?o.jsx("input",{type:"radio",name:"signalFilterRadio",checked:e[te],onChange:()=>{const xe={};t.forEach(Ce=>{xe[Ce]=Ce===te}),n(xe),localStorage.setItem("pair_stats_selected_signals",JSON.stringify(xe))},className:"form-radio h-5 w-5 text-green-600",style:{accentColor:"#22c55e"}}):o.jsx("input",{type:"checkbox",checked:e[te],onChange:()=>{n(xe=>{const Ce={...xe,[te]:!xe[te]};return localStorage.setItem("pair_stats_selected_signals",JSON.stringify(Ce)),Ce})},className:"form-checkbox h-5 w-5 text-blue-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:oH[te]||te})]},te))})]}),o.jsxs("div",{className:"flex-1 min-w-[220px] break-inside-avoid rounded-2xl shadow-lg p-4 gap-2",style:{background:se?"linear-gradient(to bottom right, #14532d 0%, #334155 100%)":"linear-gradient(to bottom right, #e0ffe0 0%, #e0f7ef 100%)",border:se?"1.5px solid #14532d":"1.5px solid #bde5d6"},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-green-700 dark:text-green-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Machine",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-green-400 via-green-300 to-green-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const te=!p;if(y(te),te){const xe=d.find(Ce=>h[ce(Ce)]);if(xe){const Ce={};d.forEach(at=>{Ce[ce(at)]=ce(at)===ce(xe)}),g(Ce),localStorage.setItem("pair_stats_selected_machines",JSON.stringify(Ce))}}},className:"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 px-2 py-1 rounded text-xs font-semibold hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400 transition-all",title:"Toggle between radio and checkbox mode",children:p?" Check":" Radio"}),!p&&o.jsx("button",{onClick:()=>{const te=Object.values(h).every(Ce=>Ce===!0),xe={};d.forEach(Ce=>{xe[ce(Ce)]=!te}),g(xe),b(!_),localStorage.setItem("pair_stats_selected_machines",JSON.stringify(xe))},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${Object.values(h).every(te=>te===!1)?"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400":"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400"} transition-all`,title:"Select or uncheck all machines",children:Object.values(h).every(te=>te===!1)?" All":" Uncheck"})]}),o.jsx("div",{className:"flex flex-wrap gap-2 min-h-[40px] items-center",children:d.length===0?o.jsx("span",{className:"text-gray-400 text-xs",children:"No machines found"}):d.map(te=>o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[p?o.jsx("input",{type:"radio",name:"machineFilterRadio",checked:h[ce(te)]===!0,onChange:()=>{const xe={};d.forEach(Ce=>{xe[ce(Ce)]=ce(Ce)===ce(te)}),g(xe),localStorage.setItem("pair_stats_selected_machines",JSON.stringify(xe))},className:"form-radio h-5 w-5 text-green-600",style:{accentColor:"#22c55e"}}):o.jsx("input",{type:"checkbox",checked:h[ce(te)]||!1,onChange:()=>{g(xe=>{const Ce={...xe,[ce(te)]:!xe[ce(te)]};return localStorage.setItem("pair_stats_selected_machines",JSON.stringify(Ce)),Ce})},className:"form-checkbox h-5 w-5 text-green-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:ce(te)})]},ce(te)))})]}),o.jsxs("div",{className:"flex-1 min-w-[180px] break-inside-avoid rounded-2xl shadow-lg p-4 gap-2",style:{background:se?"linear-gradient(to bottom right, #831843 0%, #334155 100%)":"linear-gradient(to bottom right, #ffe0f0 0%, #f3e0ff 100%)",border:se?"1.5px solid #831843":"1.5px solid #e5bde5"},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-pink-700 dark:text-pink-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Action",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-pink-400 via-pink-300 to-pink-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const te=!E;if(O(te),te){const xe=Object.keys(k).find(Ce=>k[Ce]);if(xe){const Ce={};Object.keys(k).forEach(at=>{Ce[at]=at===xe}),S(Ce),localStorage.setItem("pair_stats_selected_actions",JSON.stringify(Ce))}}},className:"bg-pink-200 dark:bg-pink-800 text-pink-900 dark:text-pink-100 px-2 py-1 rounded text-xs font-semibold hover:bg-pink-300 dark:hover:bg-pink-700 focus:ring-2 focus:ring-pink-400 transition-all",title:"Toggle between radio and checkbox mode",children:E?" Check":" Radio"}),!E&&o.jsx("button",{onClick:()=>{const te={};Object.keys(k).forEach(xe=>te[xe]=T),S(te),D(!T),localStorage.setItem("pair_stats_selected_actions",JSON.stringify(te))},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${T?"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400":"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400"} transition-all`,title:"Select or uncheck all actions",children:T?" All":" Uncheck"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:ye.map(te=>o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[E?o.jsx("input",{type:"radio",name:"actionFilterRadio",checked:k[te],onChange:()=>{const xe={};ye.forEach(Ce=>{xe[Ce]=Ce===te}),S(xe),localStorage.setItem("pair_stats_selected_actions",JSON.stringify(xe))},className:"form-radio h-5 w-5 text-pink-600",style:{accentColor:"#ec4899"}}):o.jsx("input",{type:"checkbox",checked:k[te],onChange:()=>{S(xe=>{const Ce={...xe,[te]:!xe[te]};return localStorage.setItem("pair_stats_selected_actions",JSON.stringify(Ce)),Ce})},className:"form-checkbox h-5 w-5 text-pink-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:te})]},te))})]}),o.jsxs("div",{className:"flex-1 min-w-[180px] break-inside-avoid rounded-2xl shadow-lg p-4 gap-2",style:{background:se?"linear-gradient(to bottom right, #064e3b 0%, #334155 100%)":"linear-gradient(to bottom right, #d1fae5 0%, #ccfbf1 100%)",border:se?"1.5px solid #064e3b":"1.5px solid #6ee7b7"},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"block text-xl font-extrabold mb-2 tracking-wide relative group transition-transform duration-200 cursor-pointer text-emerald-700 dark:text-emerald-200 hover:scale-105",children:[o.jsx("span",{className:"mr-2",children:""})," Live",o.jsx("span",{className:"absolute left-0 bottom-0 w-full h-1 rounded bg-gradient-to-r from-emerald-400 via-emerald-300 to-teal-500 opacity-70 group-hover:opacity-100 group-hover:scale-x-110 transition-all"})]}),o.jsx("button",{onClick:()=>{const te=!K;if(L==null||L(te),te){const Ce=(F??{true:!0}).true?"true":"false";Z==null||Z({true:Ce==="true",false:Ce==="false"})}},className:"bg-emerald-200 dark:bg-emerald-800 text-emerald-900 dark:text-emerald-100 px-2 py-1 rounded text-xs font-semibold hover:bg-emerald-300 dark:hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-400 transition-all",title:"Toggle between radio and checkbox mode",children:K?" Check":" Radio"}),!K&&o.jsx("button",{onClick:()=>{const te=F??{true:!0,false:!0},xe=te.true&&te.false;Z==null||Z({true:!xe,false:!xe})},className:`text-xs font-semibold px-2 py-1 rounded w-fit ml-2 ${F!=null&&F.true&&(F!=null&&F.false)?"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 hover:bg-red-300 dark:hover:bg-red-700 focus:ring-2 focus:ring-red-400":"bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 hover:bg-green-300 dark:hover:bg-green-700 focus:ring-2 focus:ring-green-400"} transition-all`,title:"Uncheck or select all",children:F!=null&&F.true&&(F!=null&&F.false)?" Uncheck":" All"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[K?o.jsx("input",{type:"radio",name:"liveFilterRadio",checked:!!(F!=null&&F.true),onChange:()=>Z==null?void 0:Z({true:!0,false:!1}),className:"form-radio h-5 w-5 text-emerald-600",style:{accentColor:"#10b981"}}):o.jsx("input",{type:"checkbox",checked:(F==null?void 0:F.true)??!0,onChange:()=>Z==null?void 0:Z(te=>({...te,true:!te.true})),className:"form-checkbox h-5 w-5 text-emerald-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:"True"})]}),o.jsxs("label",{className:"flex items-center space-x-2 bg-white dark:bg-gray-800 rounded px-2 py-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[K?o.jsx("input",{type:"radio",name:"liveFilterRadio",checked:!!(F!=null&&F.false),onChange:()=>Z==null?void 0:Z({true:!1,false:!0}),className:"form-radio h-5 w-5 text-emerald-600",style:{accentColor:"#10b981"}}):o.jsx("input",{type:"checkbox",checked:(F==null?void 0:F.false)??!0,onChange:()=>Z==null?void 0:Z(te=>({...te,false:!te.false})),className:"form-checkbox h-5 w-5 text-emerald-600"}),o.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:"False"})]})]})]})]})},cH=[{label:"15 min",value:15},{label:"30 min",value:30},{label:"1 hr",value:60},{label:"3 hr",value:180},{label:"6 hr",value:360},{label:"Anytime",value:1e4}];function GS(t,e,n){const r=Date.now(),s=n*60*1e3;return t.some(l=>{if(l.pair!==e)return!1;const c=l.candel_time||l.candle_time;if(!c)return!1;const d=new Date(c.replace(" ","T")+"Z").getTime();return r-d<=s})}function qS(t,e,n){const r=Date.now(),s=n*60*1e3;return t.filter(l=>{if(l.pair!==e)return!1;const c=l.candel_time||l.candle_time;if(!c)return!1;const d=new Date(c.replace(" ","T")+"Z").getTime();return r-d<=s}).length}const uH=["2POLE_IN5LOOP","IMACD","2POLE_Direct_Signal","HIGHEST SWING HIGH","LOWEST SWING LOW","NORMAL SWING HIGH","NORMAL SWING LOW","ProGap","CrossOver","Spike","Kicker"],dH=[{value:"latest",label:" Latest Running"},{value:"alpha",label:" Alphabetical"},{value:"hedgeCount",label:" Hedge Count"},{value:"profitCount",label:" Profit Count"},{value:"hedgeAmount",label:" Hedge Amount"},{value:"profitAmount",label:" Profit Amount"},{value:"total",label:" Total Trades"},{value:"meanPerTrade",label:"Mean Per Trade (Amount)"},{value:"meanOverall",label:"Mean Overall (Amount)"},{value:"meanCount",label:"Mean of Count (Profit - Loss Count)"}],JS={latest:!1,alpha:!0,hedgeCount:!1,profitCount:!1,hedgeAmount:!1,profitAmount:!1,total:!1,meanPerTrade:!1,meanOverall:!1};function fH({search:t,setSearch:e,sortOption:n,handleSortChange:r,sortAsc:s,handleSortToggle:l,reputationEnabled:c,setReputationEnabled:d,reputationMode:h,setReputationMode:g,reputationIntensity:p,setReputationIntensity:y,density:_,setDensity:b,totalPairs:k,settingsOpen:S,setSettingsOpen:E,darkMode:O,masterFont:T,setMasterFont:D,nameFont:F,setNameFont:Z,infoFont:K,setInfoFont:L,notifWindow:Q,setNotifWindow:se,notifStyle:ce,setNotifStyle:ye,notifSize:te,setNotifSize:xe,rankBadgeSize:Ce,setRankBadgeSize:at,NOTIF_WINDOWS:le,settingsRef:Ve,showForClubFilter:Ue,setShowForClubFilter:Ze}){return o.jsxs("div",{className:"flex-1 min-w-[320px] break-inside-avoid rounded-2xl shadow-lg p-4 gap-2 mb-4",style:{background:O?"linear-gradient(to bottom right, #0f172a 0%, #334155 100%)":"linear-gradient(to bottom right, #f8fafc 0%, #e0eafc 100%)",border:O?"1.5px solid #334155":"1.5px solid #bcd0ee",display:"flex",flexDirection:"column",gap:"12px",justifyContent:"space-between",minHeight:120},children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between w-full",style:{minHeight:0,padding:"6px 0",margin:"0 0 6px 0"},children:[o.jsx("input",{type:"text",className:"px-2 py-1 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-black dark:text-white w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Search pair...",value:t,onChange:M=>e(M.target.value),style:{fontSize:13,height:32}}),o.jsxs("select",{value:Ue,onChange:M=>Ze(M.target.value),className:"px-1 py-1 rounded border bg-white text-black dark:bg-gray-900 dark:text-white",style:{minWidth:120,fontSize:13,height:32},children:[o.jsx("option",{value:"All",children:"All (No Filter)"}),o.jsx("option",{value:"Total Closed Stats",children:"Total Closed Stats"}),o.jsx("option",{value:"Direct Closed Stats",children:"Direct Closed Stats"}),o.jsx("option",{value:"Hedge Closed Stats",children:"Hedge Closed Stats"}),o.jsx("option",{value:"Total Running Stats",children:"Total Running Stats"}),o.jsx("option",{value:"Direct Running Stats",children:"Direct Running Stats"}),o.jsx("option",{value:"Hedge Running Stats",children:"Hedge Running Stats"}),o.jsx("option",{value:"Total Stats",children:"Total Stats"}),o.jsx("option",{value:"Buy Sell Stats",children:"Buy Sell Stats"}),o.jsx("option",{value:"Hedge on Hold",children:"Hedge on Hold"})]}),o.jsx("select",{value:n,onChange:M=>r(M.target.value),className:"px-1 py-1 rounded border bg-white text-black dark:bg-gray-900 dark:text-white",style:{fontSize:13,height:32},children:dH.map(M=>o.jsx("option",{value:M.value,children:M.label},M.value))}),o.jsx("button",{onClick:l,className:"px-1 py-1 rounded border",title:"Toggle Ascending/Descending",style:{fontSize:13,height:32},children:s?"":""}),o.jsxs("button",{type:"button",className:`ml-2 px-3 py-1 rounded-full border font-bold ${c?"bg-blue-600 text-white border-blue-700":"bg-gray-200 text-gray-700 border-gray-400"}`,onClick:()=>d(M=>!M),style:{fontSize:13,height:32},children:["Reputation ",c?"ON":"OFF"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:`flex items-center gap-1 ${h==="perTrade"&&c?"animate-pulse-gold":""}`,children:[" ",o.jsx("input",{type:"radio",name:"reputationMode",value:"perTrade",checked:h==="perTrade",onChange:()=>g("perTrade"),disabled:!c})," ",o.jsx("span",{className:"text-xs",children:"Per Trade"})," "]}),o.jsxs("label",{className:`flex items-center gap-1 ${h==="overall"&&c?"animate-pulse-blue":""}`,children:[" ",o.jsx("input",{type:"radio",name:"reputationMode",value:"overall",checked:h==="overall",onChange:()=>g("overall"),disabled:!c})," ",o.jsx("span",{className:"text-xs",children:"Overall"})," "]})]}),c&&o.jsxs("label",{className:"flex items-center gap-2 text-blue-900 dark:text-blue-200 font-semibold",children:[o.jsx("input",{type:"range",min:0,max:1,step:.01,value:p,onChange:M=>y(Number(M.target.value)),className:"w-32 accent-blue-600",style:{verticalAlign:"middle"}}),o.jsxs("span",{className:"ml-2 text-xs",children:[Math.round(p*100),"%"]})]}),o.jsx("button",{className:`px-3 py-1 rounded border text-xs font-bold transition-all ${_==="spacious"?"bg-blue-100 dark:bg-blue-900 border-blue-400 text-blue-700 dark:text-blue-200":"bg-gray-100 dark:bg-gray-800 border-gray-400 text-gray-700 dark:text-gray-200"}`,onClick:()=>b("spacious"),style:{fontSize:13,height:32},children:"Spacious"}),o.jsx("span",{className:"px-2 py-1 rounded bg-blue-200 dark:bg-blue-800 text-blue-900 dark:text-blue-100 font-bold text-sm",children:k}),o.jsx("button",{className:`px-3 py-1 rounded border text-xs font-bold transition-all ${_==="compact"?"bg-blue-100 dark:bg-blue-900 border-blue-400 text-blue-700 dark:text-blue-200":"bg-gray-100 dark:bg-gray-800 border-gray-400 text-gray-700 dark:text-gray-200"}`,onClick:()=>b("compact"),style:{fontSize:13,height:32},children:"Compact"}),o.jsx("button",{className:`px-3 py-2 rounded-full border ml-2 ${O?"border-gray-600 bg-gray-900 text-white":"border-gray-300 bg-white text-black"}`,onClick:()=>E(M=>!M),title:"Grid Settings",style:{fontSize:13,height:32},children:o.jsx("span",{role:"img","aria-label":"settings",children:""})})]}),S&&o.jsxs("div",{ref:Ve,className:`absolute right-8 top-20 z-50 w-80 max-h-[60vh] overflow-y-auto p-4 sm:p-4 p-2 rounded-lg shadow-lg border ${O?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-200 text-black"}`,children:[o.jsx("h3",{className:"font-bold mb-2",children:"Grid Settings"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Master Font Size"}),o.jsx("input",{type:"range",min:"0.7",max:"2",step:"0.05",value:T,onChange:M=>D(Number(M.target.value)),className:"w-full"}),o.jsxs("div",{className:"text-xs mt-1",children:[(T*100).toFixed(0),"%"]})]}),o.jsxs("div",{className:"mb-4 flex gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Name Font Size"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>Z(M=>Math.max(.7,M-.1)),className:"px-2 py-1 rounded bg-gray-300",children:"-"}),o.jsxs("span",{children:[(F*100).toFixed(0),"%"]}),o.jsx("button",{onClick:()=>Z(M=>Math.min(2,M+.1)),className:"px-2 py-1 rounded bg-gray-300",children:"+"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Info Font Size"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>L(M=>Math.max(.7,M-.1)),className:"px-2 py-1 rounded bg-gray-300",children:"-"}),o.jsxs("span",{children:[(K*100).toFixed(0),"%"]}),o.jsx("button",{onClick:()=>L(M=>Math.min(2,M+.1)),className:"px-2 py-1 rounded bg-gray-300",children:"+"})]})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recent Trade Notification Window"}),o.jsx("select",{value:Q,onChange:M=>se(Number(M.target.value)),className:"w-full px-2 py-1 rounded border bg-white text-black",children:le.map(M=>o.jsx("option",{value:M.value,children:M.label},M.value))})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Notification Style"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:ce==="dot",onChange:()=>ye("dot")}),o.jsx("span",{children:"Green Dot"})]}),o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:ce==="flag",onChange:()=>ye("flag")}),o.jsx("span",{children:"Animated Flag"})]})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Notification Size"}),o.jsx("input",{type:"range",min:.7,max:2,step:.05,value:te,onChange:M=>xe(Number(M.target.value)),className:"w-full"}),o.jsxs("div",{className:"text-xs mt-1",children:[(te*100).toFixed(0),"%"]})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{htmlFor:"rank-badge-size",className:"block text-sm font-semibold mb-1",children:"Rank Badge Size"}),o.jsx("input",{id:"rank-badge-size",type:"range",min:"0.7",max:"1.6",step:"0.01",value:Ce,onChange:M=>at(Number(M.target.value)),className:"w-full",style:{accentColor:"#fbbf24"}}),o.jsxs("div",{className:"text-xs mt-1",children:[Ce.toFixed(2),"x"]})]})]})]})}function hH(t){const e=t.exist_in_exchange??t.Exist_in_exchange;return e===!0||e==="true"||e===1||e==="1"}const Q1=({onPairSelect:t,candleType:e,interval:n,trades:r=[],selectedPair:s=null,previewMode:l=!1,filterBar:c,darkMode:d,groupModeEnabled:h,selectedGroupPairs:g=[],setSelectedGroupPairs:p,showForClubFilter:y,setShowForClubFilter:_,onVisiblePairsChange:b,liveFilter:k={true:!0,false:!0},...S})=>{var Nt,Ut,vt,$t,fn,Sn,mn,Ot,ur,Mr,Jn,ar,Lr,er;const[E,O]=x.useState(()=>localStorage.getItem("pair_stats_search")||""),[T,D]=x.useState(!1),[F,Z]=x.useState(()=>Number(localStorage.getItem("pair_stats_master_font"))||1),[K,L]=x.useState(()=>Number(localStorage.getItem("pair_stats_name_font"))||1.2),[Q,se]=x.useState(()=>Number(localStorage.getItem("pair_stats_info_font"))||1),[ce,ye]=x.useState(()=>Number(localStorage.getItem("pair_stats_notif_window"))||15),[te,xe]=x.useState(()=>localStorage.getItem("pair_stats_notif_style")||"dot"),[Ce,at]=x.useState(()=>localStorage.getItem("pair_stats_signal_filter")||"all"),[le,Ve]=x.useState(()=>localStorage.getItem("pair_stats_action_filter")||"all"),[Ue,Ze]=x.useState(()=>localStorage.getItem("pair_stats_machine_filter")||"all"),[M,oe]=x.useState(()=>{const Ne=localStorage.getItem("pair_stats_reputation_intensity");return Ne!==null?Number(Ne):0});x.useEffect(()=>{localStorage.setItem("pair_stats_reputation_intensity",M)},[M]);const[P,B]=x.useState(()=>localStorage.getItem("pair_stats_reputation_mode")||"perTrade");x.useEffect(()=>{localStorage.setItem("pair_stats_reputation_mode",P)},[P]);const[j,V]=x.useState(()=>{const Ne=localStorage.getItem("pair_stats_reputation_enabled");return Ne===null?!0:Ne==="true"});x.useEffect(()=>{localStorage.setItem("pair_stats_reputation_enabled",j)},[j]);const fe=x.useRef(),[lt,et]=x.useState(()=>{const Ne=localStorage.getItem("pair_stats_selected_signals");if(Ne)return JSON.parse(Ne);const nt={};return uH.forEach(wt=>nt[wt]=!0),nt}),[ht,At]=x.useState(()=>localStorage.getItem("pair_stats_signal_radio_mode")==="true"),[xn,Bt]=x.useState(()=>localStorage.getItem("pair_stats_signal_toggle_all")==="true");x.useEffect(()=>{localStorage.setItem("pair_stats_selected_signals",JSON.stringify(lt))},[lt]),x.useEffect(()=>{localStorage.setItem("pair_stats_signal_radio_mode",ht)},[ht]),x.useEffect(()=>{localStorage.setItem("pair_stats_signal_toggle_all",xn)},[xn]);const[Kt,tn]=x.useState([]);x.useEffect(()=>{(async()=>{try{const wt=await(await Nn("/api/machines")).json();tn(Array.isArray(wt.machines)?wt.machines:[])}catch{tn([])}})()},[]);const Hn=Kt,[sn,He]=x.useState(()=>{const Ne=localStorage.getItem("pair_stats_selected_machines");if(Ne)return JSON.parse(Ne);const nt={};return Hn.forEach(wt=>nt[wt.machineid]=!0),nt}),[Dn,Ht]=x.useState(()=>localStorage.getItem("pair_stats_machine_radio_mode")==="true"),[yt,dn]=x.useState(()=>localStorage.getItem("pair_stats_machine_toggle_all")==="true");x.useEffect(()=>{localStorage.setItem("pair_stats_selected_machines",JSON.stringify(sn))},[sn]),x.useEffect(()=>{localStorage.setItem("pair_stats_machine_radio_mode",Dn)},[Dn]),x.useEffect(()=>{localStorage.setItem("pair_stats_machine_toggle_all",yt)},[yt]);const Wt=Array.from(new Set(r.map(Ne=>Ne.action).filter(Boolean))),[an,Un]=x.useState(()=>{const Ne=localStorage.getItem("pair_stats_selected_actions");if(Ne)return JSON.parse(Ne);const nt={};return Wt.forEach(wt=>nt[wt]=!0),nt}),[Cn,Qn]=x.useState(()=>localStorage.getItem("pair_stats_action_radio_mode")==="true"),[me,We]=x.useState(()=>localStorage.getItem("pair_stats_action_toggle_all")==="true");x.useEffect(()=>{localStorage.setItem("pair_stats_selected_actions",JSON.stringify(an))},[an]),x.useEffect(()=>{localStorage.setItem("pair_stats_action_radio_mode",Cn)},[Cn]),x.useEffect(()=>{localStorage.setItem("pair_stats_action_toggle_all",me)},[me]),x.useEffect(()=>{localStorage.setItem("pair_stats_search",E)},[E]),x.useEffect(()=>{localStorage.setItem("pair_stats_master_font",F)},[F]),x.useEffect(()=>{localStorage.setItem("pair_stats_name_font",K)},[K]),x.useEffect(()=>{localStorage.setItem("pair_stats_info_font",Q)},[Q]),x.useEffect(()=>{localStorage.setItem("pair_stats_notif_window",ce)},[ce]),x.useEffect(()=>{localStorage.setItem("pair_stats_notif_style",te)},[te]),x.useEffect(()=>{localStorage.setItem("pair_stats_signal_filter",Ce)},[Ce]),x.useEffect(()=>{localStorage.setItem("pair_stats_action_filter",le)},[le]),x.useEffect(()=>{localStorage.setItem("pair_stats_machine_filter",Ue)},[Ue]);const[Ge,ie]=x.useState(()=>Number(localStorage.getItem("pair_stats_notif_size"))||1);x.useEffect(()=>{localStorage.setItem("pair_stats_notif_size",Ge)},[Ge]),x.useEffect(()=>{if(!T)return;function Ne(nt){fe.current&&!fe.current.contains(nt.target)&&D(!1)}return document.addEventListener("mousedown",Ne),()=>document.removeEventListener("mousedown",Ne)},[T]);function Pe(Ne){return Ne.filter(nt=>{const wt=hH(nt);if(!(k.true&&k.false)){if(k.true&&!wt)return!1;if(k.false&&wt)return!1;if(!k.true&&!k.false)return!1}return!(Object.keys(lt).length&&!lt[nt.signalfrom]||Object.keys(sn).length&&!sn[nt.machineid]||Object.keys(an).length&&!an[nt.action])})}const z=(Ne,nt)=>{const wt=Pe(nt.filter(rn=>rn.pair===Ne)),nn=wt.filter(rn=>rn.action==="SELL").length,ln=wt.filter(rn=>rn.action==="BUY").length,Dt=wt.filter(rn=>rn.hedge===!0||rn.hedge==="true"||rn.hedge===1||rn.hedge==="1"||typeof rn.hedge=="string"&&parseFloat(rn.hedge)>0).length,yn=wt.filter(rn=>rn.type==="running"||rn.type==="assigned"||rn.type==="assign").length,lr=wt.filter(rn=>rn.type==="close"&&rn.pl_after_comm>0).length,Pt=wt.filter(rn=>rn.pl_after_comm>0).reduce((rn,ke)=>rn+(parseFloat(ke.pl_after_comm)||0),0),$n=wt.length;return{sellCount:nn,buyCount:ln,hedgeCount:Dt,runningCount:yn,profitClosedCount:lr,totalProfitAmount:Pt,totalCount:$n}};function pe(Ne,nt){return(l?nt.filter(nn=>{const ln=nn.hedge===!0||nn.hedge==="true"||nn.hedge===1||nn.hedge==="1"||typeof nn.hedge=="string"&&parseFloat(nn.hedge)>0;return nn.pair===Ne&&ln&&nn.pl_after_comm!==void 0}):Pe(nt.filter(nn=>{const ln=nn.hedge===!0||nn.hedge==="true"||nn.hedge===1||nn.hedge==="1"||typeof nn.hedge=="string"&&parseFloat(nn.hedge)>0;return nn.pair===Ne&&ln&&nn.pl_after_comm!==void 0}))).reduce((nn,ln)=>nn+(parseFloat(ln.pl_after_comm)||0),0)}function Fe(Ne,nt,wt){Ne=Ne.replace("#",""),nt=nt.replace("#","");const nn=parseInt(Ne.substring(0,2),16),ln=parseInt(Ne.substring(2,4),16),Dt=parseInt(Ne.substring(4,6),16),yn=parseInt(nt.substring(0,2),16),lr=parseInt(nt.substring(2,4),16),Pt=parseInt(nt.substring(4,6),16),$n=Math.round(nn+(yn-nn)*wt),rn=Math.round(ln+(lr-ln)*wt),ke=Math.round(Dt+(Pt-Dt)*wt);return`#${$n.toString(16).padStart(2,"0")}${rn.toString(16).padStart(2,"0")}${ke.toString(16).padStart(2,"0")}`}function bt(Ne,nt,wt){return[Fe(Ne[0],nt[0],wt),Fe(Ne[1],nt[1],wt)]}const dt=d?["#232526","#414345"]:["#f3f4f6","#e0eafc"];function Zt(Ne){if(typeof Ne!="string")return dt;const nt=Ne.match(/#([0-9a-fA-F]{6})[^#]+#([0-9a-fA-F]{6})/);return nt?[`#${nt[1]}`,`#${nt[2]}`]:dt}const Vt=Array.from(new Set(r.map(Ne=>Ne.pair).filter(Boolean))),kt={};Vt.forEach(Ne=>{kt[Ne]=z(Ne,r)});const ct=Vt.map(Ne=>{var rn,ke;const nt=((rn=kt[Ne])==null?void 0:rn.totalProfitAmount)||0,wt=pe(Ne,r)||0,nn=((ke=kt[Ne])==null?void 0:ke.totalCount)||0,ln=nt+wt,Dt=nn>0?ln/nn:0,yn=r.filter(Me=>Me.pair===Ne),lr=yn.filter(Me=>Me.pl_after_comm>0).length,Pt=yn.filter(Me=>Me.pl_after_comm<0).length,$n=lr-Pt;return{pair:Ne,meanOverall:ln,meanPerTrade:Dt,profit:nt,hedge:wt,totalCount:nn,meanCount:$n}}),ft=Ne=>P==="perTrade"?Ne.meanPerTrade:Ne.meanOverall,Xt=[...ct].sort((Ne,nt)=>ft(nt)-ft(Ne)),pn="#008000",Yn="#e0eafc",Tn="#fbeee6",Gn="#ff5252",In={},bn=Xt.length,re=Xt.findIndex(Ne=>ft(Ne)<0),Ae=re===-1?bn:re,$e=bn-Ae;Xt.forEach((Ne,nt)=>{let wt;if(ft(Ne)>=0&&Ae>0){const nn=Ae>1?nt/(Ae-1):0;wt=`linear-gradient(135deg, ${Fe(pn,Yn,nn*.7)} 0%, ${Fe(pn,Yn,nn)} 100%)`}else if(ft(Ne)<0&&$e>0){const nn=nt-Ae,ln=$e>1?nn/($e-1):0;wt=`linear-gradient(135deg, ${Fe(Tn,Gn,ln*.7)} 0%, ${Fe(Tn,Gn,ln)} 100%)`}else wt=d?"linear-gradient(135deg, #232526 0%, #414345 100%)":"linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%)";In[Ne.pair]={mean:ft(Ne),isPositive:ft(Ne)>=0,cardBg:wt}});const zt=Vt.filter(Ne=>{if(E&&!Ne.toLowerCase().includes(E.toLowerCase()))return!1;const nt=r.filter(wt=>wt.Pair===Ne);return!(Ce!=="all"&&(Ce==="signal"&&!nt.some(wt=>wt.Signal)||Ce==="radio"&&!nt.some(wt=>wt.Radio)||!["signal","radio","all"].includes(Ce)&&!nt.some(wt=>wt.Signal===Ce))||le!=="all"&&!nt.some(wt=>wt.action===le)||Ue!=="all"&&!nt.some(wt=>wt.Machine===Ue))}),[Xe,tt]=x.useState(()=>localStorage.getItem("pair_stats_sort_option")||"latest"),[rt,A]=x.useState(()=>{const Ne=localStorage.getItem("pair_stats_sort_orders");return Ne?JSON.parse(Ne):{...JS}}),G=rt[Xe]??JS[Xe]??!0;x.useEffect(()=>{localStorage.setItem("pair_stats_sort_option",Xe)},[Xe]),x.useEffect(()=>{localStorage.setItem("pair_stats_sort_orders",JSON.stringify(rt))},[rt]);const U=Ne=>{tt(Ne)},J=()=>{A(Ne=>({...Ne,[Xe]:!G}))},Y=[...zt].sort((Ne,nt)=>{const wt=kt[Ne],nn=kt[nt];switch(Xe){case"alpha":return G?Ne.localeCompare(nt):nt.localeCompare(Ne);case"hedgeCount":return G?wt.hedgeCount-nn.hedgeCount:nn.hedgeCount-wt.hedgeCount;case"profitCount":return G?wt.profitClosedCount-nn.profitClosedCount:nn.profitClosedCount-wt.profitClosedCount;case"hedgeAmount":return G?pe(Ne,r)-pe(nt,r):pe(nt,r)-pe(Ne,r);case"profitAmount":return G?wt.totalProfitAmount-nn.totalProfitAmount:nn.totalProfitAmount-wt.totalProfitAmount;case"total":return G?wt.totalCount-nn.totalCount:nn.totalCount-wt.totalCount;case"latest":default:{const ln=Dt=>{const yn=r.filter(lr=>lr.pair===Dt&&(lr.type==="running"||lr.type==="assigned"||lr.type==="assign"));return yn.length===0?0:Math.max(...yn.map(lr=>{const Pt=lr.candel_time||lr.candle_time;return Pt?new Date(Pt.replace(" ","T")+"Z").getTime():0}))};return G?ln(Ne)-ln(nt):ln(nt)-ln(Ne)}case"meanPerTrade":{const ln=ct.find(yn=>yn.pair===Ne),Dt=ct.find(yn=>yn.pair===nt);return((Dt==null?void 0:Dt.meanPerTrade)||0)-((ln==null?void 0:ln.meanPerTrade)||0)}case"meanOverall":{const ln=ct.find(yn=>yn.pair===Ne),Dt=ct.find(yn=>yn.pair===nt);return((Dt==null?void 0:Dt.meanOverall)||0)-((ln==null?void 0:ln.meanOverall)||0)}case"meanCount":{const ln=ct.find(yn=>yn.pair===Ne),Dt=ct.find(yn=>yn.pair===nt);return((Dt==null?void 0:Dt.meanCount)||0)-((ln==null?void 0:ln.meanCount)||0)}}}),X={animation:"fadeSlideIn 0.5s cubic-bezier(0.4,0,0.2,1)"},we="#1e3a8a",[je,_e]=x.useState(()=>localStorage.getItem("pair_stats_density")||"spacious");x.useEffect(()=>{localStorage.setItem("pair_stats_density",je)},[je]);const[Ee,Re]=x.useState(()=>Number(localStorage.getItem("rank_badge_size"))||1);if(x.useEffect(()=>{localStorage.setItem("rank_badge_size",Ee)},[Ee]),x.useEffect(()=>{typeof b=="function"&&b(Y)},[JSON.stringify(Y)]),l&&s){const Ne=s,nt=GS(r,Ne,ce),wt=qS(r,Ne,ce);let nn=d?"#444":"#ddd",ln=d?"linear-gradient(135deg, #232526 0%, #414345 100%)":"linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%)",Dt=!1,yn=!1,lr=3;if(j&&M>0&&In[Ne]){const Yt=In[Ne].cardBg,St=Zt(Yt),q=bt(dt,St,M);ln=`linear-gradient(135deg, ${q[0]} 0%, ${q[1]} 100%)`,Dt=In[Ne].isPositive,yn=!In[Ne].isPositive,lr=In[Ne].bin,nn=Dt?"#43e97b":yn?"#ff5858":nn}let Pt;j?M<.27?Pt="#fff":Pt="#000":Pt="#fff";let $n;M<=.3?$n="#16a34a":M<=.55?$n="#fff":$n=we;const rn=Xt.findIndex(Yt=>Yt.pair===Ne),ke=rn>=0?rn+1:null,Me=Xt.length,Le=Dt&&rn<Me/2,Ct=yn&&rn>=Me/2;let pt="#bfa100";if(j&&In[Ne]){pt="#000";const Yt=In[Ne].isPositive,St=!Yt;(Yt&&rn<Me*.25||St&&rn>=Me*.75)&&(pt="#fff")}return o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:220},children:o.jsxs("div",{className:`relative flex flex-col justify-between rounded shadow transition-all duration-300 break-words group ${je==="compact"?"p-2":""}`,style:{wordBreak:"break-word",overflowWrap:"break-word",minWidth:je==="compact"?"140px":"220px",maxWidth:"100%",minHeight:je==="compact"?`${120*F*Q}px`:`${180*F*Q}px`,padding:je==="compact"?`${8*F*Q}px`:`${16*F*Q}px`,border:`2.5px solid ${nn}`,background:ln,color:Pt,...X,fontSize:je==="compact"?`${.92*Q*F}rem`:void 0},onClick:l?void 0:()=>{window.open(`/reports/list?pair=${encodeURIComponent(Ne)}&interval=${encodeURIComponent(n)}&type=${encodeURIComponent(e)}`,"_blank")},children:[o.jsx("style",{children:`
            .group:hover {
              transform: scale(1.08);
              box-shadow: 0 12px 36px 0 rgba(0,0,0,0.22), 0 4px 16px 0 rgba(0,0,0,0.13);
              z-index: 2;
              border-color: ${Dt?"#43e97b":yn?"#ff5252":"#60a5fa"} !important;
              box-shadow: 0 12px 36px 0 rgba(0,0,0,0.22), 0 4px 16px 0 rgba(0,0,0,0.13), 0 0 0 4px ${Dt?"rgba(67,233,123,0.25)":yn?"rgba(255,82,82,0.22)":"rgba(96,165,250,0.18)"};
              transition: transform 0.22s cubic-bezier(0.4,0,0.2,1), box-shadow 0.22s cubic-bezier(0.4,0,0.2,1), border-color 0.22s cubic-bezier(0.4,0,0.2,1);
            }
          `}),ke&&j&&o.jsxs("span",{className:`absolute top-0 right-0 z-10 px-3 py-1.5 rounded-bl-xl rounded-tr-lg text-xs font-extrabold shadow-xl border-2 transition-transform duration-200 select-none flex items-center gap-1
                ${ke===1?"border-yellow-400 bg-gradient-to-r from-yellow-200 via-yellow-100 to-white":""}
                ${ke===2?"border-gray-400 bg-gradient-to-r from-gray-200 via-gray-100 to-white":""}
                ${ke===3?"border-amber-700 bg-gradient-to-r from-amber-200 via-amber-100 to-white":""}
                ${ke>3?"border-white bg-white/60 backdrop-blur-md":""}
                ${P==="perTrade"?"animate-pulse-gold":""}
                ${P==="overall"?"animate-pulse-blue":""}
                hover:scale-110`,style:{letterSpacing:"0.04em",boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10), 0 1.5px 4px 0 rgba(0,0,0,0.10)",color:ke===1?"#bfa100":ke===2?"#888":ke===3?"#a16207":"#1e293b",borderWidth:"2.5px",fontFamily:"Inter, Segoe UI, Arial, sans-serif",minWidth:"54px",justifyContent:"center",background:ke>3?"rgba(255,255,255,0.65)":void 0,backdropFilter:ke>3?"blur(6px)":void 0,fontSize:`${Ee}em`,padding:`${.7*Ee}em ${1.1*Ee}em`},children:[ke===1&&"",ke===2&&"",ke===3&&"",o.jsxs("span",{children:["#",ke]})]}),nt&&te==="dot"&&o.jsx("span",{className:"absolute top-0 left-2 flex items-center z-10",style:{transform:"translateY(-0.35em)"},title:"Recent trade(s)",children:o.jsx("span",{className:"rounded-full animate-pulse border-2 border-white flex items-center justify-center text-xs font-extrabold",style:{minWidth:`${1.5*Ge}em`,minHeight:`${1.5*Ge}em`,width:`${1.5*Ge}em`,height:`${1.5*Ge}em`,background:"#bfa100",color:pt,fontWeight:"bold",fontSize:`${1*Ge}em`},children:wt})}),nt&&te==="flag"&&o.jsxs("span",{className:"absolute top-0 left-2 flex items-center z-10 animate-bounce",style:{fontSize:`${1.5*Ge}rem`,transform:"translateY(-0.35em)"},title:"Recent trade(s)",children:[o.jsx("span",{style:{color:"#bfa100",fontWeight:"bold"},children:""}),o.jsx("span",{className:"ml-1 text-xs font-extrabold",style:{color:pt,fontSize:`${1*Ge}rem`,fontWeight:"bold"},children:wt})]}),o.jsx("div",{className:"font-bold mb-2 pair-name",style:{fontSize:`${1.2*K*F}rem`,wordBreak:"break-word"},children:Ne}),o.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center",style:{flex:1},children:[o.jsxs("div",{className:"grid grid-cols-4 gap-2 w-full mb-2",style:{fontSize:`${1*Q*F}rem`,lineHeight:1.4,textAlign:"center"},children:[o.jsx("div",{children:"Sell"}),o.jsx("div",{children:"Buy"}),o.jsx("div",{children:"Hedge"}),o.jsx("div",{children:"Running"}),o.jsx("div",{children:o.jsx("b",{children:(Nt=kt[Ne])==null?void 0:Nt.sellCount})}),o.jsx("div",{children:o.jsx("b",{children:(Ut=kt[Ne])==null?void 0:Ut.buyCount})}),o.jsx("div",{children:o.jsx("b",{children:(vt=kt[Ne])==null?void 0:vt.hedgeCount})}),o.jsx("div",{children:o.jsx("b",{children:($t=kt[Ne])==null?void 0:$t.runningCount})})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 w-full",style:{fontSize:`${1*Q*F}rem`,lineHeight:1.4,textAlign:"center"},children:[o.jsx("div",{children:"Closed"}),o.jsx("div",{children:"Profit"}),o.jsx("div",{children:"Hedge"}),o.jsx("div",{children:"Total"}),o.jsx("div",{children:o.jsx("b",{children:(fn=kt[Ne])==null?void 0:fn.profitClosedCount})}),o.jsx("div",{children:o.jsx("b",{style:{color:Dt&&Le&&((Sn=kt[Ne])==null?void 0:Sn.totalProfitAmount)<0?"#fff":Dt||yn?$n:((mn=kt[Ne])==null?void 0:mn.totalProfitAmount)>0?"limegreen":((Ot=kt[Ne])==null?void 0:Ot.totalProfitAmount)<0?"red":void 0,fontWeight:Dt||yn?"bold":void 0},children:((ur=kt[Ne])==null?void 0:ur.totalProfitAmount)>0?`+${(Mr=kt[Ne])==null?void 0:Mr.totalProfitAmount.toFixed(2)}`:((Jn=kt[Ne])==null?void 0:Jn.totalProfitAmount)<0?`-${Math.abs((ar=kt[Ne])==null?void 0:ar.totalProfitAmount).toFixed(2)}`:(Lr=kt[Ne])==null?void 0:Lr.totalProfitAmount.toFixed(2)})}),o.jsx("div",{children:o.jsx("b",{style:{color:yn&&Ct&&pe(Ne,r)>0?"#fff":Dt?"red":yn?lr===0?statYellow:"red":pe(Ne,r)>0?"limegreen":pe(Ne,r)<0?"red":void 0,fontWeight:Dt||yn?"bold":void 0},children:pe(Ne,r)>0?`+${pe(Ne,r).toFixed(2)}`:pe(Ne,r)<0?`-${Math.abs(pe(Ne,r)).toFixed(2)}`:pe(Ne,r).toFixed(2)})}),o.jsx("div",{children:o.jsx("b",{children:(er=kt[Ne])==null?void 0:er.totalCount})})]})]})]},Ne)})}const gt=`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 ${je==="compact"?"xl:grid-cols-6 gap-2":"gap-4"}${s&&!l?" grid-faded":""}`;return o.jsxs("div",{className:`p-2 sm:p-4 min-h-screen transition-colors duration-300 ${d?"bg-black text-white":"bg-white text-black"}`,children:[o.jsx("div",{"aria-hidden":"true",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",opacity:d?.18:.13,background:d?"linear-gradient(120deg, #232526 0%, #414345 50%, #232526 100%)":"linear-gradient(120deg, #e0eafc 0%, #cfdef3 50%, #e0eafc 100%)",backgroundSize:"200% 200%",animation:"moveGradient 16s ease-in-out infinite"}}),o.jsxs("div",{className:"w-full flex flex-wrap gap-4 mb-4 flex-col sm:flex-row",children:[c,o.jsx(fH,{search:E,setSearch:O,sortOption:Xe,handleSortChange:U,sortAsc:G,handleSortToggle:J,reputationEnabled:j,setReputationEnabled:V,reputationMode:P,setReputationMode:B,reputationIntensity:M,setReputationIntensity:oe,density:je,setDensity:_e,totalPairs:Y.filter(Ne=>zt.includes(Ne)).length,settingsOpen:T,setSettingsOpen:D,darkMode:d,masterFont:F,setMasterFont:Z,nameFont:K,setNameFont:L,infoFont:Q,setInfoFont:se,notifWindow:ce,setNotifWindow:ye,notifStyle:te,setNotifStyle:xe,notifSize:Ge,setNotifSize:ie,rankBadgeSize:Ee,setRankBadgeSize:Re,NOTIF_WINDOWS:cH,settingsRef:fe,showForClubFilter:y,setShowForClubFilter:_})]}),Y.length===0?o.jsx("div",{className:gt,style:{minHeight:"320px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("span",{style:{fontSize:24,fontWeight:600},children:"No grid available"})}):o.jsx("div",{className:gt,children:Y.filter(Ne=>zt.includes(Ne)).map(Ne=>{var q,ee,ve,Qe,ot,xt,Gt,ze,wn,Lt,Pn,qt,fr,Xn;const nt=GS(r,Ne,ce),wt=qS(r,Ne,ce);let nn=d?"#444":"#ddd",ln=d?"linear-gradient(135deg, #232526 0%, #414345 100%)":"linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%)",Dt=!1,yn=!1,lr=3;if(j&&M>0&&In[Ne]){const vr=In[Ne].cardBg,Ar=Zt(vr),rr=bt(dt,Ar,M);ln=`linear-gradient(135deg, ${rr[0]} 0%, ${rr[1]} 100%)`,Dt=In[Ne].isPositive,yn=!In[Ne].isPositive,lr=In[Ne].bin,nn=Dt?"#43e97b":yn?"#ff5858":nn}let Pt;j?M<.27?Pt="#fff":Pt="#000":Pt="#fff";let $n;M<=.3?$n="#16a34a":M<=.55?$n="#fff":$n=we;const rn=Xt.findIndex(vr=>vr.pair===Ne),ke=rn>=0?rn+1:null,Me=Xt.length,Le=Dt&&rn<Me/2,Ct=yn&&rn>=Me/2;let pt="#bfa100";if(j&&In[Ne]){pt="#000";const vr=In[Ne].isPositive,Ar=!vr;(vr&&rn<Me*.25||Ar&&rn>=Me*.75)&&(pt="#fff")}const Yt=h&&g&&g.includes(Ne),St=`relative flex flex-col justify-between rounded shadow transition-all duration-300 break-words group ${je==="compact"?"p-2":""}${Yt?" selected-for-group":""}`;return o.jsxs("div",{className:St,style:{wordBreak:"break-word",overflowWrap:"break-word",minWidth:je==="compact"?"140px":"220px",maxWidth:"100%",minHeight:je==="compact"?`${120*F*Q}px`:`${180*F*Q}px`,padding:je==="compact"?`${8*F*Q}px`:`${16*F*Q}px`,border:`2.5px solid ${nn}`,background:ln,color:Pt,...X,fontSize:je==="compact"?`${.92*Q*F}rem`:void 0,filter:s&&Ne!==s&&!l?"blur(2px) brightness(0.7)":void 0,opacity:s&&Ne!==s&&!l?.5:1,pointerEvents:s&&Ne!==s&&!l?"none":void 0},onClick:()=>{h&&p?p(vr=>vr.includes(Ne)?vr.filter(rr=>rr!==Ne):[...vr,Ne]):t(Ne)},children:[o.jsx("style",{children:`
                  .group:hover {
                    transform: scale(1.08);
                    box-shadow: 0 12px 36px 0 rgba(0,0,0,0.22), 0 4px 16px 0 rgba(0,0,0,0.13);
                    z-index: 2;
                    border-color: ${Dt?"#43e97b":yn?"#ff5252":"#60a5fa"} !important;
                    box-shadow: 0 12px 36px 0 rgba(0,0,0,0.22), 0 4px 16px 0 rgba(0,0,0,0.13), 0 0 0 4px ${Dt?"rgba(67,233,123,0.25)":yn?"rgba(255,82,82,0.22)":"rgba(96,165,250,0.18)"};
                    transition: transform 0.22s cubic-bezier(0.4,0,0.2,1), box-shadow 0.22s cubic-bezier(0.4,0,0.2,1), border-color 0.22s cubic-bezier(0.4,0,0.2,1);
                  }
                  ${h?`
                    .group {
                      animation: glitter 1.5s infinite;
                    }
                    .group.selected-for-group {
                      animation: none;
                      transform: scale(1.05);
                      border: 3px solid #f59e0b;
                    }
                  `:""}

                  @keyframes glitter {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.02); }
                  }
                `}),ke&&j&&o.jsxs("span",{className:`absolute top-0 right-0 z-10 px-3 py-1.5 rounded-bl-xl rounded-tr-lg text-xs font-extrabold shadow-xl border-2 transition-transform duration-200 select-none flex items-center gap-1
                      ${ke===1?"border-yellow-400 bg-gradient-to-r from-yellow-200 via-yellow-100 to-white":""}
                      ${ke===2?"border-gray-400 bg-gradient-to-r from-gray-200 via-gray-100 to-white":""}
                      ${ke===3?"border-amber-700 bg-gradient-to-r from-amber-200 via-amber-100 to-white":""}
                      ${ke>3?"border-white bg-white/60 backdrop-blur-md":""}
                      ${P==="perTrade"?"animate-pulse-gold":""}
                      ${P==="overall"?"animate-pulse-blue":""}
                      hover:scale-110`,style:{letterSpacing:"0.04em",boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10), 0 1.5px 4px 0 rgba(0,0,0,0.10)",color:ke===1?"#bfa100":ke===2?"#888":ke===3?"#a16207":"#1e293b",borderWidth:"2.5px",fontFamily:"Inter, Segoe UI, Arial, sans-serif",minWidth:"54px",justifyContent:"center",background:ke>3?"rgba(255,255,255,0.65)":void 0,backdropFilter:ke>3?"blur(6px)":void 0,fontSize:`${Ee}em`,padding:`${.7*Ee}em ${1.1*Ee}em`},children:[ke===1&&"",ke===2&&"",ke===3&&"",o.jsxs("span",{children:["#",ke]})]}),nt&&te==="dot"&&o.jsx("span",{className:"absolute top-0 left-2 flex items-center z-10",style:{transform:"translateY(-0.35em)"},title:"Recent trade(s)",children:o.jsx("span",{className:"rounded-full animate-pulse border-2 border-white flex items-center justify-center text-xs font-extrabold",style:{minWidth:`${1.5*Ge}em`,minHeight:`${1.5*Ge}em`,width:`${1.5*Ge}em`,height:`${1.5*Ge}em`,background:"#bfa100",color:pt,fontWeight:"bold",fontSize:`${1*Ge}em`},children:wt})}),nt&&te==="flag"&&o.jsxs("span",{className:"absolute top-0 left-2 flex items-center z-10 animate-bounce",style:{fontSize:`${1.5*Ge}rem`,transform:"translateY(-0.35em)"},title:"Recent trade(s)",children:[o.jsx("span",{style:{color:"#bfa100",fontWeight:"bold"},children:""}),o.jsx("span",{className:"ml-1 text-xs font-extrabold",style:{color:pt,fontSize:`${1*Ge}rem`,fontWeight:"bold"},children:wt})]}),o.jsx("div",{className:"font-bold mb-2 pair-name",style:{fontSize:`${1.2*K*F}rem`,wordBreak:"break-word"},children:Ne}),o.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center",style:{flex:1},children:[o.jsxs("div",{className:"grid grid-cols-4 gap-2 w-full mb-2",style:{fontSize:`${1*Q*F}rem`,lineHeight:1.4,textAlign:"center"},children:[o.jsx("div",{children:"Sell"}),o.jsx("div",{children:"Buy"}),o.jsx("div",{children:"Hedge"}),o.jsx("div",{children:"Running"}),o.jsx("div",{children:o.jsx("b",{children:(q=kt[Ne])==null?void 0:q.sellCount})}),o.jsx("div",{children:o.jsx("b",{children:(ee=kt[Ne])==null?void 0:ee.buyCount})}),o.jsx("div",{children:o.jsx("b",{children:(ve=kt[Ne])==null?void 0:ve.hedgeCount})}),o.jsx("div",{children:o.jsx("b",{children:(Qe=kt[Ne])==null?void 0:Qe.runningCount})})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 w-full",style:{fontSize:`${1*Q*F}rem`,lineHeight:1.4,textAlign:"center"},children:[o.jsx("div",{children:"Closed"}),o.jsx("div",{children:"Profit"}),o.jsx("div",{children:"Hedge"}),o.jsx("div",{children:"Total"}),o.jsx("div",{children:o.jsx("b",{children:(ot=kt[Ne])==null?void 0:ot.profitClosedCount})}),o.jsx("div",{children:o.jsx("b",{style:{color:Dt&&Le&&((xt=kt[Ne])==null?void 0:xt.totalProfitAmount)<0?"#fff":Dt||yn?$n:((Gt=kt[Ne])==null?void 0:Gt.totalProfitAmount)>0?"limegreen":((ze=kt[Ne])==null?void 0:ze.totalProfitAmount)<0?"red":void 0,fontWeight:Dt||yn?"bold":void 0},children:((wn=kt[Ne])==null?void 0:wn.totalProfitAmount)>0?`+${(Lt=kt[Ne])==null?void 0:Lt.totalProfitAmount.toFixed(2)}`:((Pn=kt[Ne])==null?void 0:Pn.totalProfitAmount)<0?`-${Math.abs((qt=kt[Ne])==null?void 0:qt.totalProfitAmount).toFixed(2)}`:(fr=kt[Ne])==null?void 0:fr.totalProfitAmount.toFixed(2)})}),o.jsx("div",{children:o.jsx("b",{style:{color:yn&&Ct&&pe(Ne,r)>0?"#fff":Dt?"red":yn?lr===0?statYellow:"red":pe(Ne,r)>0?"limegreen":pe(Ne,r)<0?"red":void 0,fontWeight:Dt||yn?"bold":void 0},children:pe(Ne,r)>0?`+${pe(Ne,r).toFixed(2)}`:pe(Ne,r)<0?`-${Math.abs(pe(Ne,r)).toFixed(2)}`:pe(Ne,r).toFixed(2)})}),o.jsx("div",{children:o.jsx("b",{children:(Xn=kt[Ne])==null?void 0:Xn.totalCount})})]})]})]},Ne)})}),o.jsx("style",{children:`
        .grid-faded > div:not(.selected) {
          transition: filter 0.4s cubic-bezier(0.4,0,0.2,1), opacity 0.4s cubic-bezier(0.4,0,0.2,1);
        }
        .selected {
          z-index: 20;
          transform: scale(1.12) translate(-12vw, -8vh);
          box-shadow: 0 12px 36px 0 rgba(0,0,0,0.22), 0 4px 16px 0 rgba(0,0,0,0.13), 0 0 0 6px #fbbf24cc;
          transition: transform 0.5s cubic-bezier(0.4,0,0.2,1), box-shadow 0.5s cubic-bezier(0.4,0,0.2,1);
        }
      `}),o.jsx("div",{style:{position:"fixed",right:"1.5rem",bottom:"1.2rem",zIndex:20,fontSize:"1rem",fontWeight:600,color:d?"rgba(255,255,255,0.32)":"rgba(30,41,59,0.32)",letterSpacing:"0.04em",pointerEvents:"none",userSelect:"none",fontFamily:"Inter, Segoe UI, Arial, sans-serif",textShadow:d?"0 1px 4px #0008":"0 1px 4px #fff8"},children:"Crafted by LAB"})]})};Q1.propTypes={onPairSelect:Gl.func.isRequired,candleType:Gl.string,interval:Gl.string,trades:Gl.array,selectedPair:Gl.string,previewMode:Gl.bool,filterBar:Gl.node,darkMode:Gl.bool};function gH(t){if(!t&&t!==0)return null;if(typeof t=="number"&&!Number.isNaN(t))return Math.max(0,Math.floor(t));const e=String(t).trim().toLowerCase();if(!e)return null;if(/^\d{1,2}(:\d{1,2}){0,2}$/.test(e)){const c=e.split(":").map(d=>parseInt(d,10)||0);if(c.length===3){const[d,h,g]=c;return d*3600+h*60+g}if(c.length===2){const[d,h]=c;return d*60+h}return c[0]}let n=0;const r=/(\d+)(h|m|s)/g;let s;for(;(s=r.exec(e))!==null;){const c=parseInt(s[1],10),d=s[2];d==="h"&&(n+=c*3600),d==="m"&&(n+=c*60),d==="s"&&(n+=c)}if(n>0)return n;const l=parseInt(e,10);return Number.isNaN(l)?null:Math.max(0,l)}function Bm(t){if(t==null||Number.isNaN(t))return"--";const e=Math.max(0,Math.floor(t));if(e<60)return`${e}s`;if(e<3600){const l=Math.floor(e/60),c=e%60;return`${l}m ${c}s`}const n=Math.floor(e/3600),r=Math.floor(e%3600/60),s=e%60;return`${n}h ${r}m ${s}s`}function OT({onRefresh:t,storageKey:e="default",initialIntervalSec:n=20,initialAutoOn:r=!1,style:s,className:l}){const[c,d]=Kr.useState(()=>{try{const K=localStorage.getItem(`refresh_${e}_autoOn`);return K?JSON.parse(K)===!0:r}catch{return r}}),[h,g]=Kr.useState(()=>{try{const K=localStorage.getItem(`refresh_${e}_intervalSec`),L=K?parseInt(K,10):n;return Number.isNaN(L)?n:L}catch{return n}}),[p,y]=Kr.useState(()=>Date.now()),[_,b]=Kr.useState(0),[k,S]=Kr.useState(!1);Kr.useEffect(()=>{const K=setInterval(()=>b(L=>L+1),1e3);return()=>clearInterval(K)},[]),Kr.useEffect(()=>{try{localStorage.setItem(`refresh_${e}_autoOn`,JSON.stringify(c))}catch{}},[c,e]),Kr.useEffect(()=>{try{localStorage.setItem(`refresh_${e}_intervalSec`,String(h))}catch{}},[h,e]),Kr.useEffect(()=>{if(!c)return;const K=Date.now(),L=p+h*1e3;K>=L&&E()},[_,c,h]);const E=async()=>{if(!k){S(!0),y(Date.now());try{await Promise.resolve(t&&t())}catch{}finally{S(!1)}}},O=Kr.useMemo(()=>{if(!c)return null;const K=p+h*1e3;return Math.max(0,Math.ceil((K-Date.now())/1e3))},[c,h,p,_]),T=Kr.useMemo(()=>c?null:Math.max(0,Math.floor((Date.now()-p)/1e3)),[c,p,_]),D=()=>{const K=prompt("Set auto refresh interval (e.g., 45, 90s, 2m, 1h 5m, or HH:MM:SS):",String(h));if(K==null)return;const L=gH(K);if(L==null||L<=0){alert("Please enter a valid time greater than 0.");return}g(L)},F={display:"flex",alignItems:"center",gap:8,...s},Z={padding:"6px 10px",borderRadius:8,border:"1px solid #d1d5db",background:"#f3f4f6",fontWeight:700,cursor:"pointer"};return o.jsxs("div",{className:l,style:F,children:[o.jsxs("button",{onClick:E,disabled:k,title:k?"Refreshing...":c?"Click to refresh now":"Click to refresh",style:{...Z,background:k?"#fbbf24":"#e5e7eb",borderColor:k?"#f59e0b":"#cbd5e1",opacity:k?.8:1,cursor:k?"not-allowed":"pointer"},children:[k?"":""," ",Bm(c?O:T)]}),o.jsx("button",{onClick:()=>d(K=>!K),title:"Auto Refresh",style:{...Z,background:c?"linear-gradient(90deg, #22c55e 60%, #16a34a 100%)":"#e5e7eb",color:c?"#fff":"#111827",border:"none"},children:c?"Auto: ON":"Auto: OFF"}),o.jsx("button",{onClick:D,title:`Set interval (current: ${Bm(h)})`,style:{...Z,padding:"6px 8px",borderRadius:999},children:""})]})}const jh=t=>{if(t===!0||t==="true"||t===1||t==="1")return!0;if(t===!1||t==="false"||t===0||t==="0"||t===null||t===void 0)return!1;if(typeof t=="string"){const e=parseFloat(t);return!isNaN(e)&&e>0}return!1},XS=t=>{if(t===!0||t==="true"||t===1||t==="1")return!0;if(typeof t=="string"){const e=parseFloat(t);return!isNaN(e)&&e>0}return!1};function pH({width:t=400,height:e=80,opacity:n=.4}){const[r,s]=x.useState([]),[l,c]=x.useState([]),d=x.useRef(0),h=[0,40,80,120,160,200,240,280,320,360,400];return x.useEffect(()=>{let g;function p(){d.current+=.008;const y=h.map((b,k)=>{const S=40+20*Math.sin(d.current+k*.5)+10*Math.sin(d.current*.5+k);return`${b},${Math.round(S+20)}`}),_=h.map((b,k)=>{const S=40+20*Math.cos(d.current+k*.6)+10*Math.cos(d.current*.4+k);return`${b},${Math.round(S)}`});s(y),c(_),g=requestAnimationFrame(p)}return p(),()=>cancelAnimationFrame(g)},[]),o.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:0,opacity:n},viewBox:`0 0 ${t} ${e}`,fill:"none",preserveAspectRatio:"none",children:[o.jsx("polyline",{points:r.join(" "),stroke:"green",strokeWidth:"4",fill:"none",strokeLinejoin:"round"}),o.jsx("polyline",{points:l.join(" "),stroke:"red",strokeWidth:"4",fill:"none",strokeLinejoin:"round"})]})}const mH=()=>{const t=Xc(),[e,n]=x.useState(()=>{if(typeof window<"u"){const yt=localStorage.getItem("pair_stats_theme");return yt?yt==="dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[r,s]=x.useState("Regular"),[l,c]=x.useState("15m"),[d,h]=x.useState([]),[g,p]=x.useState([]),[y,_]=x.useState(!1),[b,k]=x.useState([]),[S,E]=x.useState("All"),[O,T]=x.useState([]),D=["2POLE_IN5LOOP","IMACD","2POLE_Direct_Signal","HIGHEST SWING HIGH","LOWEST SWING LOW","NORMAL SWING HIGH","NORMAL SWING LOW","ProGap","CrossOver","Spike","Kicker"],[F,Z]=x.useState(()=>{const yt=localStorage.getItem("pair_stats_selected_signals");if(yt)return JSON.parse(yt);const dn={};return D.forEach(Wt=>dn[Wt]=!0),dn}),[K,L]=x.useState(()=>localStorage.getItem("pair_stats_signal_radio_mode")==="true"),[Q,se]=x.useState(()=>localStorage.getItem("pair_stats_signal_toggle_all")==="true"),[ce,ye]=x.useState([]);x.useEffect(()=>{(async()=>{try{const Wt=await(await Nn("/api/machines")).json();ye(Array.isArray(Wt.machines)?Wt.machines:[])}catch{ye([])}})()},[]);const te=ce,[xe,Ce]=x.useState(()=>{const yt=localStorage.getItem("pair_stats_selected_machines");if(yt)return JSON.parse(yt);const dn={};return te.forEach(Wt=>dn[Wt.machineid]=!0),dn}),[at,le]=x.useState(()=>localStorage.getItem("pair_stats_machine_radio_mode")==="true"),[Ve,Ue]=x.useState(()=>localStorage.getItem("pair_stats_machine_toggle_all")==="true"),[Ze,M]=x.useState(()=>{const yt=localStorage.getItem("pair_stats_selected_actions");return yt?JSON.parse(yt):{BUY:!0,SELL:!0}}),[oe,P]=x.useState(()=>localStorage.getItem("pair_stats_action_radio_mode")==="true"),[B,j]=x.useState(()=>localStorage.getItem("pair_stats_action_toggle_all")==="true"),[V,fe]=x.useState(()=>{const yt=localStorage.getItem("pair_stats_live_filter");if(yt)try{return JSON.parse(yt)}catch{return{true:!0,false:!0}}return{true:!0,false:!0}});x.useEffect(()=>{localStorage.setItem("pair_stats_live_filter",JSON.stringify(V))},[V]);const[lt,et]=x.useState(()=>localStorage.getItem("pair_stats_live_radio_mode")==="true");x.useEffect(()=>{localStorage.setItem("pair_stats_live_radio_mode",lt?"true":"false")},[lt]),x.useEffect(()=>{Nn("/api/trades").then(yt=>yt.json()).then(yt=>{const dn=Array.isArray(yt.trades)?yt.trades:[];h(dn);const Wt=[...new Set(dn.map(an=>an.pair).filter(Boolean))];p(Wt)}).catch(()=>{h([]),p([])})},[]);const ht=async()=>{try{const[yt,dn]=await Promise.all([Nn("/api/machines"),Nn("/api/trades")]),Wt=yt.ok?await yt.json():{machines:[]},an=dn.ok?await dn.json():{trades:[]},Un=Array.isArray(Wt.machines)?Wt.machines:[],Cn=Array.isArray(an.trades)?an.trades:[];ye(Un),h(Cn);const Qn=[...new Set(Cn.map(me=>me.pair).filter(Boolean))];p(Qn)}catch{}};x.useEffect(()=>{g.length>0&&console.log("Unique symbols in dashboard:",g,"Count:",g.length)},[g]);const At=Hn(d);function xn(yt,dn){if(dn==="All")return yt;switch(dn){case"Total Closed Stats":return yt.filter(Wt=>Wt.type==="close"||Wt.type==="hedge_close");case"Direct Closed Stats":return yt.filter(Wt=>Wt.type==="close");case"Hedge Closed Stats":return yt.filter(Wt=>jh(Wt.hedge)&&Wt.type==="hedge_close");case"Total Running Stats":return yt.filter(Wt=>Wt.type==="running"||Wt.type==="hedge_hold");case"Direct Running Stats":return yt.filter(Wt=>{const an=jh(Wt.hedge);return(Wt.type==="running"||Wt.type==="hedge_hold")&&!an});case"Hedge Running Stats":return yt.filter(Wt=>{const an=jh(Wt.hedge);return!XS(Wt.hedge_1_1_bool)&&an&&(Wt.type==="running"||Wt.type==="hedge_hold")});case"Total Stats":return yt;case"Buy Sell Stats":return yt.filter(Wt=>Wt.action==="BUY"||Wt.action==="SELL");case"Hedge on Hold":return yt.filter(Wt=>{const an=jh(Wt.hedge),Un=XS(Wt.hedge_1_1_bool);return an&&Un&&(Wt.type==="running"||Wt.type==="hedge_hold")});default:return yt}}const Bt=xn(At,S),Kt=[...new Set(Bt.map(yt=>yt.pair).filter(Boolean))];x.useEffect(()=>{Kt.length>0?console.log("Filtered symbols for",S,":",Kt,"Count:",Kt.length):console.log("No symbols for",S)},[Kt,S]);const tn=yt=>{y?k(dn=>dn.some(an=>an===yt)?dn.filter(an=>an!==yt):[...dn,yt]):t(`/reports/list?pair=${encodeURIComponent(yt)}&interval=${encodeURIComponent(l)}&type=${encodeURIComponent(r)}`)};function Hn(yt){return yt.filter(dn=>!(Object.keys(F).length&&!F[dn.signalfrom]||Object.keys(xe).length&&!xe[dn.machineid]||Object.keys(Ze).length&&!Ze[dn.action]))}Hn(d),x.useEffect(()=>{e?(document.body.classList.add("dark"),localStorage.setItem("pair_stats_theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("pair_stats_theme","light"))},[e]);const sn=o.jsx(Z0,{canonicalSignalKeys:D,selectedSignals:F,setSelectedSignals:Z,signalRadioMode:K,setSignalRadioMode:L,signalToggleAll:Q,setSignalToggleAll:se,allMachines:te,selectedMachines:xe,setSelectedMachines:Ce,machineRadioMode:at,setMachineRadioMode:le,machineToggleAll:Ve,setMachineToggleAll:Ue,selectedActions:Ze,setSelectedActions:M,actionRadioMode:oe,setActionRadioMode:P,actionToggleAll:B,setActionToggleAll:j,liveFilter:V,setLiveFilter:fe,liveRadioMode:lt,setLiveRadioMode:et,trades:d,darkMode:e}),[He,Dn]=x.useState(!1),Ht=Bt.filter(yt=>Kt.includes(yt.pair));return o.jsxs("div",{style:{minHeight:"100vh",width:"100vw",position:"relative",background:e?"#000":"#f8fafc",display:"flex"},children:[o.jsx(R1,{isOpen:He,toggleSidebar:()=>Dn(!He)}),o.jsxs("div",{style:{flex:1,minWidth:0,marginLeft:He?"256px":"80px",transition:"margin-left 0.3s",padding:"0 24px"},children:[o.jsxs("div",{className:"sticky top-0 z-40 flex justify-between items-center border-b border-gray-200 dark:border-gray-700 shadow-sm bg-[#f5f6fa] dark:bg-black",style:{minHeight:"80px",height:"80px",padding:"0 16px",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0,pointerEvents:"none"},children:o.jsx(pH,{width:1600,height:80,opacity:.4})}),o.jsx("div",{style:{width:48,zIndex:1}}),o.jsxs("h1",{className:"relative z-10 text-4xl font-extrabold text-center bg-gradient-to-r from-blue-500 via-pink-500 to-yellow-400 bg-clip-text text-transparent drop-shadow-lg tracking-tight animate-pulse",style:{WebkitTextStroke:"1px #222",textShadow:"0 4px 24px rgba(0,0,0,0.18)",margin:0,zIndex:1},children:["LAB",o.jsx("span",{className:"block w-16 h-1 mx-auto mt-2 rounded-full bg-gradient-to-r from-blue-400 via-pink-400 to-yellow-300 animate-gradient-x"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginRight:0,zIndex:1},children:[o.jsx(OT,{onRefresh:ht,storageKey:"report_dashboard",initialIntervalSec:60,initialAutoOn:!1}),o.jsxs("button",{onClick:()=>_(yt=>!yt),style:{background:y?"linear-gradient(90deg, #22c55e 60%, #16a34a 100%)":"linear-gradient(90deg, #e5e7eb 60%, #d1d5db 100%)",color:y?"#fff":"#222",border:"none",borderRadius:10,padding:"6px 14px",fontWeight:700,fontSize:15,cursor:"pointer",marginRight:4,boxShadow:y?"0 2px 8px #22c55e44":"0 1px 2px #8882",transition:"all 0.18s cubic-bezier(.4,2,.6,1)",transform:y?"scale(1.04)":"scale(1)",outline:y?"2px solid #22c55e":"none",display:"flex",alignItems:"center",gap:6},className:y?"animate-pulse":"",title:"Enable/Disable Group Mode",children:[o.jsx("span",{style:{fontSize:18},children:y?"":""}),"Group Mode"]}),o.jsxs("button",{onClick:()=>{const yt=new Set(O),dn=new Set(b),Wt=O.every(an=>dn.has(an));k(Wt?b.filter(an=>!yt.has(an)):Array.from(new Set([...b,...O])))},disabled:!y,style:{padding:"6px 14px",borderRadius:10,border:"none",background:y?"#2563eb":"#e5e7eb",color:y?"#fff":"#888",fontWeight:700,fontSize:15,boxShadow:y?"0 2px 8px #2563eb44":"0 1px 2px #8882",cursor:y?"pointer":"not-allowed",opacity:y?1:.6,transition:"all 0.18s cubic-bezier(.4,2,.6,1)",display:"flex",alignItems:"center",gap:6},title:"Select/Unselect All",children:[o.jsx("span",{style:{fontSize:18},children:b.length===O.length?"":""}),"Select All"]}),o.jsxs("button",{onClick:()=>{const yt=b.join(",");t(`/pages/group-view?symbols=${encodeURIComponent(yt)}&interval=${encodeURIComponent(l)}&type=${encodeURIComponent(r)}`)},disabled:b.length===0,style:{padding:"6px 14px",borderRadius:10,border:"none",background:b.length>0?"linear-gradient(90deg, #6366f1 60%, #0ea5e9 100%)":"#e5e7eb",color:b.length>0?"#fff":"#888",fontWeight:700,fontSize:15,boxShadow:b.length>0?"0 2px 8px #6366f144":"0 1px 2px #8882",cursor:b.length>0?"pointer":"not-allowed",opacity:b.length>0?1:.6,transition:"all 0.18s cubic-bezier(.4,2,.6,1)",display:"flex",alignItems:"center",gap:6,animation:b.length>0?"pulse 1.2s infinite":"none"},title:"View Selected Group",children:[o.jsx("span",{style:{fontSize:18},children:""}),"View in Group (",b.length,")"]}),o.jsx("button",{onClick:()=>n(yt=>!yt),className:"z-20 p-2 rounded-full bg-white/80 dark:bg-gray-800/80 shadow hover:scale-110 transition-all",title:e?"Switch to Light Mode":"Switch to Dark Mode",style:{fontSize:22,marginLeft:10},children:e?"":""})]})]}),o.jsx(Q1,{onPairSelect:tn,candleType:r,interval:l,trades:Ht,selectedPair:null,darkMode:e,filterBar:sn,groupModeEnabled:y,selectedGroupPairs:b,setSelectedGroupPairs:k,showForClubFilter:S,setShowForClubFilter:E,onVisiblePairsChange:T,liveFilter:V},"main-grid")]})]})},xH=()=>{const[t,e]=x.useState([]),[n,r]=x.useState(!1),[s,l]=x.useState(null),[c,d]=x.useState(null),[h,g]=x.useState({symbol:"",minPL:""}),[p,y]=x.useState(null),_=async(T={showSyncInfo:!1})=>{r(!0),l(null);try{const D=await Nn("/api/income-history"),F=await D.json().catch(()=>({}));if(!D.ok||F.ok===!1)throw new Error(F.message||"Failed to load income history");if(!Array.isArray(F.history))throw new Error("Invalid income history response");e(F.history),T.showSyncInfo&&F.sync&&d({inserted:F.sync.inserted??0,skipped:F.sync.skipped??0,total:F.sync.total_received??F.history.length??0,at:new Date().toISOString()})}catch(D){l(D.message||"Failed to load income history")}finally{r(!1)}};x.useEffect(()=>{_({showSyncInfo:!1})},[]);const b=x.useMemo(()=>{const T=new Set;return t.forEach(D=>{D.symbol&&T.add(D.symbol)}),Array.from(T).sort()},[t]),k=x.useMemo(()=>{const T=new Map;t.forEach(F=>{if(!F)return;const Z=(F.symbol||"").toUpperCase();if(!Z)return;const K=(F.income_type||"").toUpperCase(),L=typeof F.income=="number"?F.income:parseFloat(F.income||"0"),Q=Number.isFinite(L)?L:0,se=F.time?new Date(F.time):null;T.has(Z)||T.set(Z,{symbol:Z,profit:0,commission:0,lastTime:null});const ce=T.get(Z);K==="REALIZED_PNL"?ce.profit+=Q:K==="COMMISSION"&&(ce.commission+=Q),se&&!Number.isNaN(se.getTime())&&(!ce.lastTime||se>ce.lastTime)&&(ce.lastTime=se)});const D=Array.from(T.values()).map(F=>({...F,total:F.profit+F.commission}));return D.sort((F,Z)=>!F.lastTime&&!Z.lastTime?0:F.lastTime?Z.lastTime?Z.lastTime.getTime()-F.lastTime.getTime():-1:1),D},[t]),S=x.useMemo(()=>{const T=parseFloat(h.minPL);return k.filter(D=>!(h.symbol&&D.symbol!==h.symbol.toUpperCase()||!Number.isNaN(T)&&D.total<=T))},[k,h]),E=x.useMemo(()=>p?t.filter(T=>(T.symbol||"").toUpperCase()===p.toUpperCase()).sort((T,D)=>{const F=T.time?new Date(T.time).getTime():0;return(D.time?new Date(D.time).getTime():0)-F}):[],[t,p]),O=(T,D)=>{g(F=>({...F,[T]:D})),T==="symbol"&&y(null)};return o.jsx("div",{className:"p-4 md:p-6 lg:p-8 bg-[#f5f6fa] dark:bg-black min-h-screen",children:o.jsxs("div",{className:"max-w-7xl mx-auto bg-white dark:bg-[#111827] rounded-xl shadow-md border border-gray-200 dark:border-gray-800 p-4 md:p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:"Binance Trade History"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Combined Binance income history (REALIZED_PNL + COMMISSION) with filters."})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",onClick:()=>_({showSyncInfo:!0}),className:"px-3 py-2 rounded-lg text-sm font-medium bg-teal-600 text-white hover:bg-teal-700",disabled:n,children:n?"Syncing...":"Sync from Binance"}),o.jsx("button",{type:"button",onClick:()=>g({symbol:"",minPL:""}),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-700",children:"Reset filters"})]})]}),c&&o.jsxs("div",{className:"mb-4 px-3 py-2 rounded-md bg-emerald-50 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-700 text-xs text-emerald-800 dark:text-emerald-100",children:["Synced from Binance at"," ",o.jsx("span",{className:"font-semibold",children:new Date(c.at).toLocaleString()}),": ",o.jsx("span",{className:"font-semibold",children:c.inserted})," inserted,"," ",o.jsx("span",{className:"font-semibold",children:c.skipped})," skipped,"," ",o.jsx("span",{className:"font-semibold",children:c.total})," total rows received."]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-600 dark:text-gray-300 mb-1",children:"Pair"}),o.jsxs("select",{className:"w-full px-2 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-[#111827] text-sm text-gray-900 dark:text-gray-100",value:h.symbol,onChange:T=>O("symbol",T.target.value),children:[o.jsx("option",{value:"",children:"All pairs"}),b.map(T=>o.jsx("option",{value:T,children:T},T))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-600 dark:text-gray-300 mb-1",children:"Min P/L (USDT)"}),o.jsx("input",{type:"number",step:"0.01",placeholder:"e.g. 5",className:"w-full px-2 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-[#111827] text-sm text-gray-900 dark:text-gray-100",value:h.minPL,onChange:T=>O("minPL",T.target.value)})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Rows:"," ",o.jsxs("span",{className:"font-semibold",children:[S.length," / ",k.length]})]})})]}),n&&o.jsx("div",{className:"py-10 text-center text-gray-600 dark:text-gray-300 text-sm",children:"Loading income history..."}),s&&!n&&o.jsx("div",{className:"py-3 mb-4 px-3 rounded-md bg-red-50 border border-red-200 text-sm text-red-700",children:s}),!n&&!s&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-auto rounded-lg border border-gray-200 dark:border-gray-800 mb-6",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800 text-sm",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-[#020617]",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Time"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Pair"}),o.jsx("th",{className:"px-3 py-2 text-right font-semibold text-gray-700 dark:text-gray-200",children:"Profit (REALIZED_PNL)"}),o.jsx("th",{className:"px-3 py-2 text-right font-semibold text-gray-700 dark:text-gray-200",children:"Commission"}),o.jsx("th",{className:"px-3 py-2 text-right font-semibold text-gray-700 dark:text-gray-200",children:"Total P/L after commission"})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-[#020617]",children:[S.map(T=>{const D=T.profit||0,F=T.commission||0,Z=T.total||0,L=Z>0?"text-emerald-500":Z<0?"text-red-500":"text-gray-500",Q=T.lastTime?T.lastTime.toLocaleString():"";return o.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-900",onClick:()=>{y(T.symbol),g(se=>({...se,symbol:T.symbol}))},children:[o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-700 dark:text-gray-200",children:Q}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-semibold text-gray-900 dark:text-gray-100",children:T.symbol}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right text-gray-700 dark:text-gray-200",children:D.toFixed(4)}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right text-gray-700 dark:text-gray-200",children:F.toFixed(4)}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right",children:o.jsx("span",{className:L,children:Z.toFixed(4)})})]},T.symbol)}),S.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-sm text-gray-500 dark:text-gray-400",colSpan:5,children:"No pairs match the current filters."})})]})]})}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h2",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-2",children:p?`Detail history for ${p}`:"Click a pair above to view detailed history"}),p&&o.jsx("div",{className:"overflow-auto rounded-lg border border-gray-200 dark:border-gray-800",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800 text-sm",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-[#020617]",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Time"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Income Type"}),o.jsx("th",{className:"px-3 py-2 text-right font-semibold text-gray-700 dark:text-gray-200",children:"Income (USDT)"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Asset"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Info"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Tran ID"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Trade ID"})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-[#020617]",children:[E.map((T,D)=>{const F=typeof T.income=="number"?T.income:parseFloat(T.income||"0"),K=F>0?"text-emerald-500":F<0?"text-red-500":"text-gray-500",L=T.time?new Date(T.time).toLocaleString():"";return o.jsxs("tr",{children:[o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-700 dark:text-gray-200",children:L}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-700 dark:text-gray-200",children:T.income_type||"-"}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right",children:o.jsx("span",{className:K,children:Number.isFinite(F)?F.toFixed(4):"0.0000"})}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-700 dark:text-gray-200",children:T.asset||"-"}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-700 dark:text-gray-200",children:T.info||"-"}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-700 dark:text-gray-200",children:T.tran_id||"-"}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-700 dark:text-gray-200",children:T.trade_id||"-"})]},`${T.tran_id||D}-${T.income_type||""}`)}),E.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-sm text-gray-500 dark:text-gray-400",colSpan:7,children:"No detail rows for this pair."})})]})]})})]})]})]})})},yH=({gridPreview:t,filterBar:e})=>o.jsx("div",{style:{padding:32,position:"relative"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:24,marginBottom:24,width:"100%",minWidth:0},children:[o.jsx("div",{style:{minWidth:220,minHeight:180},children:t}),o.jsx("div",{style:{flex:1,minWidth:0,maxWidth:"100%",overflowX:"auto",background:"rgba(255,255,255,0.04)",borderRadius:16,border:"1.5px solid #333",padding:8,marginLeft:0},children:o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:16,width:"100%",minWidth:0},children:e})})]})}),DT=x.createContext({dragDropManager:void 0});function Wi(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var KS=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ZS=function(){return Math.random().toString(36).substring(7).split("").join(".")},QS={INIT:"@@redux/INIT"+ZS(),REPLACE:"@@redux/REPLACE"+ZS()};function vH(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function RT(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Wi(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Wi(1));return n(RT)(t,e)}if(typeof t!="function")throw new Error(Wi(2));var s=t,l=e,c=[],d=c,h=!1;function g(){d===c&&(d=c.slice())}function p(){if(h)throw new Error(Wi(3));return l}function y(S){if(typeof S!="function")throw new Error(Wi(4));if(h)throw new Error(Wi(5));var E=!0;return g(),d.push(S),function(){if(E){if(h)throw new Error(Wi(6));E=!1,g();var T=d.indexOf(S);d.splice(T,1),c=null}}}function _(S){if(!vH(S))throw new Error(Wi(7));if(typeof S.type>"u")throw new Error(Wi(8));if(h)throw new Error(Wi(9));try{h=!0,l=s(l,S)}finally{h=!1}for(var E=c=d,O=0;O<E.length;O++){var T=E[O];T()}return S}function b(S){if(typeof S!="function")throw new Error(Wi(10));s=S,_({type:QS.REPLACE})}function k(){var S,E=y;return S={subscribe:function(T){if(typeof T!="object"||T===null)throw new Error(Wi(11));function D(){T.next&&T.next(p())}D();var F=E(D);return{unsubscribe:F}}},S[KS]=function(){return this},S}return _({type:QS.INIT}),r={dispatch:_,subscribe:y,getState:p,replaceReducer:b},r[KS]=k,r}function Zn(t,e,...n){if(bH()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;r=new Error(e.replace(/%s/g,function(){return n[s++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function bH(){return typeof process<"u"&&!0}function _H(t,e,n){return e.split(".").reduce((r,s)=>r&&r[s]?r[s]:n||null,t)}function SH(t,e){return t.filter(n=>n!==e)}function MT(t){return typeof t=="object"}function wH(t,e){const n=new Map,r=l=>{n.set(l,n.has(l)?n.get(l)+1:1)};t.forEach(r),e.forEach(r);const s=[];return n.forEach((l,c)=>{l===1&&s.push(c)}),s}function kH(t,e){return t.filter(n=>e.indexOf(n)>-1)}const ey="dnd-core/INIT_COORDS",Q0="dnd-core/BEGIN_DRAG",ty="dnd-core/PUBLISH_DRAG_SOURCE",eg="dnd-core/HOVER",tg="dnd-core/DROP",ng="dnd-core/END_DRAG";function ew(t,e){return{type:ey,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const EH={type:ey,payload:{clientOffset:null,sourceClientOffset:null}};function NH(t){return function(n=[],r={publishSource:!0}){const{publishSource:s=!0,clientOffset:l,getSourceClientOffset:c}=r,d=t.getMonitor(),h=t.getRegistry();t.dispatch(ew(l)),TH(n,d,h);const g=AH(n,d);if(g==null){t.dispatch(EH);return}let p=null;if(l){if(!c)throw new Error("getSourceClientOffset must be defined");CH(c),p=c(g)}t.dispatch(ew(l,p));const _=h.getSource(g).beginDrag(d,g);if(_==null)return;jH(_),h.pinSource(g);const b=h.getSourceType(g);return{type:Q0,payload:{itemType:b,item:_,sourceId:g,clientOffset:l||null,sourceClientOffset:p||null,isSourcePublic:!!s}}}}function TH(t,e,n){Zn(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){Zn(n.getSource(r),"Expected sourceIds to be registered.")})}function CH(t){Zn(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function jH(t){Zn(MT(t),"Item must be an object.")}function AH(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function OH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){OH(t,s,n[s])})}return t}function RH(t){return function(n={}){const r=t.getMonitor(),s=t.getRegistry();MH(r),PH(r).forEach((c,d)=>{const h=LH(c,d,s,r),g={type:tg,payload:{dropResult:DH({},n,h)}};t.dispatch(g)})}}function MH(t){Zn(t.isDragging(),"Cannot call drop while not dragging."),Zn(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function LH(t,e,n,r){const s=n.getTarget(t);let l=s?s.drop(r,t):void 0;return IH(l),typeof l>"u"&&(l=e===0?{}:r.getDropResult()),l}function IH(t){Zn(typeof t>"u"||MT(t),"Drop result must either be an object or undefined.")}function PH(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function FH(t){return function(){const n=t.getMonitor(),r=t.getRegistry();zH(n);const s=n.getSourceId();return s!=null&&(r.getSource(s,!0).endDrag(n,s),r.unpinSource()),{type:ng}}}function zH(t){Zn(t.isDragging(),"Cannot call endDrag while not dragging.")}function Ax(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function BH(t){return function(n,{clientOffset:r}={}){HH(n);const s=n.slice(0),l=t.getMonitor(),c=t.getRegistry(),d=l.getItemType();return $H(s,c,d),UH(s,l,c),WH(s,l,c),{type:eg,payload:{targetIds:s,clientOffset:r||null}}}}function HH(t){Zn(Array.isArray(t),"Expected targetIds to be an array.")}function UH(t,e,n){Zn(e.isDragging(),"Cannot call hover while not dragging."),Zn(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const s=t[r];Zn(t.lastIndexOf(s)===r,"Expected targetIds to be unique in the passed array.");const l=n.getTarget(s);Zn(l,"Expected targetIds to be registered.")}}function $H(t,e,n){for(let r=t.length-1;r>=0;r--){const s=t[r],l=e.getTargetType(s);Ax(l,n)||t.splice(r,1)}}function WH(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function VH(t){return function(){if(t.getMonitor().isDragging())return{type:ty}}}function YH(t){return{beginDrag:NH(t),publishDragSource:VH(t),hover:BH(t),drop:RH(t),endDrag:FH(t)}}class GH{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(l){return(...c)=>{const d=l.apply(e,c);typeof d<"u"&&n(d)}}const s=YH(this);return Object.keys(s).reduce((l,c)=>{const d=s[c];return l[c]=r(d),l},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function qH(t,e){return{x:t.x+e.x,y:t.y+e.y}}function LT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function JH(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:LT(qH(e,r),n)}function XH(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:LT(e,n)}const wd=[],ny=[];wd.__IS_NONE__=!0;ny.__IS_ALL__=!0;function KH(t,e){return t===wd?!1:t===ny||typeof e>"u"?!0:kH(e,t).length>0}class ZH{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;Zn(typeof e=="function","listener must be a function."),Zn(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const l=()=>{const c=this.store.getState(),d=c.stateId;try{d===s||d===s+1&&!KH(c.dirtyHandlerIds,r)||e()}finally{s=d}};return this.store.subscribe(l)}subscribeToOffsetChange(e){Zn(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const s=this.store.getState().dragOffset;s!==n&&(n=s,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return Zn(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(Zn(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),s=this.getItemType();return Ax(r,s)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(Zn(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),s=this.getItemType();return r!==s?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),l=this.getItemType();if(l&&!Ax(s,l))return!1;const c=this.getTargetIds();if(!c.length)return!1;const d=c.indexOf(e);return r?d===c.length-1:d>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return JH(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return XH(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const tw=typeof global<"u"?global:self,IT=tw.MutationObserver||tw.WebKitMutationObserver;function PT(t){return function(){const n=setTimeout(s,0),r=setInterval(s,50);function s(){clearTimeout(n),clearInterval(r),t()}}}function QH(t){let e=1;const n=new IT(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const eU=typeof IT=="function"?QH:PT;class tU{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,s=e.length-this.index;r<s;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=eU(this.flush),this.requestErrorThrow=PT(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class nU{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class rU{create(e){const n=this.freeTasks,r=n.length?n.pop():new nU(this.onError,s=>n[n.length]=s);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const FT=new tU,sU=new rU(FT.registerPendingError);function iU(t){FT.enqueueTask(sU.create(t))}const ry="dnd-core/ADD_SOURCE",sy="dnd-core/ADD_TARGET",iy="dnd-core/REMOVE_SOURCE",rg="dnd-core/REMOVE_TARGET";function aU(t){return{type:ry,payload:{sourceId:t}}}function lU(t){return{type:sy,payload:{targetId:t}}}function oU(t){return{type:iy,payload:{sourceId:t}}}function cU(t){return{type:rg,payload:{targetId:t}}}function uU(t){Zn(typeof t.canDrag=="function","Expected canDrag to be a function."),Zn(typeof t.beginDrag=="function","Expected beginDrag to be a function."),Zn(typeof t.endDrag=="function","Expected endDrag to be a function.")}function dU(t){Zn(typeof t.canDrop=="function","Expected canDrop to be a function."),Zn(typeof t.hover=="function","Expected hover to be a function."),Zn(typeof t.drop=="function","Expected beginDrag to be a function.")}function Ox(t,e){if(e&&Array.isArray(t)){t.forEach(n=>Ox(n,!1));return}Zn(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Xi;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Xi||(Xi={}));let fU=0;function hU(){return fU++}function gU(t){const e=hU().toString();switch(t){case Xi.SOURCE:return`S${e}`;case Xi.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function nw(t){switch(t[0]){case"S":return Xi.SOURCE;case"T":return Xi.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function rw(t,e){const n=t.entries();let r=!1;do{const{done:s,value:[,l]}=n.next();if(l===e)return!0;r=!!s}while(!r);return!1}class pU{addSource(e,n){Ox(e),uU(n);const r=this.addHandler(Xi.SOURCE,e,n);return this.store.dispatch(aU(r)),r}addTarget(e,n){Ox(e,!0),dU(n);const r=this.addHandler(Xi.TARGET,e,n);return this.store.dispatch(lU(r)),r}containsHandler(e){return rw(this.dragSources,e)||rw(this.dropTargets,e)}getSource(e,n=!1){return Zn(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Zn(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Zn(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Zn(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return nw(e)===Xi.SOURCE}isTargetId(e){return nw(e)===Xi.TARGET}removeSource(e){Zn(this.getSource(e),"Expected an existing source."),this.store.dispatch(oU(e)),iU(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Zn(this.getTarget(e),"Expected an existing target."),this.store.dispatch(cU(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);Zn(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){Zn(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const s=gU(e);return this.types.set(s,n),e===Xi.SOURCE?this.dragSources.set(s,r):e===Xi.TARGET&&this.dropTargets.set(s,r),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const mU=(t,e)=>t===e;function xU(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function yU(t,e,n=mU){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function vU(t=wd,e){switch(e.type){case eg:break;case ry:case sy:case rg:case iy:return wd;case Q0:case ty:case ng:case tg:default:return ny}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,s=wH(n,r);if(!(s.length>0||!yU(n,r)))return wd;const c=r[r.length-1],d=n[n.length-1];return c!==d&&(c&&s.push(c),d&&s.push(d)),s}function bU(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _U(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){bU(t,s,n[s])})}return t}const sw={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function SU(t=sw,e){const{payload:n}=e;switch(e.type){case ey:case Q0:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case eg:return xU(t.clientOffset,n.clientOffset)?t:_U({},t,{clientOffset:n.clientOffset});case ng:case tg:return sw;default:return t}}function wU(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){wU(t,s,n[s])})}return t}const kU={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function EU(t=kU,e){const{payload:n}=e;switch(e.type){case Q0:return Cc({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case ty:return Cc({},t,{isSourcePublic:!0});case eg:return Cc({},t,{targetIds:n.targetIds});case rg:return t.targetIds.indexOf(n.targetId)===-1?t:Cc({},t,{targetIds:SH(t.targetIds,n.targetId)});case tg:return Cc({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case ng:return Cc({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function NU(t=0,e){switch(e.type){case ry:case sy:return t+1;case iy:case rg:return t-1;default:return t}}function TU(t=0){return t+1}function CU(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){CU(t,s,n[s])})}return t}function AU(t={},e){return{dirtyHandlerIds:vU(t.dirtyHandlerIds,{type:e.type,payload:jU({},e.payload,{prevTargetIds:_H(t,"dragOperation.targetIds",[])})}),dragOffset:SU(t.dragOffset,e),refCount:NU(t.refCount,e),dragOperation:EU(t.dragOperation,e),stateId:TU(t.stateId)}}function OU(t,e=void 0,n={},r=!1){const s=DU(r),l=new ZH(s,new pU(s)),c=new GH(s,l),d=t(c,e,n);return c.receiveBackend(d),c}function DU(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return RT(AU,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function RU(t,e){if(t==null)return{};var n=MU(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,l;for(l=0;l<r.length;l++)s=r[l],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}let iw=0;const Vh=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var ay=x.memo(function(e){var{children:n}=e,r=RU(e,["children"]);const[s,l]=LU(r);return x.useEffect(()=>{if(l){const c=zT();return++iw,()=>{--iw===0&&(c[Vh]=null)}}},[]),o.jsx(DT.Provider,{value:s,children:n})});function LU(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=IU(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function IU(t,e=zT(),n,r){const s=e;return s[Vh]||(s[Vh]={dragDropManager:OU(t,e,n,r)}),s[Vh]}function zT(){return typeof global<"u"?global:window}var Hm,aw;function PU(){return aw||(aw=1,Hm=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,l;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,l[s]))return!1;for(s=r;s--!==0;){var c=l[s];if(!t(e[c],n[c]))return!1}return!0}return e!==e&&n!==n}),Hm}var FU=PU();const zU=Ix(FU),Uo=typeof window<"u"?x.useLayoutEffect:x.useEffect;function BU(t,e,n){const[r,s]=x.useState(()=>e(t)),l=x.useCallback(()=>{const c=e(t);zU(r,c)||(s(c),n&&n())},[r,t,n]);return Uo(l),[r,l]}function HU(t,e,n){const[r,s]=BU(t,e,n);return Uo(function(){const c=t.getHandlerId();if(c!=null)return t.subscribeToStateChange(s,{handlerIds:[c]})},[t,s]),r}function BT(t,e,n){return HU(e,t||(()=>({})),()=>n.reconnect())}function HT(t,e){const n=[];return typeof t!="function"&&n.push(t),x.useMemo(()=>typeof t=="function"?t():t,n)}function UU(t){return x.useMemo(()=>t.hooks.dragSource(),[t])}function $U(t){return x.useMemo(()=>t.hooks.dragPreview(),[t])}let Um=!1,$m=!1;class WU{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Zn(!Um,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Um=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Um=!1}}isDragging(){if(!this.sourceId)return!1;Zn(!$m,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return $m=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{$m=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Wm=!1;class VU{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;Zn(!Wm,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Wm=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Wm=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function YU(t,e,n){const r=n.getRegistry(),s=r.addTarget(t,e);return[s,()=>r.removeTarget(s)]}function GU(t,e,n){const r=n.getRegistry(),s=r.addSource(t,e);return[s,()=>r.removeSource(s)]}function Dx(t,e,n,r){let s;if(s!==void 0)return!!s;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const l=Object.keys(t),c=Object.keys(e);if(l.length!==c.length)return!1;const d=Object.prototype.hasOwnProperty.bind(e);for(let h=0;h<l.length;h++){const g=l[h];if(!d(g))return!1;const p=t[g],y=e[g];if(s=void 0,s===!1||s===void 0&&p!==y)return!1}return!0}function Rx(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qU(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function JU(t){return(e=null,n=null)=>{if(!x.isValidElement(e)){const l=e;return t(l,n),l}const r=e;return qU(r),XU(r,n?l=>t(l,n):t)}}function UT(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const s=JU(r);e[n]=()=>s}}),e}function lw(t,e){typeof t=="function"?t(e):t.current=e}function XU(t,e){const n=t.ref;return Zn(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?x.cloneElement(t,{ref:r=>{lw(n,r),lw(e,r)}}):x.cloneElement(t,{ref:e})}class KU{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Dx(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Dx(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=UT({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,Rx(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,Rx(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class ZU{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Dx(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=UT({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,Rx(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function au(){const{dragDropManager:t}=x.useContext(DT);return Zn(t!=null,"Expected drag drop context"),t}function QU(t,e){const n=au(),r=x.useMemo(()=>new KU(n.getBackend()),[n]);return Uo(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),Uo(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function e$(){const t=au();return x.useMemo(()=>new WU(t),[t])}class t${beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,s=this.monitor,{isDragging:l}=r;return l?l(s):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:s}=e;s&&s(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function n$(t,e,n){const r=x.useMemo(()=>new t$(t,e,n),[e,n]);return x.useEffect(()=>{r.spec=t},[t]),r}function r$(t){return x.useMemo(()=>{const e=t.type;return Zn(e!=null,"spec.type must be defined"),e},[t])}function s$(t,e,n){const r=au(),s=n$(t,e,n),l=r$(t);Uo(function(){if(l!=null){const[d,h]=GU(l,s,r);return e.receiveHandlerId(d),n.receiveHandlerId(d),h}},[r,e,n,s,l])}function ly(t,e){const n=HT(t);Zn(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=e$(),s=QU(n.options,n.previewOptions);return s$(n,r,s),[BT(n.collect,r,s),UU(s),$U(s)]}function i$(t){return x.useMemo(()=>t.hooks.dropTarget(),[t])}function a$(t){const e=au(),n=x.useMemo(()=>new ZU(e.getBackend()),[e]);return Uo(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function l$(){const t=au();return x.useMemo(()=>new VU(t),[t])}function o$(t){const{accept:e}=t;return x.useMemo(()=>(Zn(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class c${canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function u$(t,e){const n=x.useMemo(()=>new c$(t,e),[e]);return x.useEffect(()=>{n.spec=t},[t]),n}function d$(t,e,n){const r=au(),s=u$(t,e),l=o$(t);Uo(function(){const[d,h]=YU(l,s,r);return e.receiveHandlerId(d),n.receiveHandlerId(d),h},[r,e,s,n,l.map(c=>c.toString()).join("|")])}function oy(t,e){const n=HT(t),r=l$(),s=a$(n.options);return d$(n,r,s),[BT(n.collect,r,s),i$(s)]}function $T(t){let e=null;return()=>(e==null&&(e=t()),e)}function f$(t,e){return t.filter(n=>n!==e)}function h$(t,e){const n=new Set,r=l=>n.add(l);t.forEach(r),e.forEach(r);const s=[];return n.forEach(l=>s.push(l)),s}class g${enter(e){const n=this.entered.length,r=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=h$(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=f$(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class p${initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const s=this.config.exposeProperties[r];s!=null&&(n[r]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const WT="__NATIVE_FILE__",VT="__NATIVE_URL__",YT="__NATIVE_TEXT__",GT="__NATIVE_HTML__",ow=Object.freeze(Object.defineProperty({__proto__:null,FILE:WT,HTML:GT,TEXT:YT,URL:VT},Symbol.toStringTag,{value:"Module"}));function Vm(t,e,n){const r=e.reduce((s,l)=>s||t.getData(l),"");return r??n}const Mx={[WT]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[GT]:{exposeProperties:{html:(t,e)=>Vm(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[VT]:{exposeProperties:{urls:(t,e)=>Vm(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[YT]:{exposeProperties:{text:(t,e)=>Vm(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function m$(t,e){const n=Mx[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new p$(n);return r.loadDataTransfer(e),r}function Ym(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Mx).filter(n=>{const r=Mx[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const x$=$T(()=>/firefox/i.test(navigator.userAgent)),qT=$T(()=>!!window.safari);class cw{interpolate(e){const{xs:n,ys:r,c1s:s,c2s:l,c3s:c}=this;let d=n.length-1;if(e===n[d])return r[d];let h=0,g=c.length-1,p;for(;h<=g;){p=Math.floor(.5*(h+g));const b=n[p];if(b<e)h=p+1;else if(b>e)g=p-1;else return r[p]}d=Math.max(0,g);const y=e-n[d],_=y*y;return r[d]+s[d]*y+l[d]*_+c[d]*y*_}constructor(e,n){const{length:r}=e,s=[];for(let b=0;b<r;b++)s.push(b);s.sort((b,k)=>e[b]<e[k]?-1:1);const l=[],c=[];let d,h;for(let b=0;b<r-1;b++)d=e[b+1]-e[b],h=n[b+1]-n[b],l.push(d),c.push(h/d);const g=[c[0]];for(let b=0;b<l.length-1;b++){const k=c[b],S=c[b+1];if(k*S<=0)g.push(0);else{d=l[b];const E=l[b+1],O=d+E;g.push(3*O/((O+E)/k+(O+d)/S))}}g.push(c[c.length-1]);const p=[],y=[];let _;for(let b=0;b<g.length-1;b++){_=c[b];const k=g[b],S=1/l[b],E=k+g[b+1]-_-_;p.push((_-k-E)*S),y.push(E*S*S)}this.xs=e,this.ys=n,this.c1s=g,this.c2s=p,this.c3s=y}}const y$=1;function JT(t){const e=t.nodeType===y$?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function Ah(t){return{x:t.clientX,y:t.clientY}}function v$(t){var e;return t.nodeName==="IMG"&&(x$()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function b$(t,e,n,r){let s=t?e.width:n,l=t?e.height:r;return qT()&&t&&(l/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:l}}function _$(t,e,n,r,s){const l=v$(e),d=JT(l?t:e),h={x:n.x-d.x,y:n.y-d.y},{offsetWidth:g,offsetHeight:p}=t,{anchorX:y,anchorY:_}=r,{dragPreviewWidth:b,dragPreviewHeight:k}=b$(l,e,g,p),S=()=>{let K=new cw([0,.5,1],[h.y,h.y/p*k,h.y+k-p]).interpolate(_);return qT()&&l&&(K+=(window.devicePixelRatio-1)*k),K},E=()=>new cw([0,.5,1],[h.x,h.x/g*b,h.x+b-g]).interpolate(y),{offsetX:O,offsetY:T}=s,D=O===0||O,F=T===0||T;return{x:D?O:E(),y:F?T:S()}}class S${get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}}function w$(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){w$(t,s,n[s])})}return t}class k${profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const s=c=>this.handleDragStart(c,e),l=c=>this.handleSelectStart(c);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",s),n.addEventListener("selectstart",l),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",s),n.removeEventListener("selectstart",l),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=c=>this.handleDragEnter(c,e),s=c=>this.handleDragOver(c,e),l=c=>this.handleDrop(c,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",s),n.addEventListener("drop",l),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",s),n.removeEventListener("drop",l)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return uw({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return uw({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ow).some(n=>ow[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=m$(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const l=this.sourceNodes.get(s);return l&&JT(l)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:l}=this;this.dragStartSourceIds=null;const c=Ah(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(l||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:c});const{dataTransfer:d}=s,h=Ym(d);if(this.monitor.isDragging()){if(d&&typeof d.setDragImage=="function"){const p=this.monitor.getSourceId(),y=this.sourceNodes.get(p),_=this.sourcePreviewNodes.get(p)||y;if(_){const{anchorX:b,anchorY:k,offsetX:S,offsetY:E}=this.getCurrentSourcePreviewNodeOptions(),D=_$(y,_,c,{anchorX:b,anchorY:k},{offsetX:S,offsetY:E});d.setDragImage(_,D.x,D.y)}}try{d==null||d.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:g}=this.getCurrentSourcePreviewNodeOptions();g?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(h)this.beginDragNativeItem(h);else{if(d&&!d.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var l;(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:d}=s,h=Ym(d);h&&this.beginDragNativeItem(h,d)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:l}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,l.length>0&&this.actions.hover(l,{clientOffset:Ah(s)}),l.some(d=>this.monitor.canDropOnTarget(d))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var l;(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:l}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=Ah(s),this.scheduleHover(l),(l||[]).some(d=>this.monitor.canDropOnTarget(d))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var l;s.preventDefault(),(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(s.dataTransfer)}else Ym(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:l}=this;this.dropTargetIds=[],this.actions.hover(l,{clientOffset:Ah(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const l=s.target;typeof l.dragDrop=="function"&&(l.tagName==="INPUT"||l.tagName==="SELECT"||l.tagName==="TEXTAREA"||l.isContentEditable||(s.preventDefault(),l.dragDrop()))},this.options=new S$(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new g$(this.isNodeInDocument)}}const cy=function(e,n,r){return new k$(e,n,r)};function E$(){return new URLSearchParams(Ki().search)}const dw=["2POLE_IN5LOOP","IMACD","2POLE_Direct_Signal","HIGHEST SWING HIGH","LOWEST SWING LOW","NORMAL SWING HIGH","NORMAL SWING LOW","ProGap","CrossOver","Spike","Kicker"],fw=["1m","3m","5m","15m","30m","1h","4h","1d"],nd=[{label:"Symbol",value:"symbol"},{label:"Interval",value:"interval"},{label:"Signal Type",value:"signal_type"},{label:"Signal Source",value:"signal_source"},{label:"Candle Pattern",value:"candle_pattern"},{label:"Price",value:"price"},{label:"Squeeze Status",value:"squeeze_status"},{label:"Active Squeeze",value:"active_squeeze"},{label:"Machine ID",value:"machine_id"},{label:"Timestamp",value:"timestamp"},{label:"Processing Time",value:"processing_time_ms"},{label:"Created At",value:"created_at"},{label:"Unique ID",value:"Unique_id"},{label:"PL",value:"PL"},{label:"Hedge",value:"Hedge"},{label:"Hedge 1-1",value:"Hedge_1_1"},{label:"Hedge Buy PL",value:"Hedge_Buy_pl"},{label:"Hedge Sell PL",value:"Hedge_Sell_pl"},{label:"Hedge Order Size",value:"Hedge_order_size"},{label:"Min Comm After Hedge",value:"Min_comm_after_hedge"},{label:"Hedge Swing High Point",value:"Hedge_Swing_High_Point"},{label:"Hedge Swing Low Point",value:"Hedge_Swing_Low_Point"},{label:"Active Squeeze Trend",value:"signal_data_active_squeeze_trend"},{label:"Overall Trend RC",value:"signal_data_overall_trend_RC"},{label:"Overall Trend Percentage RC",value:"signal_data_overall_trend_percentage_RC"},{label:"Overall Trend HC",value:"signal_data_overall_trend_HC"},{label:"Overall Trend Percentage HC",value:"signal_data_overall_trend_percentage_HC"},{label:"Overall Trend 4h",value:"signal_data_overall_trend_4h"},{label:"Overall Trend Percentage 4h",value:"signal_data_overall_trend_percentage_4h"},{label:"Overall Trend 1h",value:"signal_data_overall_trend_1h"},{label:"Overall Trend Percentage 1h",value:"signal_data_overall_trend_percentage_1h"},{label:"Volume 1h",value:"signal_data_volume_1h"}],N$=[{label:"Machine ID",value:"MachineId"},{label:"Unique ID",value:"Unique_id"},{label:"Candle Time",value:"Candel_time"},{label:"Fetcher Trade Time",value:"Fetcher_Trade_time"},{label:"Operator Trade Time",value:"Operator_Trade_time"},{label:"Pair",value:"Pair"},{label:"Interval",value:"Interval"},{label:"Action",value:"Action"},{label:"Exist In Exchange",value:"exist_in_exchange"},{label:"PL After Comm",value:"Pl_after_comm"},{label:"Hedge Buy PL",value:"Hedge_Buy_pl"},{label:"Hedge Sell PL",value:"Hedge_Sell_pl"},{label:"Type",value:"Type"},{label:"Operator Close Time",value:"Operator_Close_time"},{label:"Signal From",value:"SignalFrom"},{label:"Profit Journey",value:"Profit_journey"},{label:"Commission Journey",value:"Commision_journey"},{label:"Stop Price",value:"Stop_price"},{label:"Save Price",value:"Save_price"},{label:"Min Comm",value:"Min_comm"},{label:"Hedge",value:"Hedge"},{label:"Hedge 1-1 Bool",value:"Hedge_1_1_bool"},{label:"Hedge Order Size",value:"Hedge_order_size"},{label:"Min Comm After Hedge",value:"Min_comm_after_hedge"},{label:"Min Profit",value:"Min_profit"},{label:"Buy Qty",value:"Buy_qty"},{label:"Buy Price",value:"Buy_price"},{label:"Buy PL",value:"Buy_pl"},{label:"Added Qty",value:"Added_qty"},{label:"Sell Qty",value:"Sell_qty"},{label:"Sell Price",value:"Sell_price"},{label:"Sell PL",value:"Sell_pl"},{label:"Close Price",value:"Close_price"},{label:"Commission",value:"Commission"},{label:"Investment",value:"Investment"},{label:"Swing1",value:"Swing1"},{label:"Swing2",value:"Swing2"},{label:"Swing3",value:"Swing3"},{label:"Swing4",value:"Swing4"},{label:"Swing5",value:"Swing5"},{label:"Hedge Swing High Point",value:"Hedge_Swing_High_Point"},{label:"Hedge Swing Low Point",value:"Hedge_Swing_Low_Point"},{label:"Temp High Point",value:"Temp_High_Point"},{label:"Temp Low Point",value:"Temp_Low_Point"}],hw="LABEL_ROW";function T$({item:t,index:e,moveLabel:n,children:r,onHover:s,onDrop:l}){const c=Kr.useRef(null),[,d]=oy({accept:hw,hover(p){p.index!==e&&(n(p.index,e),p.index=e,s&&s())},drop(){l&&l()}}),[{isDragging:h},g]=ly({type:hw,item:{index:e},collect:p=>({isDragging:p.isDragging()})});return g(d(c)),o.jsx("div",{ref:c,style:{opacity:h?.5:1,cursor:"grab",width:"auto",minWidth:160,maxWidth:340,flex:"1 1 220px",marginBottom:0,background:"inherit",boxSizing:"border-box",display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:r})}function C$({items:t,moveLabel:e,renderRow:n,activeJsonLabels:r,setActiveJsonLabels:s,showUnchecked:l,dragOverIndex:c,setDragOverIndex:d}){return o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12,width:"100%",alignItems:"flex-start",justifyContent:"flex-start",boxSizing:"border-box",minHeight:60,position:"relative"},children:t.map((h,g)=>o.jsxs("div",{style:{position:"relative",minWidth:220,maxWidth:340,flex:"1 1 220px",boxSizing:"border-box",marginBottom:0,display:"flex"},children:[c===g&&o.jsxs("div",{style:{position:"absolute",top:-8,left:0,width:"100%",height:0,zIndex:10,pointerEvents:"none",display:"flex",alignItems:"center"},children:[o.jsx("div",{style:{width:32,height:32,background:"#0ea5e9",color:"#fff",borderRadius:"50%",fontWeight:700,fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #0ea5e944",marginLeft:8,marginBottom:2},children:g+1}),o.jsx("div",{style:{flex:1,height:4,background:"#ffe066",borderRadius:2,marginLeft:12,marginRight:8}})]}),o.jsxs(T$,{item:h,index:g,moveLabel:e,onHover:()=>d(g),onDrop:()=>d(null),children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,minWidth:22},children:[o.jsxs("span",{style:{fontWeight:700,color:"#0ea5e9",minWidth:22,textAlign:"right"},children:[g+1,"."]}),h&&h.type==="json"&&Array.isArray(h.intervals)&&(()=>{const p=(h.intervals||[]).filter(({exists:k})=>k),y=p.filter(({interval:k})=>{var S;return!!((S=r==null?void 0:r[h.value])!=null&&S[k])}),_=p.length>0&&y.length===p.length,b=()=>{const k=!_;s(S=>{const E={...S};return E[h.value]||(E[h.value]={}),p.forEach(({interval:O})=>{E[h.value][O]=k}),E})};return o.jsxs("button",{onClick:b,style:{padding:"2px 8px",borderRadius:4,border:"none",fontWeight:600,fontSize:12,background:_?"#22c55e":"#ef4444",color:"#fff",cursor:"pointer",transition:"background 0.2s",boxShadow:_?"0 2px 4px #22c55e44":"0 2px 4px #ef444444",minWidth:36},title:`${_?"Uncheck":"Check"} all intervals for ${(h==null?void 0:h.label)||""}`,children:[y.length,"/",p.length]})})()]}),n&&n(h,g)]})]},h.type+"_"+h.value))})}const j$=()=>{var qn,Vn;const t=E$(),e=t.get("pair")||"",n=t.get("interval")||"15m",r=t.get("type")||"Regular",s=H=>{if(!H)return"";try{const he=new Date(H);if(isNaN(he.getTime()))return H;const Se=he.getUTCDate().toString().padStart(2,"0"),st=(he.getUTCMonth()+1).toString().padStart(2,"0"),Tt=he.getUTCFullYear().toString().slice(-2),It=he.getUTCHours().toString().padStart(2,"0"),gn=he.getUTCMinutes().toString().padStart(2,"0");return`${Se}-${st}-${Tt} ${It}:${gn}`}catch{return H}},l=H=>{const he=["Candle_Time","timestamp","created_at","Time","Candel_time","Fetcher_Trade_time","Operator_Trade_time","Operator_Close_time","candle_time","time","date"],Se=["processing_time_ms","processing_time"];return he.some(Tt=>H.toLowerCase().includes(Tt.toLowerCase()))&&!Se.some(Tt=>H.toLowerCase().includes(Tt.toLowerCase()))},c=(H,he)=>{if(H==null||H==="")return"";if(l(he))return s(H);if(he==="PL"){const Se=parseFloat(H);if(!isNaN(Se))return Se.toFixed(2)}return String(H)},[d,h]=x.useState(()=>{const H=localStorage.getItem("pair_stats_theme");if(H)return H==="dark";const he=localStorage.getItem("theme");return he?he==="dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{d?(document.body.classList.add("dark"),localStorage.setItem("pair_stats_theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("pair_stats_theme","light"))},[d]),x.useEffect(()=>{const H=he=>{if(he.key==="theme"||he.key==="pair_stats_theme"){const Se=he.newValue==="dark";h(Se)}};return window.addEventListener("storage",H),()=>window.removeEventListener("storage",H)},[]);const[g,p]=x.useState(()=>{const H=localStorage.getItem("pair_stats_selected_signals");if(H)return JSON.parse(H);const he={};return dw.forEach(Se=>he[Se]=!0),he}),[y,_]=x.useState(()=>localStorage.getItem("pair_stats_signal_radio_mode")==="true"),[b,k]=x.useState(()=>localStorage.getItem("pair_stats_signal_toggle_all")==="true"),[S,E]=x.useState([]);x.useEffect(()=>{(async()=>{try{const Se=await(await Nn("/api/machines")).json();E(Array.isArray(Se.machines)?Se.machines:[])}catch{E([])}})()},[]);const O=S,[T,D]=x.useState(()=>{const H=localStorage.getItem("pair_stats_selected_machines");if(H)return JSON.parse(H);const he={};return O.forEach(Se=>he[Se.MachineId]=!0),he}),[F,Z]=x.useState(()=>localStorage.getItem("pair_stats_machine_radio_mode")==="true"),[K,L]=x.useState(()=>localStorage.getItem("pair_stats_machine_toggle_all")==="true"),[Q,se]=x.useState(()=>{const H=localStorage.getItem("pair_stats_selected_actions");return H?JSON.parse(H):{BUY:!0,SELL:!0}}),[ce,ye]=x.useState(()=>localStorage.getItem("pair_stats_action_radio_mode")==="true"),[te,xe]=x.useState(()=>localStorage.getItem("pair_stats_action_toggle_all")==="true"),[Ce,at]=x.useState(()=>{const H=localStorage.getItem("pair_stats_live_filter");if(H)try{return JSON.parse(H)}catch{return{true:!0,false:!0}}return{true:!0,false:!0}});x.useEffect(()=>{localStorage.setItem("pair_stats_live_filter",JSON.stringify(Ce))},[Ce]);const[le,Ve]=x.useState(()=>localStorage.getItem("pair_stats_live_radio_mode")==="true");x.useEffect(()=>{localStorage.setItem("pair_stats_live_radio_mode",le?"true":"false")},[le]);const[Ue,Ze]=x.useState([]);x.useEffect(()=>{Nn("/api/trades").then(H=>H.json()).then(H=>{const he=Array.isArray(H.trades)?H.trades:[],Se=e?he.filter(st=>st.Pair===e):he;Ze(Se)}).catch(()=>Ze([]))},[e]);const[M,oe]=x.useState([]),[P,B]=x.useState(1),[j,V]=x.useState(1),[fe,lt]=x.useState(0),[et,ht]=x.useState(()=>{const H=localStorage.getItem("listview_logs_per_page");return H?parseInt(H):100}),[At,xn]=x.useState(!0),[Bt,Kt]=x.useState([]),[tn,Hn]=x.useState(!1);x.useEffect(()=>{xn(!0),B(1);const H=e?`${Rn("/api/SignalProcessingLogs")}?symbol=${encodeURIComponent(e)}&page=1&limit=${et}`:`${Rn("/api/SignalProcessingLogs")}?page=1&limit=${et}`;Nn(H).then(he=>he.json()).then(he=>{var st,Tt;const Se=Array.isArray(he.logs)?he.logs:[];if(oe(Se),lt(((st=he.pagination)==null?void 0:st.total)||Se.length),V(((Tt=he.pagination)==null?void 0:Tt.totalPages)||1),xn(!1),Array.isArray(he.logs)&&he.logs.length>0){let It;try{It=typeof he.logs[0].json_data=="string"?JSON.parse(he.logs[0].json_data):he.logs[0].json_data}catch{return}}}).catch(he=>{console.error("[ListViewPage] Error fetching logs:",he),oe([]),xn(!1)})},[e,et]);const[sn,He]=x.useState(()=>{const H=localStorage.getItem("pair_stats_selected_candle_types");return H?JSON.parse(H):{Regular:!0,Heiken:!1}});x.useEffect(()=>{localStorage.setItem("pair_stats_selected_candle_types",JSON.stringify(sn))},[sn]);const Dn=M.filter(H=>{var Tt;const he=((Tt=H.candle_pattern)==null?void 0:Tt.toLowerCase())||"",Se=he==="regular"||he==="normal"||he==="regular_candle",st=he==="heiken"||he==="heikin"||he==="heiken-ashi"||he==="heiken_ashi"||he==="heiken_candle";return sn.Regular&&Se||sn.Heiken&&st?!0:(!sn.Regular&&!sn.Heiken,!1)}),Ht=x.useMemo(()=>{const H={Regular:0,Heiken:0,Unknown:0};return M.forEach(he=>{var It;const Se=((It=he.candle_pattern)==null?void 0:It.toLowerCase())||"";Se==="regular"||Se==="normal"||Se==="regular_candle"?H.Regular++:Se==="heiken"||Se==="heikin"||Se==="heiken-ashi"||Se==="heiken_ashi"||Se==="heiken_candle"?H.Heiken++:H.Unknown++}),H},[M]);function yt(H){return H.filter(he=>{const Se=he.exist_in_exchange??he.Exist_in_exchange,st=Se===!0||Se==="true"||Se===1||Se==="1";if(!(Ce.true&&Ce.false)){if(Ce.true&&!st)return!1;if(Ce.false&&st)return!1;if(!Ce.true&&!Ce.false)return!1}return!(Object.keys(g).length&&!g[he.SignalFrom]||Object.keys(T).length&&!T[he.MachineId]||Object.keys(Q).length&&!Q[he.Action])})}const dn=yt(Ue),Wt=H=>{if(H<1||H>j)return;xn(!0),B(H);const he=e?`${Rn("/api/SignalProcessingLogs")}?symbol=${encodeURIComponent(e)}&page=${H}&limit=${et}`:`${Rn("/api/SignalProcessingLogs")}?page=${H}&limit=${et}`;Nn(he).then(Se=>Se.json()).then(Se=>{var Tt;const st=Array.isArray(Se.logs)?Se.logs:[];oe(st),console.log(`[ListViewPage] Fetched ${st.length} logs for symbol: ${e||"all"} (Page ${H} of ${((Tt=Se.pagination)==null?void 0:Tt.totalPages)||1})`)}).catch(Se=>{console.error("[ListViewPage] Error fetching logs:",Se),oe([])}).finally(()=>{xn(!1)})},an=o.jsx(Z0,{canonicalSignalKeys:dw,selectedSignals:g,setSelectedSignals:p,signalRadioMode:y,setSignalRadioMode:_,signalToggleAll:b,setSignalToggleAll:k,allMachines:O,selectedMachines:T,setSelectedMachines:D,machineRadioMode:F,setMachineRadioMode:Z,machineToggleAll:K,setMachineToggleAll:L,selectedActions:Q,setSelectedActions:se,actionRadioMode:ce,setActionRadioMode:ye,actionToggleAll:te,setActionToggleAll:xe,liveFilter:Ce,setLiveFilter:at,liveRadioMode:le,setLiveRadioMode:Ve,trades:Ue,darkMode:d}),Un=localStorage.getItem("pair_stats_reputation_enabled")==="true",Cn=localStorage.getItem("pair_stats_reputation_intensity"),Qn=localStorage.getItem("pair_stats_reputation_mode")||"perTrade",me=Ue.filter(H=>{const he=H.exist_in_exchange??H.Exist_in_exchange,Se=he===!0||he==="true"||he===1||he==="1";if(!(Ce.true&&Ce.false)){if(Ce.true&&!Se)return!1;if(Ce.false&&Se)return!1;if(!Ce.true&&!Ce.false)return!1}return!(Object.keys(g).length&&!g[H.SignalFrom]||Object.keys(T).length&&!T[H.MachineId]||Object.keys(Q).length&&!Q[H.Action])}),We=o.jsx(Q1,{onPairSelect:()=>{},candleType:r,interval:n,trades:me,selectedPair:e,previewMode:!0,darkMode:d,reputationEnabled:Un,reputationIntensity:Cn!==null?Number(Cn):0,reputationMode:Qn,liveFilter:Ce}),Ge=x.useMemo(()=>{const H={};return dn.forEach(he=>{he.Unique_id&&(H[he.Unique_id]=he)}),console.log("tradesByUniqueId created:",{totalTrades:dn.length,tradesWithUniqueId:Object.keys(H).length,sampleKeys:Object.keys(H).slice(0,5),sampleTrades:Object.values(H).slice(0,3)}),H},[dn]),[ie,Pe]=x.useState(()=>{const H=localStorage.getItem("list_font_size");return H?parseFloat(H):1});x.useEffect(()=>{localStorage.setItem("list_font_size",ie)},[ie]),x.useEffect(()=>{const H=localStorage.getItem("pair_stats_selected_json_columns");H&&JSON.parse(H)},[JSON.stringify(Bt)]),x.useEffect(()=>{},[]),Bt&&Bt.length>0,x.useEffect(()=>{localStorage.getItem("pair_stats_selected_columns")},[]),x.useEffect(()=>{},[]),x.useEffect(()=>{localStorage.getItem("pair_stats_selected_trade_columns")},[]),x.useEffect(()=>{},[]);const z="listview_regular_labels",pe=nd.map(H=>H.value),Fe=()=>{const H=localStorage.getItem(z);return H?JSON.parse(H):pe},[bt,dt]=x.useState(()=>{const H=localStorage.getItem("listview_settings_modal_open");return H?JSON.parse(H):!1}),[Zt,Vt]=x.useState(Fe()),kt="listview_json_labels",ct=()=>{const H=localStorage.getItem(kt);if(H)try{const he=JSON.parse(H);return he&&typeof he=="object"?he:{}}catch{return{}}return{}},[ft,Xt]=x.useState(ct());function pn(H){const he=new Set,Se={},st=new Set;H.forEach(It=>{var un;if(!It.json_data)return;let gn;try{if(typeof It.json_data=="string"){let or=It.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");gn=JSON.parse(or)}else gn=It.json_data}catch{return}const Rt=gn==null?void 0:gn.signal_data;Rt&&typeof Rt=="object"&&Object.keys(Rt).forEach(or=>{or!=="all_last_rows"&&st.add(or)});const kn=(un=gn==null?void 0:gn.signal_data)==null?void 0:un.all_last_rows;kn&&typeof kn=="object"&&Object.keys(kn).forEach(or=>{if(or==="candle_type")return;he.add(or);const Fn=kn[or];Fn&&typeof Fn=="object"&&Object.keys(Fn).forEach(En=>{Se[En]||(Se[En]=new Set),Se[En].add(or)})})});const Tt=Array.from(he).sort((It,gn)=>{const Rt=["1m","3m","5m","15m","30m","1h","2h","4h","1d"];return Rt.indexOf(It)-Rt.indexOf(gn)});return Array.from(st).map(It=>({label:It.replace(/_/g," "),value:`signal_data_${It}`})),Object.entries(Se).map(([It,gn])=>({label:It,value:It,intervals:Tt.map(Rt=>({interval:Rt,exists:gn.has(Rt)}))}))}x.useEffect(()=>{if(M.length>0){const H=pn(M);Kt(H),Hn(!0)}},[M]);function Yn(H,he){const Se={};H.forEach(kn=>{Se[kn.value]=kn});const st=Object.keys(he||{}),Tt=st.filter(kn=>Se[kn]),It={};H.forEach(kn=>{!he[kn.value]&&!It[kn.value]&&(It[kn.value]=kn)});const gn=Object.values(It),Rt=st.filter(kn=>!Se[kn]);return{existed:Tt,newlyAdded:gn,deleted:Rt}}Yn(Bt,ft||{}),tn?Bt.filter(H=>ft[H.value]).flatMap(H=>(H.intervals||[]).filter(he=>{var Se;return(Se=ft[H.value])==null?void 0:Se[he]}).map(he=>({parent:H,interval:he}))):Object.keys(ft).flatMap(H=>Object.keys(ft[H]||{}).filter(he=>ft[H][he]).map(he=>({parent:{label:H,value:H},interval:he})));const Tn="listview_unified_labels_order";function Gn(){const H=[],he=new Set;nd.forEach(st=>{he.has(st.value)||(H.push({type:"regular",value:st.value,label:st.label}),he.add(st.value))});const Se=new Set;return Bt.forEach(st=>{Se.has(st.value)||(H.push({type:"json",value:st.value,label:st.label,intervals:st.intervals}),Se.add(st.value))}),H}function In(H){const he=localStorage.getItem(Tn);if(he)try{const Se=JSON.parse(he),st={};H.forEach(Rt=>{st[Rt.type+"_"+Rt.value]=Rt});const Tt=Se.map(Rt=>st[Rt.type+"_"+Rt.value]).filter(Boolean),It=new Set(Se.map(Rt=>Rt.type+"_"+Rt.value)),gn=H.filter(Rt=>!It.has(Rt.type+"_"+Rt.value));return[...Tt,...gn]}catch{return H}return H}const[bn,re]=x.useState(()=>In(Gn())),Ae=x.useRef(!1);x.useEffect(()=>{if(Ae.current)return;const H=Gn();re(he=>{const Se=new Set(he.map(Rt=>Rt.type+"_"+Rt.value)),st=new Set(H.map(Rt=>Rt.type+"_"+Rt.value));let Tt=he.filter(Rt=>st.has(Rt.type+"_"+Rt.value));const It=H.filter(Rt=>!Se.has(Rt.type+"_"+Rt.value));return[...Tt,...It]})},[JSON.stringify(Bt)]),x.useEffect(()=>{const H=Gn();re(In(H))},[JSON.stringify(Bt)]);const[$e,zt]=x.useState(!1),[Xe,tt]=x.useState(!1),[rt,A]=x.useState({}),[G,U]=x.useState(!1);x.useEffect(()=>{const H=localStorage.getItem("pair_stats_interval_master_checked");H?A(JSON.parse(H)):fw.forEach(he=>A(Se=>({...Se,[he]:!0})))},[]),x.useEffect(()=>{localStorage.setItem("pair_stats_interval_master_checked",JSON.stringify(rt))},[rt]),x.useEffect(()=>{const H=localStorage.getItem("pair_stats_all_regular_checked");tt(H?JSON.parse(H):!1)},[]),x.useEffect(()=>{localStorage.setItem("pair_stats_all_regular_checked",JSON.stringify(Xe))},[Xe]),x.useEffect(()=>{const H=localStorage.getItem("pair_stats_show_unchecked");zt(H?JSON.parse(H):!1)},[]),x.useEffect(()=>{localStorage.setItem("pair_stats_show_unchecked",JSON.stringify($e))},[$e]);const J="listview_settings_modal_pos",Y="listview_settings_modal_size",X=()=>{const H=localStorage.getItem(J);let he={x:window.innerWidth/2-400,y:window.innerHeight/2-300};if(H)try{const kn=JSON.parse(H);typeof kn.x=="number"&&typeof kn.y=="number"&&(he=kn)}catch{}const Se=we(),st=window.innerWidth,Tt=window.innerHeight;let It=Math.min(Se.width,st);Math.min(Se.height,Tt);let gn=Math.max(0,Math.min(st-It,he.x)),Rt=he.y;return Rt<0&&(Rt=0),Rt>Tt-48&&(Rt=Tt-48),{x:gn,y:Rt}},we=()=>{const H=localStorage.getItem(Y);let he={width:700,height:500};if(H)try{const Tt=JSON.parse(H);typeof Tt.width=="number"&&typeof Tt.height=="number"&&(he=Tt)}catch{}const Se=window.innerWidth,st=window.innerHeight;return{width:Math.min(he.width,Se),height:Math.min(he.height,st)}},[je,_e]=x.useState(X),[Ee,Re]=x.useState(we),[gt,Nt]=x.useState(!1),Ut=x.useRef({x:0,y:0});function vt(H){Nt(!0),Ut.current={x:H.clientX-je.x,y:H.clientY-je.y},document.body.style.userSelect="none"}x.useEffect(()=>{function H(Se){if(!gt)return;const st=window.innerWidth,Tt=window.innerHeight,It=document.querySelector('[role="dialog"][aria-label="Settings"]');let gn=It?It.offsetWidth:Ee.width;It?It.offsetHeight:Ee.height;const Rt=Math.floor(.05*gn),kn=48;let un=Math.max(-gn+Rt,Math.min(st-Rt,Se.clientX-Ut.current.x)),or=Math.max(kn*-.9,Math.min(Tt-48,Se.clientY-Ut.current.y));_e({x:un,y:or})}function he(){Nt(!1),document.body.style.userSelect=""}return gt&&(window.addEventListener("mousemove",H),window.addEventListener("mouseup",he)),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",he)}},[gt,je,Ee]);const $t=x.useRef(null),[fn,Sn]=x.useState(!1),mn=x.useRef({x:0,y:0,width:0,height:0}),[Ot,ur]=x.useState(null);function Mr(H,he){H.stopPropagation(),Sn(!0),ur(he);const Se=$t.current;mn.current={x:H.clientX,y:H.clientY,width:Se?Se.offsetWidth:Ee.width,height:Se?Se.offsetHeight:Ee.height,left:Se?Se.offsetLeft:je.x,top:Se?Se.offsetTop:je.y},document.body.style.userSelect="none"}x.useEffect(()=>{function H(Se){if(!fn||!Ot)return;let{x:st,y:Tt,width:It,height:gn,left:Rt,top:kn}=mn.current,un=Se.clientX-st,or=Se.clientY-Tt,Fn=It,En=gn,Sr=je.x,_s=je.y;switch(Ot){case"right":Fn=Math.max(200,It+un);break;case"left":Fn=Math.max(200,It-un),Sr=Rt+un;break;case"bottom":En=Math.max(100,gn+or);break;case"top":En=Math.max(100,gn-or),_s=kn+or;break;case"top-left":Fn=Math.max(200,It-un),Sr=Rt+un,En=Math.max(100,gn-or),_s=kn+or;break;case"top-right":Fn=Math.max(200,It+un),En=Math.max(100,gn-or),_s=kn+or;break;case"bottom-left":Fn=Math.max(200,It-un),Sr=Rt+un,En=Math.max(100,gn+or);break;case"bottom-right":Fn=Math.max(200,It+un),En=Math.max(100,gn+or);break}Re({width:Fn,height:En}),_e({x:Sr,y:_s});const kr=$t.current;kr&&(kr.style.width=Fn+"px",kr.style.height=En+"px",kr.style.left=Sr+"px",kr.style.top=_s+"px")}function he(){Sn(!1),ur(null),document.body.style.userSelect=""}return fn&&(window.addEventListener("mousemove",H),window.addEventListener("mouseup",he)),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",he)}},[fn,je,Ee,Ot]),x.useEffect(()=>{localStorage.setItem(Y,JSON.stringify(Ee))},[Ee]),x.useEffect(()=>{function H(){const he=document.querySelector('[role="dialog"][aria-label="Settings"]');if(!he)return;const Se=he.getBoundingClientRect();let st=je.x,Tt=je.y;Se.width,Se.height;const It=window.innerWidth,gn=window.innerHeight,Rt=48,kn=Math.floor(.05*Se.width),un=Math.floor(.05*Se.height);Se.right>It-kn&&(st=Math.max(0,It-kn-Se.width)),Se.bottom>gn-un&&(Tt=Math.max(Rt,gn-un-Se.height)),Se.left<-Se.width+kn&&(st=-Se.width+kn),Se.top<-Se.height+un&&(Tt=-Se.height+un),Se.width>It,Se.height>gn,(st!==je.x||Tt!==je.y)&&_e({x:st,y:Tt}),he.style&&(he.style.maxWidth=It+"px",he.style.maxHeight=gn+"px",Se.width>It&&(he.style.width=It+"px"),Se.height>gn&&(he.style.height=gn+"px"))}return window.addEventListener("resize",H),H(),()=>window.removeEventListener("resize",H)},[je]),x.useEffect(()=>{localStorage.setItem(J,JSON.stringify(je))},[je]);const[Jn,ar]=x.useState(!1),Lr="listview_settings_modal_scale",[er,Ne]=x.useState(()=>{const H=localStorage.getItem(Lr);return H?parseFloat(H):1});x.useEffect(()=>{localStorage.setItem(Lr,er)},[er]),x.useEffect(()=>{if(bt)ar(!0);else{const H=setTimeout(()=>ar(!1),180);return()=>clearTimeout(H)}},[bt]),x.useEffect(()=>{localStorage.setItem("listview_settings_modal_open",JSON.stringify(bt))},[bt]),x.useEffect(()=>{function H(he){bt&&he.key==="Escape"&&dt(!1)}return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[bt]);const[nt,wt]=x.useState(()=>{const H=localStorage.getItem("listview_settings_modal_opacity");return H?parseFloat(H):1});x.useEffect(()=>{localStorage.setItem("listview_settings_modal_opacity",nt)},[nt]);const[nn,ln]=x.useState(()=>{const H=localStorage.getItem("listview_label_font_size");return H?parseFloat(H):1}),[Dt,yn]=x.useState(()=>{const H=localStorage.getItem("listview_label_wrap");return H?JSON.parse(H):!1});x.useEffect(()=>{localStorage.setItem("listview_label_font_size",nn)},[nn]),x.useEffect(()=>{localStorage.setItem("listview_label_wrap",JSON.stringify(Dt))},[Dt]);const[lr,Pt]=x.useState(()=>{const H=localStorage.getItem("listview_filter_bar_visible");return H?JSON.parse(H):!0});x.useEffect(()=>{localStorage.setItem("listview_filter_bar_visible",JSON.stringify(lr))},[lr]);function $n(){const H=bn.map(st=>({type:st.type,value:st.value}));localStorage.setItem(Tn,JSON.stringify(H)),localStorage.setItem(z,JSON.stringify(Zt)),localStorage.setItem(kt,JSON.stringify(ft));const he=document.createElement("div");he.textContent=" Settings saved successfully!",he.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #22c55e;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      z-index: 10000;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
      animation: slideIn 0.3s ease-out;
    `;const Se=document.createElement("style");Se.textContent=`
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
    `,document.head.appendChild(Se),document.body.appendChild(he),setTimeout(()=>{he.parentNode&&he.parentNode.removeChild(he)},3e3)}const[rn,ke]=x.useState(null),[Me,Le]=x.useState("asc"),Ct=(H,he,Se=null,st=null)=>{const Tt={type:H,key:he,parentKey:Se,interval:st};rn&&JSON.stringify(rn)===JSON.stringify(Tt)?Le(It=>It==="asc"?"desc":"asc"):(ke(Tt),Le("asc"))},pt=(H,he)=>{var gn,Rt,kn;if(!he)return;const{type:Se,key:st,parentKey:Tt,interval:It}=he;if(Se==="regular"){const un=["PL","Hedge","Hedge_1_1","Hedge_Buy_pl","Hedge_Sell_pl","Hedge_order_size","Min_comm_after_hedge","Hedge_Swing_High_Point","Hedge_Swing_Low_Point"],or=["signal_data_active_squeeze_trend","signal_data_overall_trend_RC","signal_data_overall_trend_percentage_RC","signal_data_overall_trend_HC","signal_data_overall_trend_percentage_HC","signal_data_overall_trend_4h","signal_data_overall_trend_percentage_4h","signal_data_overall_trend_1h","signal_data_overall_trend_percentage_1h","signal_data_volume_1h"];if(un.includes(st)){const Fn=Ge[H.Unique_id];if(Fn&&Fn.Unique_id){const Sr={PL:"Pl_after_comm",Hedge:"Hedge",Hedge_1_1:"Hedge_1_1_bool",Hedge_Buy_pl:"Hedge_Buy_pl",Hedge_Sell_pl:"Hedge_Sell_pl",Hedge_order_size:"Hedge_order_size",Min_comm_after_hedge:"Min_comm_after_hedge",Hedge_Swing_High_Point:"Hedge_Swing_High_Point",Hedge_Swing_Low_Point:"Hedge_Swing_Low_Point"}[st];if(Sr)return Fn[Sr]}return}else if(or.includes(st)){let Fn={};try{if(typeof H.json_data=="string"){let Sr=H.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Fn=JSON.parse(Sr)}else Fn=H.json_data||{}}catch{Fn={}}const En=Fn==null?void 0:Fn.signal_data;if(En&&typeof En=="object"){const Sr=st.replace("signal_data_","");return En[Sr]}return}return H[st]}if(Se==="trade")return(gn=Ge[H.Unique_id])==null?void 0:gn[st];if(Se==="json"&&Tt&&It){let un={};try{if(typeof H.json_data=="string"){let Fn=H.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");un=JSON.parse(Fn)}else un=H.json_data||{}}catch{un={}}return(kn=(((Rt=un==null?void 0:un.signal_data)==null?void 0:Rt.all_last_rows)||{})[It])==null?void 0:kn[Tt]}},Yt=H=>rn?[...H].sort((he,Se)=>{let st=pt(he,rn),Tt=pt(Se,rn);if(rn.type==="regular"&&l(rn.key)){const Rt=new Date(st),kn=new Date(Tt);if(!isNaN(Rt.getTime())&&!isNaN(kn.getTime()))return Rt<kn?Me==="asc"?-1:1:Rt>kn?Me==="asc"?1:-1:0}const It=parseFloat(st),gn=parseFloat(Tt);return!isNaN(It)&&!isNaN(gn)?Me==="asc"?It-gn:gn-It:(st=st==null?"":String(st),Tt=Tt==null?"":String(Tt),st<Tt?Me==="asc"?-1:1:st>Tt?Me==="asc"?1:-1:0)}):H,[St,q]=x.useState(null);function ee(){const H={width:700,height:500},he=window.innerWidth,Se=window.innerHeight,st=Math.max(0,Math.floor((he-H.width)/2)),Tt=Math.max(0,Math.floor((Se-H.height)/2));_e({x:st,y:Tt}),Re(H),Ne(1),localStorage.setItem(J,JSON.stringify({x:st,y:Tt})),localStorage.setItem(Y,JSON.stringify(H)),localStorage.setItem(Lr,"1.0")}const[ve,Qe]=x.useState(null),ot="listview_filter_table_spacing",[xt,Gt]=x.useState(()=>{const H=localStorage.getItem(ot);return H?parseInt(H):0});x.useEffect(()=>{localStorage.setItem(ot,xt.toString())},[xt]);const[ze,wn]=x.useState([]),[Lt,Pn]=x.useState(1),[qt,fr]=x.useState(1),[Xn,vr]=x.useState(0),[Ar,rr]=x.useState(!1),[mr,vs]=x.useState("Candle_Time"),[sr,is]=x.useState("DESC");x.useEffect(()=>{if(!mr&&!sr)return;rr(!0);const H=e?`${Rn("/api/SignalProcessingLogs")}?symbol=${encodeURIComponent(e)}&page=${Lt}&limit=${et}&sortKey=${mr}&sortDirection=${sr}`:`${Rn("/api/SignalProcessingLogs")}?page=${Lt}&limit=${et}&sortKey=${mr}&sortDirection=${sr}`;Nn(H).then(he=>he.json()).then(he=>{var Se,st;wn(Array.isArray(he.logs)?he.logs:[]),vr(((Se=he.pagination)==null?void 0:Se.total)||0),fr(((st=he.pagination)==null?void 0:st.totalPages)||1),rr(!1)}).catch(()=>{wn([]),vr(0),fr(1),rr(!1)})},[Lt,et,mr,sr,e]);const wr=H=>{H<1||H>qt||Pn(H)},Ks=(H,he,Se=null,st=null)=>{mr===he?is(Tt=>Tt==="ASC"?"DESC":"ASC"):(vs(he),is("ASC")),ke({type:H,key:he,parentKey:Se,interval:st})};function Mn(){return bn.filter(H=>H.type==="regular"?Zt.includes(H.value):H.type==="json"&&Array.isArray(H.intervals)?(H.intervals||[]).some(({interval:he})=>{var Se;return(Se=ft[H.value])==null?void 0:Se[he]}):!1)}function jn(H){if(!H)return"";const he=new Date(H);if(isNaN(he.getTime()))return H;const Se=st=>st.toString().padStart(2,"0");return`${he.getFullYear()}-${Se(he.getMonth()+1)}-${Se(he.getDate())} ${Se(he.getHours())}:${Se(he.getMinutes())}:${Se(he.getSeconds())}`}function qr(H){const he=Mn();return H.map(Se=>{var gn;let st={};try{if(typeof Se.json_data=="string"){let Rt=Se.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");st=JSON.parse(Rt)}else st=Se.json_data||{}}catch{st={}}const Tt=((gn=st==null?void 0:st.signal_data)==null?void 0:gn.all_last_rows)||{},It={};return he.forEach(Rt=>{let kn;if(Rt.type==="regular"){const un=["PL","Hedge","Hedge_1_1","Hedge_Buy_pl","Hedge_Sell_pl","Hedge_order_size","Min_comm_after_hedge","Hedge_Swing_High_Point","Hedge_Swing_Low_Point"],or=["signal_data_active_squeeze_trend","signal_data_overall_trend_RC","signal_data_overall_trend_percentage_RC","signal_data_overall_trend_HC","signal_data_overall_trend_percentage_HC","signal_data_overall_trend_4h","signal_data_overall_trend_percentage_4h","signal_data_overall_trend_1h","signal_data_overall_trend_percentage_1h","signal_data_volume_1h"];if(un.includes(Rt.value)){const Fn=Ge[Se.Unique_id];if(Fn&&Fn.Unique_id){const Sr={PL:"Pl_after_comm",Hedge:"Hedge",Hedge_1_1:"Hedge_1_1_bool",Hedge_Buy_pl:"Hedge_Buy_pl",Hedge_Sell_pl:"Hedge_Sell_pl",Hedge_order_size:"Hedge_order_size",Min_comm_after_hedge:"Min_comm_after_hedge",Hedge_Swing_High_Point:"Hedge_Swing_High_Point",Hedge_Swing_Low_Point:"Hedge_Swing_Low_Point"}[Rt.value];Sr&&(kn=Fn[Sr])}}else if(or.includes(Rt.value)){let Fn={};try{if(typeof Se.json_data=="string"){let Sr=Se.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Fn=JSON.parse(Sr)}else Fn=Se.json_data||{}}catch{Fn={}}const En=Fn==null?void 0:Fn.signal_data;if(En&&typeof En=="object"){const Sr=Rt.value.replace("signal_data_","");kn=En[Sr]}}else kn=Se[Rt.value]}else if(Rt.type==="json"&&Array.isArray(Rt.intervals)){(Rt.intervals||[]).forEach(({interval:un})=>{var or,Fn;(or=ft[Rt.value])!=null&&or[un]&&(kn=(Fn=Tt[un])==null?void 0:Fn[Rt.value],It[`${Rt.label} [${un}]`]=kn)});return}Rt.type==="regular"&&l(Rt.value)?It[Rt.label]=jn(kn):typeof kn=="number"&&kn>1e12?It[Rt.label]=kn.toString():It[Rt.label]=kn}),It})}const[os,bs]=x.useState(!1),[si,Qt]=x.useState(!1),Oe=async()=>{if(ze.length>0)bs(!0);else{const H=qr(Dn);if(H.length===0){alert("No data to export!");return}const he=Ir.json_to_sheet(H),Se=Ir.book_new();Ir.book_append_sheet(Se,he,"Data"),La(Se,"exported_data.xlsx")}},Je=async H=>{if(bs(!1),H==="pagination"){const he=qr(ze);if(he.length===0){alert("No data to export!");return}const Se=Ir.json_to_sheet(he),st=Ir.book_new();Ir.book_append_sheet(st,Se,"Data"),La(st,"exported_data.xlsx")}else if(H==="whole"){Qt(!0);const he=e?`${Rn("/api/SignalProcessingLogs")}?symbol=${encodeURIComponent(e)}&limit=all&sortKey=${mr}&sortDirection=${sr}`:`${Rn("/api/SignalProcessingLogs")}?limit=all&sortKey=${mr}&sortDirection=${sr}`;try{const st=await(await Nn(he)).json(),Tt=Array.isArray(st.logs)?st.logs:[],It=qr(Tt);if(It.length===0){alert("No data to export!"),Qt(!1);return}const gn=Ir.json_to_sheet(It),Rt=Ir.book_new();Ir.book_append_sheet(Rt,gn,"Data"),La(Rt,"exported_data.xlsx")}catch{alert("Failed to fetch all data for export.")}Qt(!1)}};return o.jsxs("div",{className:d?"dark":"",style:{minHeight:"100vh",background:d?"#181a20":"#f7f7fa"},children:[o.jsxs("div",{style:{position:"absolute",top:8,right:200,zIndex:100,display:"flex",alignItems:"center",gap:12},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Spacing"}),o.jsx("button",{onClick:()=>Gt(H=>H-4),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:d?"#23272f":"#fff",color:d?"#fff":"#222",cursor:"pointer"},title:"Reduce space between filters and table",children:""}),o.jsx("button",{onClick:()=>Gt(H=>Math.min(100,H+4)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:d?"#23272f":"#fff",color:d?"#fff":"#222",cursor:"pointer"},title:"Increase space between filters and table",children:""}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[xt,"px"]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Table Font"}),o.jsx("button",{onClick:()=>Pe(H=>Math.max(.7,H-.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:d?"#23272f":"#fff",color:d?"#fff":"#222",cursor:"pointer"},children:"A"}),o.jsx("button",{onClick:()=>Pe(H=>Math.min(2,H+.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:d?"#23272f":"#fff",color:d?"#fff":"#222",cursor:"pointer"},children:"A+"}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[Math.round(ie*100),"%"]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Label Font"}),o.jsx("button",{onClick:()=>ln(H=>Math.max(.7,H-.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:d?"#23272f":"#fff",color:d?"#fff":"#222",cursor:"pointer"},children:"A"}),o.jsx("button",{onClick:()=>ln(H=>Math.min(2,H+.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:d?"#23272f":"#fff",color:d?"#fff":"#222",cursor:"pointer"},children:"A+"}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[Math.round(nn*100),"%"]})]}),o.jsx("button",{onClick:()=>yn(H=>!H),style:{padding:"3px 10px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:12,background:Dt?d?"#0ea5e9":"#0d9488":d?"#23272f":"#fff",color:Dt||d?"#fff":"#222",cursor:"pointer",boxShadow:Dt?"0 2px 8px #0ea5e944":"0 2px 8px #8882",transition:"background 0.2s"},title:"Wrap label text at word boundaries",children:Dt?"Unwrap Labels":"Wrap Labels"})]}),o.jsx("div",{style:{position:"absolute",top:8,left:300,zIndex:100,display:"flex",alignItems:"center",gap:12},children:Ar&&o.jsx("span",{style:{color:"#0ea5e9",fontWeight:600},children:"Loading all data..."})}),o.jsx("div",{style:{position:"absolute",top:24,left:24,zIndex:100},children:o.jsx("button",{onClick:()=>window.location.href="/reports",style:{background:"none",border:"none",cursor:"pointer",fontSize:24,color:d?"#fff":"#222",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:H=>H.target.style.backgroundColor=d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",onMouseLeave:H=>H.target.style.backgroundColor="transparent","aria-label":"Back to Grid Reports",title:"Back to Grid Reports",children:o.jsx("span",{role:"img","aria-label":"back to grid",children:""})})}),o.jsxs("div",{style:{position:"absolute",top:24,right:80,zIndex:100,display:"flex",gap:8,alignItems:"center"},children:[o.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to reset the settings screen? Yes / No")&&ee()},style:{background:"none",border:"none",cursor:"pointer",fontSize:22,color:d?"#fff":"#222",marginRight:2},"aria-label":"Reset Settings",title:"Reset Settings Screen",children:o.jsx("span",{role:"img","aria-label":"reset",children:""})}),o.jsx("button",{onClick:()=>dt(H=>!H),style:{background:"none",border:"none",cursor:"pointer",fontSize:28,color:d?"#fff":"#222"},"aria-label":bt?"Close Settings":"Open Settings","aria-haspopup":"dialog","aria-expanded":bt,children:o.jsx("span",{role:"img","aria-label":"settings",children:""})})]}),Jn&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.10)",zIndex:199,transition:"opacity 0.18s",opacity:bt?1:0,pointerEvents:"none"},"aria-hidden":"true"}),o.jsxs("div",{ref:$t,role:"dialog","aria-modal":"true","aria-label":"Settings",style:{position:"fixed",top:je.y,left:je.x,minHeight:100,minWidth:200,zIndex:200,width:Ee.width,maxWidth:"100vw",background:d?`rgba(35,39,47,${nt})`:`rgba(255,255,255,${nt})`,color:d?"#fff":"#222",borderRadius:18,boxShadow:"0 4px 32px 0 rgba(0,0,0,0.18)",padding:0,display:"flex",flexDirection:"column",overflow:"hidden",height:Ee.height,maxHeight:"100vh",margin:"0 auto",boxSizing:"border-box",resize:"none",cursor:gt?"move":"default",opacity:bt?1:0,transform:bt?"scale(1)":"scale(0.96)",transition:"opacity 0.18s, transform 0.18s",pointerEvents:bt?"auto":"none"},children:[[["top-left",{top:-8,left:-8,cursor:"nwse-resize"}],["top",{top:-8,left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"}],["top-right",{top:-8,right:-8,cursor:"nesw-resize"}],["right",{top:"50%",right:-8,transform:"translateY(-50%)",cursor:"ew-resize"}],["bottom-right",{bottom:-8,right:-8,cursor:"nwse-resize"}],["bottom",{bottom:-8,left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"}],["bottom-left",{bottom:-8,left:-8,cursor:"nesw-resize"}],["left",{top:"50%",left:-8,transform:"translateY(-50%)",cursor:"ew-resize"}]].map(([H,he])=>o.jsx("div",{onMouseDown:Se=>Mr(Se,H),style:{position:"absolute",width:18,height:18,background:d?"#0ea5e9":"#2563eb",border:"2px solid #fff",borderRadius:6,zIndex:1e3,...he,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #0ea5e944",cursor:he.cursor,userSelect:"none"},title:`Resize (${H.replace("-"," ")})`,children:o.jsx("div",{style:{width:8,height:8,borderRadius:4,background:"#fff",opacity:.8}})},H)),o.jsxs("div",{style:{width:"100%",height:"100%",transform:`scale(${er})`,transformOrigin:"top left"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:d?"#23272f":"#fff",zIndex:2,padding:12,borderTopLeftRadius:18,borderTopRightRadius:18,userSelect:"none",gap:8,minHeight:0},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:24,minWidth:56,marginRight:12,cursor:"grab",userSelect:"none",background:"transparent"},onMouseDown:vt,children:o.jsx("div",{style:{width:48,height:16,background:d?"#334155":"#e0e7ef",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #0ea5e944",gap:2},children:[0,1,2,3].map(H=>o.jsx("div",{style:{width:6,height:6,borderRadius:3,background:d?"#fff":"#222",opacity:.7,margin:2}},H))})}),o.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13,marginRight:12},children:[o.jsx("span",{style:{opacity:.7},children:"Modal Scale"}),o.jsx("input",{type:"range",min:.7,max:1.5,step:.01,value:er,onChange:H=>Ne(parseFloat(H.target.value)),style:{width:70}}),o.jsxs("span",{style:{width:32,textAlign:"right",opacity:.7},children:[Math.round(er*100),"%"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Opacity"}),o.jsx("input",{type:"range",min:.3,max:1,step:.01,value:nt,onChange:H=>wt(parseFloat(H.target.value)),style:{width:70}}),o.jsxs("span",{style:{width:32,textAlign:"right",opacity:.7},children:[Math.round(nt*100),"%"]})]}),o.jsx("button",{onClick:()=>U(H=>!H),style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:G?"#0ea5e9":"#334155",color:"#fff",boxShadow:G?"0 2px 8px #0ea5e944":"0 2px 8px #33415544",cursor:"pointer",transition:"background 0.2s"},children:G?"Show Regular Labels":"Minimize Regular Labels"}),o.jsx("button",{onClick:()=>zt(H=>!H),style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:$e?"#22c55e":"#ef4444",color:"#fff",boxShadow:$e?"0 2px 8px #22c55e44":"0 2px 8px #ef444444",cursor:"pointer",transition:"background 0.2s"},children:$e?"Show Unchecked":"Hide Unchecked"}),o.jsx("button",{onClick:()=>{Vt(Xe?[]:nd.map(H=>H.value)),tt(H=>!H)},style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:Xe?"#22c55e":"#ef4444",color:"#fff",boxShadow:Xe?"0 2px 8px #22c55e44":"0 2px 8px #ef444444",cursor:"pointer",transition:"background 0.2s"},children:Xe?"Uncheck All Regular":"Check All Regular"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap",marginLeft:8},children:[o.jsx("span",{style:{fontWeight:500,marginRight:4},children:"Intervals:"}),fw.map(H=>o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2,minWidth:36},children:[o.jsx("input",{type:"checkbox",checked:rt[H]||!1,onChange:he=>{const Se=he.target.checked;A({...rt,[H]:Se}),Xt(st=>{const Tt={...st};return Bt.forEach(It=>{It.intervals.some(gn=>gn.interval===H&&gn.exists)&&(Tt[It.value]={...Tt[It.value],[H]:Se})}),Tt})},style:{transform:"scale(1.05)"}}),o.jsx("span",{style:{fontSize:13},children:H})]},H))]})]}),o.jsx("button",{onClick:$n,style:{padding:"6px 18px",borderRadius:6,border:"none",fontWeight:600,fontSize:15,background:"#22c55e",color:"#fff",boxShadow:"0 2px 8px #22c55e44",cursor:"pointer",transition:"background 0.2s",marginLeft:8},title:"Save label order and checkbox state",children:"Save"}),o.jsx("button",{onClick:()=>dt(!1),style:{background:"none",border:"none",fontSize:22,color:"inherit",cursor:"pointer",marginLeft:12},"aria-label":"Close",children:""})]})]}),o.jsx("div",{style:{overflowY:"auto",padding:32,flex:1,minHeight:0,position:"relative"},children:o.jsx(ay,{backend:cy,children:o.jsx(C$,{items:bn,moveLabel:(H,he)=>{re(Se=>{const st=[...Se],[Tt]=st.splice(H,1);return st.splice(he,0,Tt),st})},renderRow:(H,he)=>{let Se=!0;return H.type==="regular"&&(G&&(Se=!1),!$e&&!Zt.includes(H.value)&&(Se=!1)),H.type==="json"&&Array.isArray(H.intervals)&&(H.intervals.some(({interval:Tt})=>{var It;return!$e||!!((It=ft==null?void 0:ft[H.value])!=null&&It[Tt])})||(Se=!1)),o.jsxs("div",{style:{display:Se?void 0:"none",width:"100%"},children:[H.type==="regular"&&o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[o.jsx("input",{type:"checkbox",checked:Zt.includes(H.value),onChange:st=>{st.target.checked?Vt([...Zt,H.value]):Vt(Zt.filter(Tt=>Tt!==H.value))}}),H.label]}),H&&H.type==="json"&&Array.isArray(H.intervals)&&(()=>{const st=(H.intervals||[]).filter(({interval:Tt})=>{var It;return!$e||!!((It=ft==null?void 0:ft[H.value])!=null&&It[Tt])});return st.length===0?null:o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:1,width:"100%"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between",marginBottom:1,lineHeight:1.2},children:o.jsx("span",{style:{fontWeight:500,fontSize:"0.95em"},children:H.label})}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:0,alignItems:"flex-start",lineHeight:1},children:st.map(({interval:Tt,exists:It})=>{var gn;return o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2,minWidth:40,opacity:It?1:.5,padding:"1px 0",lineHeight:1},children:[o.jsx("input",{type:"checkbox",checked:!!((gn=ft==null?void 0:ft[H.value])!=null&&gn[Tt]),disabled:!It,onChange:Rt=>{Xt(kn=>({...kn,[H.value]:{...kn[H.value],[Tt]:Rt.target.checked}}))},style:{transform:"scale(0.9)"}}),o.jsx("span",{style:{fontSize:"0.8em",fontWeight:500,lineHeight:1},children:Tt})]},H.value+"_"+Tt)})})]})})()]})},activeJsonLabels:ft,setActiveJsonLabels:Xt,showUnchecked:$e,dragOverIndex:ve,setDragOverIndex:Qe})})})]})]})]}),At&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{background:d?"#23272f":"#fff",color:d?"#fff":"#222",padding:32,borderRadius:16,fontSize:22,fontWeight:600,boxShadow:"0 4px 32px rgba(0,0,0,0.18)"},children:"Loading logs..."})}),o.jsx("div",{style:{position:"absolute",top:24,right:130,zIndex:100,display:"flex",gap:4}}),o.jsx("button",{onClick:()=>h(H=>!H),style:{position:"absolute",right:32,top:24,zIndex:100,padding:8,borderRadius:"50%",background:d?"#222":"#fff",color:d?"#fff":"#222",border:"1.5px solid #888",fontSize:22,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},title:d?"Switch to Light Mode":"Switch to Dark Mode",children:d?"":""}),o.jsxs("div",{style:{padding:"0 64px 0 32px",position:"relative",display:"flex",flexDirection:"column",height:"100vh",boxSizing:"border-box"},children:[o.jsx(yH,{pair:e,interval:n,candleType:r,onBack:()=>window.close(),gridPreview:We,filterBar:an,trades:dn,darkMode:d}),o.jsxs("div",{style:{margin:`${xt}px 0 0 0`},children:[" ",o.jsxs("div",{style:{color:d?"#fff":"#222",margin:"8px 0 16px 0",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px"},children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Rows: ",ze.length>0?ze.length:Dn.length," of ",ze.length>0?Xn:fe]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Page: ",ze.length>0?Lt:P," of ",ze.length>0?qt:j]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Columns: ",nd.length+Bt.reduce((H,he)=>{var Se;return H+(((Se=he.intervals)==null?void 0:Se.length)||0)},0)+N$.length]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[o.jsx("input",{type:"checkbox",checked:sn.Regular,onChange:H=>He(he=>({...he,Regular:H.target.checked})),style:{transform:"scale(1.1)"}}),o.jsx("span",{children:"Regular"}),o.jsxs("span",{style:{fontSize:11,opacity:.7,color:sn.Regular?"#22c55e":"#6b7280",fontWeight:600},children:["(",Ht.Regular,")"]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[o.jsx("input",{type:"checkbox",checked:sn.Heiken,onChange:H=>He(he=>({...he,Heiken:H.target.checked})),style:{transform:"scale(1.1)"}}),o.jsx("span",{children:"Heiken"}),o.jsxs("span",{style:{fontSize:11,opacity:.7,color:sn.Heiken?"#22c55e":"#6b7280",fontWeight:600},children:["(",Ht.Heiken,")"]})]}),o.jsxs("span",{style:{fontSize:12,opacity:.7,color:Dn.length===0?"#ef4444":"#22c55e",fontWeight:600},children:["(",Dn.length," shown)"]}),Ht.Unknown>0&&o.jsxs("span",{style:{fontSize:11,opacity:.5,color:"#f59e0b",fontWeight:600},children:["(",Ht.Unknown," unknown)"]})]}),Dn.length>0&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:8},children:[o.jsx("span",{style:{opacity:.7},children:"Time Range:"}),o.jsx("span",{style:{fontWeight:600,color:d?"#0ea5e9":"#0d9488"},children:(qn=Dn[0])!=null&&qn.Candle_Time?s(Dn[0].Candle_Time):"N/A"}),o.jsx("span",{children:"to"}),o.jsx("span",{style:{fontWeight:600,color:d?"#0ea5e9":"#0d9488"},children:(Vn=Dn[Dn.length-1])!=null&&Vn.Candle_Time?s(Dn[Dn.length-1].Candle_Time):"N/A"}),o.jsx("button",{onClick:Oe,style:{marginLeft:16,padding:"6px 12px",borderRadius:4,border:"none",fontWeight:600,fontSize:12,background:"#fbbf24",color:"#222",boxShadow:"0 2px 4px #fbbf2444",cursor:"pointer",transition:"background 0.2s"},children:"Export to Excel"})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",background:d?"#1e293b":"#f1f5f9",borderRadius:6,border:d?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("span",{style:{fontWeight:600,color:d?"#fff":"#222",fontSize:12},children:"Rows:"}),o.jsx("input",{type:"number",min:"10",max:"5000",value:et,onChange:H=>{const he=parseInt(H.target.value);!isNaN(he)&&he>=10&&he<=5e3&&ht(he)},onKeyPress:H=>{H.key==="Enter"&&(wr(1),fr(Math.ceil(ze.length/et)))},onBlur:()=>{wr(1),fr(Math.ceil(ze.length/et))},style:{width:50,padding:"2px 4px",borderRadius:3,border:"1px solid #888",background:d?"#23272f":"#fff",color:d?"#fff":"#222",fontSize:12,textAlign:"center"}})]}),(ze.length>0?qt:j)>1&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",background:d?"#1e293b":"#f1f5f9",borderRadius:6,border:d?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("button",{onClick:()=>ze.length>0?wr(1):Wt(1),disabled:(ze.length>0?Lt:P)===1,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(ze.length>0?Lt:P)===1?d?"#334155":"#e5e7eb":d?"#0ea5e9":"#0d9488",color:(ze.length>0?Lt:P)===1?d?"#6b7280":"#9ca3af":"#fff",cursor:(ze.length>0?Lt:P)===1?"not-allowed":"pointer",opacity:(ze.length>0?Lt:P)===1?.5:1},children:"First"}),o.jsx("button",{onClick:()=>ze.length>0?wr((ze.length>0?Lt:P)-1):Wt((ze.length>0?Lt:P)-1),disabled:(ze.length>0?Lt:P)===1,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(ze.length>0?Lt:P)===1?d?"#334155":"#e5e7eb":d?"#0ea5e9":"#0d9488",color:(ze.length>0?Lt:P)===1?d?"#6b7280":"#9ca3af":"#fff",cursor:(ze.length>0?Lt:P)===1?"not-allowed":"pointer",opacity:(ze.length>0?Lt:P)===1?.5:1},children:""}),o.jsxs("span",{style:{fontWeight:600,color:d?"#fff":"#222",fontSize:12},children:[ze.length>0?Lt:P,"/",ze.length>0?qt:j]}),o.jsx("button",{onClick:()=>ze.length>0?wr((ze.length>0?Lt:P)+1):Wt((ze.length>0?Lt:P)+1),disabled:(ze.length>0?Lt:P)===(ze.length>0?qt:j),style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(ze.length>0?Lt:P)===(ze.length>0?qt:j)?d?"#334155":"#e5e7eb":d?"#0ea5e9":"#0d9488",color:(ze.length>0?Lt:P)===(ze.length>0?qt:j)?d?"#6b7280":"#9ca3af":"#fff",cursor:(ze.length>0?Lt:P)===(ze.length>0?qt:j)?"not-allowed":"pointer",opacity:(ze.length>0?Lt:P)===(ze.length>0?qt:j)?.5:1},children:""}),o.jsx("button",{onClick:()=>ze.length>0?wr(ze.length>0?qt:j):Wt(ze.length>0?qt:j),disabled:(ze.length>0?Lt:P)===(ze.length>0?qt:j),style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(ze.length>0?Lt:P)===(ze.length>0?qt:j)?d?"#334155":"#e5e7eb":d?"#0ea5e9":"#0d9488",color:(ze.length>0?Lt:P)===(ze.length>0?qt:j)?d?"#6b7280":"#9ca3af":"#fff",cursor:(ze.length>0?Lt:P)===(ze.length>0?qt:j)?"not-allowed":"pointer",opacity:(ze.length>0?Lt:P)===(ze.length>0?qt:j)?.5:1},children:"Last"})]})]})]})]}),o.jsx("div",{className:"overflow-auto border border-gray-300 rounded-lg",style:{background:d?"#181a20":"#f5ecd7",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:d?"1px solid #334155":"1px solid #d1d5db",fontSize:`${ie}em`,position:"relative",flex:1,minHeight:0},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"16px 0 8px 0",paddingLeft:8,paddingRight:8},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:18}}),o.jsxs("table",{className:"w-full border-collapse",style:{fontSize:"inherit",color:d?"#fff":"#222"},children:[o.jsxs("thead",{className:"sticky top-0 z-30",style:{background:d?"#0f766e":"#0d9488",color:"white",fontSize:"inherit",zIndex:30},children:[o.jsx("tr",{style:{position:"sticky",top:0,zIndex:31,background:d?"#0f766e":"#0d9488"},children:bn.map((H,he)=>{const Se=H.type==="json"&&Array.isArray(H.intervals);if(H.type==="regular"&&Zt.includes(H.value)){const st=he===0||he===1,Tt=d?"#5eead4":"#e0fcf7";return o.jsx("th",{rowSpan:2,className:"relative px-4 py-3 text-left whitespace-nowrap",style:{fontSize:`${nn}em`,fontWeight:"600",borderBottom:"2px solid rgba(255,255,255,0.2)",color:"#111",background:Tt,minWidth:120,overflow:"visible",whiteSpace:Dt?"normal":"nowrap",wordBreak:Dt?"break-word":"normal",position:st?"sticky":void 0,left:st?he===0?0:120:void 0,zIndex:st?40:void 0},title:H.label,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:()=>Ks("regular",H.value),style:{marginRight:4,background:"none",border:"none",color:mr===H.value?sr==="ASC"?"#22c55e":"#ef4444":"#888",fontWeight:700,fontSize:14,cursor:"pointer",padding:"0 2px",borderRadius:3,outline:"none"},title:`Sort by ${H.label} (whole data)`,children:["w",mr===H.value?sr==="ASC"?"":"":""]}),o.jsx("span",{children:H.label}),o.jsxs("button",{onClick:()=>Ct("regular",H.value),style:{marginLeft:4,background:"none",border:"none",color:rn&&rn.type==="regular"&&rn.key===H.value?Me==="asc"?"#22c55e":"#ef4444":"#888",fontWeight:700,fontSize:14,cursor:"pointer",padding:"0 2px",borderRadius:3,outline:"none"},title:`Sort by ${H.label} (table only)`,children:["t",rn&&rn.type==="regular"&&rn.key===H.value?Me==="asc"?"":"":""]})]})},H.value)}if(Se){const st=H.intervals.filter(({interval:It})=>{var gn;return!!((gn=ft[H.value])!=null&&gn[It])});if(st.length===0)return null;const Tt=he%2===0?d?"#fbbf24":"#ffe082":d?"#fb923c":"#ffd6a5";return o.jsx("th",{colSpan:st.length,className:"relative px-4 py-3 text-left whitespace-nowrap",style:{fontSize:`${nn}em`,fontWeight:"bold",borderBottom:"2px solid rgba(255,255,255,0.2)",color:"#111",background:Tt,minWidth:120,overflow:"visible",whiteSpace:Dt?"normal":"nowrap",wordBreak:Dt?"break-word":"normal"},title:H.label,children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("span",{children:H.label})})},H.value)}return null})}),o.jsx("tr",{children:bn.map((H,he)=>{if(H.type==="json"&&Array.isArray(H.intervals)){const Se=H.intervals.filter(({interval:Tt})=>{var It;return!!((It=ft[H.value])!=null&&It[Tt])}),st=he%2===0?d?"#1e293b":"#e0e7ef":d?"#334155":"#f1f5f9";return Se.map(({interval:Tt})=>o.jsx("th",{className:"relative px-4 py-3 text-left cursor-pointer whitespace-nowrap",style:{fontSize:`${nn}em`,fontWeight:"600",borderBottom:"2px solid rgba(255,255,255,0.2)",color:d?"#fff":"#222",background:st,minWidth:90,overflow:"visible",whiteSpace:Dt?"normal":"nowrap",wordBreak:Dt?"break-word":"normal"},title:Tt,onClick:()=>Ct("json",Tt,H.value,Tt),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:Tt}),o.jsx("span",{className:"ml-1 opacity-60",children:rn&&rn.type==="json"&&rn.parentKey===H.value&&rn.interval===Tt?Me==="asc"?"":"":""})]})},H.value+"_"+Tt))}return null})})]}),o.jsx("tbody",{children:(()=>{const H=ze.length>0?ze:Dn;return Yt(H).map((Se,st)=>{var kn;let Tt={};try{if(typeof Se.json_data=="string"){let un=Se.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Tt=JSON.parse(un)}else Tt=Se.json_data||{}}catch{Tt={}}const It=((kn=Tt==null?void 0:Tt.signal_data)==null?void 0:kn.all_last_rows)||{},gn=Se.Unique_id!=null?Se.Unique_id:st,Rt=St===gn;return o.jsx("tr",{className:"cursor-pointer",style:{fontSize:"inherit",borderBottom:d?"1px solid #334155":"1px solid #e5e7eb",transition:"all 0.15s ease-in-out",color:d?"#fff":"#222",background:Rt?"#ffe066":void 0},onClick:()=>q(Rt?null:gn),onMouseEnter:un=>{Rt||(un.currentTarget.style.background=d?"#3d4451":"#f0f9ff",un.currentTarget.style.color=d?"#fff":"#222")},onMouseLeave:un=>{Rt||(un.currentTarget.style.background="",un.currentTarget.style.color="")},children:bn.map((un,or)=>{if(un.type==="regular"&&Zt.includes(un.value)){if(!nd.find(Zr=>Zr.value===un.value))return null;const En=or===0||or===1,Sr=Rt?"#ffe066":En?d?"#5eead4":"#e0fcf7":void 0,_s=Rt||En?"#111":d?"#fff":"#222";let kr=null,ta="";const ao=["PL","Hedge","Hedge_1_1","Hedge_Buy_pl","Hedge_Sell_pl","Hedge_order_size","Min_comm_after_hedge","Hedge_Swing_High_Point","Hedge_Swing_Low_Point"],lo=["signal_data_active_squeeze_trend","signal_data_overall_trend_RC","signal_data_overall_trend_percentage_RC","signal_data_overall_trend_HC","signal_data_overall_trend_percentage_HC","signal_data_overall_trend_4h","signal_data_overall_trend_percentage_4h","signal_data_overall_trend_1h","signal_data_overall_trend_percentage_1h","signal_data_volume_1h"];if(ao.includes(un.value)){const Zr=Ge[Se.Unique_id];if((un.value==="PL"||un.value==="Hedge")&&console.log("Debug hedge field lookup:",{field:un.value,rowUniqueId:Se.Unique_id,tradeData:Zr,tradesByUniqueIdKeys:Object.keys(Ge).slice(0,5),totalTradesByUniqueId:Object.keys(Ge).length,sampleLogUniqueIds:Dn.slice(0,3).map(ii=>ii.Unique_id)}),Zr&&Zr.Unique_id){const di={PL:"Pl_after_comm",Hedge:"Hedge",Hedge_1_1:"Hedge_1_1_bool",Hedge_Buy_pl:"Hedge_Buy_pl",Hedge_Sell_pl:"Hedge_Sell_pl",Hedge_order_size:"Hedge_order_size",Min_comm_after_hedge:"Min_comm_after_hedge",Hedge_Swing_High_Point:"Hedge_Swing_High_Point",Hedge_Swing_Low_Point:"Hedge_Swing_Low_Point"}[un.value];di&&(kr=Zr[di],ta=kr!=null?c(kr,un.value):"")}}else if(lo.includes(un.value)){let Zr={};try{if(typeof Se.json_data=="string"){let di=Se.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Zr=JSON.parse(di)}else Zr=Se.json_data||{}}catch{Zr={}}const ii=Zr==null?void 0:Zr.signal_data;if(ii&&typeof ii=="object"){const di=un.value.replace("signal_data_","");kr=ii[di],ta=kr!=null?c(kr,un.value):""}}else kr=Se[un.value],ta=kr!=null?c(kr,un.value):"";let _a={fontSize:"inherit",color:Rt?"#111":_s,background:Sr,minWidth:120,overflow:"visible",whiteSpace:"nowrap",position:En?"sticky":void 0,left:En?or===0?0:120:void 0,zIndex:En?30:void 0,padding:"1px 6px !important",lineHeight:"1 !important",height:"20px !important",verticalAlign:"middle !important"};if(un.value==="PL"&&kr!=null){const Zr=parseFloat(kr);isNaN(Zr)||(Rt?Zr<0?_a.color="#000000":Zr>0&&(_a.color="#166534"):Zr<0?_a.color="#ef4444":Zr>0&&(_a.color="#22c55e"))}return o.jsx("td",{className:"whitespace-nowrap align-top text-sm select-text",style:_a,title:ta,children:kr!=null?c(kr,un.value):""},un.value)}if(un.type==="json"&&Array.isArray(un.intervals)){const Fn=un.intervals.filter(({interval:_s})=>{var kr;return!!((kr=ft[un.value])!=null&&kr[_s])}),En=Rt?"#ffe066":or%2===0?d?"#1e293b":"#e0e7ef":d?"#334155":"#f1f5f9",Sr=Rt?"#111":d?"#fff":"#222";return Fn.map(({interval:_s})=>{let kr=It[_s]?It[_s][un.value]:void 0;return o.jsx("td",{className:"whitespace-nowrap align-top text-sm select-text",style:{fontSize:"inherit",color:Sr,background:En,minWidth:90,overflow:"visible",whiteSpace:"nowrap",padding:"1px 4px !important",lineHeight:"1 !important",height:"20px !important",verticalAlign:"middle !important"},title:kr!==void 0?c(kr,un.value):"",children:kr!==void 0?c(kr,un.value):"-"},un.value+"_"+_s)})}return null})},st)})})()})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,margin:"12px 0 8px 0",padding:"8px 12px",background:d?"#1e293b":"#f1f5f9",borderRadius:6,border:d?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("span",{style:{fontWeight:600,color:d?"#fff":"#222",fontSize:14},children:"Rows per page:"}),o.jsx("input",{type:"number",min:"10",max:"5000",value:et,onChange:H=>{const he=parseInt(H.target.value);!isNaN(he)&&he>=10&&he<=5e3&&ht(he)},onKeyPress:H=>{H.key==="Enter"&&(wr(1),fr(Math.ceil(ze.length/et)))},onBlur:()=>{wr(1),fr(Math.ceil(ze.length/et))},style:{width:80,padding:"4px 8px",borderRadius:4,border:"1px solid #888",background:d?"#23272f":"#fff",color:d?"#fff":"#222",fontSize:14,textAlign:"center"}}),o.jsx("span",{style:{fontSize:12,opacity:.7,color:d?"#9ca3af":"#6b7280"},children:"(10-5000)"})]}),qt>1&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,margin:"16px 0 8px 0",padding:"12px",background:d?"#23272f":"#f8f9fa",borderRadius:8,border:d?"1px solid #334155":"1px solid #e5e7eb"},children:[o.jsx("button",{onClick:()=>wr(1),disabled:Lt===1,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:Lt===1?d?"#334155":"#e5e7eb":d?"#0ea5e9":"#0d9488",color:Lt===1?d?"#6b7280":"#9ca3af":"#fff",cursor:Lt===1?"not-allowed":"pointer",opacity:Lt===1?.5:1},children:"First"}),o.jsx("button",{onClick:()=>wr(Lt-1),disabled:Lt===1,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:Lt===1?d?"#334155":"#e5e7eb":d?"#0ea5e9":"#0d9488",color:Lt===1?d?"#6b7280":"#9ca3af":"#fff",cursor:Lt===1?"not-allowed":"pointer",opacity:Lt===1?.5:1},children:""}),o.jsxs("span",{style:{fontWeight:600,color:d?"#fff":"#222"},children:["Page ",Lt," of ",qt]}),o.jsx("button",{onClick:()=>wr(Lt+1),disabled:Lt===qt,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:Lt===qt?d?"#334155":"#e5e7eb":d?"#0ea5e9":"#0d9488",color:Lt===qt?d?"#6b7280":"#9ca3af":"#fff",cursor:Lt===qt?"not-allowed":"pointer",opacity:Lt===qt?.5:1},children:""}),o.jsx("button",{onClick:()=>wr(qt),disabled:Lt===qt,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:Lt===qt?d?"#334155":"#e5e7eb":d?"#0ea5e9":"#0d9488",color:Lt===qt?d?"#6b7280":"#9ca3af":"#fff",cursor:Lt===qt?"not-allowed":"pointer",opacity:Lt===qt?.5:1},children:"Last"})]})]})})]}),os&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{background:d?"#23272f":"#fff",color:d?"#fff":"#222",padding:32,borderRadius:16,fontSize:20,fontWeight:600,boxShadow:"0 4px 32px rgba(0,0,0,0.18)",minWidth:340,minHeight:120,display:"flex",flexDirection:"column",alignItems:"center",gap:24},children:[o.jsx("div",{children:"Export Data"}),o.jsxs("div",{style:{display:"flex",gap:18},children:[o.jsx("button",{onClick:()=>Je("pagination"),style:{padding:"8px 24px",borderRadius:6,border:"none",fontWeight:600,fontSize:16,background:"#0ea5e9",color:"#fff",boxShadow:"0 2px 8px #0ea5e944",cursor:"pointer",transition:"background 0.2s"},children:"Export Current Page"}),o.jsx("button",{onClick:()=>Je("whole"),style:{padding:"8px 24px",borderRadius:6,border:"none",fontWeight:600,fontSize:16,background:"#22c55e",color:"#fff",boxShadow:"0 2px 8px #22c55e44",cursor:"pointer",transition:"background 0.2s"},children:"Export All Filtered Data"})]}),o.jsx("button",{onClick:()=>bs(!1),style:{marginTop:12,background:"none",border:"none",color:d?"#fff":"#222",fontSize:18,cursor:"pointer"},children:"Cancel"})]})}),si&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{background:d?"#23272f":"#fff",color:d?"#fff":"#222",padding:32,borderRadius:16,fontSize:22,fontWeight:600,boxShadow:"0 4px 32px rgba(0,0,0,0.18)"},children:"Exporting data..."})})]})},uy=Kr.createContext(null);function XT({className:t="",...e}){const n=Kr.useContext(uy);if(!n)return null;const r=n.triggerLogout||n.logout;return o.jsx("button",{type:"button",onClick:r,title:"Log out",className:t||"px-2 py-1 rounded bg-red-600 hover:bg-red-700 text-white text-sm font-semibold transition-colors",...e,children:"Logout"})}function A$({className:t=""}){var r;const e=Kr.useContext(uy),n=(r=e==null?void 0:e.user)==null?void 0:r.email;return n?o.jsx("span",{className:`text-white/90 text-sm truncate max-w-[180px] ${t}`,title:n,children:n}):null}async function O$(t,e){const n=(t||"").trim(),r=(e||"").trim();if(!n||!r)throw new Error("email and password required");const s=Oa(),l=s?`${s.replace(/\/$/,"")}/auth/login`:"/auth/login",c=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:n,password:r})}),d=await c.json().catch(()=>({}));if(!c.ok)throw new Error((d==null?void 0:d.error)||"Invalid credentials");if(!(d!=null&&d.ok)||!(d!=null&&d.user))throw new Error("Login failed");return{ok:!0,user:d.user}}async function D$(){const t=Oa(),e=t?`${t.replace(/\/$/,"")}/auth/logout`:"/auth/logout";await fetch(e,{method:"POST",credentials:"include"}).catch(()=>{})}async function gw(){const t=Rn("/auth/me"),e=await fetch(t,{credentials:"include"});if(!e.ok)return null;const n=await e.json().catch(()=>({}));return n!=null&&n.ok&&(n!=null&&n.user)?n:null}async function R$(){const t=Rn("/auth/extend-session"),e=await fetch(t,{method:"POST",credentials:"include"});if(!e.ok)return!1;const n=await e.json().catch(()=>({}));return!!(n!=null&&n.ok)}const M$="refresh_app_main_intervalSec",pw="tradingview-widget-script-single";function L$(t){if(typeof window<"u"&&window.TradingView){t==null||t();return}const e=document.getElementById(pw);if(e){if(window.TradingView){t==null||t();return}e.addEventListener("load",()=>{const r=()=>{window.TradingView?t==null||t():setTimeout(r,50)};setTimeout(r,0)},{once:!0});return}const n=document.createElement("script");n.id=pw,n.src="https://s3.tradingview.com/tv.js",n.async=!0,n.onload=()=>{const r=()=>{window.TradingView?t==null||t():setTimeout(r,50)};setTimeout(r,0)},document.body.appendChild(n)}const I$={"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},mw=["1m","3m","5m","15m","30m","1h","4h","1d"],KT=t=>{if(!t)return"BTCUSDT";let e=String(t).replace(/<[^>]+>/g,"").replace(/\s+/g,"").replace(/[^A-Z0-9]/gi,"").toUpperCase();return e.startsWith("BINANCE")&&(e=e.slice(7)),e=e.replace(/PERPETUALCONTRACT|PERP|CHART/gi,"").replace(/\d{6,}$/,""),e||"BTCUSDT"},xw=t=>{if(!t||typeof t!="string")return"";const e=String(t).toUpperCase(),n=e.indexOf("BUY"),r=e.indexOf("SELL");let s=-1;return n>=0&&r>=0?s=Math.min(n,r):n>=0?s=n:r>=0&&(s=r),s>0&&String(t).slice(0,s).replace(/[^A-Z0-9]/gi,"").toUpperCase()||""},P$=[{key:"RSI@tv-basicstudies",label:"RSI-9"},{key:"MACD@tv-basicstudies",label:"MACD"},{key:"Volume@tv-basicstudies",label:"Volume"},{key:"CCI@tv-basicstudies",label:"CCI"}],Gm="singleTradeLiveView_infoFields",yw="singleTradeLiveView_intervalOrder",F$="singleTradeLiveView_infoGridHeight",z$="singleTradeLiveView_backDataHeight",B$="singleTradeLiveView_chartHeight",H$="singleTradeLiveView_infoLeftHeight",U$="singleTradeLiveView_backLeftHeight",vw="singleTradeLiveView_infoSplitPercent",qm="singleTradeLiveView_infoFieldOrder",Jm="singleTradeLiveView_sectionOrder",bw="singleTradeLiveView_signalsViewMode",_w="singleTradeLiveView_signalAlertRules",Sw="singleTradeLiveView_alertRuleGroups",ww="singleTradeLiveView_masterBlinkColor",Oh="singleTradeLiveView_activeRuleBookId",kw="singleTradeLiveView_localRuleBooks",Dh="singleTradeLiveView_activeLocalRuleBookId",Xm="singleTradeLiveView_binanceColumnsOrder",Km="singleTradeLiveView_binanceColumnsVisibility",Zm=["information","binanceData","chart"],$$={information:"Information",binanceData:"Binance Data",chart:"Chart"},ql=["5m","15m","1h","4h"],Jl=["current_row","prev row","prior row"],Ew={"prior row":0,"prev row":1,current_row:2};function Lx(t,e){if(!t||t.length<=14)return t;const n=4,r=4,s=6,l=t.substring(0,n).toLowerCase(),c=e.filter(g=>g&&g.toLowerCase().startsWith(l));if(c.length>1){const g=t.substring(0,n),p=t.substring(t.length-s),y=`${g}...${p}`;return c.filter(b=>{if(b===t)return!1;const k=b.substring(b.length-s);return`${g}...${k}`===y}).length===0?y:t}const d=t.substring(0,n),h=t.substring(t.length-r);return`${d}...${h}`}const W$=["bg-teal-100 dark:bg-teal-900/40","bg-blue-100 dark:bg-blue-900/40","bg-emerald-100 dark:bg-emerald-900/40","bg-amber-100 dark:bg-amber-900/40"],V$=["bg-teal-100 dark:bg-teal-900/40","bg-blue-100 dark:bg-blue-900/40","bg-amber-100 dark:bg-amber-900/40"],Da=[{label:"HA_LOW",key:"ha_low"},{label:"HA_HIGH",key:"ha_high"},{label:"INST Signal",key:"INSTITUTIONAL_SIGNAL"},{label:"BB FLAT",key:"bb_flat_market"},{label:"BB FLAT SIGNAL",key:"bb_flat_signal"},{label:"RSI_9",key:"RSI_9"},{label:"Divergence",key:"RSI_DIVERGENCE"},{label:"DIVERGEN_SIGNAL_LIVE",key:"DIVERGEN_SIGNAL_LIVE"},{label:"RSI_DIVERGENCE_LIVE",key:"RSI_DIVERGENCE_LIVE"},{label:"TAKEACTION",key:"TAKEACTION"},{label:"CCI Exit Cross 9",key:"cci_exit_cross_9"},{label:"MACD Color Signal",key:"macd_color_signal"},{label:"CCI Entry State 100",key:"cci_entry_state_100"},{label:"CCI SMA 100",key:"cci_sma_100"},{label:"CCI Entry State 9",key:"cci_entry_state_9"},{label:"CCI SMA 9",key:"cci_sma_9"},{label:"cci_value_100",key:"cci_value_100"},{label:"cci_value_9",key:"cci_value_9"},{label:"Lower MACD Color Signa",key:"lower_macd_color_signal"},{label:"Andean Oscillator",key:"andean_oscillator"},{label:"Candle Henkin Color",key:"ha_color"},{label:"Candle Regular Color",key:"color"},{label:"EMA 5 8 Cross",key:"ema_5_8_cross"},{label:"ZLEMA Bullish Entry",key:"zlema_bullish_entry"},{label:"ZLEMA Bearish Entry",key:"zlema_bearish_entry"},{label:"Volume Ratio",key:"Volume_Ratio"},{label:"OB_SIGNAL",key:"OB_SIGNAL"},{label:"RG Candle Pattern",key:"candle_pattern_signal"},{label:"HK Candle Pattern",key:"henkin_candle_pattern_signal"},{label:"TDFI 2 EMA",key:"tdfi_state_2_ema"},{label:"TDFI State",key:"tdfi_state"},{label:"Two Pole MACD CrossOver",key:"two_pole_MACD_Cross_Up"},{label:"Total Change",key:"Total_Change"},{label:"BBW",key:"BBW"},{label:"BBW_Increasing",key:"BBW_Increasing"},{label:"BREAKOUT_SIGNAL",key:"BREAKOUT_SIGNAL"},{label:"FOLLOW_INST_BUY_OK",key:"FOLLOW_INST_BUY_OK"},{label:"FOLLOW_INST_SELL_OK",key:"FOLLOW_INST_SELL_OK"},{label:"breakout_entry",key:"breakout_entry"},{label:"ema_price_trend_signal",key:"ema_price_trend_signal"},{label:"ema_trend_100_14",key:"ema_trend_100_14"},{label:"exit_long_price_action",key:"exit_long_raw"},{label:"exit_short_price_action",key:"exit_short_raw"},{label:"price_trend_direction",key:"price_trend_direction"},{label:"stoch_7_3_3_cross_buy",key:"stoch_7_3_3_cross_buy"},{label:"stoch_7_3_3_cross_sell",key:"stoch_7_3_3_cross_sell"},{label:"stoch_7_3_3_overbought",key:"stoch_7_3_3_overbought"},{label:"stoch_7_3_3_oversold",key:"stoch_7_3_3_oversold"},{label:"price_vs_ha_open",key:"price_vs_ha_open"},{label:"swing_high",key:"swing_high"},{label:"swing_low",key:"swing_low"},{label:"swing_high_zone",key:"swing_high_zone"},{label:"volume_increasing",key:"volume_increasing"}],Y$={execute:"Execute trade",endTrade:"End trade",autoPilot:"Auto-Pilot",hedge:"Hedge",setStopPrice:"Set stop price",addInvestment:"Add investment",clear:"Clear",partialClose:"Partial close"};function G$({open:t,onClose:e,actionType:n,requireAmount:r,amountFirst:s=!1,amountLabel:l="Amount",amountPlaceholder:c="0",extraLabel:d,extraValue:h,onConfirm:g}){const[p,y]=x.useState(s?"amount":"password"),[_,b]=x.useState(""),[k,S]=x.useState(""),[E,O]=x.useState(""),[T,D]=x.useState(!1),[F,Z]=x.useState("Success!"),[K,L]=x.useState(!1),Q=Y$[n]||n,se=r&&p==="amount",ce=p==="password",ye=T,te=x.useCallback(()=>{y(s?"amount":"password"),b(""),S(""),O(""),D(!1),Z("Success!"),L(!1)},[s]);x.useEffect(()=>{t&&te()},[t,n,te]);const xe=x.useCallback(()=>{te(),e()},[e,te]),Ce=()=>(_||"").trim()?(O(""),!0):(O("Enter password"),!1),at=()=>{Ce()&&(r&&!s?y("amount"):Ve())},le=()=>{if(r&&!(k||"").trim()){O(`Enter ${l.toLowerCase()}`);return}O(""),y("password")},Ve=async()=>{if(!K){O(""),L(!0);try{const Ze={password:(_||"").trim()};r&&(Ze.amount=k.trim()),h!==void 0&&(Ze.extraValue=h);const M=await(g&&g(Ze)),oe=M&&typeof M=="string"?M:(M==null?void 0:M.successMessage)??"Success!";Z(oe),D(!0),setTimeout(xe,1500)}catch(Ze){O((Ze==null?void 0:Ze.message)||"Failed"),L(!1)}}},Ue=()=>{if(r&&!(k||"").trim()){O(`Enter ${l.toLowerCase()}`);return}Ve()};return t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:xe,children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-sm w-full shadow-xl",onClick:Ze=>Ze.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-lg mb-3",children:Q}),ye&&o.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium mb-4",children:F}),!ye&&ce&&o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),o.jsx("input",{type:"password",value:_,onChange:Ze=>{b(Ze.target.value),O("")},onKeyDown:Ze=>{Ze.key==="Enter"&&(Ze.preventDefault(),s?Ve():at())},placeholder:"Password",className:"w-full border-2 border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-[#333] text-[#222] dark:text-white mb-3",autoFocus:!0}),d&&h!=null&&o.jsxs("p",{className:"text-sm text-gray-500 dark:text-white/90 mb-2",children:[d,": ",h]})]}),!ye&&se&&o.jsxs(o.Fragment,{children:[d&&h!=null&&o.jsxs("p",{className:"text-sm text-gray-500 dark:text-white/90 mb-2",children:[d,": ",h]}),o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l}),o.jsx("input",{type:"text",inputMode:"decimal",value:k,onChange:Ze=>{S(Ze.target.value),O("")},onKeyDown:Ze=>{Ze.key==="Enter"&&(Ze.preventDefault(),s?le():Ue())},placeholder:c,className:"w-full border-2 border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-[#333] text-[#222] dark:text-white mb-3",autoFocus:!0})]}),E&&o.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mb-2",children:E}),!ye&&o.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[o.jsx("button",{type:"button",onClick:xe,className:"px-3 py-1.5 rounded-lg bg-gray-200 dark:bg-gray-700",children:"Cancel"}),ce&&o.jsxs(o.Fragment,{children:[s&&o.jsx("button",{type:"button",onClick:()=>y("amount"),disabled:K,className:"px-3 py-1.5 rounded-lg bg-gray-200 dark:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),o.jsx("button",{type:"button",onClick:s?()=>{Ve()}:at,disabled:K,className:"px-4 py-1.5 rounded-lg bg-teal-600 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:K?"":r&&!s?"Next":"Confirm"})]}),se&&o.jsxs(o.Fragment,{children:[!s&&o.jsx("button",{type:"button",onClick:()=>y("password"),disabled:K,className:"px-3 py-1.5 rounded-lg bg-gray-200 dark:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),o.jsx("button",{type:"button",onClick:s?le:Ue,disabled:K,className:"px-4 py-1.5 rounded-lg bg-teal-600 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:K?"":s?"Next":"Confirm"})]})]})]})}):null}const rd={infoLeft:"singleTradeLiveView_zoom_infoLeft",infoGrid:"singleTradeLiveView_zoom_infoGrid",backLeft:"singleTradeLiveView_zoom_backLeft",backButtons:"singleTradeLiveView_zoom_backButtons",chart:"singleTradeLiveView_zoom_chart"},sl={default:100,min:50,max:350,step:10};function q$({orderedKeys:t,allKeys:e,visibleKeys:n,setVisibleKeys:r,setFieldOrder:s,onClose:l}){const[c,d]=x.useState(null),[h,g]=x.useState(null),p=n??new Set(e),y=(T,D)=>{d(D),T.dataTransfer.effectAllowed="move",T.dataTransfer.setData("text/plain",String(D))},_=(T,D)=>{T.preventDefault(),T.dataTransfer.dropEffect="move",g(D)},b=()=>g(null),k=(T,D)=>{if(T.preventDefault(),g(null),c==null)return;const F=c;if(d(null),F===D)return;const Z=[...t],[K]=Z.splice(F,1);Z.splice(D,0,K),s(Z)},S=()=>{d(null),g(null)},E=T=>{const D=new Set(p);D.has(T)?D.delete(T):D.add(T),r(D)},O=()=>r(new Set(e));return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:l,children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-lg w-full shadow-xl max-h-[80vh] overflow-auto",onClick:T=>T.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Information fields"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-white/90 mb-4",children:"Toggle visibility and drag to reorder. Only checked fields are shown."}),o.jsx("ul",{className:"space-y-1",children:t.map((T,D)=>o.jsxs("li",{draggable:!0,onDragStart:F=>y(F,D),onDragOver:F=>_(F,D),onDragLeave:b,onDrop:F=>k(F,D),onDragEnd:S,className:`flex items-center gap-2 py-1.5 px-2 rounded border cursor-grab active:cursor-grabbing ${h===D?"border-teal-500 bg-teal-500/10":"border-transparent hover:bg-gray-100 dark:hover:bg-gray-800"} ${c===D?"opacity-60":""}`,children:[o.jsx("span",{className:"text-gray-400 dark:text-white/70 select-none",title:"Drag to reorder",children:""}),o.jsx("input",{type:"checkbox",id:`info_${T}`,checked:p.has(T),onChange:()=>E(T)}),o.jsx("label",{htmlFor:`info_${T}`,className:"cursor-pointer flex-1",children:T.replace(/_/g," ")})]},T))}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:O,className:"px-3 py-1 rounded bg-gray-200 dark:bg-gray-700",children:"Show all"}),o.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded bg-teal-600 text-white",children:"Done"})]})]})})}function J$({sectionOrder:t,setSectionOrder:e,onClose:n}){const[r,s]=x.useState(null),[l,c]=x.useState(null),d=x.useRef(null),h=(b,k)=>{d.current=k,s(k),b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/plain",String(k));try{b.dataTransfer.setDragImage&&b.currentTarget&&b.dataTransfer.setDragImage(b.currentTarget,0,0)}catch{}},g=(b,k)=>{b.preventDefault(),b.stopPropagation(),b.dataTransfer.dropEffect="move",c(k)},p=()=>c(null),y=(b,k)=>{b.preventDefault(),b.stopPropagation(),c(null);const S=d.current??r;if(d.current=null,s(null),S==null||S===k)return;const E=[...t],[O]=E.splice(S,1);E.splice(k,0,O),e(E)},_=()=>{d.current=null,s(null),c(null)};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:n,children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-md w-full shadow-xl",onClick:b=>b.stopPropagation(),onDragOver:b=>{b.preventDefault(),b.stopPropagation(),b.dataTransfer.dropEffect="move"},children:[o.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Section order"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-white/90 mb-4",children:"Drag to set the order of sections (top to bottom)."}),o.jsx("ul",{className:"space-y-1",onDragOver:b=>{b.preventDefault(),b.stopPropagation(),b.dataTransfer.dropEffect="move"},children:t.map((b,k)=>o.jsxs("li",{draggable:!0,onDragStart:S=>h(S,k),onDragOver:S=>g(S,k),onDragLeave:p,onDrop:S=>y(S,k),onDragEnd:_,className:`flex items-center gap-2 py-2.5 px-3 rounded border cursor-grab active:cursor-grabbing ${l===k?"border-teal-500 bg-teal-500/10":"border-transparent hover:bg-gray-100 dark:hover:bg-gray-800"} ${r===k?"opacity-60":""}`,children:[o.jsx("span",{className:"text-gray-400 dark:text-white/70 select-none",title:"Drag to reorder",children:""}),o.jsx("span",{className:"font-medium flex-1",children:$$[b]||b}),o.jsxs("span",{className:"flex gap-0.5",children:[o.jsx("button",{type:"button",disabled:k===0,onClick:()=>{if(k===0)return;const S=[...t];[S[k-1],S[k]]=[S[k],S[k-1]],e(S)},className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed",title:"Move up","aria-label":"Move up",children:""}),o.jsx("button",{type:"button",disabled:k===t.length-1,onClick:()=>{if(k>=t.length-1)return;const S=[...t];[S[k],S[k+1]]=[S[k+1],S[k]],e(S)},className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed",title:"Move down","aria-label":"Move down",children:""})]})]},b))}),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-teal-600 text-white",children:"Done"})})]})})}function X$({columns:t,setColumns:e,visibility:n,setVisibility:r,onClose:s}){const[l,c]=x.useState(null),[d,h]=x.useState(null),g=(T,D)=>{c(D),T.dataTransfer.effectAllowed="move",T.dataTransfer.setData("text/plain",String(D))},p=(T,D)=>{T.preventDefault(),T.dataTransfer.dropEffect="move",h(D)},y=()=>h(null),_=(T,D)=>{if(T.preventDefault(),h(null),l==null)return;const F=l;if(c(null),F===D)return;const Z=[...t],[K]=Z.splice(F,1);Z.splice(D,0,K),e(Z)},b=()=>{c(null),h(null)},k=(T,D)=>{r(F=>({...F,[T]:D}))},S=()=>{r(T=>{const D={...T};return t.forEach(F=>D[F]=!0),D})},E=t.length?t:[],O=E.map(T=>T==="__actions__"?"Actions":T.replace(/([A-Z])/g," $1").trim());return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:s,children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-2xl w-[90vw] shadow-xl max-h-[85vh] overflow-hidden flex flex-col",onClick:T=>T.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-xl mb-1",children:"Binance columns"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-white/90 mb-4",children:"Drag to reorder; check or uncheck to show or hide columns."}),o.jsx("ul",{className:"space-y-1 overflow-auto flex-1 min-h-0 pr-2",children:E.map((T,D)=>{const F=O[D],Z=T==="__actions__"?F:Lx(F,O),K=n[T]!==!1;return o.jsxs("li",{draggable:!0,onDragStart:L=>g(L,D),onDragOver:L=>p(L,D),onDragLeave:y,onDrop:L=>_(L,D),onDragEnd:b,className:`flex items-center gap-3 py-2.5 px-3 rounded border cursor-grab active:cursor-grabbing ${d===D?"border-teal-500 bg-teal-500/10":"border-transparent hover:bg-gray-100 dark:hover:bg-gray-800"} ${l===D?"opacity-60":""}`,children:[o.jsx("span",{className:"text-gray-400 dark:text-white/70 select-none shrink-0",title:"Drag to reorder",children:""}),o.jsx("input",{type:"checkbox",id:`binance_${T}`,checked:K,onChange:()=>k(T,!K),className:"h-4 w-4 text-teal-600 shrink-0"}),o.jsx("label",{htmlFor:`binance_${T}`,className:"cursor-pointer flex-1 font-medium truncate",title:Z,children:Z})]},T)})}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2 shrink-0",children:[o.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100",children:"Show all"}),o.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 rounded bg-teal-600 text-white",children:"Done"})]})]})})}function sd(t){const[e,n]=x.useState(()=>{try{const l=localStorage.getItem(t);if(l!=null){const c=parseInt(l,10);if(!Number.isNaN(c))return Math.max(sl.min,Math.min(sl.max,c))}}catch{}return sl.default});return x.useEffect(()=>{localStorage.setItem(t,String(e))},[t,e]),[e,()=>n(l=>Math.max(sl.min,l-sl.step)),()=>n(l=>Math.min(sl.max,l+sl.step))]}function id({onDecrease:t,onIncrease:e,current:n,label:r,className:s=""}){const l=n<=sl.min,c=n>=sl.max,d=s||"min-w-[36px] min-h-[36px] flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 disabled:opacity-40 text-sm font-bold transition-colors";return o.jsxs("div",{className:"flex items-center gap-1",title:`${r||"Zoom"} (${n}%)`,children:[o.jsx("button",{type:"button",onClick:t,disabled:l,"aria-label":"Zoom out font",className:d,children:"A"}),o.jsx("button",{type:"button",onClick:e,disabled:c,"aria-label":"Zoom in font",className:d,children:"A+"})]})}const Us={infoGrid:{default:280,min:80,max:1400,step:40},infoLeft:{default:100,min:40,max:500,step:20},backData:{default:100,min:60,max:1e3,step:32},backLeft:{default:60,min:40,max:400,step:16},chart:{default:380,min:120,max:1400,step:40}};function ad(t,e){const[n,r]=x.useState(()=>{try{const l=localStorage.getItem(t);if(l!=null){const c=parseInt(l,10);if(!Number.isNaN(c))return Math.max(e.min,Math.min(e.max,c))}}catch{}return e.default});x.useEffect(()=>{localStorage.setItem(t,String(n))},[t,n]);const s=x.useCallback(l=>r(c=>Math.max(e.min,Math.min(e.max,typeof l=="function"?l(c):l))),[e.min,e.max]);return[n,s]}function Qm({value:t,min:e,max:n,onChange:r,label:s}){const l=x.useRef({y:0,value:0}),c=x.useRef(r);c.current=r;const d=x.useCallback(h=>{h.preventDefault(),h.stopPropagation(),l.current={y:h.clientY,value:t};const g=y=>{y.preventDefault();const _=y.clientY-l.current.y,b=Math.round(Math.max(e,Math.min(n,l.current.value+_)));c.current(b),l.current={y:y.clientY,value:b}},p=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",p),document.body.style.cursor="",document.body.style.userSelect=""};document.body.style.cursor="ns-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",g),document.addEventListener("mouseup",p)},[t,e,n]);return o.jsx("div",{role:"separator","aria-label":s||"Drag to resize height",className:"h-3 w-full cursor-ns-resize hover:bg-teal-500/50 bg-teal-600/70 flex-shrink-0 rounded-b flex items-center justify-center group select-none",title:"Drag to resize height",onMouseDown:d,children:o.jsx("span",{className:"text-white/80 text-xs group-hover:text-white pointer-events-none",children:""})})}function K$({leftPercent:t,min:e=20,max:n=80,onChange:r,label:s}){const l=x.useRef({x:0,value:0}),c=x.useRef(r);c.current=r;const d=x.useCallback(h=>{h.preventDefault(),h.stopPropagation(),l.current={x:h.clientX,value:t};const g=y=>{y.preventDefault();const b=(y.clientX-l.current.x)/window.innerWidth*100,k=Math.round(Math.max(e,Math.min(n,l.current.value+b)));c.current(k),l.current={x:y.clientX,value:k}},p=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",p),document.body.style.cursor="",document.body.style.userSelect=""};document.body.style.cursor="ew-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",g),document.addEventListener("mouseup",p)},[t,e,n]);return o.jsx("div",{role:"separator","aria-label":s||"Drag to resize width",className:"w-3 min-w-[12px] cursor-ew-resize hover:bg-teal-500/50 bg-teal-600/70 flex-shrink-0 flex items-center justify-center self-stretch rounded select-none",title:"Drag to resize columns",onMouseDown:d,children:o.jsx("span",{className:"text-white/80 text-xs pointer-events-none",children:""})})}function jc(t){if(t==null)return"";const e=String(t);if(typeof document>"u")return e.replace(/<[^>]+>/g,"").trim();const n=document.createElement("div");return n.innerHTML=e,(n.textContent||"").trim()}function Z$({tradePair:t,chartSize:e={width:500,height:400},alertRules:n,setAlertRules:r,alertRuleGroups:s,setAlertRuleGroups:l,masterBlinkColor:c,setMasterBlinkColor:d,showAlertSettings:h,setShowAlertSettings:g}){const p=t!=null?String(t):"",y=[KT(p),"BTCUSDT"],_=(re,Ae)=>{try{const $e=localStorage.getItem(`chartGridSetting_${re}`);if($e!==null)return JSON.parse($e)}catch{}return Ae},b=["RSI@tv-basicstudies","MACD@tv-basicstudies","Volume@tv-basicstudies","CCI@tv-basicstudies"],[k,S]=x.useState(_("interval","15m")),[E,O]=x.useState(_("showAllIntervals",!0)),[T,D]=x.useState(_("layout",2)),[F,Z]=x.useState(()=>{try{const re=localStorage.getItem(yw);if(re)return JSON.parse(re)}catch{}return[...mw]}),[K,L]=x.useState(!1),[Q,se]=x.useState(_("indicators",b)),[ce]=x.useState(_("source","tradingview")),[ye,te]=x.useState(!1),xe=x.useRef(null),[Ce,at]=x.useState(()=>Da.map(re=>re.key)),[le,Ve]=x.useState(()=>[...ql]),[Ue,Ze]=x.useState(()=>[...Jl]),[M,oe]=x.useState("number"),[P,B]=x.useState(!0),[j,V]=x.useState("eq"),[fe,lt]=x.useState(""),[et,ht]=x.useState("BUY"),[At,xn]=x.useState(">="),[Bt,Kt]=x.useState(0),[tn,Hn]=x.useState("signalKey"),[sn,He]=x.useState(""),[Dn,Ht]=x.useState(""),[yt,dn]=x.useState(null),[Wt,an]=x.useState([]),[Un,Cn]=x.useState(()=>{try{const re=localStorage.getItem(Oh);if(!re)return null;const Ae=parseInt(re,10);return Number.isFinite(Ae)?Ae:null}catch{return null}}),[Qn,me]=x.useState(!1),[We,Ge]=x.useState(""),[ie,Pe]=x.useState(()=>{try{const re=localStorage.getItem(kw);if(!re)return[];const Ae=JSON.parse(re);return Array.isArray(Ae==null?void 0:Ae.books)?Ae.books:[]}catch{return[]}}),[z,pe]=x.useState(()=>{try{return localStorage.getItem(Dh)||null}catch{return null}}),Fe=x.useMemo(()=>{const re=[...n||[]];return re.sort((Ae,$e)=>{const zt=(Ae[tn]??"").toString().toLowerCase(),Xe=($e[tn]??"").toString().toLowerCase();return zt<Xe?-1:zt>Xe?1:0}),re},[n,tn]),bt=re=>S(re);x.useEffect(()=>{try{localStorage.setItem(yw,JSON.stringify(F))}catch{}},[F]),x.useEffect(()=>{if(!h||Wt&&Wt.length>0)return;let re=!1;return(async()=>{me(!0),Ge("");try{const $e=await fetch(Rn("/api/alert-rule-books")),zt=await $e.json().catch(()=>({}));if(!$e.ok)throw new Error(zt.error||$e.statusText||"Failed to load rule books");if(!re){const Xe=Array.isArray(zt.ruleBooks)?zt.ruleBooks:[];an(Xe)}}catch($e){console.error("[RuleBooks] Load failed:",$e),re||Ge(($e==null?void 0:$e.message)||"Failed to load rule books")}finally{re||me(!1)}})(),()=>{re=!0}},[h,Wt]);const dt=x.useCallback(async re=>{if(re)try{const Ae=await fetch(Rn(`/api/alert-rule-books/${re}`)),$e=await Ae.json().catch(()=>({}));if(!Ae.ok)throw new Error($e.error||Ae.statusText||"Failed to load rule book");const zt=$e.payload||{};let Xe=Array.isArray(zt.rules)?zt.rules:[],tt=Array.isArray(zt.groups)?zt.groups:[];const rt=zt.masterBlinkColor||c||"#f97316";if(tt.length===0&&Xe.length>0){const A="imported-"+Date.now();tt=[{id:A,name:"Imported",color:rt}],Xe=Xe.map(G=>({...G,groupId:A}))}r(Xe),l(tt),d(rt),Cn($e.id||re);try{localStorage.setItem(Oh,String($e.id||re))}catch{}}catch(Ae){console.error("[RuleBooks] Load book failed:",Ae),typeof window<"u"&&window.alert((Ae==null?void 0:Ae.message)||"Failed to load rule book")}},[r,l,d,c]),Zt=x.useCallback(async re=>{try{if(!n||!n.length){window.alert("No rules to save. Create some rules first.");return}let Ae="",$e=null;if(re==="new"){if(Ae=window.prompt("Enter a name for this rule book:"),!Ae||!Ae.trim())return}else if(re==="update"){const A=Wt.find(G=>G.id===Un);if(!A){window.alert("No rule book is selected to update.");return}Ae=A.name,$e=A.id}else return;const zt={type:"lab_single_trade_alert_rules",version:2,createdAt:new Date().toISOString(),rules:n||[],groups:s||[],masterBlinkColor:c||"#f97316"},Xe=await fetch(Rn("/api/alert-rule-books"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:$e,name:Ae.trim(),payload:zt})}),tt=await Xe.json().catch(()=>({}));if(!Xe.ok||!tt.ok)throw new Error(tt.error||Xe.statusText||"Failed to save rule book");const rt=tt.ruleBook;try{localStorage.setItem(Oh,String(rt.id))}catch{}Cn(rt.id);try{const G=await(await fetch(Rn("/api/alert-rule-books"))).json().catch(()=>({})),U=Array.isArray(G.ruleBooks)?G.ruleBooks:[];an(U)}catch(A){console.error("[RuleBooks] Reload list failed:",A)}typeof window<"u"&&window.alert(re==="new"?"Rule book saved on server.":"Rule book updated on server.")}catch(Ae){console.error("[RuleBooks] Save failed:",Ae),typeof window<"u"&&window.alert((Ae==null?void 0:Ae.message)||"Failed to save rule book")}},[n,s,c,Wt,Un]),Vt=x.useCallback(re=>{try{localStorage.setItem(kw,JSON.stringify({books:re}))}catch{}},[]),kt=x.useCallback(re=>{if(!n||!n.length){window.alert("No rules to save. Create some rules first.");return}let Ae="",$e=null;if(re==="new"){if(Ae=window.prompt("Enter a name for this rule book (saved on this device):"),!Ae||!Ae.trim())return;$e="local_"+Date.now()}else if(re==="update"){const tt=ie.find(rt=>rt.id===z);if(!tt){window.alert("No local rule book is selected to update.");return}Ae=tt.name,$e=tt.id}else return;const zt={id:$e,name:Ae.trim(),createdAt:new Date().toISOString(),rules:n||[],groups:s||[],masterBlinkColor:c||"#f97316"},Xe=re==="new"?[...ie,zt]:ie.map(tt=>tt.id===$e?zt:tt);Pe(Xe),Vt(Xe),pe($e);try{localStorage.setItem(Dh,String($e))}catch{}typeof window<"u"&&window.alert(re==="new"?"Rule book saved on this device.":"Rule book updated on this device.")},[n,s,c,ie,z,Vt]),ct=x.useCallback(re=>{if(!re)return;const Ae=ie.find(Xe=>Xe.id===re);if(!Ae)return;let $e=Array.isArray(Ae.rules)?Ae.rules:[],zt=Array.isArray(Ae.groups)?Ae.groups:[];if(zt.length===0&&$e.length>0){const Xe="imported-"+Date.now();zt=[{id:Xe,name:"Imported",color:Ae.masterBlinkColor&&/^#[0-9A-Fa-f]{6}$/.test(Ae.masterBlinkColor)?Ae.masterBlinkColor:"#f97316"}],$e=$e.map(tt=>({...tt,groupId:Xe}))}r($e),l(zt),d(Ae.masterBlinkColor&&/^#[0-9A-Fa-f]{6}$/.test(Ae.masterBlinkColor)?Ae.masterBlinkColor:"#f97316"),pe(re);try{localStorage.setItem(Dh,String(re))}catch{}},[ie,r,l,d]),ft=x.useCallback(()=>{if(!(typeof window>"u"||!window.document))try{const re={type:"lab_single_trade_alert_rules",version:2,createdAt:new Date().toISOString(),rules:n||[],groups:s||[],masterBlinkColor:c||"#f97316"},Ae=JSON.stringify(re,null,2),$e=new Blob([Ae],{type:"application/json"}),zt=URL.createObjectURL($e),Xe=document.createElement("a");Xe.href=zt;const tt=new Date().toISOString().replace(/[:.]/g,"-");Xe.download=`lab-alert-rules-${tt}.json`,document.body.appendChild(Xe),Xe.click(),document.body.removeChild(Xe),URL.revokeObjectURL(zt)}catch(re){console.error("[AlertRules] Export failed:",re),typeof window<"u"&&window.alert("Failed to export rules. See console for details.")}},[n,s,c]),Xt=x.useCallback(()=>{xe.current&&(xe.current.value="",xe.current.click())},[]),pn=x.useCallback(re=>{try{const Ae=re.target.files&&re.target.files[0];if(!Ae)return;const $e=new FileReader;$e.onload=zt=>{var Xe;try{const tt=String(((Xe=zt.target)==null?void 0:Xe.result)||""),rt=JSON.parse(tt),A=Array.isArray(rt)?rt:Array.isArray(rt==null?void 0:rt.rules)?rt.rules:null;if(!A){window.alert("Invalid script file: expected an array of rules.");return}let G=Array.isArray(rt==null?void 0:rt.groups)?rt.groups:[],U=A;if(G.length===0){const J="imported-"+Date.now();G=[{id:J,name:"Imported",color:rt!=null&&rt.masterBlinkColor&&/^#[0-9A-Fa-f]{6}$/.test(rt.masterBlinkColor)?rt.masterBlinkColor:"#f97316"}],U=A.map(X=>({...X,groupId:J}))}else{const J=new Set(G.map(Y=>Y.id));U=A.map(Y=>{var we;if(Y.groupId&&J.has(Y.groupId))return Y;const X=(we=G[0])==null?void 0:we.id;return{...Y,groupId:X||Y.groupId}})}r(U),l(G),rt!=null&&rt.masterBlinkColor&&/^#[0-9A-Fa-f]{6}$/.test(rt.masterBlinkColor)&&d(rt.masterBlinkColor)}catch(tt){console.error("[AlertRules] Import parse error:",tt),window.alert("Failed to parse script file. See console for details.")}},$e.readAsText(Ae)}catch(Ae){console.error("[AlertRules] Import failed:",Ae),typeof window<"u"&&window.alert("Failed to import rules. See console for details.")}},[r,l,d]);x.useEffect(()=>{try{localStorage.setItem("chartGridSetting_interval",JSON.stringify(k)),localStorage.setItem("chartGridSetting_showAllIntervals",JSON.stringify(E)),localStorage.setItem("chartGridSetting_layout",JSON.stringify(T)),localStorage.setItem("chartGridSetting_indicators",JSON.stringify(Q))}catch{}},[k,E,T,Q]);const Yn=E?F:[k],Tn=(e==null?void 0:e.height)??400,Gn=(e==null?void 0:e.width)??500,In=F.join(","),bn=y.join(",");return x.useEffect(()=>{if(ce!=="tradingview"){te(!0);return}te(!1);const re=E?F:[k],Ae=[];return y.forEach(zt=>{re.forEach(Xe=>Ae.push({symbol:zt,intv:Xe}))}),L$(()=>{if(typeof window>"u"||!window.TradingView){te(!0);return}Ae.forEach(({symbol:zt,intv:Xe})=>{const tt=Xe&&String(Xe).replace(/[^a-z0-9]/gi,"_")||"15m",rt=`single_tv_${zt}_${tt}`,A=document.getElementById(rt);if(A)try{A.innerHTML="",new window.TradingView.widget({container_id:rt,autosize:!0,symbol:`BINANCE:${zt}PERP`,interval:I$[Xe]||"15",timezone:"Etc/UTC",theme:"dark",style:"8",locale:"en",studies:Q,overrides:{volumePaneSize:Q.includes("Volume@tv-basicstudies")?"medium":"0","paneProperties.topMargin":10,"paneProperties.bottomMargin":15,"paneProperties.rightMargin":20,"scalesProperties.fontSize":11},studies_overrides:{"RSI@tv-basicstudies.length":9},hide_side_toolbar:!1,allow_symbol_change:!1,details:!0,withdateranges:!0,hideideas:!0,toolbar_bg:"#222",height:Tn,width:Gn})}catch(G){console.warn("[Chart] Widget create error for",rt,(G==null?void 0:G.message)||G)}}),te(!0)}),()=>{te(!0)}},[ce,k,E,In,Q,T,bn,Tn,Gn]),o.jsxs("div",{className:"bg-[#111] rounded-lg p-4 text-white",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[o.jsxs("label",{children:["Interval:",o.jsx("select",{value:k,onChange:re=>bt(re.target.value),className:"ml-2 border rounded px-2 py-1 bg-[#222] text-white",children:mw.map(re=>o.jsx("option",{value:re,children:re},re))})]}),o.jsx("button",{type:"button",onClick:()=>O(re=>!re),className:`px-3 py-1 rounded ${E?"bg-amber-600":"bg-[#333]"} hover:opacity-90`,children:"Show all intervals"}),o.jsxs("label",{children:["Layout:",o.jsxs("select",{value:T,onChange:re=>D(Number(re.target.value)),className:"ml-2 border rounded px-2 py-1 bg-[#222] text-white",children:[o.jsx("option",{value:1,children:"1 per row"}),o.jsx("option",{value:2,children:"2 per row"})]})]}),o.jsx("button",{type:"button",onClick:()=>L(!0),className:"px-3 py-1 rounded bg-[#333] hover:bg-[#444]",children:" Interval order"}),P$.map(re=>o.jsxs("label",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"checkbox",checked:Q.includes(re.key),onChange:Ae=>{se($e=>Ae.target.checked?[...$e,re.key]:$e.filter(zt=>zt!==re.key))}}),o.jsx("span",{children:re.label})]},re.key))]}),K&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",onClick:()=>L(!1),children:o.jsxs("div",{className:"bg-[#222] rounded-lg p-4 max-w-md w-full shadow-xl",onClick:re=>re.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Interval order (top to bottom)"}),o.jsx("p",{className:"text-sm text-gray-400 mb-2",children:'Reorder which interval appears first when "Show all intervals" is on.'}),o.jsx("div",{className:"flex flex-col gap-1 mt-2",children:F.map((re,Ae)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-gray-500 w-6",children:[Ae+1,"."]}),o.jsx("span",{className:"flex-1",children:re}),o.jsx("button",{type:"button",disabled:Ae===0,onClick:()=>{const $e=[...F],[zt]=$e.splice(Ae,1);$e.splice(Ae-1,0,zt),Z($e)},className:"px-2 py-0.5 rounded bg-[#333] disabled:opacity-40 text-sm",children:""}),o.jsx("button",{type:"button",disabled:Ae===F.length-1,onClick:()=>{const $e=[...F],[zt]=$e.splice(Ae,1);$e.splice(Ae+1,0,zt),Z($e)},className:"px-2 py-0.5 rounded bg-[#333] disabled:opacity-40 text-sm",children:""})]},re))}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:()=>L(!1),className:"px-3 py-1 rounded bg-teal-600",children:"Done"})})]})}),h&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:o.jsxs("div",{className:"bg-[#111] text-white rounded-2xl shadow-2xl max-w-5xl w-[96%] max-h-[90vh] overflow-auto p-4 sm:p-6 border border-violet-700/60",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 gap-3",children:[o.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-violet-200",children:"Signal alert settings"}),o.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-2 py-1 rounded-lg bg-gray-700 hover:bg-gray-600 text-sm",children:"Close"})]}),o.jsxs("p",{className:"text-xs sm:text-sm text-gray-300 mb-3",children:["Configure when a cell in the signals table should blink (like the Auto-Pilot button). Each rule matches a"," ",o.jsx("span",{className:"font-semibold text-violet-200",children:"Signal"}),","," ",o.jsx("span",{className:"font-semibold text-violet-200",children:"Interval"})," and"," ",o.jsx("span",{className:"font-semibold text-violet-200",children:"Candle row"})," (current / prev / prior)."]}),o.jsxs("div",{className:"mb-4 p-3 rounded-xl bg-[#181818] border border-emerald-700/50 space-y-2",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-emerald-200",children:"Rule books (saved on this device)"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-[11px] min-w-[160px]",value:z||"",onChange:re=>{const Ae=re.target.value;if(!Ae){pe(null);try{localStorage.removeItem(Dh)}catch{}return}pe(Ae),ct(Ae)},children:[o.jsx("option",{value:"",children:"(None selected)"}),ie.map(re=>o.jsx("option",{value:re.id,children:re.name},re.id))]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px]",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-emerald-700 hover:bg-emerald-600",onClick:()=>kt("new"),children:"Save as new (this device)"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-blue-700 hover:bg-blue-600 disabled:opacity-40 disabled:cursor-not-allowed",disabled:!z,onClick:()=>kt("update"),children:"Update selected (this device)"}),o.jsx("span",{className:"text-[11px] text-gray-400",children:"Saved in this browser only. Works without logging in."})]})]}),o.jsxs("div",{className:"mb-4 p-3 rounded-xl bg-[#181818] border border-violet-700/60 space-y-2",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-violet-200",children:"Rule books (saved on server)"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-[11px] min-w-[160px]",value:Un||"",onChange:re=>{const Ae=re.target.value;if(!Ae){Cn(null);try{localStorage.removeItem(Oh)}catch{}return}const $e=parseInt(Ae,10);Number.isFinite($e)&&(Cn($e),dt($e))},children:[o.jsx("option",{value:"",children:"(None selected)"}),Wt.map(re=>o.jsx("option",{value:re.id,children:re.name},re.id))]}),Qn&&o.jsx("span",{className:"text-[11px] text-gray-400",children:"Loading"}),We&&o.jsx("span",{className:"text-[11px] text-amber-400",children:We})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px]",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-violet-700 hover:bg-violet-600",onClick:()=>Zt("new"),children:"Save as new (server)"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-blue-700 hover:bg-blue-600 disabled:opacity-40 disabled:cursor-not-allowed",disabled:!Un,onClick:()=>Zt("update"),children:"Update selected (server)"}),o.jsx("span",{className:"text-[11px] text-gray-400",children:'Requires login. Use "Saved on this device" above if you see Not logged in.'})]})]}),o.jsxs("div",{className:"mb-4 p-3 rounded-xl bg-[#181818] border border-violet-700/60 flex flex-wrap items-center gap-3",children:[o.jsx("span",{className:"text-xs font-semibold text-violet-200",children:"Master blink color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:c||"#f97316",onChange:re=>d(re.target.value),className:"w-10 h-8 rounded border border-gray-600 cursor-pointer bg-[#111]",title:"Color for all blinking cells (unless overridden by group or rule)"}),o.jsx("input",{type:"text",value:c||"#f97316",onChange:re=>{const Ae=re.target.value.trim();(/^#[0-9A-Fa-f]{6}$/.test(Ae)||Ae==="")&&d(Ae||"#f97316")},className:"w-24 bg-[#111] border border-gray-700 rounded px-2 py-1 text-[11px] font-mono",placeholder:"#f97316"})]}),o.jsx("span",{className:"text-[11px] text-gray-400",children:"Default color for all alert cells. Groups and rules can override."})]}),o.jsxs("div",{className:"mb-4 p-3 rounded-xl bg-[#181818] border border-violet-700/60 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs font-semibold text-violet-200",children:"Bulk create rules (multi-select)"}),o.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[o.jsx("input",{type:"text",placeholder:"Group name (optional)",className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-[11px] w-56",value:sn,onChange:re=>He(re.target.value)}),o.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap",children:"Group color:"}),o.jsx("input",{type:"color",value:Dn||"#f97316",onChange:re=>Ht(re.target.value),className:"w-8 h-7 rounded border border-gray-600 cursor-pointer bg-[#111]",title:"Blink color for this group"}),o.jsx("input",{type:"text",value:Dn||"",onChange:re=>{const Ae=re.target.value.trim();(/^#[0-9A-Fa-f]{6}$/.test(Ae)||Ae==="")&&Ht(Ae)},className:"w-20 bg-[#111] border border-gray-700 rounded px-1 py-0.5 text-[10px] font-mono",placeholder:"optional"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[yt&&o.jsx("span",{className:"text-[11px] text-amber-300",children:"Editing group"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs",value:M,onChange:re=>{const Ae=re.target.value;oe(Ae),Ae==="buy_sell"?ht("BUY"):Ae==="inc_dec"?ht("INCREASING"):Ae==="bull_bear"?ht("BULL"):Ae==="red_green"?ht("GREEN"):Ae==="trend_3"&&ht("bull_trending")},children:[o.jsx("option",{value:"number",children:"Number"}),o.jsx("option",{value:"boolean",children:"True / False"}),o.jsx("option",{value:"string",children:"Text (any)"}),o.jsx("option",{value:"buy_sell",children:"Buy / Sell / None"}),o.jsx("option",{value:"inc_dec",children:"Increasing / Decreasing / None"}),o.jsx("option",{value:"bull_bear",children:"Bull / Bear / None"}),o.jsx("option",{value:"red_green",children:"Red / Green / None"}),o.jsx("option",{value:"trend_3",children:"Bull_trending / Flat / Bear_trending"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-[11px]",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-semibold text-gray-200",children:"Signals"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{type:"button",className:"px-1.5 py-0.5 rounded bg-gray-700 hover:bg-gray-600",onClick:()=>at(Da.map(re=>re.key)),children:"All"}),o.jsx("button",{type:"button",className:"px-1.5 py-0.5 rounded bg-gray-700 hover:bg-gray-600",onClick:()=>at([]),children:"None"})]})]}),o.jsx("div",{className:"max-h-40 overflow-auto space-y-0.5 pr-1",children:Da.map(re=>o.jsxs("label",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"checkbox",className:"h-3 w-3",checked:Ce.includes(re.key),onChange:()=>at(Ae=>Ae.includes(re.key)?Ae.filter($e=>$e!==re.key):[...Ae,re.key])}),o.jsx("span",{className:"truncate",children:re.label})]},re.key))})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-semibold text-gray-200",children:"Intervals"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{type:"button",className:"px-1.5 py-0.5 rounded bg-gray-700 hover:bg-gray-600",onClick:()=>Ve([...ql]),children:"All"}),o.jsx("button",{type:"button",className:"px-1.5 py-0.5 rounded bg-gray-700 hover:bg-gray-600",onClick:()=>Ve([]),children:"None"})]})]}),o.jsx("div",{className:"space-y-0.5",children:ql.map(re=>o.jsxs("label",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"checkbox",className:"h-3 w-3",checked:le.includes(re),onChange:()=>Ve(Ae=>Ae.includes(re)?Ae.filter($e=>$e!==re):[...Ae,re])}),o.jsx("span",{children:re})]},re))})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-semibold text-gray-200",children:"Candle rows"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{type:"button",className:"px-1.5 py-0.5 rounded bg-gray-700 hover:bg-gray-600",onClick:()=>Ze([...Jl]),children:"All"}),o.jsx("button",{type:"button",className:"px-1.5 py-0.5 rounded bg-gray-700 hover:bg-gray-600",onClick:()=>Ze([]),children:"None"})]})]}),o.jsx("div",{className:"space-y-0.5",children:Jl.map(re=>o.jsxs("label",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"checkbox",className:"h-3 w-3",checked:Ue.includes(re),onChange:()=>Ze(Ae=>Ae.includes(re)?Ae.filter($e=>$e!==re):[...Ae,re])}),o.jsx("span",{children:re})]},re))})]})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-[11px]",children:M==="boolean"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Boolean value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:P?"true":"false",onChange:re=>B(re.target.value==="true"),children:[o.jsx("option",{value:"true",children:"true"}),o.jsx("option",{value:"false",children:"false"})]})]}):M==="string"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Condition"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:j,onChange:re=>V(re.target.value),children:[o.jsx("option",{value:"eq",children:"= equals"}),o.jsx("option",{value:"neq",children:" not equal"}),o.jsx("option",{value:"contains",children:"contains"}),o.jsx("option",{value:"not_contains",children:"not contains"}),o.jsx("option",{value:"starts_with",children:"starts with"}),o.jsx("option",{value:"ends_with",children:"ends with"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Text"}),o.jsx("input",{type:"text",className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:fe,onChange:re=>lt(re.target.value)})]})]}):M==="buy_sell"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:et,onChange:re=>ht(re.target.value),children:[o.jsx("option",{value:"BUY",children:"BUY"}),o.jsx("option",{value:"SELL",children:"SELL"}),o.jsx("option",{value:"NONE",children:"NONE"})]})]}):M==="inc_dec"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:et,onChange:re=>ht(re.target.value),children:[o.jsx("option",{value:"INCREASING",children:"INCREASING"}),o.jsx("option",{value:"DECREASING",children:"DECREASING"}),o.jsx("option",{value:"NONE",children:"NONE"})]})]}):M==="bull_bear"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:et,onChange:re=>ht(re.target.value),children:[o.jsx("option",{value:"BULL",children:"BULL"}),o.jsx("option",{value:"BEAR",children:"BEAR"}),o.jsx("option",{value:"NONE",children:"NONE"})]})]}):M==="red_green"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:et,onChange:re=>ht(re.target.value),children:[o.jsx("option",{value:"GREEN",children:"GREEN"}),o.jsx("option",{value:"RED",children:"RED"}),o.jsx("option",{value:"NONE",children:"NONE"})]})]}):M==="trend_3"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:et,onChange:re=>ht(re.target.value),children:[o.jsx("option",{value:"bull_trending",children:"bull_trending"}),o.jsx("option",{value:"flat",children:"flat"}),o.jsx("option",{value:"bear_trending",children:"bear_trending"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Condition"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:At,onChange:re=>xn(re.target.value),children:[o.jsx("option",{value:">",children:">"}),o.jsx("option",{value:">=",children:">="}),o.jsx("option",{value:"<",children:"<"}),o.jsx("option",{value:"<=",children:"<="}),o.jsx("option",{value:"==",children:"="}),o.jsx("option",{value:"!=",children:""})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-gray-400",children:"Number"}),o.jsx("input",{type:"number",className:"bg-[#111] border border-gray-700 rounded px-2 py-1",value:Bt,onChange:re=>Kt(re.target.value)})]})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-xs font-medium",onClick:()=>{if(!Ce.length||!le.length||!Ue.length){window.alert("Select at least one Signal, Interval and Candle row.");return}const re=Date.now(),Ae=yt||`grp_${re}_${Math.random().toString(36).slice(2,8)}`,$e=[];Ce.forEach(tt=>{le.forEach(rt=>{Ue.forEach(A=>{const G={id:`${re}_${tt}_${rt}_${A}_${Math.random().toString(36).slice(2,8)}`,groupId:Ae,signalKey:tt,interval:rt,rowLabel:A,type:M};M==="boolean"?$e.push({...G,boolValue:P}):M==="string"?$e.push({...G,operator:j,stringValue:fe}):M==="buy_sell"||M==="inc_dec"||M==="bull_bear"||M==="red_green"||M==="trend_3"?$e.push({...G,enumValue:et}):$e.push({...G,operator:At,threshold:Bt})})})});const zt=sn&&sn.trim().length?sn.trim():`Group ${s.length+(yt?0:1)}`,Xe=Dn&&/^#[0-9A-Fa-f]{6}$/.test(Dn)?Dn:null;yt?(r(tt=>[...tt.filter(rt=>rt.groupId!==yt),...$e]),l(tt=>tt.map(rt=>rt.id===yt?{...rt,name:zt,color:Xe,type:M,signalKeys:[...Ce],intervals:[...le],rows:[...Ue],boolValue:P,stringOperator:j,stringValue:fe,enumValue:et,numberOperator:At,numberThreshold:Bt}:rt))):(r(tt=>[...tt,...$e]),l(tt=>[...tt,{id:Ae,name:zt,color:Xe,type:M,signalKeys:[...Ce],intervals:[...le],rows:[...Ue],boolValue:P,stringOperator:j,stringValue:fe,enumValue:et,numberOperator:At,numberThreshold:Bt}])),dn(null)},children:yt?"Update group":"Create rules"})})]}),s&&s.length>0&&o.jsxs("div",{className:"mb-3 text-[11px] space-y-1",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("span",{className:"font-semibold text-gray-200",children:["Groups (",s.length,")"]})}),o.jsx("div",{className:"space-y-1",children:s.map(re=>{var tt,rt,A,G,U,J;const Ae=(((tt=re.signalKeys)==null?void 0:tt.length)||0)*(((rt=re.intervals)==null?void 0:rt.length)||0)*(((A=re.rows)==null?void 0:A.length)||0),$e=(n||[]).filter(Y=>Y.groupId===re.id),zt=re.color&&/^#[0-9A-Fa-f]{6}$/.test(re.color)?re.color:null,Xe=$e.some(Y=>Y.color!=null&&Y.color!==zt);return o.jsxs("div",{className:"flex items-center justify-between bg-[#181818] border border-gray-700 rounded-lg px-2 py-1.5",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-semibold text-violet-200",children:re.name}),o.jsxs("span",{className:"text-gray-400",children:[((G=re.signalKeys)==null?void 0:G.length)||0," signals "," ",((U=re.intervals)==null?void 0:U.length)||0," intervals "," ",((J=re.rows)==null?void 0:J.length)||0," rows ="," ",o.jsx("span",{className:"text-gray-200 font-semibold",children:Ae})," ","rules"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-[10px] text-gray-400",children:"Color:"}),o.jsx("input",{type:"color",value:zt||"#f97316",onChange:Y=>{const X=Y.target.value;l(we=>we.map(je=>je.id===re.id?{...je,color:X}:je))},className:"w-7 h-6 rounded border border-gray-600 cursor-pointer bg-[#111]",title:"Group blink color"}),o.jsx("button",{type:"button",title:Xe?"Reset all rules in this group to use group color":"No overrides to reset",disabled:!Xe,onClick:()=>{r(Y=>Y.map(X=>X.groupId===re.id?{...X,color:void 0}:X))},className:"px-2 py-0.5 rounded bg-amber-700 hover:bg-amber-600 disabled:opacity-40 disabled:cursor-not-allowed text-white text-[11px]",children:"Reset color"}),o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded bg-emerald-700 hover:bg-emerald-600 text-white",onClick:()=>{dn(re.id),He(re.name||""),Ht(re.color||""),oe(re.type||"number"),at(re.signalKeys||[]),Ve(re.intervals||[]),Ze(re.rows||[]),B(re.boolValue===void 0?!0:!!re.boolValue),V(re.stringOperator||"eq"),lt(re.stringValue||""),ht(re.enumValue||"BUY"),xn(re.numberOperator||">="),Kt(re.numberThreshold===void 0?0:re.numberThreshold)},children:"Edit"}),o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded bg-red-700 hover:bg-red-600 text-white",onClick:()=>{window.confirm(`Delete group "${re.name}" and all its rules?`)&&(l(Y=>Y.filter(X=>X.id!==re.id)),r(Y=>Y.filter(X=>X.groupId!==re.id)),yt===re.id&&dn(null))},children:"Delete"})]})]},re.id)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[o.jsxs("span",{className:"font-semibold text-gray-200",children:["Rules (",n.length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-gray-400",children:"Sort by:"}),o.jsx("button",{type:"button",className:`px-1.5 py-0.5 rounded ${tn==="signalKey"?"bg-violet-700 text-white":"bg-[#222] text-gray-300"}`,onClick:()=>Hn("signalKey"),children:"Signal"}),o.jsx("button",{type:"button",className:`px-1.5 py-0.5 rounded ${tn==="interval"?"bg-violet-700 text-white":"bg-[#222] text-gray-300"}`,onClick:()=>Hn("interval"),children:"Interval"}),o.jsx("button",{type:"button",className:`px-1.5 py-0.5 rounded ${tn==="rowLabel"?"bg-violet-700 text-white":"bg-[#222] text-gray-300"}`,onClick:()=>Hn("rowLabel"),children:"Candle row"}),o.jsx("button",{type:"button",className:"ml-3 px-2 py-0.5 rounded bg-red-700 hover:bg-red-600 text-white",onClick:()=>{n.length&&window.confirm("Remove all alert rules?")&&r([])},children:"Remove all"})]})]}),(!n||n.length===0)&&o.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"No alert rules yet. Use bulk create or Add rule to create some."}),Fe.map((re,Ae)=>{var $e,zt;return o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-8 gap-2 items-center bg-[#181818] border border-gray-700 rounded-xl p-2 sm:p-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Signal"}),o.jsx("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.signalKey||(($e=Da[0])==null?void 0:$e.key)||"",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,signalKey:Xe.target.value}:rt)),children:Da.map(Xe=>o.jsx("option",{value:Xe.key,children:Xe.label},Xe.key))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Interval"}),o.jsx("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.interval||ql[0],onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,interval:Xe.target.value}:rt)),children:ql.map(Xe=>o.jsx("option",{value:Xe,children:Xe},Xe))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Candle row"}),o.jsx("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.rowLabel||Jl[0],onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,rowLabel:Xe.target.value}:rt)),children:Jl.map(Xe=>o.jsx("option",{value:Xe,children:Xe},Xe))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Type"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.type||"number",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,type:Xe.target.value}:rt)),children:[o.jsx("option",{value:"number",children:"Number"}),o.jsx("option",{value:"boolean",children:"True / False"}),o.jsx("option",{value:"string",children:"Text (any)"}),o.jsx("option",{value:"buy_sell",children:"Buy / Sell / None"}),o.jsx("option",{value:"inc_dec",children:"Increasing / Decreasing / None"}),o.jsx("option",{value:"bull_bear",children:"Bull / Bear / None"}),o.jsx("option",{value:"red_green",children:"Red / Green / None"}),o.jsx("option",{value:"trend_3",children:"Bull_trending / Flat / Bear_trending"})]})]}),re.type==="boolean"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:String(re.boolValue??!0),onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,boolValue:Xe.target.value==="true"}:rt)),children:[o.jsx("option",{value:"true",children:"true"}),o.jsx("option",{value:"false",children:"false"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:""}),o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.filter(tt=>tt.id!==re.id)),className:"mt-1 px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Remove"})]})]}):re.type==="string"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Condition"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.operator||"eq",onChange:Xe=>r(tt=>tt.map(rt=>rt.id===re.id?{...rt,operator:Xe.target.value}:rt)),children:[o.jsx("option",{value:"eq",children:"= equals"}),o.jsx("option",{value:"neq",children:" not equal"}),o.jsx("option",{value:"contains",children:"contains"}),o.jsx("option",{value:"not_contains",children:"not contains"}),o.jsx("option",{value:"starts_with",children:"starts with"}),o.jsx("option",{value:"ends_with",children:"ends with"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Text"}),o.jsx("input",{type:"text",className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.stringValue??"",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,stringValue:Xe.target.value}:rt))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:""}),o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.filter(tt=>tt.id!==re.id)),className:"mt-1 px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Remove"})]})]}):re.type==="buy_sell"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.enumValue??"BUY",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,enumValue:Xe.target.value}:rt)),children:[o.jsx("option",{value:"BUY",children:"BUY"}),o.jsx("option",{value:"SELL",children:"SELL"}),o.jsx("option",{value:"NONE",children:"NONE"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:""}),o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.filter(tt=>tt.id!==re.id)),className:"mt-1 px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Remove"})]})]}):re.type==="inc_dec"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.enumValue??"INCREASING",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,enumValue:Xe.target.value}:rt)),children:[o.jsx("option",{value:"INCREASING",children:"INCREASING"}),o.jsx("option",{value:"DECREASING",children:"DECREASING"}),o.jsx("option",{value:"NONE",children:"NONE"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:""}),o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.filter(tt=>tt.id!==re.id)),className:"mt-1 px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Remove"})]})]}):re.type==="bull_bear"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.enumValue??"BULL",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,enumValue:Xe.target.value}:rt)),children:[o.jsx("option",{value:"BULL",children:"BULL"}),o.jsx("option",{value:"BEAR",children:"BEAR"}),o.jsx("option",{value:"NONE",children:"NONE"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:""}),o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.filter(tt=>tt.id!==re.id)),className:"mt-1 px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Remove"})]})]}):re.type==="red_green"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.enumValue??"GREEN",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,enumValue:Xe.target.value}:rt)),children:[o.jsx("option",{value:"GREEN",children:"GREEN"}),o.jsx("option",{value:"RED",children:"RED"}),o.jsx("option",{value:"NONE",children:"NONE"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:""}),o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.filter(tt=>tt.id!==re.id)),className:"mt-1 px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Remove"})]})]}):re.type==="trend_3"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Value"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.enumValue??"bull_trending",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,enumValue:Xe.target.value}:rt)),children:[o.jsx("option",{value:"bull_trending",children:"bull_trending"}),o.jsx("option",{value:"flat",children:"flat"}),o.jsx("option",{value:"bear_trending",children:"bear_trending"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:""}),o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.filter(tt=>tt.id!==re.id)),className:"mt-1 px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Remove"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Condition"}),o.jsxs("select",{className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.operator||">=",onChange:Xe=>r(tt=>tt.map(rt=>rt.id===re.id?{...rt,operator:Xe.target.value}:rt)),children:[o.jsx("option",{value:">",children:">"}),o.jsx("option",{value:">=",children:">="}),o.jsx("option",{value:"<",children:"<"}),o.jsx("option",{value:"<=",children:"<="}),o.jsx("option",{value:"==",children:"="}),o.jsx("option",{value:"!=",children:""})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Number"}),o.jsx("input",{type:"number",className:"bg-[#111] border border-gray-700 rounded px-2 py-1 text-xs sm:text-sm",value:re.threshold??"",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,threshold:Xe.target.value}:rt))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:""}),o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.filter(tt=>tt.id!==re.id)),className:"mt-1 px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Remove"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"Color"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"color",value:(re.color&&/^#[0-9A-Fa-f]{6}$/.test(re.color)?re.color:null)||((zt=s==null?void 0:s.find(Xe=>Xe.id===re.groupId))==null?void 0:zt.color)||c||"#f97316",onChange:Xe=>r(tt=>tt.map((rt,A)=>rt.id===re.id?{...rt,color:Xe.target.value}:rt)),className:"w-7 h-6 rounded border border-gray-600 cursor-pointer bg-[#111]",title:"Rule blink color (overrides group/master)"}),re.color&&/^#[0-9A-Fa-f]{6}$/.test(re.color)&&o.jsx("button",{type:"button",onClick:()=>r(Xe=>Xe.map(tt=>tt.id===re.id?{...tt,color:void 0}:tt)),className:"text-[10px] text-gray-400 hover:text-white",title:"Use group/master color",children:"Reset"})]})]})]},re.id||Ae)})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>{const re=Da[0];r(Ae=>[...Ae,{id:`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,signalKey:(re==null?void 0:re.key)||"",interval:ql[0],rowLabel:Jl[0],type:"number",operator:">=",threshold:0}])},className:"px-3 py-1.5 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-sm font-medium",children:"Add rule"}),o.jsx("button",{type:"button",onClick:ft,className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-700 text-sm font-medium",children:"Export script"}),o.jsx("button",{type:"button",onClick:Xt,className:"px-3 py-1.5 rounded-lg bg-amber-600 hover:bg-amber-700 text-sm font-medium",children:"Import script"}),o.jsx("input",{ref:xe,type:"file",accept:".json,.txt,application/json,text/plain",className:"hidden",onChange:pn})]}),o.jsx("div",{className:"text-[11px] text-gray-400",children:"Rules are stored in your browser (localStorage). Export script to share, Import script to load."})]})]})}),o.jsxs("div",{className:"space-y-6 relative",children:[!ye&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#111]/80 z-10 rounded-lg",children:o.jsx("span",{className:"text-white/90 text-sm",children:"Loading chart"})}),ye&&ce==="tradingview"&&typeof window<"u"&&!window.TradingView&&o.jsx("div",{className:"flex items-center justify-center py-8 text-amber-400 text-sm",children:"Chart script could not load. Check network or disable ad blocker and refresh."}),Yn.filter(Boolean).map(re=>o.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${T}, minmax(0, 1fr))`},children:y.map(Ae=>{const $e=re&&String(re).replace(/[^a-z0-9]/gi,"_")||"15m";return o.jsxs("div",{className:"bg-[#181818] rounded p-2 flex flex-col items-center",children:[o.jsxs("div",{className:"font-bold mb-1 text-white",children:[Ae,"  ",re]}),o.jsx("div",{id:`single_tv_${Ae}_${$e}`,style:{width:"100%",height:e.height}})]},`${Ae}-${re}`)})},re))]})]})}function ZT({formattedRow:t,rawTrade:e}){var rn;const n=Xc(),[r,s]=x.useState(t||{}),[l,c]=x.useState(e??null),d=x.useMemo(()=>l?$c(l,0):r||{},[l,r]),h=Object.keys(d).filter(ke=>ke!==""&&d[ke]!=null&&String(d[ke]).trim()!==""),g=(l==null?void 0:l.unique_id)!=null?String(l.unique_id):d.Unique_ID!=null?String(jc(d.Unique_ID)).trim():null;x.useEffect(()=>{if(!g)return;const ke=(()=>{try{const pt=localStorage.getItem(M$);if(pt!=null){const Yt=parseInt(pt,10);if(!Number.isNaN(Yt)&&Yt>0)return Yt}}catch{}return 60})();let Me=!1;const Le=async()=>{try{const pt=await Nn(`/api/trade?unique_id=${encodeURIComponent(g)}`);if(Me||!pt.ok)return;const Yt=await pt.json(),St=(Yt==null?void 0:Yt.trade)??null;if(Me||!St)return;c(St),s($c(St,0))}catch{}};Le();const Ct=setInterval(Le,ke*1e3);return()=>{Me=!0,clearInterval(Ct)}},[g]);const p=(l==null?void 0:l.pair)||jc(d.Pair)||xw(g)||"",y=p&&KT(p)||xw(g)||"BTCUSDT",[_,b]=x.useState(null),k=5*60*1e3;x.useEffect(()=>{const ke=async()=>{try{const Le=await Nn(Rn("/api/calculate-signals"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:y,candle:"regular"})}),Ct=await Le.json().catch(()=>({}));if(!Le.ok){console.warn("[CalculateSignals]",(Ct==null?void 0:Ct.message)||Le.statusText);return}Ct!=null&&Ct.ok&&(Ct!=null&&Ct.intervals)&&b(Ct)}catch(Le){console.warn("[CalculateSignals]",(Le==null?void 0:Le.message)||Le)}};ke();const Me=setInterval(ke,k);return()=>clearInterval(Me)},[y]);const S=l&&(l.exist_in_exchange===!0||l.exist_in_exchange==="true"||l.exist_in_exchange===1||typeof l.exist_in_exchange=="string"&&parseFloat(l.exist_in_exchange)>0),[E,O]=x.useState(null),[T,D]=x.useState(null),[F,Z]=x.useState(null),[K,L]=x.useState(0),[Q,se]=x.useState(null),[ce,ye]=x.useState(()=>{try{const ke=localStorage.getItem(Xm);if(ke){const Me=JSON.parse(ke);if(Array.isArray(Me)&&Me.length)return Me}}catch{}return[]}),[te,xe]=x.useState(()=>{try{const ke=localStorage.getItem(Km);if(ke){const Me=JSON.parse(ke);if(Me&&typeof Me=="object")return Me}}catch{}return{}}),[Ce,at]=x.useState(!1);x.useEffect(()=>{var ke;if((ke=E==null?void 0:E.positions)!=null&&ke.length){const Me=Object.keys(E.positions[0]),Le=["__actions__","stopPrice",...Me];ye(Ct=>{if(Array.isArray(Ct)&&Ct.length>0){const pt=Ct.filter(St=>St==="__actions__"||St==="stopPrice"||Me.includes(St)),Yt=Le.filter(St=>!pt.includes(St));return["__actions__","stopPrice",...pt.filter(St=>St!=="__actions__"&&St!=="stopPrice"),...Yt]}return["__actions__","stopPrice",...Me]}),xe(Ct=>{const pt={...Ct};return Le.forEach(Yt=>{pt[Yt]===void 0&&(pt[Yt]=!0)}),pt})}},[E]);const le=60*1e3;x.useEffect(()=>{if(!S||!y){O(null);return}const ke=async()=>{try{const Ct=await(await Nn(Rn(`/api/open-position?symbol=${encodeURIComponent(y)}`))).json().catch(()=>({}));Ct!=null&&Ct.ok?O(Ct):O({ok:!1,error:(Ct==null?void 0:Ct.message)||"Failed to fetch"})}catch(Le){O({ok:!1,error:(Le==null?void 0:Le.message)||"Network error"})}};ke();const Me=setInterval(ke,le);return()=>clearInterval(Me)},[S,y,K]),x.useEffect(()=>{if(!S||!y){D(null);return}const ke=async()=>{try{const Ct=await(await Nn(Rn(`/api/open-orders?symbol=${encodeURIComponent(y)}`))).json().catch(()=>({}));D(Ct!=null&&Ct.ok?Ct:{orders:[]})}catch{D({orders:[]})}};ke();const Me=setInterval(ke,le);return()=>clearInterval(Me)},[S,y,K]),x.useEffect(()=>{const ke=async()=>{try{const Ct=await(await Nn(Rn("/api/futures-balance"))).json().catch(()=>({}));Ct!=null&&Ct.ok&&typeof(Ct==null?void 0:Ct.availableBalance)=="number"?Z(Ct.availableBalance):Z(null)}catch{Z(null)}};ke();const Me=setInterval(ke,le);return()=>clearInterval(Me)},[K]),x.useEffect(()=>{const ke=async()=>{try{const Le=await Nn(Rn(`/api/pairstatus?_=${Date.now()}`)),Ct=Le.ok?await Le.json().catch(()=>null):null;se(Ct)}catch{se(null)}};ke();const Me=setInterval(ke,60*1e3);return()=>clearInterval(Me)},[]);const[Ve,Ue]=x.useState(()=>{try{const ke=localStorage.getItem(qm);if(ke){const Me=JSON.parse(ke);if(Array.isArray(Me)&&Me.length)return Me}}catch{}return null}),[Ze,M]=x.useState(()=>{try{const ke=localStorage.getItem(Gm);if(ke){const Me=JSON.parse(ke);if(Array.isArray(Me))return new Set(Me)}}catch{}return null}),oe=Ve&&Ve.length?[...Ve.filter(ke=>h.includes(ke)),...h.filter(ke=>!Ve.includes(ke))]:h,P=oe.filter(ke=>!Ze||Ze.has(ke));x.useEffect(()=>{if(!Ze||!h.length)return;const ke=h.filter(Me=>!Ze.has(Me));ke.length>0&&M(Me=>new Set([...Me,...ke]))},[h.join(",")]);const[B,j]=x.useState(!1),[V,fe]=x.useState(!1),[lt,et]=x.useState(!1),[ht,At]=x.useState(()=>{try{const ke=localStorage.getItem(Jm);if(ke){const Me=JSON.parse(ke);if(Array.isArray(Me)&&Me.length===Zm.length&&Zm.every(Le=>Me.includes(Le)))return Me}}catch{}return[...Zm]}),[xn,Bt]=x.useState(""),[Kt,tn]=x.useState({open:!1,type:null}),[Hn,sn]=x.useState(null),[He,Dn]=x.useState(null),[Ht,yt]=x.useState(null),[dn,Wt]=x.useState(null),[an,Un]=x.useState(null),[Cn,Qn]=x.useState(null),[me,We]=x.useState(!1),Ge=x.useRef(null),ie=x.useRef(null),Pe=x.useRef(null),z=x.useRef(null),pe=x.useRef(null),Fe=x.useRef(null),bt=x.useRef(null),[dt,Zt]=ad(F$,Us.infoGrid),[Vt,kt]=ad(H$,Us.infoLeft),[ct,ft]=ad(z$,Us.backData),[Xt,pn]=ad(U$,Us.backLeft),[Yn,Tn]=ad(B$,Us.chart),[Gn,In]=x.useState(()=>{try{const ke=localStorage.getItem(vw);if(ke!=null){const Me=parseInt(ke,10);if(!Number.isNaN(Me))return Math.max(20,Math.min(80,Me))}}catch{}return 50}),[bn,re]=x.useState(()=>{try{const ke=localStorage.getItem(bw);if(ke==="rowWise"||ke==="intervalWise")return ke}catch{}return"intervalWise"}),Ae=x.useCallback((ke,Me)=>{try{localStorage.setItem(ke,typeof Me=="string"?Me:JSON.stringify(Me))}catch{}},[]);x.useEffect(()=>{Ae(vw,Gn)},[Gn,Ae]),x.useEffect(()=>{Ae(bw,bn)},[bn,Ae]);const[$e,zt,Xe]=sd(rd.infoLeft),[tt,rt,A]=sd(rd.infoGrid),[G,U,J]=sd(rd.backLeft),[Y,X,we]=sd(rd.backButtons),[je,_e,Ee]=sd(rd.chart),Re=!!((rn=E==null?void 0:E.positions)!=null&&rn.length),gt=Re?["__actions__","stopPrice",...Object.keys(E.positions[0])]:[],Nt=x.useMemo(()=>{const ke=new Map,Me=(T==null?void 0:T.orders)||[];for(const Le of Me){const Ct=(Le.symbol||"").toString().toUpperCase(),pt=(Le.positionSide||"BOTH").toString().toUpperCase(),Yt=`${Ct}_${pt}`,St=Le.stopPrice!=null&&Le.stopPrice!==""?parseFloat(Le.stopPrice):0;(!ke.has(Yt)||Number.isFinite(St)&&St>0)&&ke.set(Yt,Number.isFinite(St)?St:0)}return ke},[T]),Ut=ce.length?ce:gt,vt=Ut.filter(ke=>te[ke]!==!1),$t=vt.map(ke=>ke==="__actions__"?"Actions":ke==="stopPrice"?"Stop Price":ke.replace(/([A-Z])/g," $1").trim()),fn=G/100*14,Sn=Math.max(8,Math.round(Y/100*10)),[mn,Ot]=x.useState(()=>{try{const ke=localStorage.getItem(_w);if(ke){const Me=JSON.parse(ke);if(Array.isArray(Me))return Me}}catch{}return[]}),[ur,Mr]=x.useState(()=>{try{const ke=localStorage.getItem(Sw);if(ke){const Me=JSON.parse(ke);if(Array.isArray(Me))return Me}}catch{}return[]}),[Jn,ar]=x.useState(()=>{try{const ke=localStorage.getItem(ww);return ke&&/^#[0-9A-Fa-f]{6}$/.test(ke)?ke:"#f97316"}catch{}return"#f97316"}),Lr=x.useRef(null);x.useEffect(()=>{if(!(Ht!=null&&Ht.symbol)||!(Ht!=null&&Ht.newAmount)){Wt(null);return}const ke=parseFloat(Ht.newAmount);if(Number.isNaN(ke)||ke<=0){Wt(null);return}const Me=setTimeout(async()=>{try{const Le=Rn(`/api/quantity-preview?symbol=${encodeURIComponent(Ht.symbol)}&invest=${encodeURIComponent(ke)}`),pt=await(await Nn(Le)).json().catch(()=>({}));pt!=null&&pt.ok&&pt.quantity!=null?Wt(pt.quantity):Wt(null)}catch{Wt(null)}},400);return()=>clearTimeout(Me)},[Ht==null?void 0:Ht.symbol,Ht==null?void 0:Ht.newAmount]),x.useEffect(()=>{if(Ve&&Ve.length){try{localStorage.setItem(qm,JSON.stringify(Ve))}catch{}Ae(qm,Ve)}},[Ve,Ae]),x.useEffect(()=>{if(Ze&&Ze.size>0){try{localStorage.setItem(Gm,JSON.stringify([...Ze]))}catch{}Ae(Gm,[...Ze])}},[Ze,Ae]),x.useEffect(()=>{try{localStorage.setItem(Jm,JSON.stringify(ht))}catch{}Ae(Jm,ht)},[ht,Ae]),x.useEffect(()=>{if(ce.length>0){try{localStorage.setItem(Xm,JSON.stringify(ce))}catch{}Ae(Xm,ce)}},[ce,Ae]),x.useEffect(()=>{if(Object.keys(te).length>0){try{localStorage.setItem(Km,JSON.stringify(te))}catch{}Ae(Km,te)}},[te,Ae]),x.useEffect(()=>{try{localStorage.setItem(_w,JSON.stringify(mn))}catch{}},[mn]),x.useEffect(()=>{try{localStorage.setItem(Sw,JSON.stringify(ur))}catch{}},[ur]),x.useEffect(()=>{try{Jn&&/^#[0-9A-Fa-f]{6}$/.test(Jn)&&localStorage.setItem(ww,Jn)}catch{}},[Jn]),x.useCallback(()=>{if(!(typeof window>"u"||!window.document))try{const ke={type:"lab_single_trade_alert_rules",version:2,createdAt:new Date().toISOString(),masterBlinkColor:Jn||"#f97316",rules:mn||[],groups:ur||[]},Me=JSON.stringify(ke,null,2),Le=new Blob([Me],{type:"application/json"}),Ct=URL.createObjectURL(Le),pt=document.createElement("a");pt.href=Ct;const Yt=new Date().toISOString().replace(/[:.]/g,"-");pt.download=`lab-alert-rules-${Yt}.json`,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),URL.revokeObjectURL(Ct)}catch(ke){console.error("[AlertRules] Export failed:",ke),typeof window<"u"&&window.alert("Failed to export rules. See console for details.")}},[mn,ur,Jn]),x.useCallback(()=>{Lr.current&&(Lr.current.value="",Lr.current.click())},[]),x.useCallback(ke=>{try{const Me=ke.target.files&&ke.target.files[0];if(!Me)return;const Le=new FileReader;Le.onload=Ct=>{var pt;try{const Yt=String(((pt=Ct.target)==null?void 0:pt.result)||""),St=JSON.parse(Yt),q=Array.isArray(St)?St:Array.isArray(St==null?void 0:St.rules)?St.rules:null;if(!q){window.alert("Invalid script file: expected an array of rules.");return}let ee=Array.isArray(St==null?void 0:St.groups)?St.groups:[],ve=q;if(ee.length===0){const Qe="imported-"+Date.now();ee=[{id:Qe,name:"Imported",color:St!=null&&St.masterBlinkColor&&/^#[0-9A-Fa-f]{6}$/.test(St.masterBlinkColor)?St.masterBlinkColor:"#f97316"}],ve=q.map(xt=>({...xt,groupId:Qe}))}else{const Qe=new Set(ee.map(ot=>ot.id));ve=q.map(ot=>{var Gt;if(ot.groupId&&Qe.has(ot.groupId))return ot;const xt=(Gt=ee[0])==null?void 0:Gt.id;return{...ot,groupId:xt||ot.groupId}})}Ot(ve),Mr(ee),St!=null&&St.masterBlinkColor&&/^#[0-9A-Fa-f]{6}$/.test(St.masterBlinkColor)&&ar(St.masterBlinkColor)}catch(Yt){console.error("[AlertRules] Import parse error:",Yt),window.alert("Failed to parse script file. See console for details.")}},Le.readAsText(Me)}catch(Me){console.error("[AlertRules] Import failed:",Me),typeof window<"u"&&window.alert("Failed to import rules. See console for details.")}},[]);const er={width:500,height:Yn},Ne=x.useCallback(async({password:ke})=>{const Me=z.current,Le=((Me==null?void 0:Me.symbol)||y).toString().toUpperCase(),Ct=((Me==null?void 0:Me.amount)??"").toString().trim(),pt=((Me==null?void 0:Me.stop_price)??"").toString().trim();if(!Le)throw new Error("Symbol not found");if(!Ct)throw new Error("Investment amount required");if(!pt)throw new Error("Stop price required");const Yt=Rn("/api/execute"),St=await Nn(Yt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:Le,amount:Ct,stop_price:pt,position_side:"LONG",password:(ke||"").trim()})}),q=await St.json().catch(()=>({}));if(!St.ok)throw new Error((q==null?void 0:q.message)||(q==null?void 0:q.error)||"Execute failed");if((q==null?void 0:q.ok)===!1)throw new Error((q==null?void 0:q.message)||"Execute failed");return z.current=null,L(ee=>ee+1),{successMessage:(q==null?void 0:q.message)||"Order placed."}},[y,l==null?void 0:l.pair,d.Pair]),nt=x.useCallback(async({password:ke})=>{const Me=Ge.current,Le=((Me==null?void 0:Me.symbol)||y).toString().toUpperCase();if(!Le)throw new Error("Symbol not found for this trade");const Ct=((Me==null?void 0:Me.positionSide)||"BOTH").toString().trim().toUpperCase(),pt=(Me==null?void 0:Me.positionAmt)!=null?parseFloat(Me.positionAmt):NaN,Yt=!Number.isNaN(pt)&&pt!==0?Math.abs(pt):void 0,St=(l==null?void 0:l.unique_id)!=null?String(l.unique_id):d.Unique_ID!=null?String(jc(d.Unique_ID)).trim():null,q=Rn("/api/end-trade"),ee=await Nn(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({unique_id:St||void 0,symbol:Le,position_side:["LONG","SHORT","BOTH"].includes(Ct)?Ct:"BOTH",quantity:Yt!=null&&Yt>0?Yt:void 0,password:(ke||"").trim()})}),ve=await ee.json().catch(()=>({message:ee.statusText}));if(!ee.ok)throw new Error((ve==null?void 0:ve.message)||(ve==null?void 0:ve.error)||"Close trade failed");if((ve==null?void 0:ve.ok)===!1)throw new Error((ve==null?void 0:ve.message)||"Close trade failed");return Ge.current=null,L(Qe=>Qe+1),{successMessage:(ve==null?void 0:ve.message)||"Position closed."}},[l==null?void 0:l.unique_id,l==null?void 0:l.pair,y,d.Pair]),wt=x.useCallback(async({password:ke})=>{const Me=pe.current,Le=((Me==null?void 0:Me.symbol)||y).toString().toUpperCase(),Ct=((Me==null?void 0:Me.positionSide)||"LONG").toString().toUpperCase(),pt=Me==null?void 0:Me.quantity;if(!Le)throw new Error("Symbol not found");if(pt==null||pt===""||Number(parseFloat(pt))<=0)throw new Error("Quantity required");We(!0);try{const Yt=Rn("/api/hedge"),St=await Nn(Yt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:Le,position_side:Ct,quantity:pt,password:(ke||"").trim()})}),q=await St.json().catch(()=>({}));if((q==null?void 0:q.ok)===!1)throw new Error((q==null?void 0:q.message)||"Hedge failed");if(!St.ok)throw new Error((q==null?void 0:q.message)||(q==null?void 0:q.error)||"Hedge failed");return pe.current=null,L(ee=>ee+1),{successMessage:(q==null?void 0:q.message)||"Hedge order placed."}}finally{We(!1)}},[y,l==null?void 0:l.pair,d.Pair]),nn=x.useCallback(async({password:ke,extraValue:Me})=>{const Le=ie.current,Ct=((Le==null?void 0:Le.symbol)||y).toString().trim().toUpperCase(),pt=((Le==null?void 0:Le.positionSide)||"BOTH").toString().toUpperCase(),Yt=((Le==null?void 0:Le.stopPrice)??Me??xn??"").toString().trim();if(!Ct)throw new Error("Symbol not found");if(!Yt)throw new Error("Stop price required");const St=Rn("/api/stop-price"),q=await Nn(St,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:Ct,position_side:pt,stop_price:Yt,password:(ke||"").trim()})}),ee=await q.json().catch(()=>({}));if(!q.ok)throw new Error((ee==null?void 0:ee.message)||(ee==null?void 0:ee.error)||"Set stop price failed");if((ee==null?void 0:ee.ok)===!1)throw new Error((ee==null?void 0:ee.message)||"Set stop price failed");return ie.current=null,L(ve=>ve+1),{successMessage:(ee==null?void 0:ee.message)||"Stop price set."}},[y,xn]),ln=x.useCallback(async({password:ke})=>{const Me=Pe.current,Le=((Me==null?void 0:Me.symbol)||y).toString().trim().toUpperCase(),Ct=((Me==null?void 0:Me.positionSide)||"LONG").toString().toUpperCase(),pt=((Me==null?void 0:Me.amount)??"").toString().trim();if(!Le)throw new Error("Symbol not found");if(!pt)throw new Error("Amount required");const Yt=Rn("/api/add-investment"),St=await Nn(Yt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:Le,position_side:Ct,amount:pt,password:(ke||"").trim()})}),q=await St.json().catch(()=>({}));if(!St.ok)throw new Error((q==null?void 0:q.message)||(q==null?void 0:q.error)||"Add investment failed");if((q==null?void 0:q.ok)===!1)throw new Error((q==null?void 0:q.message)||"Add investment failed");return Pe.current=null,L(ee=>ee+1),{successMessage:(q==null?void 0:q.message)||"Investment added."}},[y]),Dt=x.useCallback(async({password:ke})=>{const Le=(Fe.current||y).toString().toUpperCase();if(!Le)throw new Error("Symbol not found");const Ct=Rn("/api/close-order"),pt=await Nn(Ct,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:Le,password:(ke||"").trim()})}),Yt=await pt.json().catch(()=>({message:pt.statusText}));if(!pt.ok)throw new Error(Yt.message||Yt.error||"Close order failed");if((Yt==null?void 0:Yt.ok)===!1)throw new Error(Yt.message||"Close order failed");return Fe.current=null,L(St=>St+1),{successMessage:Yt.message||"The operation of cancel all open order is done."}},[y,l==null?void 0:l.pair,d.Pair]),yn=x.useCallback(async({password:ke,amount:Me})=>{const Le=bt.current,Ct=((Le==null?void 0:Le.symbol)||y).toString().toUpperCase(),pt=((Le==null?void 0:Le.positionSide)||"LONG").toString().toUpperCase(),Yt=(Me??"").toString().trim();if(!Ct)throw new Error("Symbol not found");if(!Yt)throw new Error("Quantity to close required");const St=parseFloat(Yt);if(!Number.isFinite(St)||St<=0)throw new Error("Quantity must be a positive number");const q=await Nn(Rn("/api/partial-close"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:Ct,quantity:St,position_side:pt,password:(ke||"").trim()})}),ee=await q.json().catch(()=>({}));if(!q.ok)throw new Error(ee.message||ee.error||"Partial close failed");if((ee==null?void 0:ee.ok)===!1)throw new Error(ee.message||"Partial close failed");return bt.current=null,L(ve=>ve+1),{successMessage:ee.message||`Closed ${St} ${pt} successfully.`}},[y,l==null?void 0:l.pair,d.Pair]),lr=(l==null?void 0:l.auto)===!0||(l==null?void 0:l.auto)==="true"||(l==null?void 0:l.auto)===1,Pt=x.useCallback(async({password:ke,extraValue:Me})=>{const Le=l==null?void 0:l.unique_id,Ct=l==null?void 0:l.machineid,pt=Me==="enable",Yt=Rn("/api/autopilot"),St=await Nn(Yt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({unique_id:Le,machineid:Ct,password:(ke||"").trim(),enabled:pt})}),q=await St.json().catch(()=>({message:St.statusText}));if(!St.ok){const ee=q.message||q.detail||q.error||St.statusText;throw St.status===404?new Error(q.message||"API endpoint not found. Is the server running? If using GitHub Pages, set API_BASE_URL and redeploy."):new Error(ee||`API error ${St.status}`)}if(q&&q.ok===!1)throw new Error(q.message||"Autopilot update failed");try{const ee=await Nn(`/api/trade?unique_id=${encodeURIComponent(Le)}`);if(ee.ok){const ve=await ee.json(),Qe=(ve==null?void 0:ve.trade)??null;Qe&&(c(Qe),s($c(Qe,0)))}}catch{}return q},[l==null?void 0:l.unique_id,l==null?void 0:l.machineid]),$n=x.useCallback(ke=>{switch(ke){case"execute":return Ne;case"endTrade":return nt;case"autoPilot":return Pt;case"hedge":return wt;case"setStopPrice":return nn;case"addInvestment":return ln;case"clear":return Dt;case"partialClose":return yn;default:return async()=>{}}},[Ne,nt,Pt,wt,nn,ln,Dt,yn]);return o.jsxs("div",{className:"fixed inset-0 flex flex-col bg-[#f5f6fa] dark:bg-[#0f0f0f] text-[#222] dark:text-white overflow-hidden w-full",children:[o.jsxs("div",{className:"flex-none flex items-center justify-between gap-2 px-3 sm:px-4 py-2 bg-[#181818] text-white border-b border-gray-700 shadow-md flex-wrap",children:[o.jsx("button",{type:"button",onClick:()=>n(-1),className:"px-3 py-1.5 rounded-lg bg-teal-600 hover:bg-teal-700 font-medium transition-colors min-h-[40px] shrink-0",children:" Back"}),o.jsxs("span",{className:"font-semibold text-base sm:text-lg truncate min-w-0",children:["Live Trade  ",jc(d.Pair)||"N/A"]}),o.jsxs("span",{className:"font-semibold text-base sm:text-lg truncate min-w-0 text-green-500",children:["Exchange Future Balance  ",typeof F=="number"?`${Number(F).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})} USDT`:""]}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0 flex-wrap justify-end",children:[o.jsx(A$,{}),o.jsx(XT,{className:"px-3 py-1.5 rounded-lg bg-red-600 hover:bg-red-700 text-white text-sm font-semibold shrink-0"}),o.jsxs("button",{type:"button",onClick:()=>fe(!0),className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/20 transition-colors min-h-[40px] shrink-0",title:"Section order",children:[o.jsx(oF,{size:20}),"Layout"]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 sm:p-4 space-y-3 sm:space-y-4 min-h-0",children:[Q&&(()=>{const ke=pt=>{try{if(pt==null||pt==="")return"";let Yt=String(pt).trim();if(!Yt)return"";/Z$|[+-]\d{2}:?\d{2}$/.test(Yt)||(Yt=Yt.replace(" ","T")+"Z");const St=new Date(Yt).getTime();if(Number.isNaN(St))return"";const q=Date.now()-St,ee=Math.floor(q/1e3),ve=Math.floor(ee/60),Qe=Math.floor(ve/60);return ee<60?`${ee} sec ago`:ve<60?`${ve} min ago`:Qe<24?`${Qe} hr ago`:`${Math.floor(Qe/24)} days ago`}catch{return""}},Me=(pt,Yt,St)=>{const q=Number(pt);if(Number.isNaN(q))return{color:"rgb(255,255,255)"};const ee=Math.max(0,Math.min(q/90,1)),ve=Math.pow(ee,.6),Qe=Yt?[34,197,94]:St?[239,68,68]:[255,255,255],ot=Math.round(255+(Qe[0]-255)*ve),xt=Math.round(255+(Qe[1]-255)*ve),Gt=Math.round(255+(Qe[2]-255)*ve);return{color:`rgb(${ot}, ${xt}, ${Gt})`}},Le=({header:pt,value:Yt,trendText:St,pct:q})=>{const ee=Number(q),ve=(St||"").toLowerCase(),Qe=ve.includes("bull"),ot=ve.includes("bear"),xt=q!=null&&q!==""&&!Number.isNaN(ee)&&ee>=90,Gt="w-full min-w-0 flex flex-col rounded-lg border transition-all duration-200 ease-out bg-blue-50 dark:bg-blue-950/40 border-blue-200 dark:border-blue-900 px-3 py-2 md:px-4 md:py-2.5",ze=xt?ot?" bg-red-50 dark:bg-red-950/40 ring-2 ring-red-300 dark:ring-red-800":Qe?" bg-green-50 dark:bg-green-950/40 ring-2 ring-green-300 dark:ring-green-800":"":"",wn=q!=null&&q!==""&&!xt?Me(ee,Qe,ot):void 0,Lt=q!=null&&q!==""&&xt?Qe?"text-green-600":ot?"text-red-600":"text-black dark:text-white":"text-black dark:text-white",Pn=q!=null&&q!==""?`${(St||"").trim()} ${Number.isNaN(ee)?q:ee.toFixed(2)}%`:typeof Yt<"u"&&Yt!==null&&String(Yt).trim()!==""?String(Yt).trim():"";return o.jsxs("div",{className:`${Gt} ${ze}`.trim(),children:[o.jsx("span",{className:"text-blue-700 dark:text-blue-200 font-bold text-xs md:text-sm mb-1 truncate",children:pt}),o.jsxs("span",{className:`font-bold text-sm md:text-base truncate ${Lt}`,style:wn,title:Pn,children:[q!=null&&q!==""&&(Qe||ot)&&o.jsx("span",{className:"mr-1",children:Qe?"":""}),Pn]})]},pt)},Ct=ke(Q.last_updated);return o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 flex-1 min-w-[280px] mb-3 sm:mb-4",children:[o.jsx(Le,{header:"Last Update Time",value:Ct??""}),o.jsx(Le,{header:"EMA 1m",trendText:Q.overall_ema_trend_1m,pct:Q.overall_ema_trend_percentage_1m}),o.jsx(Le,{header:"EMA 5m",trendText:Q.overall_ema_trend_5m,pct:Q.overall_ema_trend_percentage_5m}),o.jsx(Le,{header:"EMA 15m",trendText:Q.overall_ema_trend_15m,pct:Q.overall_ema_trend_percentage_15m})]})})(),ht.map(ke=>{var Me;return ke==="information"?o.jsxs("section",{className:"rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-[#181a20] overflow-hidden shadow-lg flex-shrink-0 flex flex-col",style:{minHeight:200},children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 px-3 sm:px-4 py-2.5 bg-gradient-to-r from-teal-800 to-teal-700 text-white font-semibold flex-shrink-0",children:[o.jsx("span",{className:"text-sm sm:text-base",children:"Information"}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"text-white/90 text-xs mr-1",children:"Grid zoom:"}),o.jsx(id,{onDecrease:rt,onIncrease:A,current:tt,label:"Zoom grid",className:"min-w-[32px] min-h-[32px] flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 text-white text-xs font-bold disabled:opacity-40"}),o.jsxs("button",{type:"button",onClick:()=>j(!0),className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-sm font-medium transition-colors min-h-[36px] sm:min-h-[40px]",children:[o.jsx(bF,{size:18}),"Settings"]}),o.jsxs("button",{type:"button",disabled:Re,onClick:()=>{const Le=y.toString().toUpperCase(),Ct=(l==null?void 0:l.investment)!=null&&(l==null?void 0:l.investment)!==""?parseFloat(l.investment):parseFloat(String(d.Investment||"").replace(/[$,]/g,"")),pt=Number.isFinite(Ct)?Ct:0,Yt=(l==null?void 0:l.stop_price)!=null&&(l==null?void 0:l.stop_price)!==""?String(l.stop_price).trim():String(d.Stop_Price||"").replace(/,/g,"").trim();Un({symbol:Le,backInvest:pt,liveInvest:pt>0?String(pt):"",stopPrice:Yt})},className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 hover:from-emerald-600 hover:via-green-600 hover:to-teal-600 text-white text-lg font-bold shadow-lg shadow-emerald-500/40 hover:shadow-emerald-500/50 hover:scale-105 active:scale-100 transition-all min-h-[48px] border-2 border-emerald-400/50 disabled:opacity-50 disabled:pointer-events-none disabled:hover:scale-100 disabled:cursor-not-allowed",title:Re?"Disabled: position already exists in Binance Data":"Execute Trade in Exchange",children:[o.jsx(yF,{size:24,fill:"currentColor"}),Re?"Disabled: position already exists in Binance Data":"Execute Trade in Exchange"]})]})]}),o.jsxs("div",{className:"flex min-h-0 p-3 sm:p-4 gap-0 flex-shrink-0",style:{height:dt},children:[o.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-xl flex flex-col overflow-hidden flex-shrink-0 bg-white dark:bg-[#0d0d0d]",style:{width:`${Gn}%`,minHeight:Vt,fontSize:`${$e/100*11}px`},children:[o.jsxs("div",{className:"flex items-center gap-2 p-1.5 border-b border-gray-200 dark:border-gray-700 flex-shrink-0 flex-wrap",children:[o.jsx(id,{onDecrease:zt,onIncrease:Xe,current:$e,label:"Zoom",className:"min-w-[28px] min-h-[28px] flex items-center justify-center rounded bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 disabled:opacity-40 text-gray-800 dark:text-white text-xs font-bold"}),o.jsxs("span",{className:"text-xs font-semibold text-gray-600 dark:text-white truncate",children:[(_==null?void 0:_.symbol)||y," signals"]}),o.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[(_==null?void 0:_.ok)&&(_==null?void 0:_.intervals)&&o.jsx("button",{type:"button",onClick:()=>re(Le=>Le==="intervalWise"?"rowWise":"intervalWise"),className:"px-2 py-1 rounded text-xs font-medium bg-teal-600 hover:bg-teal-700 text-white whitespace-nowrap",children:"Change view"}),o.jsx("button",{type:"button",onClick:()=>et(!0),className:"px-2 py-1 rounded text-xs font-medium bg-violet-600 hover:bg-violet-700 text-white whitespace-nowrap",children:"Alert settings"})]})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:_!=null&&_.ok&&(_!=null&&_.intervals)?(()=>{const Le=bn==="intervalWise",Ct=Le?ql.flatMap((Qe,ot)=>Jl.map(xt=>({iv:Qe,label:xt,rowIdx:Ew[xt]??0,groupKey:Qe,groupIndex:ot}))):Jl.flatMap((Qe,ot)=>ql.map(xt=>({iv:xt,label:Qe,rowIdx:Ew[Qe]??0,groupKey:Qe,groupIndex:ot}))),pt=Le?W$:V$,Yt=Qe=>pt[Qe]??"",St=(Qe,ot)=>{if(Qe==null||typeof Qe!="object")return;if(Object.prototype.hasOwnProperty.call(Qe,ot)&&Qe[ot]!==void 0)return Qe[ot];const xt=String(ot).toLowerCase(),Gt=Object.entries(Qe).find(([ze])=>ze!=null&&String(ze).toLowerCase()===xt);return Gt?Gt[1]:void 0},q=(Qe,ot)=>{if(!Qe)return!1;if(Qe.type==="boolean"){const ze=ot===!0||ot==="true"||ot===1||ot==="1",wn=Qe.boolValue===void 0?!0:!!Qe.boolValue;return ze===wn}if(Qe.type==="string"||Qe.type==="buy_sell"||Qe.type==="inc_dec"||Qe.type==="bull_bear"||Qe.type==="red_green"||Qe.type==="trend_3"){const ze=(ot==null?"":String(ot)).toLowerCase().trim(),Lt=((Qe.type==="string"?Qe.stringValue:Qe.enumValue)??"").toString().toLowerCase().trim();switch(Qe.operator||"eq"){case"neq":return ze!==Lt;case"contains":return ze.includes(Lt);case"not_contains":return!ze.includes(Lt);case"starts_with":return ze.startsWith(Lt);case"ends_with":return ze.endsWith(Lt);case"eq":default:return ze===Lt}}const xt=typeof ot=="number"?ot:parseFloat(ot);if(!Number.isFinite(xt))return!1;const Gt=Number(Qe.threshold);switch(Qe.operator){case">":return xt>Gt;case">=":return xt>=Gt;case"<":return xt<Gt;case"<=":return xt<=Gt;case"==":return xt===Gt;case"!=":return xt!==Gt;default:return!1}},ee={};Da.forEach(({key:Qe})=>{ee[Qe]=0}),mn&&mn.length&&(_!=null&&_.intervals)&&Da.forEach(({key:Qe})=>{Ct.forEach(ot=>{var Pn;const xt=(Pn=_.intervals[ot.iv])==null?void 0:Pn.summary,Gt=Array.isArray(xt)?xt:[],ze=St(Gt[ot.rowIdx],Qe),wn=mn.filter(qt=>qt&&qt.signalKey===Qe&&qt.interval===ot.iv&&qt.rowLabel===ot.label);if(!wn.length)return;wn.some(qt=>q(qt,ze))&&(ee[Qe]=(ee[Qe]||0)+1)})});const ve=[...Da].sort((Qe,ot)=>(ee[ot.key]||0)-(ee[Qe.key]||0));return o.jsxs("table",{className:"w-full border-collapse",style:{fontSize:"1em"},children:[o.jsx("thead",{className:"sticky top-0 bg-gray-100 dark:bg-gray-800 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border border-gray-300 dark:border-gray-600 px-1 py-0.5 text-left font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap min-w-[80px]",children:"Signal"}),Ct.map((Qe,ot)=>o.jsxs("th",{className:`border border-gray-300 dark:border-gray-600 px-0.5 py-0.5 text-center font-medium text-gray-600 dark:text-white whitespace-nowrap ${Yt(Qe.groupIndex)}`,children:[Qe.iv," ",Qe.label]},`${Qe.iv}-${Qe.label}-${ot}`))]})}),o.jsx("tbody",{children:ve.map(({label:Qe,key:ot})=>{const xt=Da.map(ze=>ze.label),Gt=Lx(Qe,xt);return o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[o.jsx("td",{className:"border border-gray-200 dark:border-gray-600 px-1 py-0.5 font-medium text-teal-700 dark:text-teal-400 whitespace-nowrap truncate max-w-[100px]",title:Qe,children:Gt}),Ct.map((ze,wn)=>{var Ks,Mn;const Lt=(Ks=_.intervals[ze.iv])==null?void 0:Ks.summary,Pn=Array.isArray(Lt)?Lt:[],qt=St(Pn[ze.rowIdx],ot),fr=qt!=null?typeof qt=="number"?Number.isInteger(qt)?String(qt):((Mn=qt.toFixed)==null?void 0:Mn.call(qt,4))??String(qt):String(qt):"",Xn=Yt(ze.groupIndex),vr=!mn||!mn.length?[]:mn.filter(jn=>jn&&jn.signalKey===ot&&jn.interval===ze.iv&&jn.rowLabel===ze.label),Ar=vr.some(jn=>q(jn,qt)),rr=Ar?vr.find(jn=>q(jn,qt)):null,mr=rr!=null&&rr.groupId&&ur?ur.find(jn=>jn.id===rr.groupId):null,vs=rr!=null&&rr.color&&/^#[0-9A-Fa-f]{6}$/.test(rr.color)?rr.color:mr!=null&&mr.color&&/^#[0-9A-Fa-f]{6}$/.test(mr.color)?mr.color:Jn&&/^#[0-9A-Fa-f]{6}$/.test(Jn)?Jn:"#f97316",is=Ar?{"--lab-alert-bg":vs,"--lab-alert-bg-peak":vs,"--lab-alert-shadow":((jn,qr)=>{const os=parseInt(jn.slice(1),16),bs=os>>16&255,si=os>>8&255,Qt=os&255;return`rgba(${bs},${si},${Qt},${qr})`})(vs,.9)}:void 0,wr=Ar?"lab-alert-cell":"";return o.jsx("td",{className:`border border-gray-200 dark:border-gray-600 px-0.5 py-0.5 text-center text-gray-800 dark:text-white truncate max-w-[60px] ${Xn} ${wr}`,style:is,title:fr,children:fr},`${ze.iv}-${ze.label}-${wn}`)})]},ot)})})]})})():o.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-white text-center p-2",children:"Loading signals"})})]}),o.jsx(K$,{leftPercent:Gn,onChange:In,min:20,max:80}),o.jsx("div",{className:"min-w-0 flex-1 flex flex-col overflow-hidden",style:{width:`${100-Gn}%`},children:o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3 overflow-y-auto pr-1 flex-1 min-h-0",style:{fontSize:`${tt/100*14}px`},children:P.map(Le=>o.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 bg-gradient-to-br from-gray-50 to-white dark:from-[#1e1e1e] dark:to-[#252525] p-3 shadow-sm hover:shadow-md hover:border-teal-400/50 dark:hover:border-teal-500/50 transition-all",children:[o.jsx("div",{className:"font-semibold uppercase tracking-wide text-teal-700 dark:text-teal-400 mb-1 truncate",style:{fontSize:"1em"},title:Le.replace(/_/g," "),children:Le.replace(/_/g," ")}),o.jsx("div",{className:"font-medium text-[#222] dark:text-white break-words leading-snug max-h-14 overflow-hidden",style:{fontSize:"1em"},title:jc(d[Le]),children:jc(d[Le])})]},Le))})})]}),o.jsx(Qm,{value:dt,min:Us.infoGrid.min,max:Us.infoGrid.max,onChange:Zt,label:"Drag to resize Information section height"})]},"information"):ke==="binanceData"?o.jsxs("section",{className:"rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-[#181a20] overflow-hidden shadow-lg flex-shrink-0 flex flex-col relative",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 px-3 sm:px-4 py-2.5 bg-gradient-to-r from-teal-800 to-teal-700 text-white font-semibold flex-shrink-0",children:[o.jsx("span",{className:"text-sm sm:text-base",children:"Binance Data"}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"text-white/90 text-xs mr-1",children:"Zoom:"}),o.jsx(id,{onDecrease:U,onIncrease:J,current:G,label:"Zoom Binance table",className:"min-w-[32px] min-h-[32px] flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 text-white text-xs font-bold disabled:opacity-40"}),o.jsx("span",{className:"text-white/90 text-xs mr-1 ml-1",children:"Buttons:"}),o.jsx(id,{onDecrease:X,onIncrease:we,current:Y,label:"Binance button size",className:"min-w-[32px] min-h-[32px] flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 text-white text-xs font-bold disabled:opacity-40"}),(Me=E==null?void 0:E.positions)!=null&&Me.length?o.jsxs("button",{type:"button",onClick:()=>at(Le=>!Le),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-xs font-semibold shadow-sm border border-teal-200/60",title:"Reorder / show or hide Binance columns",children:["",o.jsx("span",{children:"Settings"})]}):null]})]}),o.jsx("div",{className:"flex min-h-0 p-3 sm:p-4 flex-shrink-0",style:{height:ct},children:o.jsx("div",{className:"w-full border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl flex flex-col items-center justify-center text-gray-800 dark:text-white bg-gray-50 dark:bg-[#0d0d0d] overflow-hidden flex-shrink-0",style:{minHeight:Xt},children:o.jsx("div",{className:"flex flex-col gap-2 mb-2 flex-wrap justify-center p-2 overflow-auto w-full",children:S?(E==null?void 0:E.ok)===!1?o.jsx("span",{className:"text-amber-600 dark:text-amber-400 text-center",children:(E==null?void 0:E.error)||"Failed to fetch"}):Re?o.jsxs("div",{className:"relative overflow-auto w-full",children:[Ce&&o.jsx(X$,{columns:Ut,setColumns:ye,visibility:te,setVisibility:xe,onClose:()=>at(!1)}),o.jsxs("table",{className:"w-full border-collapse border border-gray-300 dark:border-gray-600",children:[o.jsx("thead",{children:o.jsx("tr",{className:"bg-teal-100 dark:bg-teal-900/40",children:vt.map((Le,Ct)=>{const pt=$t[Ct],Yt=Le==="__actions__"?pt:Lx(pt,$t);return o.jsx("th",{className:"border border-gray-300 dark:border-gray-600 px-2 py-1 text-left font-medium text-teal-800 dark:text-teal-200 whitespace-nowrap max-w-[80px] truncate",title:pt,children:o.jsxs("div",{className:"flex flex-col leading-tight",style:{fontSize:`${fn}px`},children:[o.jsx("span",{className:"truncate",children:Yt}),Yt!==pt&&o.jsx("span",{className:"text-[10px] text-teal-700/80 dark:text-teal-200/80 truncate",children:pt})]})},Le)})})}),o.jsx("tbody",{children:E.positions.map((Le,Ct)=>{const pt=(St,q)=>{if(q==null)return"";const ee=parseFloat(q);return!isNaN(ee)&&typeof q!="boolean"?St.toLowerCase().includes("price")||St.toLowerCase().includes("notional")||St.toLowerCase().includes("margin")||St.toLowerCase().includes("profit")||Number.isInteger(ee)||St.toLowerCase().includes("amt")||St.toLowerCase().includes("qty")?ee.toFixed(4):ee.toFixed(2):typeof q=="boolean"?q?"":"":typeof q=="object"?JSON.stringify(q):String(q)},Yt=vt;return o.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-[#1a1a1a] hover:bg-gray-50 dark:hover:bg-[#252525]",children:Yt.map(St=>{var xt,Gt,ze;if(St==="__actions__")return o.jsx("td",{className:"border border-gray-200 dark:border-gray-700 px-2 py-1 whitespace-nowrap",style:{fontSize:`${Sn}px`},children:o.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.jsx("button",{type:"button",onClick:()=>tn({open:!0,type:"autoPilot",autoEnable:!lr}),className:"px-2 py-0.5 rounded bg-violet-600 hover:bg-violet-700 text-white font-semibold",title:lr?"Disable Auto-Pilot":"Enable Auto-Pilot",children:lr?"Auto Disable":"Auto Enable"}),o.jsx("button",{type:"button",onClick:()=>{const wn=(Le.symbol||y).toString().toUpperCase(),Lt=Le.positionSide??"BOTH",Pn=Le.positionAmt!=null?parseFloat(Le.positionAmt):NaN,qt=!Number.isNaN(Pn)&&Pn!==0?Math.abs(Pn):0;Ge.current={symbol:Le.symbol||y,positionSide:Lt,positionAmt:Le.positionAmt},sn({symbol:wn,action:"Close Trade",positionSide:Lt,quantity:qt})},className:"px-2 py-0.5 rounded bg-red-600 hover:bg-red-700 text-white font-semibold",title:"End Trade",children:"Close Trade"}),o.jsx("button",{type:"button",disabled:((xt=E==null?void 0:E.positions)==null?void 0:xt.length)>=2||me,onClick:()=>{const wn=(Le.symbol||y).toString().trim().toUpperCase(),Lt=(Le.positionSide||"LONG").toString().toUpperCase(),Pn=Le.positionAmt!=null?parseFloat(Le.positionAmt):NaN,qt=Number.isFinite(Pn)&&Pn!==0?Math.abs(Pn):0;Qn({symbol:wn,currentPositionSide:Lt,oppositePositionSide:Lt==="LONG"?"SHORT":"LONG",orderSide:Lt==="LONG"?"SELL":"BUY",quantity:qt})},className:"px-2 py-0.5 rounded bg-amber-600 hover:bg-amber-700 text-white font-semibold disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",title:me?"Placing":((Gt=E==null?void 0:E.positions)==null?void 0:Gt.length)>=2?"Already hedged (LONG + SHORT)":"Hedge",children:me?"":((ze=E==null?void 0:E.positions)==null?void 0:ze.length)>=2?"Hedged":"Hedge"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"number",inputMode:"decimal",step:"any",value:xn,onChange:wn=>Bt(wn.target.value),placeholder:"Stop",autoComplete:"off",className:"border border-gray-400 dark:border-gray-600 rounded px-1 py-0.5 bg-white dark:bg-[#222] w-25"}),o.jsx("button",{type:"button",onClick:()=>{const wn=(Le.symbol||y).toString().trim().toUpperCase(),Lt=Le.positionSide??"BOTH";Dn({action:"Set Stop Price",symbol:wn,positionSide:Lt,stopPrice:xn.trim()})},className:"px-2 py-0.5 rounded bg-red-600 hover:bg-red-700 text-white font-semibold",title:"Set Stop Price",children:"Set Stop Price"})]}),o.jsx("button",{type:"button",onClick:()=>{const wn=(Le.symbol||y).toString().trim().toUpperCase(),Lt=Le.positionSide??"LONG",Pn=Le.notional!=null?parseFloat(Le.notional):NaN,qt=Le.entryPrice!=null?parseFloat(Le.entryPrice):NaN,fr=Le.positionAmt!=null?parseFloat(Le.positionAmt):0,Xn=Math.abs(fr),vr=!Number.isNaN(Pn)&&Pn>0?Pn:!Number.isNaN(qt)&&qt>0&&Xn>0?qt*Xn:0;Wt(null),yt({symbol:wn,positionSide:Lt,oldInvestment:vr,oldQuantity:Xn,newAmount:""})},className:"px-2 py-0.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white font-semibold",title:"Add Investment",children:"+Inv"}),o.jsx("button",{type:"button",onClick:()=>{Fe.current=(Le.symbol||y).toString().trim().toUpperCase(),tn({open:!0,type:"clear"})},className:"px-2 py-0.5 rounded bg-slate-600 hover:bg-slate-700 text-white font-semibold",title:"Clear open orders (TP/SL) for this symbol  calls main_binance.closeOrder(symbol)",children:"Clear Order"}),o.jsx("button",{type:"button",onClick:()=>{const wn=(Le.symbol||y).toString().trim().toUpperCase();bt.current={symbol:wn,positionSide:(Le.positionSide||"LONG").toString().toUpperCase(),positionAmt:Le.positionAmt},tn({open:!0,type:"partialClose",position:Le})},className:"px-2 py-0.5 rounded bg-red-600 hover:bg-slate-700 text-white font-semibold",title:"Partially close this position  enter quantity to close (e.g. 900 of 1000)",children:"Partial Close"})]})},"__actions__");const q=parseFloat(Le.unRealizedProfit||0),ee=St==="unRealizedProfit"?q<0?"text-red-600 font-medium":"text-green-600 font-medium":"",ve=St==="stopPrice",Qe=ve?Nt.get(`${(Le.symbol||"").toString().toUpperCase()}_${(Le.positionSide||"BOTH").toString().toUpperCase()}`)??0:Le[St],ot=ve?typeof Qe=="number"&&Number.isFinite(Qe)?Number(Qe).toFixed(4):"0":pt(St,Qe);return o.jsx("td",{className:`border border-gray-200 dark:border-gray-700 px-2 py-1 ${ee}`,style:{fontSize:`${fn}px`},children:ot},St)})},Ct)})})]})]}):S&&(E!=null&&E.ok)?o.jsxs("span",{className:"text-gray-500 dark:text-white text-center",children:["No open position for ",y]}):o.jsx("span",{className:"text-gray-500 dark:text-white text-center",children:"Loading exchange data"}):o.jsx("span",{className:"text-gray-500 dark:text-white text-center",children:"Trade not in exchange  no live data"})})})}),o.jsx(Qm,{value:ct,min:Us.backData.min,max:Us.backData.max,onChange:ft,label:"Drag to resize Binance Data section height"})]},"binanceData"):o.jsxs("section",{className:"rounded-xl border border-gray-300 dark:border-gray-700 overflow-hidden shadow-lg flex-1 min-h-[240px] flex flex-col",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 px-3 sm:px-4 py-2.5 bg-gradient-to-r from-teal-800 to-teal-700 text-white font-semibold flex-shrink-0",children:[o.jsx("span",{className:"text-sm sm:text-base",children:"Chart"}),o.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[o.jsx("span",{className:"text-white/90 text-xs",children:"Height:"}),o.jsxs("div",{className:"flex items-center gap-1",title:"Chart height",children:[o.jsx("button",{type:"button",onClick:()=>Tn(Le=>Math.max(Us.chart.min,Le-Us.chart.step)),disabled:Yn<=Us.chart.min,className:"min-w-[32px] min-h-[32px] flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 disabled:opacity-40 text-white text-lg font-bold","aria-label":"Decrease chart height",children:""}),o.jsx("button",{type:"button",onClick:()=>Tn(Le=>Math.min(Us.chart.max,Le+Us.chart.step)),disabled:Yn>=Us.chart.max,className:"min-w-[32px] min-h-[32px] flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 disabled:opacity-40 text-white text-lg font-bold","aria-label":"Increase chart height",children:"+"})]}),o.jsx(id,{onDecrease:_e,onIncrease:Ee,current:je,label:"Zoom chart labels"})]})]}),o.jsx("div",{className:"p-3 sm:p-4 flex-1 min-h-0 overflow-auto overflow-x-auto",style:{fontSize:`${je/100*14}px`,minHeight:Yn},children:o.jsx(Z$,{tradePair:p,chartSize:er,alertRules:mn,setAlertRules:Ot,alertRuleGroups:ur,setAlertRuleGroups:Mr,masterBlinkColor:Jn,setMasterBlinkColor:ar,showAlertSettings:lt,setShowAlertSettings:et})}),o.jsx(Qm,{value:Yn,min:Us.chart.min,max:Us.chart.max,onChange:Tn,label:"Drag to resize Chart section height"})]},"chart")})]}),B&&o.jsx(q$,{orderedKeys:oe,allKeys:h,visibleKeys:Ze,setVisibleKeys:M,setFieldOrder:Ue,onClose:()=>j(!1)}),V&&o.jsx(J$,{sectionOrder:ht,setSectionOrder:At,onClose:()=>fe(!1)}),Hn&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>{sn(null),Ge.current=null},children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-sm w-full shadow-xl border border-gray-200 dark:border-gray-700",onClick:ke=>ke.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-lg mb-4 text-gray-900 dark:text-white",children:"Confirm close position"}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Action"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Hn.action})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Symbol"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Hn.symbol})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Position side"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Hn.positionSide})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Quantity"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Hn.quantity})]})]}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{type:"button",onClick:()=>{sn(null),Ge.current=null},className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white font-medium hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"}),o.jsx("button",{type:"button",onClick:()=>{tn({open:!0,type:"endTrade",positionSide:Hn.positionSide}),sn(null)},className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-medium",children:"OK"})]})]})}),Cn&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Qn(null),children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-md w-full shadow-xl border border-gray-200 dark:border-gray-700",onClick:ke=>ke.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-lg mb-4 text-gray-900 dark:text-white",children:"Execute opposite trade (Hedge)"}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-400 mb-4",children:["You have ",o.jsx("strong",{children:Cn.currentPositionSide}),". We will place ",o.jsx("strong",{children:Cn.oppositePositionSide})," (",Cn.orderSide,") with same quantity."]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Symbol"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Cn.symbol})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Current position side"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Cn.currentPositionSide})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Opposite position side"}),o.jsxs("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:[Cn.oppositePositionSide," (",Cn.orderSide,")"]})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Quantity"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Cn.quantity})]})]}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{type:"button",onClick:()=>Qn(null),className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white font-medium hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"}),o.jsx("button",{type:"button",onClick:()=>{pe.current={symbol:Cn.symbol,positionSide:Cn.currentPositionSide,quantity:Cn.quantity},tn({open:!0,type:"hedge",hedgeSummary:`${Cn.symbol} ${Cn.oppositePositionSide} qty ${Cn.quantity}`}),Qn(null)},className:"px-4 py-2 rounded-lg bg-amber-600 hover:bg-amber-700 text-white font-medium",children:"OK"})]})]})}),an&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Un(null),children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-md w-full shadow-xl border border-gray-200 dark:border-gray-700",onClick:ke=>ke.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-lg mb-4 text-gray-900 dark:text-white",children:"Execute Trade in Exchange"}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Symbol"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:an.symbol})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Back Invest (USDT)"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:(an.backInvest||0).toFixed(2)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-gray-500 dark:text-gray-400 whitespace-nowrap",children:"Live Invest (USDT)"}),o.jsx("input",{type:"number",inputMode:"decimal",step:"any",min:"0",value:an.liveInvest,onChange:ke=>Un(Me=>Me?{...Me,liveInvest:ke.target.value.trim()}:null),placeholder:"0",autoComplete:"off",className:"flex-1 border border-gray-400 dark:border-gray-600 rounded px-2 py-1.5 bg-white dark:bg-[#333] text-gray-900 dark:text-white"})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Stop price"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:an.stopPrice||""})]})]}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{type:"button",onClick:()=>Un(null),className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white font-medium hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"}),o.jsx("button",{type:"button",disabled:!an.liveInvest||parseFloat(an.liveInvest)<=0,onClick:()=>{z.current={symbol:an.symbol,amount:an.liveInvest.trim(),stop_price:an.stopPrice.trim()},tn({open:!0,type:"execute"}),Un(null)},className:"px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"OK"})]})]})}),Ht&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>{yt(null),Wt(null)},children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-md w-full shadow-xl border border-gray-200 dark:border-gray-700",onClick:ke=>ke.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-lg mb-4 text-gray-900 dark:text-white",children:"Add Investment"}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Symbol"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Ht.symbol})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Position side"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Ht.positionSide})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Old investment (USDT)"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:(Ht.oldInvestment||0).toFixed(2)})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Old quantity"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:(Ht.oldQuantity||0).toFixed(4)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-gray-500 dark:text-gray-400 whitespace-nowrap",children:"New investment (USDT)"}),o.jsx("input",{type:"number",inputMode:"decimal",step:"any",min:"0",value:Ht.newAmount,onChange:ke=>yt(Me=>Me?{...Me,newAmount:ke.target.value.trim()}:null),placeholder:"0",autoComplete:"off",className:"flex-1 border border-gray-400 dark:border-gray-600 rounded px-2 py-1.5 bg-white dark:bg-[#333] text-gray-900 dark:text-white"})]}),Ht.newAmount&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total investment (USDT)"}),o.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:(parseFloat(Ht.oldInvestment||0)+parseFloat(Ht.newAmount||0)).toFixed(2)})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"New quantity"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:dn!=null?dn.toFixed(4):""})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total quantity"}),o.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:dn!=null?((Ht.oldQuantity||0)+dn).toFixed(4):""})]})]})]}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{type:"button",onClick:()=>{yt(null),Wt(null)},className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white font-medium hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"}),o.jsx("button",{type:"button",disabled:!Ht.newAmount||parseFloat(Ht.newAmount)<=0,onClick:()=>{Pe.current={symbol:Ht.symbol,positionSide:Ht.positionSide,amount:Ht.newAmount.trim()},tn({open:!0,type:"addInvestment"}),yt(null),Wt(null)},className:"px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"OK"})]})]})}),He&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Dn(null),children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-sm w-full shadow-xl border border-gray-200 dark:border-gray-700",onClick:ke=>ke.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-lg mb-4 text-gray-900 dark:text-white",children:"Confirm set stop price"}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Action"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:He.action})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Symbol"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:He.symbol})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Position side"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:He.positionSide})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Stop price"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:He.stopPrice||""})]})]}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{type:"button",onClick:()=>Dn(null),className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white font-medium hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"}),o.jsx("button",{type:"button",disabled:!He.stopPrice,onClick:()=>{ie.current={symbol:He.symbol,positionSide:He.positionSide,stopPrice:He.stopPrice},tn({open:!0,type:"setStopPrice",stopPrice:He.stopPrice}),Dn(null)},className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"OK"})]})]})}),o.jsx(G$,{open:Kt.open,onClose:()=>{Kt.type==="endTrade"&&(Ge.current=null),Kt.type==="setStopPrice"&&(ie.current=null),Kt.type==="addInvestment"&&(Pe.current=null),Kt.type==="execute"&&(z.current=null),Kt.type==="hedge"&&(pe.current=null),Kt.type==="clear"&&(Fe.current=null),Kt.type==="partialClose"&&(bt.current=null),tn({open:!1,type:null})},actionType:Kt.type,requireAmount:Kt.type==="partialClose",amountFirst:Kt.type==="partialClose",amountLabel:Kt.type==="execute"?"Amount":Kt.type==="partialClose"?"Quantity to close":"Investment amount",amountPlaceholder:Kt.type==="execute"?"0":Kt.type==="partialClose"&&Kt.position?String(Math.abs(parseFloat(Kt.position.positionAmt)||0)):"0",extraLabel:Kt.type==="setStopPrice"?"Stop price":Kt.type==="autoPilot"?"Action":Kt.type==="endTrade"?"Position side":Kt.type==="hedge"?"Hedge":Kt.type==="partialClose"?"Position":void 0,extraValue:Kt.type==="setStopPrice"?Kt.stopPrice??xn:Kt.type==="autoPilot"?Kt.autoEnable?"enable":"disable":Kt.type==="endTrade"?Kt.positionSide||"BOTH":Kt.type==="hedge"?Kt.hedgeSummary:Kt.type==="partialClose"&&Kt.position?`${(Kt.position.positionSide||"LONG").toString().toUpperCase()}  max ${Math.abs(parseFloat(Kt.position.positionAmt)||0)}`:void 0,onConfirm:Kt.type?$n(Kt.type):void 0})]})}const Q$=({gridPreview:t,filterBar:e})=>o.jsx("div",{style:{padding:"12px 16px",position:"relative"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:16,marginBottom:8,width:"100%",minWidth:0},children:[o.jsx("div",{style:{minWidth:220,minHeight:180},children:t}),o.jsx("div",{style:{flex:1,minWidth:0,maxWidth:"100%",overflowX:"auto",background:"rgba(255,255,255,0.04)",borderRadius:16,border:"1.5px solid #333",padding:8,marginLeft:0},children:o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:16,width:"100%",minWidth:0},children:e})})]})});function eW(){return new URLSearchParams(Ki().search)}const Nw=["2POLE_IN5LOOP","IMACD","2POLE_Direct_Signal","HIGHEST SWING HIGH","LOWEST SWING LOW","NORMAL SWING HIGH","NORMAL SWING LOW","ProGap","CrossOver","Spike","Kicker"],Tw=["1m","3m","5m","15m","30m","1h","4h","1d"],ld=[{label:"ID",value:"id"},{label:"UID",value:"uid"},{label:"Source",value:"source"},{label:"PL After Comm",value:"Pl_after_comm"},{label:"Plain Message",value:"plain_message"},{label:"JSON Message",value:"json_message"},{label:"Timestamp",value:"timestamp"},{label:"Machine ID",value:"machine_id"}],tW=[{label:"Machine ID",value:"MachineId"},{label:"Unique IDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",value:"Unique_id"},{label:"Candle Time",value:"Candel_time"},{label:"Fetcher Trade Time",value:"Fetcher_Trade_time"},{label:"Operator Trade Time",value:"Operator_Trade_time"},{label:"Pair",value:"Pair"},{label:"Interval",value:"Interval"},{label:"Action",value:"Action"},{label:"PL After Comm",value:"Pl_after_comm"},{label:"Hedge Buy PL",value:"Hedge_Buy_pl"},{label:"Hedge Sell PL",value:"Hedge_Sell_pl"},{label:"Type",value:"Type"},{label:"Operator Close Time",value:"Operator_Close_time"},{label:"Signal From",value:"SignalFrom"},{label:"Profit Journey",value:"Profit_journey"},{label:"Commission Journey",value:"Commision_journey"},{label:"Stop Price",value:"Stop_price"},{label:"Save Price",value:"Save_price"},{label:"Min Comm",value:"Min_comm"},{label:"Hedge",value:"Hedge"},{label:"Hedge 1-1 Bool",value:"Hedge_1_1_bool"},{label:"Hedge Order Size",value:"Hedge_order_size"},{label:"Min Comm After Hedge",value:"Min_comm_after_hedge"},{label:"Min Profit",value:"Min_profit"},{label:"Buy Qty",value:"Buy_qty"},{label:"Buy Price",value:"Buy_price"},{label:"Buy PL",value:"Buy_pl"},{label:"Added Qty",value:"Added_qty"},{label:"Sell Qty",value:"Sell_qty"},{label:"Sell Price",value:"Sell_price"},{label:"Sell PL",value:"Sell_pl"},{label:"Close Price",value:"Close_price"},{label:"Commission",value:"Commission"},{label:"Investment",value:"Investment"},{label:"Swing1",value:"Swing1"},{label:"Swing2",value:"Swing2"},{label:"Swing3",value:"Swing3"},{label:"Swing4",value:"Swing4"},{label:"Swing5",value:"Swing5"},{label:"Hedge Swing High Point",value:"Hedge_Swing_High_Point"},{label:"Hedge Swing Low Point",value:"Hedge_Swing_Low_Point"},{label:"Temp High Point",value:"Temp_High_Point"},{label:"Temp Low Point",value:"Temp_Low_Point"}],Cw="LABEL_ROW";function nW({item:t,index:e,moveLabel:n,children:r,onHover:s,onDrop:l}){const c=Kr.useRef(null),[,d]=oy({accept:Cw,hover(p){p.index!==e&&(n(p.index,e),p.index=e,s&&s())},drop(){l&&l()}}),[{isDragging:h},g]=ly({type:Cw,item:{index:e},collect:p=>({isDragging:p.isDragging()})});return g(d(c)),o.jsx("div",{ref:c,style:{opacity:h?.5:1,cursor:"grab",width:"auto",minWidth:160,maxWidth:340,flex:"1 1 220px",marginBottom:0,background:"inherit",boxSizing:"border-box",display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:r})}function rW({items:t,moveLabel:e,renderRow:n,activeJsonLabels:r,setActiveJsonLabels:s,showUnchecked:l,dragOverIndex:c,setDragOverIndex:d}){return o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12,width:"100%",alignItems:"flex-start",justifyContent:"flex-start",boxSizing:"border-box",minHeight:60,position:"relative"},children:t.map((h,g)=>o.jsxs("div",{style:{position:"relative",minWidth:220,maxWidth:340,flex:"1 1 220px",boxSizing:"border-box",marginBottom:0,display:"flex"},children:[c===g&&o.jsxs("div",{style:{position:"absolute",top:-8,left:0,width:"100%",height:0,zIndex:10,pointerEvents:"none",display:"flex",alignItems:"center"},children:[o.jsx("div",{style:{width:32,height:32,background:"#0ea5e9",color:"#fff",borderRadius:"50%",fontWeight:700,fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #0ea5e944",marginLeft:8,marginBottom:2},children:g+1}),o.jsx("div",{style:{flex:1,height:4,background:"#ffe066",borderRadius:2,marginLeft:12,marginRight:8}})]}),o.jsxs(nW,{item:h,index:g,moveLabel:e,onHover:()=>d(g),onDrop:()=>d(null),children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,minWidth:22},children:[o.jsxs("span",{style:{fontWeight:700,color:"#0ea5e9",minWidth:22,textAlign:"right"},children:[g+1,"."]}),h&&h.type==="json"&&Array.isArray(h.intervals)&&(()=>{const p=(h.intervals||[]).filter(({exists:k})=>k),y=p.filter(({interval:k})=>{var S;return!!((S=r==null?void 0:r[h.value])!=null&&S[k])}),_=p.length>0&&y.length===p.length,b=()=>{const k=!_;s(S=>{const E={...S};return E[h.value]||(E[h.value]={}),p.forEach(({interval:O})=>{E[h.value][O]=k}),E})};return o.jsxs("button",{onClick:b,style:{padding:"2px 8px",borderRadius:4,border:"none",fontWeight:600,fontSize:12,background:_?"#22c55e":"#ef4444",color:"#fff",cursor:"pointer",transition:"background 0.2s",boxShadow:_?"0 2px 4px #22c55e44":"0 2px 4px #ef444444",minWidth:36},title:`${_?"Uncheck":"Check"} all intervals for ${(h==null?void 0:h.label)||""}`,children:[y.length,"/",p.length]})})()]}),n&&n(h,g)]})]},h.type+"_"+h.value))})}function sW({stateKeyFromUrl:t}){const[e,n]=x.useState(()=>{try{const r=localStorage.getItem(t);if(r){const s=JSON.parse(r);if(s.formattedRow)return{status:"ok",formattedRow:s.formattedRow,rawTrade:s.rawTrade??null}}}catch{}return{status:"pending"}});if(x.useEffect(()=>{if(e.status!=="pending")return;let r=0;const s=25,l=setInterval(()=>{r++;try{const c=localStorage.getItem(t);if(c){const d=JSON.parse(c);if(d.formattedRow){n({status:"ok",formattedRow:d.formattedRow,rawTrade:d.rawTrade??null});return}}}catch{}r>=s&&n({status:"failed"})},100);return()=>clearInterval(l)},[t,e.status]),e.status==="ok"){try{localStorage.removeItem(t)}catch{}return o.jsx(ZT,{formattedRow:e.formattedRow,rawTrade:e.rawTrade})}return e.status==="failed"?o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4 bg-[#0f0f0f] text-white p-4",children:[o.jsx("p",{className:"text-lg",children:"Could not load trade. The link may have expired."}),o.jsx("button",{type:"button",onClick:()=>window.close(),className:"px-4 py-2 rounded-lg bg-teal-600 hover:bg-teal-700",children:"Close tab"})]}):o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#0f0f0f] text-white p-4",children:o.jsx("p",{className:"text-lg",children:"Opening trade"})})}const iW=()=>{var di,R;const e=Ki().state||{},n=eW(),r=n.get("stateKey");if(e.formattedRow)return o.jsx(ZT,{formattedRow:e.formattedRow,rawTrade:e.rawTrade??null});if(r)return o.jsx(sW,{stateKeyFromUrl:r});const s=n.get("uid")||"",l=n.get("interval")||"15m",c=n.get("type")||"Regular",d=w=>{if(!w)return"";try{const N=new Date(w);if(isNaN(N.getTime()))return w;const I=N.getUTCDate().toString().padStart(2,"0"),ne=(N.getUTCMonth()+1).toString().padStart(2,"0"),ae=N.getUTCFullYear().toString().slice(-2),ge=N.getUTCHours().toString().padStart(2,"0"),Te=N.getUTCMinutes().toString().padStart(2,"0");return`${I}-${ne}-${ae} ${ge}:${Te}`}catch{return w}},h=w=>{const N=["Candle_Time","timestamp","created_at","Time","Candel_time","Fetcher_Trade_time","Operator_Trade_time","Operator_Close_time","candle_time","time","date"],I=["processing_time_ms","processing_time"];return N.some(ae=>w.toLowerCase().includes(ae.toLowerCase()))&&!I.some(ae=>w.toLowerCase().includes(ae.toLowerCase()))},g=(w,N=!1)=>{if(w==null)return"";let I=w;if(typeof w=="string")try{I=JSON.parse(w.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null"))}catch{return w}if(typeof I!="object"||Array.isArray(I))return String(w);const ne=Te=>Te.replace(/[_]/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b\w/g,de=>de.toUpperCase()),ae=Object.entries(I).map(([Te,de])=>`${ne(Te)}: ${de??""}`);if(N)return ae.join(`
`);const ge=3;return ae.length>ge?`${ae.slice(0,ge).join(" | ")} `:ae.join(" | ")},p=w=>(w||"").replace(/[_]/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b\w/g,N=>N.toUpperCase()),y=w=>w==="json_message"?"":w,_=(w,N,{forTooltip:I=!1}={})=>{if(w==null||w==="")return"";if(N){const ne=N.toLowerCase();if(ne.includes("plain_message")||ne.includes("json_message"))return g(w,I)}return h(N)?d(w):String(w)},[b,k]=x.useState(()=>{const w=localStorage.getItem("pair_stats_theme");if(w)return w==="dark";const N=localStorage.getItem("theme");return N?N==="dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{b?(document.body.classList.add("dark"),localStorage.setItem("pair_stats_theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("pair_stats_theme","light"))},[b]),x.useEffect(()=>{const w=N=>{if(N.key==="theme"||N.key==="pair_stats_theme"){const I=N.newValue==="dark";k(I)}};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[]);const[S,E]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_selected_signals");if(w)return JSON.parse(w);const N={};return Nw.forEach(I=>N[I]=!0),N}),[O,T]=x.useState(()=>localStorage.getItem("liveTradeView_signal_radio_mode")==="true"),[D,F]=x.useState(()=>localStorage.getItem("liveTradeView_signal_toggle_all")==="true");x.useEffect(()=>{localStorage.setItem("liveTradeView_selected_signals",JSON.stringify(S))},[S]);const[Z,K]=x.useState([]),L=w=>{if(w===!0||w==="true"||w===1||w==="1")return!0;if(typeof w=="string"){const N=parseFloat(w);return!isNaN(N)&&N>0}return!1},Q=w=>w==null?"":String(w),se=x.useMemo(()=>Z.map(w=>({MachineId:Q(w.machineid??w.MachineId??w.machine_id??w.machineID??w.id),Active:L(w.active??w.Active??w.is_active??w.status)})).filter(w=>w.MachineId),[Z]);x.useEffect(()=>{(async()=>{try{const I=await(await Nn("/api/machines")).json();K(Array.isArray(I.machines)?I.machines:[])}catch{K([])}})()},[]);const ce=se,[ye,te]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_selected_machines");if(w)try{return JSON.parse(w)}catch(I){console.error(" Error parsing selectedMachines from localStorage:",I)}const N={};return ce.forEach(I=>N[I.MachineId]=!0),N});x.useEffect(()=>{if(ce.length&&Object.keys(ye).length===0){const w={};ce.forEach(N=>{w[N.MachineId]=!0}),te(w)}},[ce,ye]);const[xe,Ce]=x.useState(()=>localStorage.getItem("liveTradeView_machine_radio_mode")==="true"),[at,le]=x.useState(()=>localStorage.getItem("liveTradeView_machine_toggle_all")==="true");x.useEffect(()=>{localStorage.setItem("liveTradeView_selected_machines",JSON.stringify(ye))},[ye]);const[Ve,Ue]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_selected_actions");return w?JSON.parse(w):{BUY:!0,SELL:!0}}),[Ze,M]=x.useState(()=>localStorage.getItem("liveTradeView_action_radio_mode")==="true"),[oe,P]=x.useState(()=>localStorage.getItem("liveTradeView_action_toggle_all")==="true"),[B,j]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_live_filter");if(w)try{return JSON.parse(w)}catch{return{true:!0,false:!0}}return{true:!0,false:!0}});x.useEffect(()=>{localStorage.setItem("liveTradeView_live_filter",JSON.stringify(B))},[B]);const[V,fe]=x.useState(()=>localStorage.getItem("liveTradeView_live_radio_mode")==="true");x.useEffect(()=>{localStorage.setItem("liveTradeView_live_radio_mode",V?"true":"false")},[V]),x.useEffect(()=>{localStorage.setItem("liveTradeView_selected_actions",JSON.stringify(Ve))},[Ve]);const[lt,et]=x.useState([]);x.useEffect(()=>{Nn("/api/trades").then(w=>w.json()).then(w=>{const N=Array.isArray(w.trades)?w.trades:[],I=s?N.filter(ne=>ne.pair&&String(ne.pair)===s||ne.Pair&&String(ne.Pair)===s||ne.unique_id&&String(ne.unique_id)===s||ne.Unique_ID&&String(ne.Unique_ID)===s):N;et(I)}).catch(()=>et([]))},[s]);const ht=w=>{if(!w)return"";let N=String(w).replace(/<[^>]+>/g,"").replace(/\s+/g,"").replace(/[^A-Z0-9]/gi,"").toUpperCase();return N.startsWith("BINANCE")&&(N=N.slice(7)),N=N.replace(/PERPETUALCONTRACT|PERP|CHART/gi,"").replace(/\d{6,}$/,""),N||""},At=w=>{if(!w||typeof w!="string")return"";const N=String(w).toUpperCase(),I=N.indexOf("BUY"),ne=N.indexOf("SELL");let ae=-1;return I>=0&&ne>=0?ae=Math.min(I,ne):I>=0?ae=I:ne>=0&&(ae=ne),ae>0&&String(w).slice(0,ae).replace(/[^A-Z0-9]/gi,"").toUpperCase()||""},xn=x.useMemo(()=>{var I,ne;const w=ht(((I=lt[0])==null?void 0:I.pair)??((ne=lt[0])==null?void 0:ne.Pair)??"");if(w)return w;const N=At(s);return N||ht(s)||""},[lt,s]),Bt=5*60*1e3,[Kt,tn]=x.useState(null);x.useEffect(()=>{if(!xn)return;const w=async()=>{try{const I=await Nn(Rn("/api/calculate-signals"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:xn,candle:"regular"})}),ne=await I.json().catch(()=>({}));if(!I.ok){console.warn("[LiveTradeViewPage] CalculateSignals:",(ne==null?void 0:ne.message)||I.statusText);return}ne!=null&&ne.ok&&(ne!=null&&ne.intervals)&&tn(ne)}catch(I){console.warn("[LiveTradeViewPage] CalculateSignals:",(I==null?void 0:I.message)||I)}};w();const N=setInterval(w,Bt);return()=>clearInterval(N)},[xn]);const[Hn,sn]=x.useState([]),[He,Dn]=x.useState(1),[Ht,yt]=x.useState(1),[dn,Wt]=x.useState(0),[an,Un]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_logs_per_page");return w?parseInt(w):100}),[Cn,Qn]=x.useState(!0),me="liveTradeView_signals_panel_expanded",[We,Ge]=x.useState(()=>localStorage.getItem(me)!=="false"),ie=x.useCallback(()=>{Ge(w=>{const N=!w;return localStorage.setItem(me,String(N)),N})},[]),Pe="liveTradeView_upper_panel_expanded",[z,pe]=x.useState(()=>localStorage.getItem(Pe)!=="false"),Fe=x.useCallback(()=>{pe(w=>{const N=!w;return localStorage.setItem(Pe,String(N)),N})},[]),[bt,dt]=x.useState([]),[Zt,Vt]=x.useState(!1);x.useEffect(()=>{Qn(!0),Dn(1);const w=Rn(s?`/api/bot-event-logs?uid=${encodeURIComponent(s)}&page=1&limit=${an}`:`/api/bot-event-logs?page=1&limit=${an}`);Nn(w).then(N=>{if(!N.ok)throw new Error(`HTTP ${N.status}: ${N.statusText}`);return N.json()}).then(N=>{var ne,ae;const I=Array.isArray(N.logs)?N.logs:[];if(sn(I),Wt(((ne=N.pagination)==null?void 0:ne.total)||I.length),yt(((ae=N.pagination)==null?void 0:ae.totalPages)||1),Qn(!1),Array.isArray(N.logs)&&N.logs.length>0){let ge;try{ge=typeof N.logs[0].json_message=="string"?JSON.parse(N.logs[0].json_message):N.logs[0].json_message}catch(Te){console.error(" Error parsing JSON message:",Te);return}}}).catch(N=>{console.error("[LiveTradeViewPage] Error fetching bot event logs:",N),console.error(" Error details:",{message:N.message,stack:N.stack,uid:s,url:w}),sn([]),Qn(!1)})},[s,an]);const[kt,ct]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_selected_candle_types");return w?JSON.parse(w):{Regular:!0,Heiken:!1}});x.useEffect(()=>{localStorage.setItem("liveTradeView_selected_candle_types",JSON.stringify(kt))},[kt]),x.useMemo(()=>{const w={Regular:0,Heiken:0,Unknown:0};return Hn.forEach(N=>{var ge;const I=((ge=N.candle_pattern)==null?void 0:ge.toLowerCase())||"";I==="regular"||I==="normal"||I==="regular_candle"?w.Regular++:I==="heiken"||I==="heikin"||I==="heiken-ashi"||I==="heiken_ashi"||I==="heiken_candle"?w.Heiken++:w.Unknown++}),w},[Hn]);function ft(w){return w.filter(I=>!(Object.keys(ye).length&&!ye[Q(I.machine_id)]))}const Xt=ft(Hn),pn=Xt,Yn=w=>{if(w<10||w>5e3)return;Un(w),Dn(1),localStorage.setItem("liveTradeView_logs_per_page",w.toString()),Qn(!0);const N=Rn(s?`/api/bot-event-logs?uid=${encodeURIComponent(s)}&page=1&limit=${w}`:`/api/bot-event-logs?page=1&limit=${w}`);Nn(N).then(I=>I.json()).then(I=>{var ae,ge;const ne=Array.isArray(I.logs)?I.logs:[];sn(ne),Wt(((ae=I.pagination)==null?void 0:ae.total)||ne.length),yt(((ge=I.pagination)==null?void 0:ge.totalPages)||1),Qn(!1)}).catch(I=>{console.error("[LiveTradeViewPage] Error fetching bot event logs:",I),sn([]),Qn(!1)})},Tn=w=>{if(w<1||w>Ht)return;Qn(!0),Dn(w);const N=Rn(s?`/api/bot-event-logs?uid=${encodeURIComponent(s)}&page=${w}&limit=${an}`:`/api/bot-event-logs?page=${w}&limit=${an}`);Nn(N).then(I=>I.json()).then(I=>{const ne=Array.isArray(I.logs)?I.logs:[];sn(ne)}).catch(I=>{console.error("[LiveTradeViewPage] Error fetching bot event logs:",I),sn([])}).finally(()=>{Qn(!1)})},Gn=o.jsx(Z0,{canonicalSignalKeys:Nw,selectedSignals:S,setSelectedSignals:E,signalRadioMode:O,setSignalRadioMode:T,signalToggleAll:D,setSignalToggleAll:F,allMachines:ce,selectedMachines:ye,setSelectedMachines:te,machineRadioMode:xe,setMachineRadioMode:Ce,machineToggleAll:at,setMachineToggleAll:le,selectedActions:Ve,setSelectedActions:Ue,actionRadioMode:Ze,setActionRadioMode:M,actionToggleAll:oe,setActionToggleAll:P,liveFilter:B,setLiveFilter:j,liveRadioMode:V,setLiveRadioMode:fe,trades:lt,darkMode:b});localStorage.getItem("pair_stats_reputation_enabled"),localStorage.getItem("pair_stats_reputation_intensity"),localStorage.getItem("pair_stats_reputation_mode");const In=o.jsxs("div",{className:`p-4 rounded-lg border ${b?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-200 text-gray-800"}`,children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Bot Event Log Summary"}),Cn?o.jsx("div",{className:"py-6 text-center text-base font-medium opacity-80",children:"Loading logs..."}):o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-500",children:Xt.length}),o.jsx("div",{className:"text-sm text-gray-500",children:"Total Events"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-500",children:Xt.filter(w=>w.pl_after_comm>0).length}),o.jsx("div",{className:"text-sm text-gray-500",children:"Positive PL"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-500",children:Xt.filter(w=>w.pl_after_comm<0).length}),o.jsx("div",{className:"text-sm text-gray-500",children:"Negative PL"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-500",children:new Set(Xt.map(w=>w.machine_id)).size}),o.jsx("div",{className:"text-sm text-gray-500",children:"Unique Machines"})]})]})]}),bn=x.useMemo(()=>{const w={};return Xt.forEach(N=>{N.uid&&(w[N.uid]=N)}),w},[Xt]),[re,Ae]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_list_font_size");return w?parseFloat(w):1});x.useEffect(()=>{localStorage.setItem("liveTradeView_list_font_size",re)},[re]),x.useEffect(()=>{const w=localStorage.getItem("liveTradeView_selected_json_columns");w&&JSON.parse(w)},[JSON.stringify(bt)]),x.useEffect(()=>{},[]),bt&&bt.length>0,x.useEffect(()=>{localStorage.getItem("liveTradeView_selected_columns")},[]),x.useEffect(()=>{},[]),x.useEffect(()=>{localStorage.getItem("liveTradeView_selected_trade_columns")},[]),x.useEffect(()=>{},[]);const $e="liveTradeView_regular_labels",zt=ld.map(w=>w.value),Xe=()=>{const w=localStorage.getItem($e);return w?JSON.parse(w):zt},[tt,rt]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_settings_modal_open");return w?JSON.parse(w):!1}),[A,G]=x.useState(Xe()),U="liveTradeView_json_labels",J=()=>{const w=localStorage.getItem(U);if(w)try{const N=JSON.parse(w);return N&&typeof N=="object"?N:{}}catch{return{}}return{}},[Y,X]=x.useState(J());function we(w){const N=new Set,I={};w.forEach((ae,ge)=>{var Ke;console.log(`=== Log ${ge} ===`),console.log("Full log object:",ae);let Te=null;if(ae.parsed_json_message&&typeof ae.parsed_json_message=="object")Te=ae.parsed_json_message,console.log("Using parsed_json_message:",Te);else if(ae.json_message)try{if(typeof ae.json_message=="string"){let Ft=ae.json_message.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Te=JSON.parse(Ft),console.log("Parsed json_message:",Te)}else Te=ae.json_message,console.log("Using json_message directly:",Te)}catch(Ft){console.error("Error parsing json_message:",Ft),console.error("Problematic json_message:",ae.json_message)}else if(ae.json_data)try{if(typeof ae.json_data=="string"){let Ft=ae.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Te=JSON.parse(Ft),console.log("Parsed json_data:",Te)}else Te=ae.json_data,console.log("Using json_data directly:",Te)}catch(Ft){console.error("Error parsing json_data:",Ft),console.error("Problematic json_data:",ae.json_data);return}if(!Te)return;let de;try{de=(Ke=Te==null?void 0:Te.signal_data)==null?void 0:Ke.all_last_rows}catch(Ft){console.log("[extractJsonLabelsAndIntervals] Error accessing all_last_rows:",Ft,Te),de=void 0}de&&typeof de=="object"&&Object.keys(de).forEach(Ft=>{if(Ft==="candle_type")return;N.add(Ft);const hn=de[Ft];hn&&typeof hn=="object"&&Object.keys(hn).forEach(An=>{I[An]||(I[An]=new Set),I[An].add(Ft)})}),Object.keys(Te||{}).forEach(Ft=>{I[Ft]||(I[Ft]=new Set),I[Ft].add("json_message"),N.add("json_message")})});const ne=Array.from(N).sort((ae,ge)=>{const Te=["1m","3m","5m","15m","30m","1h","2h","4h","1d"],de=Te.indexOf(ae),Ke=Te.indexOf(ge);return de===-1&&Ke===-1?ae.localeCompare(ge):de===-1?1:Ke===-1?-1:de-Ke});return Object.entries(I).map(([ae,ge])=>({label:p(ae),value:ae,intervals:ne.map(Te=>({interval:Te,exists:ge.has(Te)}))}))}x.useEffect(()=>{if(Hn.length>0){const w=we(Hn);dt(w),Vt(!0)}},[Hn,s,A]);function je(w,N){const I={};w.forEach(Ke=>{I[Ke.value]=Ke});const ne=Object.keys(N||{}),ae=ne.filter(Ke=>I[Ke]),ge={};w.forEach(Ke=>{!N[Ke.value]&&!ge[Ke.value]&&(ge[Ke.value]=Ke)});const Te=Object.values(ge),de=ne.filter(Ke=>!I[Ke]);return{existed:ae,newlyAdded:Te,deleted:de}}je(bt,Y||{});const[_e,Ee]=x.useState(!1);Zt?bt.filter(w=>Y[w.value]).flatMap(w=>(w.intervals||[]).filter(N=>{var I;return(I=Y[w.value])==null?void 0:I[N]}).map(N=>({parent:w,interval:N}))):Object.keys(Y).flatMap(w=>Object.keys(Y[w]||{}).filter(N=>Y[w][N]).map(N=>({parent:{label:w,value:w},interval:N})));const Re="liveTradeView_unified_labels_order";function gt(){const w=[],N=new Set;ld.forEach(ne=>{N.has(ne.value)||(w.push({type:"regular",value:ne.value,label:ne.label}),N.add(ne.value))});const I=new Set;return bt.forEach(ne=>{I.has(ne.value)||(w.push({type:"json",value:ne.value,label:ne.label||p(ne.value),intervals:ne.intervals}),I.add(ne.value))}),w}function Nt(w){const N=localStorage.getItem(Re);if(N)try{const I=JSON.parse(N),ne={};w.forEach(de=>{ne[de.type+"_"+de.value]=de});const ae=I.map(de=>ne[de.type+"_"+de.value]).filter(Boolean),ge=new Set(I.map(de=>de.type+"_"+de.value)),Te=w.filter(de=>!ge.has(de.type+"_"+de.value));return[...ae,...Te]}catch{return w}return w}const[Ut,vt]=x.useState(()=>Nt(gt())),$t=x.useRef(!1);x.useEffect(()=>{if($t.current)return;const w=gt();vt(N=>{const I=new Set(N.map(de=>de.type+"_"+de.value)),ne=new Set(w.map(de=>de.type+"_"+de.value));let ae=N.filter(de=>ne.has(de.type+"_"+de.value));const ge=w.filter(de=>!I.has(de.type+"_"+de.value));return[...ae,...ge]})},[JSON.stringify(bt)]),x.useEffect(()=>{const w=gt();vt(Nt(w))},[JSON.stringify(bt)]);const[fn,Sn]=x.useState(!1),[mn,Ot]=x.useState(!1),[ur,Mr]=x.useState({}),[Jn,ar]=x.useState(!1);x.useEffect(()=>{const w=localStorage.getItem("pair_stats_interval_master_checked");w?Mr(JSON.parse(w)):Tw.forEach(N=>Mr(I=>({...I,[N]:!0})))},[]),x.useEffect(()=>{localStorage.setItem("pair_stats_interval_master_checked",JSON.stringify(ur))},[ur]),x.useEffect(()=>{const w=localStorage.getItem("liveTradeView_all_regular_checked");Ot(w?JSON.parse(w):!1)},[]),x.useEffect(()=>{localStorage.setItem("liveTradeView_all_regular_checked",JSON.stringify(mn))},[mn]),x.useEffect(()=>{const w=localStorage.getItem("liveTradeView_show_unchecked");Sn(w?JSON.parse(w):!1)},[]),x.useEffect(()=>{localStorage.setItem("liveTradeView_show_unchecked",JSON.stringify(fn))},[fn]);const Lr="liveTradeView_settings_modal_pos",er="liveTradeView_settings_modal_size",Ne=()=>{const w=localStorage.getItem(Lr);let N={x:window.innerWidth/2-400,y:window.innerHeight/2-300};if(w)try{const Ke=JSON.parse(w);typeof Ke.x=="number"&&typeof Ke.y=="number"&&(N=Ke)}catch{}const I=nt(),ne=window.innerWidth,ae=window.innerHeight;let ge=Math.min(I.width,ne);Math.min(I.height,ae);let Te=Math.max(0,Math.min(ne-ge,N.x)),de=N.y;return de<0&&(de=0),de>ae-48&&(de=ae-48),{x:Te,y:de}},nt=()=>{const w=localStorage.getItem(er);let N={width:700,height:500};if(w)try{const ae=JSON.parse(w);typeof ae.width=="number"&&typeof ae.height=="number"&&(N=ae)}catch{}const I=window.innerWidth,ne=window.innerHeight;return{width:Math.min(N.width,I),height:Math.min(N.height,ne)}},[wt,nn]=x.useState(Ne),[ln,Dt]=x.useState(nt),[yn,lr]=x.useState(!1),Pt=x.useRef({x:0,y:0});function $n(w){lr(!0),Pt.current={x:w.clientX-wt.x,y:w.clientY-wt.y},document.body.style.userSelect="none"}x.useEffect(()=>{function w(I){if(!yn)return;const ne=window.innerWidth,ae=window.innerHeight,ge=document.querySelector('[role="dialog"][aria-label="Settings"]');let Te=ge?ge.offsetWidth:ln.width;ge?ge.offsetHeight:ln.height;const de=Math.floor(.05*Te),Ke=48;let Ft=Math.max(-Te+de,Math.min(ne-de,I.clientX-Pt.current.x)),hn=Math.max(Ke*-.9,Math.min(ae-48,I.clientY-Pt.current.y));nn({x:Ft,y:hn})}function N(){lr(!1),document.body.style.userSelect=""}return yn&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",N)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",N)}},[yn,wt,ln]);const rn=x.useRef(null),[ke,Me]=x.useState(!1),Le=x.useRef({x:0,y:0,width:0,height:0});function Ct(w){w.stopPropagation(),Me(!0);const N=rn.current;Le.current={x:w.clientX,y:w.clientY,width:N?N.offsetWidth:ln.width,height:N?N.offsetHeight:ln.height},document.body.style.userSelect="none"}x.useEffect(()=>{function w(I){if(!ke)return;const ne=window.innerWidth-wt.x,ae=window.innerHeight-wt.y;let ge=Math.max(200,Math.min(ne,Le.current.width+(I.clientX-Le.current.x))),Te=Math.max(100,Math.min(ae,Le.current.height+(I.clientY-Le.current.y)));Dt({width:ge,height:Te});const de=rn.current;de&&(de.style.width=ge+"px",de.style.height=Te+"px")}function N(){Me(!1),document.body.style.userSelect=""}return ke&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",N)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",N)}},[ke,wt,ln]),x.useEffect(()=>{localStorage.setItem(er,JSON.stringify(ln))},[ln]),x.useEffect(()=>{function w(){const N=document.querySelector('[role="dialog"][aria-label="Settings"]');if(!N)return;const I=N.getBoundingClientRect();let ne=wt.x,ae=wt.y;I.width,I.height;const ge=window.innerWidth,Te=window.innerHeight,de=48,Ke=Math.floor(.05*I.width),Ft=Math.floor(.05*I.height);I.right>ge-Ke&&(ne=Math.max(0,ge-Ke-I.width)),I.bottom>Te-Ft&&(ae=Math.max(de,Te-Ft-I.height)),I.left<-I.width+Ke&&(ne=-I.width+Ke),I.top<-I.height+Ft&&(ae=-I.height+Ft),I.width>ge,I.height>Te,(ne!==wt.x||ae!==wt.y)&&nn({x:ne,y:ae}),N.style&&(N.style.maxWidth=ge+"px",N.style.maxHeight=Te+"px",I.width>ge&&(N.style.width=ge+"px"),I.height>Te&&(N.style.height=Te+"px"))}return window.addEventListener("resize",w),w(),()=>window.removeEventListener("resize",w)},[wt]),x.useEffect(()=>{localStorage.setItem(Lr,JSON.stringify(wt))},[wt]);const[pt,Yt]=x.useState(!1),St="liveTradeView_settings_modal_scale",[q,ee]=x.useState(()=>{const w=localStorage.getItem(St);return w?parseFloat(w):1});x.useEffect(()=>{localStorage.setItem(St,q)},[q]),x.useEffect(()=>{if(tt)Yt(!0);else{const w=setTimeout(()=>Yt(!1),180);return()=>clearTimeout(w)}},[tt]),x.useEffect(()=>{localStorage.setItem("liveTradeView_settings_modal_open",JSON.stringify(tt))},[tt]),x.useEffect(()=>{function w(N){tt&&N.key==="Escape"&&rt(!1)}return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[tt]);const[ve,Qe]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_settings_modal_opacity");return w?parseFloat(w):1});x.useEffect(()=>{localStorage.setItem("listview_settings_modal_opacity",ve)},[ve]);const[ot,xt]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_label_font_size");return w?parseFloat(w):1}),[Gt,ze]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_label_wrap");return w?JSON.parse(w):!1});x.useEffect(()=>{localStorage.setItem("listview_label_font_size",ot)},[ot]),x.useEffect(()=>{localStorage.setItem("listview_label_wrap",JSON.stringify(Gt))},[Gt]);const[wn,Lt]=x.useState(()=>{const w=localStorage.getItem("liveTradeView_filter_bar_visible");return w?JSON.parse(w):!0});x.useEffect(()=>{localStorage.setItem("liveTradeView_filter_bar_visible",JSON.stringify(wn))},[wn]);function Pn(){const w=Ut.map(ne=>({type:ne.type,value:ne.value}));localStorage.setItem(Re,JSON.stringify(w)),localStorage.setItem($e,JSON.stringify(A)),localStorage.setItem(U,JSON.stringify(Y));const N=document.createElement("div");N.textContent=" Settings saved successfully!",N.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #22c55e;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      z-index: 10000;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
      animation: slideIn 0.3s ease-out;
    `;const I=document.createElement("style");I.textContent=`
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
    `,document.head.appendChild(I),document.body.appendChild(N),setTimeout(()=>{N.parentNode&&N.parentNode.removeChild(N)},3e3)}const[qt,fr]=x.useState(null),[Xn,vr]=x.useState("asc"),Ar=(w,N,I=null,ne=null)=>{const ae={type:w,key:N,parentKey:I,interval:ne};qt&&JSON.stringify(qt)===JSON.stringify(ae)?vr(ge=>ge==="asc"?"desc":"asc"):(fr(ae),vr("asc"))},rr=(w,N)=>{var Te,de,Ke;if(!N)return;const{type:I,key:ne,parentKey:ae,interval:ge}=N;if(I==="regular")return w[ne];if(I==="trade")return(Te=bn[w.uid])==null?void 0:Te[ne];if(I==="json"&&ae&&ge){let Ft={};try{if(typeof w.json_message=="string"){let An=w.json_message.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Ft=JSON.parse(An)}else Ft=w.json_message||{}}catch{Ft={}}return(Ke={...((de=Ft==null?void 0:Ft.signal_data)==null?void 0:de.all_last_rows)||{},json_message:Ft&&typeof Ft=="object"&&!Array.isArray(Ft)?Ft:{}}[ge])==null?void 0:Ke[ae]}},mr=w=>qt?[...w].sort((N,I)=>{let ne=rr(N,qt),ae=rr(I,qt);if(typeof ne=="object"&&(ne=JSON.stringify(ne)),typeof ae=="object"&&(ae=JSON.stringify(ae)),qt.type==="regular"&&h(qt.key)){const de=new Date(ne),Ke=new Date(ae);if(!isNaN(de.getTime())&&!isNaN(Ke.getTime()))return de<Ke?Xn==="asc"?-1:1:de>Ke?Xn==="asc"?1:-1:0}const ge=parseFloat(ne),Te=parseFloat(ae);return!isNaN(ge)&&!isNaN(Te)?Xn==="asc"?ge-Te:Te-ge:(ne=ne==null?"":String(ne),ae=ae==null?"":String(ae),ne<ae?Xn==="asc"?-1:1:ne>ae?Xn==="asc"?1:-1:0)}):w,[vs,sr]=x.useState(null);function is(){const w={width:700,height:500},N=window.innerWidth,I=window.innerHeight,ne=Math.max(0,Math.floor((N-w.width)/2)),ae=Math.max(0,Math.floor((I-w.height)/2));nn({x:ne,y:ae}),Dt(w),ee(1),localStorage.setItem(Lr,JSON.stringify({x:ne,y:ae})),localStorage.setItem(er,JSON.stringify(w)),localStorage.setItem(St,"1.0")}const[wr,Ks]=x.useState(null),Mn="liveTradeView_filter_table_spacing",[jn,qr]=x.useState(()=>{const w=localStorage.getItem(Mn);return w?parseInt(w):0});x.useEffect(()=>{localStorage.setItem(Mn,jn.toString())},[jn]);const[os,bs]=x.useState(null);function si(w,N){w.stopPropagation(),Me(!0),bs(N);const I=rn.current;Le.current={x:w.clientX,y:w.clientY,width:I?I.offsetWidth:ln.width,height:I?I.offsetHeight:ln.height,left:I?I.offsetLeft:wt.x,top:I?I.offsetTop:wt.y},document.body.style.userSelect="none"}x.useEffect(()=>{function w(I){if(!ke||!os)return;let{x:ne,y:ae,width:ge,height:Te,left:de,top:Ke}=Le.current,Ft=I.clientX-ne,hn=I.clientY-ae,An=ge,xr=Te,Or=wt.x,yr=wt.y;switch(os){case"right":An=Math.max(200,ge+Ft);break;case"left":An=Math.max(200,ge-Ft),Or=de+Ft;break;case"bottom":xr=Math.max(100,Te+hn);break;case"top":xr=Math.max(100,Te-hn),yr=Ke+hn;break;case"top-left":An=Math.max(200,ge-Ft),Or=de+Ft,xr=Math.max(100,Te-hn),yr=Ke+hn;break;case"top-right":An=Math.max(200,ge+Ft),xr=Math.max(100,Te-hn),yr=Ke+hn;break;case"bottom-left":An=Math.max(200,ge-Ft),Or=de+Ft,xr=Math.max(100,Te+hn);break;case"bottom-right":An=Math.max(200,ge+Ft),xr=Math.max(100,Te+hn);break}Dt({width:An,height:xr}),nn({x:Or,y:yr});const Si=rn.current;Si&&(Si.style.width=An+"px",Si.style.height=xr+"px",Si.style.left=Or+"px",Si.style.top=yr+"px")}function N(){Me(!1),bs(null),document.body.style.userSelect=""}return ke&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",N)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",N)}},[ke,wt,ln,os]);const[Qt,Oe]=x.useState([]),[Je,qn]=x.useState(1),[Vn,H]=x.useState(1),[he,Se]=x.useState(0),[st,Tt]=x.useState(!1),[It,gn]=x.useState("timestamp"),[Rt,kn]=x.useState("desc"),un=x.useMemo(()=>Qt.length>0?Qt:pn,[Qt,pn]),or=x.useMemo(()=>mr(un),[un,qt,Xn]);x.useEffect(()=>{if(!It&&!Rt)return;Tt(!0);let w=Rn(`/api/bot-event-logs?page=${Je}&limit=${an}`);w+=`&sortKey=${It}&sortDirection=${Rt}`,s&&(w+=`&uid=${encodeURIComponent(s)}`),Nn(w).then(N=>N.json()).then(N=>{var I,ne;Oe(Array.isArray(N.logs)?N.logs:[]),Se(((I=N.pagination)==null?void 0:I.total)||0),H(((ne=N.pagination)==null?void 0:ne.totalPages)||1),Tt(!1)}).catch(()=>{Oe([]),Se(0),H(1),Tt(!1)})},[Je,an,It,Rt,s]);const Fn=w=>{w<1||w>Vn||qn(w)},En=(w,N,I=null,ne=null)=>{It===N?kn(ae=>ae==="asc"?"desc":"asc"):(gn(N),kn("asc")),fr({type:w,key:N,parentKey:I,interval:ne})},[Sr,_s]=x.useState(!1),[kr,ta]=x.useState(!1),ao=()=>{if(Qt.length>0)_s(!0);else{const w=ii(pn);if(w.length===0){alert("No data to export!");return}const N=Ir.json_to_sheet(w),I=Ir.book_new();Ir.book_append_sheet(I,N,"Data"),La(I,"exported_data.xlsx")}},lo=async w=>{if(_s(!1),w==="pagination"){const N=ii(Qt);if(N.length===0){alert("No data to export!");return}const I=Ir.json_to_sheet(N),ne=Ir.book_new();Ir.book_append_sheet(ne,I,"Data"),La(ne,"exported_data.xlsx")}else if(w==="whole"){ta(!0);let N=Rn("/api/bot-event-logs?limit=all");N+=`&sortKey=${It}&sortDirection=${Rt}`,s&&(N+=`&uid=${encodeURIComponent(s)}`);try{const ne=await(await Nn(N)).json(),ae=Array.isArray(ne.logs)?ne.logs:[],ge=ii(ae);if(ge.length===0){alert("No data to export!"),ta(!1);return}const Te=Ir.json_to_sheet(ge),de=Ir.book_new();Ir.book_append_sheet(de,Te,"Data"),La(de,"exported_data.xlsx")}catch{alert("Failed to fetch all data for export.")}ta(!1)}};function _a(){return Ut.filter(w=>w.type==="regular"?A.includes(w.value):w.type==="json"&&Array.isArray(w.intervals)?(w.intervals||[]).some(({interval:N})=>{var I;return(I=Y[w.value])==null?void 0:I[N]}):!1)}function Zr(w){if(!w)return"";const N=new Date(w);if(isNaN(N.getTime()))return w;const I=ne=>ne.toString().padStart(2,"0");return`${N.getFullYear()}-${I(N.getMonth()+1)}-${I(N.getDate())} ${I(N.getHours())}:${I(N.getMinutes())}:${I(N.getSeconds())}`}function ii(w){const N=_a();return w.map(I=>{var Te;let ne={};try{if(typeof I.json_message=="string"){let de=I.json_message.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");ne=JSON.parse(de)}else ne=I.json_message||{}}catch{ne={}}const ae=((Te=ne==null?void 0:ne.signal_data)==null?void 0:Te.all_last_rows)||{},ge={};return N.forEach(de=>{let Ke;de.type==="regular"?(Ke=I[de.value],h(de.value)?ge[de.label]=Zr(Ke):typeof Ke=="number"&&Ke>1e12?ge[de.label]=Ke.toString():ge[de.label]=Ke):de.type==="json"&&Array.isArray(de.intervals)&&(de.intervals||[]).forEach(({interval:Ft})=>{var hn,An;(hn=Y[de.value])!=null&&hn[Ft]&&(Ke=(An=ae[Ft])==null?void 0:An[de.value],ge[`${de.label} [${Ft}]`]=Ke)})}),ge})}return o.jsxs("div",{className:b?"dark":"",style:{height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden",background:b?"#181a20":"#f7f7fa"},children:[Sr&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{background:b?"#23272f":"#fff",color:b?"#fff":"#222",padding:32,borderRadius:16,fontSize:20,fontWeight:600,boxShadow:"0 4px 32px rgba(0,0,0,0.18)",minWidth:340,minHeight:120,display:"flex",flexDirection:"column",alignItems:"center",gap:24},children:[o.jsx("div",{children:"Export Data"}),o.jsxs("div",{style:{display:"flex",gap:18},children:[o.jsx("button",{onClick:()=>lo("pagination"),style:{padding:"8px 24px",borderRadius:6,border:"none",fontWeight:600,fontSize:16,background:"#0ea5e9",color:"#fff",boxShadow:"0 2px 8px #0ea5e944",cursor:"pointer",transition:"background 0.2s"},children:"Export Current Page"}),o.jsx("button",{onClick:()=>lo("whole"),style:{padding:"8px 24px",borderRadius:6,border:"none",fontWeight:600,fontSize:16,background:"#22c55e",color:"#fff",boxShadow:"0 2px 8px #22c55e44",cursor:"pointer",transition:"background 0.2s"},children:"Export All Filtered Data"})]}),o.jsx("button",{onClick:()=>_s(!1),style:{marginTop:12,background:"none",border:"none",color:b?"#fff":"#222",fontSize:18,cursor:"pointer"},children:"Cancel"})]})}),kr&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{background:b?"#23272f":"#fff",color:b?"#fff":"#222",padding:32,borderRadius:16,fontSize:22,fontWeight:600,boxShadow:"0 4px 32px rgba(0,0,0,0.18)"},children:"Exporting data..."})}),o.jsxs("div",{style:{position:"absolute",top:8,right:200,zIndex:100,display:"flex",alignItems:"center",gap:12},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Spacing"}),o.jsx("button",{onClick:()=>qr(w=>w-4),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:b?"#23272f":"#fff",color:b?"#fff":"#222",cursor:"pointer"},title:"Reduce space between filters and table",children:""}),o.jsx("button",{onClick:()=>qr(w=>Math.min(100,w+4)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:b?"#23272f":"#fff",color:b?"#fff":"#222",cursor:"pointer"},title:"Increase space between filters and table",children:""}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[jn,"px"]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Table Font"}),o.jsx("button",{onClick:()=>Ae(w=>Math.max(.7,w-.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:b?"#23272f":"#fff",color:b?"#fff":"#222",cursor:"pointer"},children:"A"}),o.jsx("button",{onClick:()=>Ae(w=>Math.min(2,w+.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:b?"#23272f":"#fff",color:b?"#fff":"#222",cursor:"pointer"},children:"A+"}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[Math.round(re*100),"%"]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Label Font"}),o.jsx("button",{onClick:()=>xt(w=>Math.max(.7,w-.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:b?"#23272f":"#fff",color:b?"#fff":"#222",cursor:"pointer"},children:"A"}),o.jsx("button",{onClick:()=>xt(w=>Math.min(2,w+.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:b?"#23272f":"#fff",color:b?"#fff":"#222",cursor:"pointer"},children:"A+"}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[Math.round(ot*100),"%"]})]}),o.jsx("button",{onClick:()=>ze(w=>!w),style:{padding:"3px 10px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:12,background:Gt?b?"#0ea5e9":"#0d9488":b?"#23272f":"#fff",color:Gt||b?"#fff":"#222",cursor:"pointer",boxShadow:Gt?"0 2px 8px #0ea5e944":"0 2px 8px #8882",transition:"background 0.2s"},title:"Wrap label text at word boundaries",children:Gt?"Unwrap Labels":"Wrap Labels"})]}),o.jsx("div",{style:{position:"absolute",top:24,left:24,zIndex:100},children:o.jsx("button",{onClick:()=>window.location.href="/reports",style:{background:"none",border:"none",cursor:"pointer",fontSize:24,color:b?"#fff":"#222",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:w=>w.target.style.backgroundColor=b?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",onMouseLeave:w=>w.target.style.backgroundColor="transparent","aria-label":"Back to Grid Reports",title:"Back to Grid Reports",children:o.jsx("span",{role:"img","aria-label":"back to grid",children:""})})}),o.jsxs("div",{style:{position:"absolute",top:24,right:80,zIndex:100,display:"flex",gap:8,alignItems:"center"},children:[o.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to reset the settings screen? Yes / No")&&is()},style:{background:"none",border:"none",cursor:"pointer",fontSize:22,color:b?"#fff":"#222",marginRight:2},"aria-label":"Reset Settings",title:"Reset Settings Screen",children:o.jsx("span",{role:"img","aria-label":"reset",children:""})}),o.jsx("button",{onClick:()=>rt(w=>!w),style:{background:"none",border:"none",cursor:"pointer",fontSize:28,color:b?"#fff":"#222"},"aria-label":tt?"Close Settings":"Open Settings","aria-haspopup":"dialog","aria-expanded":tt,children:o.jsx("span",{role:"img","aria-label":"settings",children:""})})]}),pt&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.10)",zIndex:199,transition:"opacity 0.18s",opacity:tt?1:0,pointerEvents:"none"},"aria-hidden":"true"}),o.jsxs("div",{ref:rn,role:"dialog","aria-modal":"true","aria-label":"Settings",style:{position:"fixed",top:wt.y,left:wt.x,minHeight:100,minWidth:200,zIndex:200,width:ln.width,maxWidth:"100vw",background:b?`rgba(35,39,47,${ve})`:`rgba(255,255,255,${ve})`,color:b?"#fff":"#222",borderRadius:18,boxShadow:"0 4px 32px 0 rgba(0,0,0,0.18)",padding:0,display:"flex",flexDirection:"column",overflow:"hidden",height:ln.height,maxHeight:"100vh",margin:"0 auto",boxSizing:"border-box",resize:"none",cursor:yn?"move":"default",opacity:tt?1:0,transform:tt?"scale(1)":"scale(0.96)",transition:"opacity 0.18s, transform 0.18s",pointerEvents:tt?"auto":"none"},children:[[["top-left",{top:-8,left:-8,cursor:"nwse-resize"}],["top",{top:-8,left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"}],["top-right",{top:-8,right:-8,cursor:"nesw-resize"}],["right",{top:"50%",right:-8,transform:"translateY(-50%)",cursor:"ew-resize"}],["bottom-right",{bottom:-8,right:-8,cursor:"nwse-resize"}],["bottom",{bottom:-8,left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"}],["bottom-left",{bottom:-8,left:-8,cursor:"nesw-resize"}],["left",{top:"50%",left:-8,transform:"translateY(-50%)",cursor:"ew-resize"}]].map(([w,N])=>o.jsx("div",{onMouseDown:I=>si(I,w),style:{position:"absolute",width:18,height:18,background:b?"#0ea5e9":"#2563eb",border:"2px solid #fff",borderRadius:6,zIndex:1e3,...N,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #0ea5e944",cursor:N.cursor,userSelect:"none"},title:`Resize (${w.replace("-"," ")})`,children:o.jsx("div",{style:{width:8,height:8,borderRadius:4,background:"#fff",opacity:.8}})},w)),o.jsxs("div",{style:{width:"100%",height:"100%",transform:`scale(${q})`,transformOrigin:"top left"},children:[o.jsx("div",{onMouseDown:Ct,style:{position:"absolute",right:2,bottom:2,width:22,height:22,zIndex:10,cursor:"nwse-resize",background:"transparent",display:"flex",alignItems:"flex-end",justifyContent:"flex-end",userSelect:"none"},title:"Resize",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 22 22",children:o.jsx("polyline",{points:"6,22 22,22 22,6",style:{fill:"none",stroke:b?"#38bdf8":"#0ea5e9",strokeWidth:2}})})}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:b?"#23272f":"#fff",zIndex:2,padding:12,borderTopLeftRadius:18,borderTopRightRadius:18,cursor:"move",userSelect:"none",gap:8},onMouseDown:$n,children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13,marginRight:12},children:[o.jsx("span",{style:{opacity:.7},children:"Modal Scale"}),o.jsx("input",{type:"range",min:.7,max:1.5,step:.01,value:q,onChange:w=>ee(parseFloat(w.target.value)),style:{width:70}}),o.jsxs("span",{style:{width:32,textAlign:"right",opacity:.7},children:[Math.round(q*100),"%"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Opacity"}),o.jsx("input",{type:"range",min:.3,max:1,step:.01,value:ve,onChange:w=>Qe(parseFloat(w.target.value)),style:{width:70}}),o.jsxs("span",{style:{width:32,textAlign:"right",opacity:.7},children:[Math.round(ve*100),"%"]})]}),o.jsx("button",{onClick:()=>ar(w=>!w),style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:Jn?"#0ea5e9":"#334155",color:"#fff",boxShadow:Jn?"0 2px 8px #0ea5e944":"0 2px 8px #33415544",cursor:"pointer",transition:"background 0.2s"},children:Jn?"Show Regular Labels":"Minimize Regular Labels"}),o.jsx("button",{onClick:()=>Sn(w=>!w),style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:fn?"#22c55e":"#ef4444",color:"#fff",boxShadow:fn?"0 2px 8px #22c55e44":"0 2px 8px #ef444444",cursor:"pointer",transition:"background 0.2s"},children:fn?"Show Unchecked":"Hide Unchecked"}),o.jsx("button",{onClick:()=>{G(mn?[]:ld.map(w=>w.value)),Ot(w=>!w)},style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:mn?"#22c55e":"#ef4444",color:"#fff",boxShadow:mn?"0 2px 8px #22c55e44":"0 2px 8px #ef444444",cursor:"pointer",transition:"background 0.2s"},children:mn?"Uncheck All Regular":"Check All Regular"}),o.jsx("button",{onClick:()=>{if(_e)X({}),Ee(!1);else{const w={};bt.length>0?bt.forEach(N=>{w[N.value]={},(N.intervals||[]).forEach(I=>{const ne=I.interval||I;w[N.value][ne]=!0})}):Object.keys(Y||{}).forEach(N=>{w[N]={},Object.keys(Y[N]||{}).forEach(I=>{w[N][I]=!0})}),X(w),Ee(!0)}},style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:_e?"#ef4444":"#22c55e",color:"#fff",boxShadow:_e?"0 2px 8px #ef444444":"0 2px 8px #22c55e44",cursor:"pointer",transition:"background 0.2s"},children:_e?"Uncheck All JSON":"Check All JSON"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap",marginLeft:8,background:"#222",color:"#fff",padding:8,border:"2px solid #fbbf24",borderRadius:8},children:[o.jsx("span",{style:{fontWeight:500,marginRight:4},children:"Intervals:"}),Tw.map(w=>o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2,minWidth:36},children:[o.jsx("input",{type:"checkbox",checked:ur[w]||!1,onChange:N=>{const I=N.target.checked;Mr({...ur,[w]:I}),X(ne=>{const ae={...ne};return bt.forEach(ge=>{ge.intervals.some(Te=>Te.interval===w&&Te.exists)&&(ae[ge.value]={...ae[ge.value],[w]:I})}),ae})},style:{transform:"scale(1.05)"}}),o.jsx("span",{style:{fontSize:13},children:w})]},w))]}),o.jsx("button",{onClick:Pn,style:{padding:"6px 18px",borderRadius:6,border:"none",fontWeight:600,fontSize:15,background:"#22c55e",color:"#fff",boxShadow:"0 2px 8px #22c55e44",cursor:"pointer",transition:"background 0.2s",marginLeft:8},title:"Save label order and checkbox state",children:"Save"})]}),o.jsx("button",{onClick:()=>rt(!1),style:{background:"none",border:"none",fontSize:22,color:"inherit",cursor:"pointer",marginLeft:12},"aria-label":"Close",children:""})]}),o.jsx("div",{style:{overflowY:"auto",padding:32,flex:1,minHeight:0,position:"relative"},children:o.jsx(ay,{backend:cy,children:o.jsx(rW,{items:Ut,moveLabel:(w,N)=>{vt(I=>{const ne=[...I],[ae]=ne.splice(w,1);return ne.splice(N,0,ae),ne})},renderRow:(w,N)=>{let I=!0;return w.type==="regular"&&(Jn&&(I=!1),!fn&&!A.includes(w.value)&&(I=!1)),w.type==="json"&&Array.isArray(w.intervals)&&(w.intervals.some(({interval:ae})=>{var ge;return!fn||!!((ge=Y==null?void 0:Y[w.value])!=null&&ge[ae])})||(I=!1)),o.jsxs("div",{style:{display:I?void 0:"none",width:"100%"},children:[w.type==="regular"&&o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[o.jsx("input",{type:"checkbox",checked:A.includes(w.value),onChange:ne=>{ne.target.checked?G([...A,w.value]):G(A.filter(ae=>ae!==w.value))}}),w.label]}),w&&w.type==="json"&&Array.isArray(w.intervals)&&(()=>{const ne=(w.intervals||[]).filter(({interval:ae})=>{var ge;return!fn||!!((ge=Y==null?void 0:Y[w.value])!=null&&ge[ae])});return ne.length===0?null:o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:1,width:"100%"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between",marginBottom:1,lineHeight:1.2},children:o.jsx("span",{style:{fontWeight:500,fontSize:"0.95em"},children:w.label||p(w.value)})}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:0,alignItems:"flex-start",lineHeight:1},children:ne.map(({interval:ae,exists:ge})=>{var Te;return o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2,minWidth:40,opacity:ge?1:.5,padding:"1px 0",lineHeight:1},children:[o.jsx("input",{type:"checkbox",checked:!!((Te=Y==null?void 0:Y[w.value])!=null&&Te[ae]),disabled:!ge,onChange:de=>{X(Ke=>({...Ke,[w.value]:{...Ke[w.value],[ae]:de.target.checked}}))},style:{transform:"scale(0.9)"}}),o.jsx("span",{style:{fontSize:"0.8em",fontWeight:500,lineHeight:1},children:ae})]},w.value+"_"+ae)})})]})})()]})},activeJsonLabels:Y,setActiveJsonLabels:X,showUnchecked:fn,dragOverIndex:wr,setDragOverIndex:Ks})})})]})]})]}),o.jsx("div",{style:{position:"absolute",top:24,right:130,zIndex:100,display:"flex",gap:4}}),o.jsx("button",{onClick:()=>k(w=>!w),style:{position:"absolute",right:32,top:24,zIndex:100,padding:8,borderRadius:"50%",background:b?"#222":"#fff",color:b?"#fff":"#222",border:"1.5px solid #888",fontSize:22,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},title:b?"Switch to Light Mode":"Switch to Dark Mode",children:b?"":""}),o.jsx("div",{style:{flex:1,minHeight:0,overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:o.jsxs("div",{style:{padding:"0 64px 0 32px",position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box"},children:[o.jsxs("div",{style:{flex:"0 0 auto",marginBottom:8},children:[o.jsxs("button",{type:"button",onClick:Fe,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",border:b?"1px solid #334155":"1px solid #d1d5db",borderRadius:8,background:b?"#334155":"#e5e7eb",color:b?"#e2e8f0":"#111",fontSize:15,fontWeight:600,cursor:"pointer",textAlign:"left"},title:z?"Collapse summary and filters":"Expand summary and filters",children:[o.jsx("span",{children:"Summary, filters & signals (5m, 15m, 1h, 4h)"}),o.jsx("span",{style:{fontSize:16},children:z?" Collapse":" Expand"})]}),z&&o.jsxs(o.Fragment,{children:[(Kt==null?void 0:Kt.ok)&&(Kt==null?void 0:Kt.intervals)&&o.jsxs("div",{style:{marginTop:12,border:b?"1px solid #334155":"1px solid #e2e8f0",borderRadius:8,background:b?"#1e293b":"#f1f5f9",overflow:"hidden"},children:[o.jsxs("button",{type:"button",onClick:ie,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",border:"none",background:b?"#334155":"#e2e8f0",color:b?"#e2e8f0":"#222",fontSize:13,fontWeight:600,cursor:"pointer",textAlign:"left"},children:[o.jsx("span",{children:"Signals (5m, 15m, 1h, 4h)"}),o.jsx("span",{children:We?" Collapse":" Expand"})]}),We&&o.jsx("div",{style:{maxHeight:"32vh",overflowY:"auto",padding:12},children:o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12,padding:12,background:b?"#0f172a":"#fff",borderRadius:6,border:b?"1px solid #475569":"1px solid #e2e8f0"},children:["5m","15m","1h","4h"].map(w=>{const N=Kt.intervals[w],I=N!=null&&N.ok?N.summary:null,ne=(N==null?void 0:N.error)||null;return o.jsxs("div",{style:{flex:"1 1 180px",minWidth:160,padding:12,background:b?"#0f172a":"#fff",borderRadius:6,border:b?"1px solid #475569":"1px solid #e2e8f0",color:b?"#e2e8f0":"#222",fontSize:12},children:[o.jsxs("div",{style:{fontWeight:700,marginBottom:8,color:b?"#38bdf8":"#0ea5e9"},children:[Kt.symbol,"  ",w]}),ne&&o.jsx("div",{style:{color:"#ef4444"},children:ne}),I&&Array.isArray(I)&&I.length>0&&o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:I.map((ae,ge)=>o.jsxs("div",{style:{borderBottom:ge<I.length-1?b?"1px solid #334155":"1px solid #e2e8f0":"none",paddingBottom:8},children:[o.jsxs("div",{style:{fontWeight:600,marginBottom:4,fontSize:11,opacity:.9},children:["Row ",I.length-ge," (last ",I.length,")"]}),typeof ae=="object"&&ae!==null&&o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:2},children:Object.entries(ae).filter(([Te,de])=>de!=null&&Te!=="time").slice(0,14).map(([Te,de])=>{var Ke;return o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:6,fontSize:11},children:[o.jsx("span",{style:{opacity:.8},children:Te}),o.jsx("span",{style:{fontWeight:500},children:typeof de=="number"?Number.isInteger(de)?de:((Ke=de==null?void 0:de.toFixed)==null?void 0:Ke.call(de,4))??de:String(de)})]},Te)})})]},ge))}),(!I||Array.isArray(I)&&I.length===0)&&!ne&&o.jsx("div",{style:{opacity:.7},children:"No data"})]},w)})})})]}),o.jsx(Q$,{uid:s,interval:l,candleType:c,onBack:()=>window.close(),gridPreview:In,filterBar:Gn,trades:Xt,darkMode:b})]})]}),o.jsx("div",{style:{margin:`${jn}px 0 0 0`,flex:"0 0 auto",display:"flex",flexDirection:"column"},children:o.jsxs("div",{style:{color:b?"#fff":"#222",margin:"4px 0 6px 0",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px"},children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Rows: ",Qt.length>0?Qt.length:pn.length," of ",Qt.length>0?he:dn]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Page: ",Qt.length>0?Je:He," of ",Qt.length>0?Vn:Ht]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Columns: ",ld.length+bt.reduce((w,N)=>{var I;return w+(((I=N.intervals)==null?void 0:I.length)||0)},0)+tW.length]}),o.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:8},children:o.jsxs("span",{style:{fontSize:12,opacity:.7,color:Xt.length===0?"#ef4444":"#22c55e",fontWeight:600},children:["(",Xt.length," events shown)"]})}),pn.length>0&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:8},children:[o.jsx("span",{style:{opacity:.7},children:"Time Range:"}),o.jsx("span",{style:{fontWeight:600,color:b?"#0ea5e9":"#0d9488"},children:(di=pn[0])!=null&&di.candle_time?d(pn[0].candle_time):"N/A"}),o.jsx("span",{children:"to"}),o.jsx("span",{style:{fontWeight:600,color:b?"#0ea5e9":"#0d9488"},children:(R=pn[pn.length-1])!=null&&R.candle_time?d(pn[pn.length-1].candle_time):"N/A"}),o.jsx("button",{onClick:ao,style:{marginLeft:16,padding:"6px 12px",borderRadius:4,border:"none",fontWeight:600,fontSize:12,background:"#22c55e",color:"#fff",boxShadow:"0 2px 4px #22c55e44",cursor:"pointer",transition:"background 0.2s"},children:"Export to Excel"})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",background:b?"#1e293b":"#f1f5f9",borderRadius:6,border:b?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("span",{style:{fontWeight:600,color:b?"#fff":"#222",fontSize:12},children:"Rows:"}),o.jsx("input",{type:"number",min:"10",max:"5000",value:an,onChange:w=>{const N=parseInt(w.target.value);!isNaN(N)&&N>=10&&N<=5e3&&Un(N)},onKeyPress:w=>{w.key==="Enter"&&Yn(an)},onBlur:()=>Yn(an),style:{width:50,padding:"2px 4px",borderRadius:3,border:"1px solid #888",background:b?"#23272f":"#fff",color:b?"#fff":"#222",fontSize:12,textAlign:"center"}})]}),(Qt.length>0?Vn:Ht)>1&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",background:b?"#1e293b":"#f1f5f9",borderRadius:6,border:b?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("button",{onClick:()=>Tn(1),disabled:He===1,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:He===1?b?"#334155":"#e5e7eb":b?"#0ea5e9":"#0d9488",color:He===1?b?"#6b7280":"#9ca3af":"#fff",cursor:He===1?"not-allowed":"pointer",opacity:He===1?.5:1},children:"First"}),o.jsx("button",{onClick:()=>Qt.length>0?Fn(Je-1):Tn(He-1),disabled:(Qt.length>0?Je:He)===1,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(Qt.length>0?Je:He)===1?b?"#334155":"#e5e7eb":b?"#0ea5e9":"#0d9488",color:(Qt.length>0?Je:He)===1?b?"#6b7280":"#9ca3af":"#fff",cursor:(Qt.length>0?Je:He)===1?"not-allowed":"pointer",opacity:(Qt.length>0?Je:He)===1?.5:1},children:""}),o.jsxs("span",{style:{fontWeight:600,color:b?"#fff":"#222",fontSize:12},children:[Qt.length>0?Je:He,"/",Qt.length>0?Vn:Ht]}),o.jsx("button",{onClick:()=>Qt.length>0?Fn(Je+1):Tn(He+1),disabled:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht),style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?b?"#334155":"#e5e7eb":b?"#0ea5e9":"#0d9488",color:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?b?"#6b7280":"#9ca3af":"#fff",cursor:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?"not-allowed":"pointer",opacity:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?.5:1},children:""}),o.jsx("button",{onClick:()=>Qt.length>0?Fn(Vn):Tn(Ht),disabled:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht),style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?b?"#334155":"#e5e7eb":b?"#0ea5e9":"#0d9488",color:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?b?"#6b7280":"#9ca3af":"#fff",cursor:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?"not-allowed":"pointer",opacity:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?.5:1},children:"Last"})]})]})]})}),o.jsx("div",{className:"overflow-auto border border-gray-300 rounded-lg",style:{background:b?"#181a20":"#f5ecd7",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:b?"1px solid #334155":"1px solid #d1d5db",fontSize:`${re}em`,position:"relative",minHeight:420},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"6px 0 4px 0",paddingLeft:8,paddingRight:8},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:18}}),o.jsxs("table",{className:"w-full border-collapse",style:{fontSize:"inherit",color:b?"#fff":"#222"},children:[o.jsxs("thead",{className:"sticky top-0 z-30",style:{background:b?"#0f766e":"#0d9488",color:"white",fontSize:"inherit",zIndex:30},children:[o.jsx("tr",{style:{position:"sticky",top:0,zIndex:31,background:b?"#0f766e":"#0d9488"},children:Ut.map((w,N)=>{const I=w.type==="json"&&Array.isArray(w.intervals);if(w.type==="regular"&&A.includes(w.value)){const ne=N===0||N===1,ae=b?"#5eead4":"#e0fcf7";return o.jsx("th",{rowSpan:2,className:"relative px-4 py-3 text-left cursor-pointer whitespace-nowrap",style:{fontSize:`${ot}em`,fontWeight:"600",borderBottom:"2px solid rgba(255,255,255,0.2)",color:"#111",background:ae,minWidth:120,overflow:"visible",whiteSpace:Gt?"normal":"nowrap",wordBreak:Gt?"break-word":"normal",position:ne?"sticky":void 0,left:ne?N===0?0:120:void 0,zIndex:ne?40:void 0},title:w.label,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:()=>En("regular",w.value),style:{marginRight:4,background:"none",border:"none",color:It===w.value?Rt==="asc"?"#22c55e":"#ef4444":"#888",fontWeight:700,fontSize:14,cursor:"pointer",padding:"0 2px",borderRadius:3,outline:"none"},title:`Sort by ${w.label} (whole data)`,children:["w",It===w.value?Rt==="asc"?"":"":""]}),o.jsx("span",{children:w.label}),o.jsxs("button",{onClick:()=>Ar("regular",w.value),style:{marginLeft:4,background:"none",border:"none",color:qt&&qt.type==="regular"&&qt.key===w.value?Xn==="asc"?"#22c55e":"#ef4444":"#888",fontWeight:700,fontSize:14,cursor:"pointer",padding:"0 2px",borderRadius:3,outline:"none"},title:`Sort by ${w.label} (table only)`,children:["t",qt&&qt.type==="regular"&&qt.key===w.value?Xn==="asc"?"":"":""]})]})},w.value)}if(I){const ne=w.intervals.filter(({interval:ge})=>{var Te;return!!((Te=Y[w.value])!=null&&Te[ge])});if(ne.length===0)return null;const ae=N%2===0?b?"#fbbf24":"#ffe082":b?"#fb923c":"#ffd6a5";return o.jsx("th",{colSpan:ne.length,className:"relative px-4 py-3 text-left whitespace-nowrap",style:{fontSize:`${ot}em`,fontWeight:"bold",borderBottom:"2px solid rgba(255,255,255,0.2)",color:"#111",background:ae,minWidth:120,overflow:"visible",whiteSpace:Gt?"normal":"nowrap",wordBreak:Gt?"break-word":"normal"},title:w.label,children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("span",{children:w.label})})},w.value)}return null})}),o.jsx("tr",{children:Ut.map((w,N)=>{if(w.type==="json"&&Array.isArray(w.intervals)){const I=w.intervals.filter(({interval:ae})=>{var ge;return!!((ge=Y[w.value])!=null&&ge[ae])}),ne=N%2===0?b?"#1e293b":"#e0e7ef":b?"#334155":"#f1f5f9";return I.map(({interval:ae})=>o.jsx("th",{className:"relative px-4 py-3 text-left cursor-pointer whitespace-nowrap",style:{fontSize:`${ot}em`,fontWeight:"600",borderBottom:"2px solid rgba(255,255,255,0.2)",color:b?"#fff":"#222",background:ne,minWidth:90,overflow:"visible",whiteSpace:Gt?"normal":"nowrap",wordBreak:Gt?"break-word":"normal"},title:ae,onClick:()=>Ar("json",ae,w.value,ae),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:y(ae)}),o.jsx("span",{className:"ml-1 opacity-60",children:qt&&qt.type==="json"&&qt.parentKey===w.value&&qt.interval===ae?Xn==="asc"?"":"":""})]})},w.value+"_"+ae))}return null})})]}),o.jsx("tbody",{children:or.map((w,N)=>{var Te;let I=null;if(w.parsed_json_message&&typeof w.parsed_json_message=="object")I=w.parsed_json_message;else if(w.json_message)try{if(typeof w.json_message=="string"){let de=w.json_message.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");I=JSON.parse(de)}else I=w.json_message}catch{I={}}else if(w.json_data)try{if(typeof w.json_data=="string"){let de=w.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");I=JSON.parse(de)}else I=w.json_data}catch{I={}}const ne={...((Te=I==null?void 0:I.signal_data)==null?void 0:Te.all_last_rows)||{},json_message:I&&typeof I=="object"&&!Array.isArray(I)?I:{}},ae=w.unique_id!=null?w.unique_id:N,ge=vs===ae;return o.jsx("tr",{className:"cursor-pointer",style:{fontSize:"inherit",borderBottom:b?"1px solid #334155":"1px solid #e5e7eb",transition:"all 0.15s ease-in-out",color:b?"#fff":"#222",background:ge?"#ffe066":void 0},onClick:()=>sr(ge?null:ae),onMouseEnter:de=>{ge||(de.currentTarget.style.background=b?"#3d4451":"#f0f9ff",de.currentTarget.style.color=b?"#fff":"#222")},onMouseLeave:de=>{ge||(de.currentTarget.style.background="",de.currentTarget.style.color="")},children:Ut.map((de,Ke)=>{if(de.type==="regular"&&A.includes(de.value)){if(!ld.find(Or=>Or.value===de.value))return null;const hn=Ke===0||Ke===1,An=ge?"#ffe066":hn?b?"#5eead4":"#e0fcf7":void 0,xr=ge||hn?"#111":b?"#fff":"#222";return o.jsx("td",{className:"whitespace-nowrap align-top text-sm select-text",style:{fontSize:"inherit",color:ge?"#111":xr,background:An,minWidth:120,overflow:"visible",whiteSpace:"nowrap",position:hn?"sticky":void 0,left:hn?Ke===0?0:120:void 0,zIndex:hn?30:void 0,padding:"1px 6px !important",lineHeight:"1 !important",height:"20px !important",verticalAlign:"middle !important"},title:w[de.value]!=null?_(w[de.value],de.value,{forTooltip:!0}):"",children:w[de.value]!=null?_(w[de.value],de.value):""},de.value)}if(de.type==="json"&&Array.isArray(de.intervals)){const Ft=de.intervals.filter(({interval:xr})=>{var Or;return!!((Or=Y[de.value])!=null&&Or[xr])}),hn=ge?"#ffe066":Ke%2===0?b?"#1e293b":"#e0e7ef":b?"#334155":"#f1f5f9",An=ge?"#111":b?"#fff":"#222";return Ft.map(({interval:xr})=>{let Or=ne[xr]?ne[xr][de.value]:void 0;return o.jsx("td",{className:"whitespace-nowrap align-top text-sm select-text",style:{fontSize:"inherit",color:An,background:hn,minWidth:90,overflow:"visible",whiteSpace:"nowrap",padding:"1px 4px !important",lineHeight:"1 !important",height:"20px !important",verticalAlign:"middle !important"},title:Or!==void 0?_(Or,de.value,{forTooltip:!0}):"",children:Or!==void 0?_(Or,de.value):"-"},de.value+"_"+xr)})}return null})},N)})})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,margin:"12px 0 8px 0",padding:"8px 12px",background:b?"#1e293b":"#f1f5f9",borderRadius:6,border:b?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("span",{style:{fontWeight:600,color:b?"#fff":"#222",fontSize:14},children:"Rows per page:"}),o.jsx("input",{type:"number",min:"10",max:"5000",value:an,onChange:w=>{const N=parseInt(w.target.value);!isNaN(N)&&N>=10&&N<=5e3&&Un(N)},onKeyPress:w=>{w.key==="Enter"&&Yn(an)},onBlur:()=>Yn(an),style:{width:80,padding:"4px 8px",borderRadius:4,border:"1px solid #888",background:b?"#23272f":"#fff",color:b?"#fff":"#222",fontSize:14,textAlign:"center"}}),o.jsx("span",{style:{fontSize:12,opacity:.7,color:b?"#9ca3af":"#6b7280"},children:"(10-5000)"})]}),(Qt.length>0?Vn:Ht)>1&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,margin:"16px 0 8px 0",padding:"12px",background:b?"#23272f":"#f8f9fa",borderRadius:8,border:b?"1px solid #334155":"1px solid #e5e7eb"},children:[o.jsx("button",{onClick:()=>Qt.length>0?Fn(1):Tn(1),disabled:(Qt.length>0?Je:He)===1,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:(Qt.length>0?Je:He)===1?b?"#334155":"#e5e7eb":b?"#0ea5e9":"#0d9488",color:(Qt.length>0?Je:He)===1?b?"#6b7280":"#9ca3af":"#fff",cursor:(Qt.length>0?Je:He)===1?"not-allowed":"pointer",opacity:(Qt.length>0?Je:He)===1?.5:1},children:"First"}),o.jsx("button",{onClick:()=>Qt.length>0?Fn(Je-1):Tn(He-1),disabled:(Qt.length>0?Je:He)===1,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:(Qt.length>0?Je:He)===1?b?"#334155":"#e5e7eb":b?"#0ea5e9":"#0d9488",color:(Qt.length>0?Je:He)===1?b?"#6b7280":"#9ca3af":"#fff",cursor:(Qt.length>0?Je:He)===1?"not-allowed":"pointer",opacity:(Qt.length>0?Je:He)===1?.5:1},children:"Previous"}),o.jsxs("span",{style:{fontWeight:600,color:b?"#fff":"#222"},children:["Page ",Qt.length>0?Je:He," of ",Qt.length>0?Vn:Ht]}),o.jsx("button",{onClick:()=>Qt.length>0?Fn(Je+1):Tn(He+1),disabled:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht),style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?b?"#334155":"#e5e7eb":b?"#0ea5e9":"#0d9488",color:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?b?"#6b7280":"#9ca3af":"#fff",cursor:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?"not-allowed":"pointer",opacity:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?.5:1},children:"Next"}),o.jsx("button",{onClick:()=>Qt.length>0?Fn(Vn):Tn(Ht),disabled:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht),style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?b?"#334155":"#e5e7eb":b?"#0ea5e9":"#0d9488",color:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?b?"#6b7280":"#9ca3af":"#fff",cursor:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?"not-allowed":"pointer",opacity:(Qt.length>0?Je:He)===(Qt.length>0?Vn:Ht)?.5:1},children:"Last"})]})]})})]})})]})};function aW(t=""){const e=typeof import.meta<"u"?"/live_cloud-lab_live/".replace(/\/$/,""):"",n=e?`${e}/live-trade-view`:"/live-trade-view";return`${window.location.origin}${n}${t?`?${t}`:""}`}const lW="demo123";function jw(t){if(t==null)return"";const e=String(t);if(typeof document>"u")return e.replace(/<[^>]+>/g,"").trim();const n=document.createElement("div");return n.innerHTML=e,(n.textContent||"").trim()}function oW(){var M,oe,P,B;const t=Ki(),e=Xc(),[n,r]=x.useState(()=>{var j;return((j=t.state)==null?void 0:j.trades)??[]}),[s,l]=x.useState(()=>{var V,fe;const j=t.state;return(V=j==null?void 0:j.formattedRows)!=null&&V.length?j.formattedRows:(fe=j==null?void 0:j.trades)!=null&&fe.length?j.trades.map((lt,et)=>$c(lt,et)):[]}),[c,d]=x.useState(!((oe=(M=t.state)==null?void 0:M.trades)!=null&&oe.length)),[h,g]=x.useState(new Set),[p,y]=x.useState({}),[_,b]=x.useState(""),[k,S]=x.useState(""),[E,O]=x.useState(""),[T,D]=x.useState({open:!1,action:null}),[F,Z]=x.useState(""),[K,L]=x.useState({open:!1,action:null,rows:[]}),[Q,se]=x.useState(""),ce=s,ye=ce.length?Object.keys(ce[0]).filter(j=>j!==""):[];x.useEffect(()=>{var V,fe;if((fe=(V=t.state)==null?void 0:V.trades)!=null&&fe.length)return;let j=!1;return(async()=>{try{const lt=await Nn("/api/trades");if(j||!lt.ok)return;const et=await lt.json();if(j||!Array.isArray(et))return;const ht=et.filter(At=>At.type==="running"||At.type==="hedge_hold");r(ht),l(ht.map((At,xn)=>$c(At,xn)))}catch{}d(!1)})(),()=>{j=!0}},[(B=(P=t.state)==null?void 0:P.trades)==null?void 0:B.length]);const te=x.useCallback(j=>{g(V=>{const fe=new Set(V);return fe.has(j)?fe.delete(j):fe.add(j),fe})},[]),xe=x.useCallback(()=>{h.size>=ce.length?g(new Set):g(new Set(ce.map((j,V)=>V)))},[ce.length,h.size]),Ce=(j,V)=>p[`${j}_${V}`]??"",at=(j,V,fe)=>{y(lt=>({...lt,[`${j}_${V}`]:fe}))},le=j=>{if([...h].length===0){se("Select at least one trade.");return}D({open:!0,action:j}),Z("")},Ve=()=>{const j=(F||"").trim();if(!j||j!==lW)return;D(lt=>({...lt,open:!1}));const fe=[...h].map(lt=>({index:lt,raw:n[lt],formatted:ce[lt],execAmount:Ce(lt,"exec")||_,invAmount:Ce(lt,"inv")||k,stopPrice:Ce(lt,"stop")||E}));L({open:!0,action:T.action,rows:fe})},Ue=x.useCallback(async()=>{L(j=>({...j,open:!1})),await new Promise(j=>setTimeout(j,400)),se("Success!"),setTimeout(()=>se(""),2e3)},[]),Ze=(j,V)=>{const fe=`liveTradeViewState_${Date.now()}`;try{localStorage.setItem(fe,JSON.stringify({formattedRow:j,rawTrade:V}))}catch{}const lt=aW(`stateKey=${encodeURIComponent(fe)}`);window.open(lt,"_blank","noopener,noreferrer")};return c&&ce.length===0?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0f0f] text-white",children:o.jsx("p",{children:"Loading running trades"})}):o.jsxs("div",{className:"min-h-screen bg-[#f5f6fa] dark:bg-[#0f0f0f] text-[#222] dark:text-gray-200 p-4",children:[o.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>e(-1),className:"px-3 py-1.5 rounded-lg bg-teal-600 hover:bg-teal-700 text-white font-medium",children:" Back"}),o.jsx(XT,{className:"px-3 py-1.5 rounded-lg bg-red-600 hover:bg-red-700 text-white font-medium"})]}),o.jsx("h1",{className:"text-xl font-semibold",children:"Live  All running trades"})]}),Q&&o.jsx("div",{className:"mb-4 p-3 rounded-lg bg-green-600 text-white text-center font-medium",children:Q}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full border-collapse border border-gray-300 dark:border-gray-700 bg-white dark:bg-[#181a20] text-sm",children:[o.jsxs("thead",{children:[o.jsxs("tr",{className:"bg-teal-800 text-white",children:[o.jsx("th",{className:"border p-1 w-10",children:"Select"}),o.jsx("th",{className:"border p-1",children:"Execute"}),o.jsx("th",{className:"border p-1",children:"End Trade"}),o.jsx("th",{className:"border p-1",children:"Hedge"}),o.jsx("th",{className:"border p-1",children:"Add Inv"}),o.jsx("th",{className:"border p-1 min-w-[80px]",children:"Inv amt"}),o.jsx("th",{className:"border p-1 min-w-[80px]",children:"Exec amt"}),o.jsx("th",{className:"border p-1 min-w-[90px]",children:"Stop price"}),o.jsx("th",{className:"border p-1",children:"Set stop"}),o.jsx("th",{className:"border p-1",children:"Live"}),ye.map(j=>o.jsx("th",{className:"border p-1 whitespace-nowrap",children:j.replace(/_/g," ")},j))]}),o.jsxs("tr",{className:"bg-teal-700/80 text-white",children:[o.jsx("td",{className:"border p-1 text-center",children:o.jsx("input",{type:"checkbox",checked:ce.length>0&&h.size===ce.length,onChange:xe,title:"Select all"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>le("execute"),className:"px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-semibold",children:"Execute"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>le("endTrade"),className:"px-2 py-1 rounded bg-red-600 hover:bg-red-700 text-white text-xs font-semibold",children:"End Trade"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>le("hedge"),className:"px-2 py-1 rounded bg-amber-600 hover:bg-amber-700 text-white text-xs font-semibold",children:"Hedge"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>le("addInvestment"),className:"px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-semibold",children:"Add Inv"})}),o.jsx("td",{className:"border p-1",children:o.jsx("input",{type:"text",placeholder:"Inv",value:k,onChange:j=>S(j.target.value),className:"w-full border rounded px-1 py-0.5 bg-white dark:bg-[#222] text-[#222] dark:text-gray-200 text-xs"})}),o.jsx("td",{className:"border p-1",children:o.jsx("input",{type:"text",placeholder:"Exec",value:_,onChange:j=>b(j.target.value),className:"w-full border rounded px-1 py-0.5 bg-white dark:bg-[#222] text-[#222] dark:text-gray-200 text-xs"})}),o.jsx("td",{className:"border p-1",children:o.jsx("input",{type:"text",placeholder:"Stop",value:E,onChange:j=>O(j.target.value),className:"w-full border rounded px-1 py-0.5 bg-white dark:bg-[#222] text-[#222] dark:text-gray-200 text-xs"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>le("setStopPrice"),className:"px-2 py-1 rounded bg-gray-600 hover:bg-gray-700 text-white text-xs font-semibold",children:"Set stop"})}),o.jsx("td",{className:"border p-1"}),o.jsx("td",{className:"border p-1"}),ye.map(j=>o.jsx("td",{className:"border p-1 opacity-70 text-xs",children:""},j))]})]}),o.jsx("tbody",{children:ce.map((j,V)=>o.jsxs("tr",{className:h.has(V)?"bg-teal-100 dark:bg-teal-900/30":"",children:[o.jsx("td",{className:"border p-1 text-center",children:o.jsx("input",{type:"checkbox",checked:h.has(V),onChange:()=>te(V)})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>{g(new Set([V])),le("execute")},className:"px-2 py-0.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white text-xs",children:"Execute"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>{g(new Set([V])),le("endTrade")},className:"px-2 py-0.5 rounded bg-red-600 hover:bg-red-700 text-white text-xs",children:"End"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>{g(new Set([V])),le("hedge")},className:"px-2 py-0.5 rounded bg-amber-600 hover:bg-amber-700 text-white text-xs",children:"Hedge"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>{g(new Set([V])),le("addInvestment")},className:"px-2 py-0.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white text-xs",children:"Add Inv"})}),o.jsx("td",{className:"border p-1",children:o.jsx("input",{type:"text",placeholder:"0",value:Ce(V,"inv"),onChange:fe=>at(V,"inv",fe.target.value),className:"w-full border rounded px-1 py-0.5 bg-white dark:bg-[#222] text-[#222] dark:text-gray-200 text-xs max-w-[70px]"})}),o.jsx("td",{className:"border p-1",children:o.jsx("input",{type:"text",placeholder:"0",value:Ce(V,"exec"),onChange:fe=>at(V,"exec",fe.target.value),className:"w-full border rounded px-1 py-0.5 bg-white dark:bg-[#222] text-[#222] dark:text-gray-200 text-xs max-w-[70px]"})}),o.jsx("td",{className:"border p-1",children:o.jsx("input",{type:"text",placeholder:"",value:Ce(V,"stop"),onChange:fe=>at(V,"stop",fe.target.value),className:"w-full border rounded px-1 py-0.5 bg-white dark:bg-[#222] text-[#222] dark:text-gray-200 text-xs max-w-[80px]"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>{g(new Set([V])),le("setStopPrice")},className:"px-2 py-0.5 rounded bg-gray-600 hover:bg-gray-700 text-white text-xs",children:"Set"})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>Ze(j,n[V]),className:"px-2 py-0.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-semibold",children:"Live"})}),ye.map(fe=>o.jsx("td",{className:"border p-1 align-top",children:fe==="Pair"?o.jsx("span",{dangerouslySetInnerHTML:{__html:j[fe]??""}}):jw(String(j[fe]??""))},fe))]},V))})]})}),T.open&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>D(j=>({...j,open:!1})),children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-sm w-full shadow-xl",onClick:j=>j.stopPropagation(),children:[o.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Password"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Enter password to confirm."}),o.jsx("input",{type:"password",value:F,onChange:j=>Z(j.target.value),onKeyDown:j=>{j.key==="Enter"&&(j.preventDefault(),Ve())},placeholder:"Password",className:"w-full border-2 rounded-lg px-3 py-2 mb-4 bg-white dark:bg-[#333] text-[#222] dark:text-gray-200"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{type:"button",onClick:()=>D(j=>({...j,open:!1})),className:"px-3 py-1.5 rounded-lg bg-gray-200 dark:bg-gray-700",children:"Cancel"}),o.jsx("button",{type:"button",onClick:Ve,className:"px-4 py-1.5 rounded-lg bg-teal-600 text-white",children:"Confirm"})]})]})}),K.open&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>L(j=>({...j,open:!1})),children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-2xl w-full max-h-[80vh] overflow-auto shadow-xl",onClick:j=>j.stopPropagation(),children:[o.jsxs("h3",{className:"font-semibold text-lg mb-2",children:["Confirm  ",K.action]}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Review and edit amounts if needed, then confirm."}),o.jsx("ul",{className:"space-y-2 mb-4",children:K.rows.map((j,V)=>{var fe;return o.jsxs("li",{className:"flex flex-wrap items-center gap-2 p-2 rounded border border-gray-200 dark:border-gray-700",children:[o.jsx("span",{className:"font-medium",children:jw(j.formatted.Pair)||((fe=j.raw)==null?void 0:fe.pair)||""}),(K.action==="execute"||K.action==="addInvestment")&&o.jsx("input",{type:"text",placeholder:"Amount",defaultValue:j.execAmount||j.invAmount,className:"border rounded px-2 py-1 w-24 text-sm bg-white dark:bg-[#333]"}),K.action==="setStopPrice"&&o.jsx("input",{type:"text",placeholder:"Stop price",defaultValue:j.stopPrice,className:"border rounded px-2 py-1 w-24 text-sm bg-white dark:bg-[#333]"})]},V)})}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{type:"button",onClick:()=>L(j=>({...j,open:!1})),className:"px-3 py-1.5 rounded-lg bg-gray-200 dark:bg-gray-700",children:"Cancel"}),o.jsx("button",{type:"button",onClick:Ue,className:"px-4 py-1.5 rounded-lg bg-teal-600 text-white",children:"Execute"})]})]})}),ce.length===0&&!c&&o.jsx("p",{className:"text-center text-gray-500 py-8",children:"No running trades."})]})}function cW({onLogin:t}){const[e,n]=x.useState(""),[r,s]=x.useState(""),[l,c]=x.useState(""),[d,h]=x.useState(!1),g=async p=>{p.preventDefault(),c(""),h(!0);try{await O$(e,r),t()}catch(y){c((y==null?void 0:y.message)||"Login failed")}finally{h(!1)}};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-[#06060a] p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#050508] via-[#0a0c14] to-[#060810]"}),o.jsx("div",{className:"absolute inset-0 opacity-80",style:{background:"radial-gradient(ellipse 80% 50% at 50% -20%, rgba(20, 184, 166, 0.25), transparent), radial-gradient(ellipse 60% 40% at 100% 100%, rgba(6, 182, 212, 0.2), transparent), radial-gradient(ellipse 50% 50% at 0% 80%, rgba(20, 184, 166, 0.15), transparent)",animation:"login-graphics-pulse 12s ease-in-out infinite"}}),o.jsx("div",{className:"absolute inset-0 opacity-[0.06]",style:{backgroundImage:`linear-gradient(rgba(255,255,255,.2) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255,255,255,.2) 1px, transparent 1px)`,backgroundSize:"48px 48px",animation:"login-grid-flow 20s linear infinite"}}),o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[500px] rounded-full pointer-events-none bg-teal-400/30",style:{filter:"blur(120px)",animation:"login-glow-pulse 8s cubic-bezier(0.45, 0, 0.55, 1) infinite",willChange:"transform, opacity"}}),o.jsx("div",{className:"absolute bottom-1/3 right-0 w-[500px] h-[400px] rounded-full pointer-events-none bg-cyan-400/25",style:{filter:"blur(130px)",animation:"login-orb-drift 14s cubic-bezier(0.45, 0, 0.55, 1) infinite",willChange:"transform"}}),o.jsx("div",{className:"absolute top-1/3 left-0 w-[400px] h-[450px] rounded-full pointer-events-none bg-teal-500/20",style:{filter:"blur(110px)",animation:"login-float-3d 20s cubic-bezier(0.45, 0, 0.55, 1) infinite",willChange:"transform"}}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] overflow-hidden pointer-events-none",style:{filter:"blur(80px)",animation:"login-morph 15s ease-in-out infinite",willChange:"border-radius, opacity"},children:o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-teal-500/22 to-cyan-500/18"})}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] overflow-hidden pointer-events-none",style:{filter:"blur(60px)",animation:"login-morph 18s ease-in-out infinite 2s",willChange:"border-radius, opacity"},children:o.jsx("div",{className:"w-full h-full bg-gradient-to-tr from-cyan-500/15 to-teal-500/12",style:{borderRadius:"inherit"}})}),o.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden","aria-hidden":!0,children:[[...Array(14)].map((p,y)=>o.jsx("div",{className:"absolute rounded-full bg-teal-400/90",style:{width:2+y%3,height:2+y%3,left:`${8+y*6.5%84}%`,top:`${12+y*7%76}%`,animation:`login-particle-float ${4+y%5}s ease-in-out infinite`,animationDelay:`${y*.15}s`,willChange:"transform, opacity"}},y)),[...Array(10)].map((p,y)=>o.jsx("div",{className:"absolute rounded-full bg-cyan-400/80",style:{width:1.5+y%2,height:1.5+y%2,left:`${3+y*10%94}%`,top:`${18+y*8%68}%`,animation:`login-particle-float ${5+y%4}s ease-in-out infinite`,animationDelay:`${y*.25+.3}s`,willChange:"transform, opacity"}},`c-${y}`)),[...Array(6)].map((p,y)=>o.jsx("div",{className:"absolute w-1.5 h-1.5 rounded-full bg-white/60",style:{left:`${15+y*14%70}%`,top:`${25+y*12%55}%`,animation:`login-twinkle ${2.5+y%2}s ease-in-out infinite`,animationDelay:`${y*.4}s`}},`t-${y}`))]}),o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden","aria-hidden":!0,children:[...Array(5)].map((p,y)=>o.jsx("div",{className:"absolute rounded-full bg-gradient-to-b from-transparent to-teal-400/40",style:{width:3,height:20+y*4,left:`${20+y*18}%`,bottom:"-30px",animation:`login-particle-rise ${8+y%3}s linear infinite`,animationDelay:`${y*1.6}s`,willChange:"transform, opacity"}},`r-${y}`))}),o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden","aria-hidden":!0,children:[...Array(24)].map((p,y)=>{const _=y%2===0?"0":"1",b=y*4.2%100,k=12+y%5,S=y*.8%14,E=y%3===0?"login-binary-rise-alt":"login-binary-rise";return o.jsx("div",{className:"absolute bottom-0 flex items-center justify-center rounded-full border border-teal-400/30 bg-teal-500/10 font-mono font-bold text-teal-400/70 backdrop-blur-sm",style:{width:28+y%3*6,height:28+y%3*6,left:`${b}%`,fontSize:14+y%2*4,animation:`${E} ${k}s ease-in-out infinite`,animationDelay:`${S}s`,willChange:"transform, opacity"},children:_},`bin-${y}`)})}),o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden","aria-hidden":!0,children:["{","}","</",">","(",")","[","]"].map((p,y)=>o.jsx("span",{className:"absolute font-mono text-cyan-400/25 text-lg font-bold",style:{left:`${12+y*11%78}%`,top:`${15+y*9%72}%`,animation:"login-code-float 8s ease-in-out infinite",animationDelay:`${y*.5}s`},children:p},`sym-${y}`))}),o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:o.jsx("div",{className:"absolute left-0 w-full h-px bg-gradient-to-r from-transparent via-teal-400/25 to-transparent",style:{top:0,animation:"login-scanline 10s linear infinite"}})}),o.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden","aria-hidden":!0,children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-[0.22]",viewBox:"0 0 1200 800",fill:"none",children:[o.jsx("circle",{cx:"150",cy:"120",r:"180",stroke:"url(#login-grad1)",strokeWidth:"1.2",strokeDasharray:"8 4",fill:"none",style:{animation:"login-graphics-pulse 6s ease-in-out infinite, login-ring-rotate 40s linear infinite"}}),o.jsx("circle",{cx:"1050",cy:"680",r:"220",stroke:"url(#login-grad2)",strokeWidth:"1",strokeDasharray:"6 6",fill:"none",style:{animation:"login-graphics-pulse 8s ease-in-out infinite 1s, login-ring-rotate 50s linear infinite reverse"}}),o.jsx("circle",{cx:"600",cy:"400",r:"140",stroke:"rgba(20, 184, 166, 0.2)",strokeWidth:"0.8",strokeDasharray:"880",strokeDashoffset:"880",fill:"none",style:{animation:"login-stroke-draw 5s ease-out 0.5s forwards, login-scale-pulse 8s ease-in-out infinite 4s"}}),o.jsx("circle",{cx:"900",cy:"150",r:"120",stroke:"rgba(20, 184, 166, 0.4)",strokeWidth:"0.8",fill:"none",style:{animation:"login-scale-breathe 10s ease-in-out infinite"}}),o.jsx("circle",{cx:"200",cy:"550",r:"100",stroke:"rgba(6, 182, 212, 0.35)",strokeWidth:"0.8",fill:"none",style:{animation:"login-scale-breathe 12s ease-in-out infinite 0.5s"}}),o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"login-grad1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#0d9488"}),o.jsx("stop",{offset:"50%",stopColor:"#06b6d4"}),o.jsx("stop",{offset:"100%",stopColor:"#0d9488"})]}),o.jsxs("linearGradient",{id:"login-grad2",x1:"100%",y1:"100%",x2:"0%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:"#06b6d4"}),o.jsx("stop",{offset:"50%",stopColor:"#0d9488"}),o.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})]})]}),o.jsxs("svg",{className:"absolute top-0 right-0 w-[550px] h-[550px] opacity-40",viewBox:"0 0 200 200",style:{animation:"login-graphics-spin-slow 45s linear infinite"},children:[o.jsx("path",{d:"M100 20 L180 100 L100 180 L20 100 Z",stroke:"rgba(20, 184, 166, 0.25)",strokeWidth:"0.6",fill:"none"}),o.jsx("path",{d:"M100 40 L160 100 L100 160 L40 100 Z",stroke:"rgba(6, 182, 212, 0.2)",strokeWidth:"0.5",fill:"none"}),o.jsx("path",{d:"M100 60 L140 100 L100 140 L60 100 Z",stroke:"rgba(20, 184, 166, 0.15)",strokeWidth:"0.4",fill:"none"})]}),o.jsxs("svg",{className:"absolute bottom-0 left-0 w-[450px] h-[450px] opacity-40",viewBox:"0 0 200 200",style:{animation:"login-graphics-spin-slow 55s linear infinite reverse"},children:[o.jsx("path",{d:"M100 20 L180 100 L100 180 L20 100 Z",stroke:"rgba(6, 182, 212, 0.2)",strokeWidth:"0.6",fill:"none"}),o.jsx("path",{d:"M100 50 L150 100 L100 150 L50 100 Z",stroke:"rgba(20, 184, 166, 0.15)",strokeWidth:"0.4",fill:"none"})]}),o.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-[0.18]",viewBox:"0 0 1200 800",fill:"none",children:[o.jsx("path",{d:"M0 400 Q300 180 600 400 T1200 400",stroke:"rgba(20, 184, 166, 0.5)",strokeWidth:"1",fill:"none",style:{animation:"login-float-smooth 10s ease-in-out infinite"}}),o.jsx("path",{d:"M0 500 Q400 280 800 500 T1200 500",stroke:"rgba(6, 182, 212, 0.45)",strokeWidth:"0.8",fill:"none",style:{animation:"login-float-smooth 13s ease-in-out infinite 0.5s"}}),o.jsx("path",{d:"M0 300 Q500 450 1200 300",stroke:"rgba(20, 184, 166, 0.28)",strokeWidth:"0.6",fill:"none",style:{animation:"login-float-smooth 11s ease-in-out infinite 1s"}}),o.jsx("line",{x1:"0",y1:"200",x2:"1200",y2:"200",stroke:"rgba(255,255,255,0.06)",strokeWidth:"0.5",style:{animation:"login-line-fade 5s ease-in-out infinite"}}),o.jsx("line",{x1:"0",y1:"600",x2:"1200",y2:"600",stroke:"rgba(255,255,255,0.06)",strokeWidth:"0.5",style:{animation:"login-line-fade 5s ease-in-out infinite 1s"}})]}),o.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 border border-teal-400/20 rounded-full",style:{animation:"login-float-3d 14s cubic-bezier(0.45, 0, 0.55, 1) infinite"}}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 border border-cyan-400/20 rounded-full",style:{animation:"login-float-3d 18s cubic-bezier(0.45, 0, 0.55, 1) infinite 1s"}}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] border border-teal-500/15 rounded-full",style:{animation:"login-ring-rotate 30s linear infinite"}}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[180px] h-[180px] border border-cyan-500/10 rounded-full",style:{animation:"login-ring-rotate 25s linear infinite reverse"}})]}),o.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E")`}}),o.jsx("div",{className:"relative w-full max-w-[420px]",style:{animation:"login-card-enter 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards"},children:o.jsxs("div",{className:"rounded-2xl border border-white/10 bg-[#0e1015]/95 backdrop-blur-xl overflow-hidden",style:{animation:"login-card-glow 4s ease-in-out infinite"},children:[o.jsx("div",{className:"h-1 rounded-t-2xl",style:{background:"linear-gradient(90deg, #0d9488, #22d3ee, #14b8a6, #06b6d4, #0d9488)",backgroundSize:"200% 100%",animation:"login-bar-shine 4s linear infinite"}}),o.jsxs("div",{className:"p-8 sm:p-10 bg-gradient-to-b from-[#12141a]/98 to-[#0e1118]/98",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-600 shadow-lg shadow-teal-500/25",children:o.jsx(SF,{className:"w-6 h-6 text-white",strokeWidth:2.5})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"LAB"}),o.jsx("p",{className:"text-xs font-medium text-gray-500 tracking-widest uppercase",children:"Dashboard"})]})]}),o.jsx("p",{className:"text-center text-gray-400 text-sm mb-6",children:"Sign in with your credentials"}),o.jsxs("form",{onSubmit:g,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"login-email",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(gF,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500 pointer-events-none"}),o.jsx("input",{id:"login-email",type:"email",value:e,onChange:p=>{n(p.target.value),c("")},placeholder:"name@company.com",autoComplete:"email",autoFocus:!0,disabled:d,className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-white/10 bg-[#0a0c12] text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-500/60 focus:border-teal-500/50 disabled:opacity-60 transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"login-password",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(fF,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500 pointer-events-none"}),o.jsx("input",{id:"login-password",type:"password",value:r,onChange:p=>{s(p.target.value),c("")},placeholder:"",autoComplete:"current-password",disabled:d,className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-white/10 bg-[#0a0c12] text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-500/60 focus:border-teal-500/50 disabled:opacity-60 transition-all duration-200"})]})]}),l&&o.jsx("div",{className:"rounded-xl bg-red-500/10 border border-red-500/20 px-4 py-3",children:o.jsx("p",{className:"text-sm text-red-400 font-medium",children:l})}),o.jsx("button",{type:"submit",disabled:d,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-400 hover:to-cyan-500 disabled:from-teal-700 disabled:to-cyan-800 disabled:cursor-not-allowed text-white font-semibold shadow-lg shadow-teal-500/25 hover:shadow-teal-500/40 transition-all duration-200 flex items-center justify-center gap-2",children:d?o.jsxs(o.Fragment,{children:[o.jsx(uF,{className:"w-5 h-5 animate-spin"}),o.jsx("span",{children:"Signing in"})]}):"Sign in"})]}),o.jsx("p",{className:"mt-6 text-center text-xs text-gray-500",children:"Enter your credentials to continue"})]})]})})]})}function uW(){return new URLSearchParams(Ki().search)}const Aw=["2POLE_IN5LOOP","IMACD","2POLE_Direct_Signal","HIGHEST SWING HIGH","LOWEST SWING LOW","NORMAL SWING HIGH","NORMAL SWING LOW","ProGap","CrossOver","Spike","Kicker"],Ow=["1m","3m","5m","15m","30m","1h","4h","1d"],od=[{label:"Symbol",value:"symbol"},{label:"Interval",value:"interval"},{label:"Signal Type",value:"signal_type"},{label:"Signal Source",value:"signal_source"},{label:"Candle Pattern",value:"candle_pattern"},{label:"Price",value:"price"},{label:"Squeeze Status",value:"squeeze_status"},{label:"Active Squeeze",value:"active_squeeze"},{label:"Machine ID",value:"machine_id"},{label:"Timestamp",value:"timestamp"},{label:"Processing Time",value:"processing_time_ms"},{label:"Created At",value:"created_at"},{label:"Unique ID",value:"Unique_id"},{label:"PL",value:"PL"},{label:"Hedge",value:"Hedge"},{label:"Hedge 1-1",value:"Hedge_1_1"},{label:"Hedge Buy PL",value:"Hedge_Buy_pl"},{label:"Hedge Sell PL",value:"Hedge_Sell_pl"},{label:"Hedge Order Size",value:"Hedge_order_size"},{label:"Min Comm After Hedge",value:"Min_comm_after_hedge"},{label:"Hedge Swing High Point",value:"Hedge_Swing_High_Point"},{label:"Hedge Swing Low Point",value:"Hedge_Swing_Low_Point"},{label:"Active Squeeze Trend",value:"signal_data_active_squeeze_trend"},{label:"Overall Trend RC",value:"signal_data_overall_trend_RC"},{label:"Overall Trend Percentage RC",value:"signal_data_overall_trend_percentage_RC"},{label:"Overall Trend HC",value:"signal_data_overall_trend_HC"},{label:"Overall Trend Percentage HC",value:"signal_data_overall_trend_percentage_HC"},{label:"Overall Trend 4h",value:"signal_data_overall_trend_4h"},{label:"Overall Trend Percentage 4h",value:"signal_data_overall_trend_percentage_4h"},{label:"Overall Trend 1h",value:"signal_data_overall_trend_1h"},{label:"Overall Trend Percentage 1h",value:"signal_data_overall_trend_percentage_1h"},{label:"Volume 1h",value:"signal_data_volume_1h"}],dW=[{label:"Machine ID",value:"MachineId"},{label:"Unique ID",value:"Unique_id"},{label:"Candle Time",value:"Candel_time"},{label:"Fetcher Trade Time",value:"Fetcher_Trade_time"},{label:"Operator Trade Time",value:"Operator_Trade_time"},{label:"Pair",value:"Pair"},{label:"Interval",value:"Interval"},{label:"Action",value:"Action"},{label:"PL After Comm",value:"Pl_after_comm"},{label:"Hedge Buy PL",value:"Hedge_Buy_pl"},{label:"Hedge Sell PL",value:"Hedge_Sell_pl"},{label:"Type",value:"Type"},{label:"Operator Close Time",value:"Operator_Close_time"},{label:"Signal From",value:"SignalFrom"},{label:"Profit Journey",value:"Profit_journey"},{label:"Commission Journey",value:"Commision_journey"},{label:"Stop Price",value:"Stop_price"},{label:"Save Price",value:"Save_price"},{label:"Min Comm",value:"Min_comm"},{label:"Hedge",value:"Hedge"},{label:"Hedge 1-1 Bool",value:"Hedge_1_1_bool"},{label:"Hedge Order Size",value:"Hedge_order_size"},{label:"Min Comm After Hedge",value:"Min_comm_after_hedge"},{label:"Min Profit",value:"Min_profit"},{label:"Buy Qty",value:"Buy_qty"},{label:"Buy Price",value:"Buy_price"},{label:"Buy PL",value:"Buy_pl"},{label:"Added Qty",value:"Added_qty"},{label:"Sell Qty",value:"Sell_qty"},{label:"Sell Price",value:"Sell_price"},{label:"Sell PL",value:"Sell_pl"},{label:"Close Price",value:"Close_price"},{label:"Commission",value:"Commission"},{label:"Investment",value:"Investment"},{label:"Swing1",value:"Swing1"},{label:"Swing2",value:"Swing2"},{label:"Swing3",value:"Swing3"},{label:"Swing4",value:"Swing4"},{label:"Swing5",value:"Swing5"},{label:"Hedge Swing High Point",value:"Hedge_Swing_High_Point"},{label:"Hedge Swing Low Point",value:"Hedge_Swing_Low_Point"},{label:"Temp High Point",value:"Temp_High_Point"},{label:"Temp Low Point",value:"Temp_Low_Point"}],Dw="LABEL_ROW";function fW({item:t,index:e,moveLabel:n,children:r,onHover:s,onDrop:l}){const c=Kr.useRef(null),[,d]=oy({accept:Dw,hover(p){p.index!==e&&(n(p.index,e),p.index=e,s&&s())},drop(){l&&l()}}),[{isDragging:h},g]=ly({type:Dw,item:{index:e},collect:p=>({isDragging:p.isDragging()})});return g(d(c)),o.jsx("div",{ref:c,style:{opacity:h?.5:1,cursor:"grab",width:"auto",minWidth:160,maxWidth:340,flex:"1 1 220px",marginBottom:0,background:"inherit",boxSizing:"border-box",display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:r})}function hW({items:t,moveLabel:e,renderRow:n,activeJsonLabels:r,setActiveJsonLabels:s,showUnchecked:l,dragOverIndex:c,setDragOverIndex:d}){return o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12,width:"100%",alignItems:"flex-start",justifyContent:"flex-start",boxSizing:"border-box",minHeight:60,position:"relative"},children:t.map((h,g)=>o.jsxs("div",{style:{position:"relative",minWidth:220,maxWidth:340,flex:"1 1 220px",boxSizing:"border-box",marginBottom:0,display:"flex"},children:[c===g&&o.jsxs("div",{style:{position:"absolute",top:-8,left:0,width:"100%",height:0,zIndex:10,pointerEvents:"none",display:"flex",alignItems:"center"},children:[o.jsx("div",{style:{width:32,height:32,background:"#0ea5e9",color:"#fff",borderRadius:"50%",fontWeight:700,fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #0ea5e944",marginLeft:8,marginBottom:2},children:g+1}),o.jsx("div",{style:{flex:1,height:4,background:"#ffe066",borderRadius:2,marginLeft:12,marginRight:8}})]}),o.jsxs(fW,{item:h,index:g,moveLabel:e,onHover:()=>d(g),onDrop:()=>d(null),children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,minWidth:22},children:[o.jsxs("span",{style:{fontWeight:700,color:"#0ea5e9",minWidth:22,textAlign:"right"},children:[g+1,"."]}),h&&h.type==="json"&&Array.isArray(h.intervals)&&(()=>{const p=(h.intervals||[]).filter(({exists:k})=>k),y=p.filter(({interval:k})=>{var S;return!!((S=r==null?void 0:r[h.value])!=null&&S[k])}),_=p.length>0&&y.length===p.length,b=()=>{const k=!_;s(S=>{const E={...S};return E[h.value]||(E[h.value]={}),p.forEach(({interval:O})=>{E[h.value][O]=k}),E})};return o.jsxs("button",{onClick:b,style:{padding:"2px 8px",borderRadius:4,border:"none",fontWeight:600,fontSize:12,background:_?"#22c55e":"#ef4444",color:"#fff",cursor:"pointer",transition:"background 0.2s",boxShadow:_?"0 2px 4px #22c55e44":"0 2px 4px #ef444444",minWidth:36},title:`${_?"Uncheck":"Check"} all intervals for ${(h==null?void 0:h.label)||""}`,children:[y.length,"/",p.length]})})()]}),n&&n(h,g)]})]},h.type+"_"+h.value))})}const gW=()=>{var Zr,ii,di;const t=uW(),e=((Zr=t.get("symbols"))==null?void 0:Zr.split(","))||[];t.get("interval"),t.get("type");const n=R=>{if(!R)return"";try{const w=new Date(R);if(isNaN(w.getTime()))return R;const N=w.getUTCDate().toString().padStart(2,"0"),I=(w.getUTCMonth()+1).toString().padStart(2,"0"),ne=w.getUTCFullYear().toString().slice(-2),ae=w.getUTCHours().toString().padStart(2,"0"),ge=w.getUTCMinutes().toString().padStart(2,"0");return`${N}-${I}-${ne} ${ae}:${ge}`}catch{return R}},r=R=>{const w=["Candle_Time","timestamp","created_at","Time","Candel_time","Fetcher_Trade_time","Operator_Trade_time","Operator_Close_time","candle_time","time","date"],N=["processing_time_ms","processing_time"];return w.some(ne=>R.toLowerCase().includes(ne.toLowerCase()))&&!N.some(ne=>R.toLowerCase().includes(ne.toLowerCase()))},s=(R,w)=>{if(R==null||R==="")return"";if(r(w))return n(R);if(w==="PL"){const N=parseFloat(R);if(!isNaN(N))return N.toFixed(2)}return String(R)},[l,c]=x.useState(()=>{const R=localStorage.getItem("groupview_theme");if(R)return R==="dark";const w=localStorage.getItem("theme");return w?w==="dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{l?(document.body.classList.add("dark"),localStorage.setItem("groupview_theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("groupview_theme","light"))},[l]),x.useEffect(()=>{const R=w=>{if(w.key==="theme"||w.key==="groupview_theme"){const N=w.newValue==="dark";c(N)}};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[]);const[d,h]=x.useState(()=>{const R=localStorage.getItem("groupview_selected_signals");if(R)return JSON.parse(R);const w={};return Aw.forEach(N=>w[N]=!0),w}),[g,p]=x.useState(()=>localStorage.getItem("groupview_signal_radio_mode")==="true"),[y,_]=x.useState(()=>localStorage.getItem("groupview_signal_toggle_all")==="true"),[b,k]=x.useState([]);x.useEffect(()=>{(async()=>{try{const N=await(await Nn("/api/machines")).json(),I=Array.isArray(N.machines)?N.machines.map(ne=>({MachineId:ne.machineid,Active:ne.active})):[];console.log(" [GroupViewPage] Fetched machines:",I),k(I)}catch(w){console.error(" [GroupViewPage] Error fetching machines:",w),k([])}})()},[]);const S=b,[E,O]=x.useState(()=>{const R=localStorage.getItem("groupview_selected_machines");if(R)return JSON.parse(R);const w={};return S.forEach(N=>w[N.MachineId]=!0),w}),[T,D]=x.useState(()=>localStorage.getItem("groupview_machine_radio_mode")==="true"),[F,Z]=x.useState(()=>localStorage.getItem("groupview_machine_toggle_all")==="true"),[K,L]=x.useState([]),[Q,se]=x.useState(()=>{const R=localStorage.getItem("groupview_selected_actions");return R?JSON.parse(R):{BUY:!0,SELL:!0}});x.useEffect(()=>{if(K.length>0){const R=[...new Set(K.flatMap(w=>[w.Action,w.action,w.SignalType,w.signal_type].filter(Boolean)))];R.length>0&&se(w=>{const N={...w};return R.forEach(I=>{I in N||(N[I]=!0)}),N})}},[K]);const[ce,ye]=x.useState(()=>localStorage.getItem("groupview_action_radio_mode")==="true"),[te,xe]=x.useState(()=>localStorage.getItem("groupview_action_toggle_all")==="true"),[Ce,at]=x.useState(()=>{const R=localStorage.getItem("groupview_live_filter");if(R)try{return JSON.parse(R)}catch{return{true:!0,false:!0}}return{true:!0,false:!0}});x.useEffect(()=>{localStorage.setItem("groupview_live_filter",JSON.stringify(Ce))},[Ce]);const[le,Ve]=x.useState(()=>localStorage.getItem("groupview_live_radio_mode")==="true");x.useEffect(()=>{localStorage.setItem("groupview_live_radio_mode",le?"true":"false")},[le]),x.useEffect(()=>{Nn("/api/trades").then(R=>R.json()).then(R=>{const w=Array.isArray(R.trades)?R.trades:[],N=e.length>0?w.filter(I=>e.includes(I.pair)):w;console.log(" [GroupViewPage] Fetched trades:",{totalTrades:w.length,filteredTrades:N.length,symbols:e,sampleTrade:w[0],uniqueActions:[...new Set(w.map(I=>I.Action).filter(Boolean))]}),L(N)}).catch(R=>{console.error(" [GroupViewPage] Error fetching trades:",R),L([])})},[JSON.stringify(e)]);const[Ue,Ze]=x.useState([]),[M,oe]=x.useState(1),[P,B]=x.useState(0),[j,V]=x.useState(()=>{const R=localStorage.getItem("groupview_logs_per_page");return R?parseInt(R):100}),[fe,lt]=x.useState(!0),[et,ht]=x.useState([]),[At,xn]=x.useState(!1),[Bt,Kt]=x.useState([]),[tn,Hn]=x.useState(1),[sn,He]=x.useState(1),[Dn,Ht]=x.useState(0),[yt,dn]=x.useState(!1),[Wt,an]=x.useState("Candle_Time"),[Un,Cn]=x.useState("DESC"),[Qn,me]=x.useState(!1),[We,Ge]=x.useState(!1);x.useEffect(()=>{lt(!0),oe(1);const R=e.length>0?`${Rn("/api/SignalProcessingLogsWithUniqueId")}?symbols=${encodeURIComponent(e.join(","))}&page=1&limit=${j}`:`${Rn("/api/SignalProcessingLogsWithUniqueId")}?page=1&limit=${j}`;console.log(" [GroupViewPage] Fetching logs from URL:",R),console.log(" [GroupViewPage] Symbols:",e),console.log(" [GroupViewPage] Symbols length:",e.length),Nn(R).then(w=>{if(console.log(" [GroupViewPage] API response status:",w.status),console.log(" [GroupViewPage] API response headers:",w.headers),!w.ok)throw new Error(`HTTP error! status: ${w.status}`);return w.json()}).then(w=>{var I,ne;console.log(" [GroupViewPage] API response:",w),console.log(" [GroupViewPage] API response type:",typeof w),console.log(" [GroupViewPage] API response keys:",Object.keys(w||{}));const N=Array.isArray(w.logs)?w.logs:[];if(console.log(" [GroupViewPage] Logs array length:",N.length),N.length>0)console.log(" [GroupViewPage] First log sample:",N[0]),console.log(" [GroupViewPage] Sample log unique_id:",N[0].unique_id),console.log(" [GroupViewPage] Sample log symbol:",N[0].symbol);else{console.log(" [GroupViewPage] No logs returned from API"),console.log(" [GroupViewPage] Full API response for debugging:",w),console.log(" [GroupViewPage] Trying fallback API...");const ae=e.length>0?`${Rn("/api/SignalProcessingLogs")}?symbol=${encodeURIComponent(e.join(","))}&page=1&limit=${j}`:`${Rn("/api/SignalProcessingLogs")}?page=1&limit=${j}`;Nn(ae).then(ge=>ge.json()).then(ge=>{var de,Ke;console.log(" [GroupViewPage] Fallback API response:",ge);const Te=Array.isArray(ge.logs)?ge.logs:[];console.log(" [GroupViewPage] Fallback logs array length:",Te.length),Ze(Te),B(((de=ge.pagination)==null?void 0:de.total)||Te.length),Sr(((Ke=ge.pagination)==null?void 0:Ke.totalPages)||1),lt(!1)}).catch(ge=>{console.error(" [GroupViewPage] Fallback API error:",ge),Ze([]),lt(!1)});return}if(Ze(N),B(((I=w.pagination)==null?void 0:I.total)||N.length),Sr(((ne=w.pagination)==null?void 0:ne.totalPages)||1),lt(!1),Array.isArray(w.logs)&&w.logs.length>0){let ae;try{ae=typeof w.logs[0].json_data=="string"?JSON.parse(w.logs[0].json_data):w.logs[0].json_data}catch(ge){console.log(" [GroupViewPage] JSON parse error:",ge);return}}}).catch(w=>{console.error(" [GroupViewPage] Error fetching logs:",w),console.error(" [GroupViewPage] Error details:",w.message),console.error(" [GroupViewPage] Error stack:",w.stack),Ze([]),lt(!1)})},[JSON.stringify(e),j]),x.useEffect(()=>{var N;if(!Wt)return;dn(!0);const R=((N=t.get("symbols"))==null?void 0:N.split(","))||[],w=R.length>0?`${Rn("/api/SignalProcessingLogsWithUniqueId")}?symbols=${encodeURIComponent(R.join(","))}&page=${tn}&limit=${j}&sortKey=${Wt}&sortDirection=${Un}`:`${Rn("/api/SignalProcessingLogsWithUniqueId")}?page=${tn}&limit=${j}&sortKey=${Wt}&sortDirection=${Un}`;Nn(w).then(I=>I.json()).then(I=>{var ne,ae;Kt(Array.isArray(I.logs)?I.logs:[]),Ht(((ne=I.pagination)==null?void 0:ne.total)||0),He(((ae=I.pagination)==null?void 0:ae.totalPages)||1),dn(!1)}).catch(()=>{Kt([]),Ht(0),He(1),dn(!1)})},[tn,j,Wt,Un]);const[ie,Pe]=x.useState(()=>{const R=localStorage.getItem("groupview_selected_candle_types");return R?JSON.parse(R):{Regular:!0,Heiken:!0}});x.useEffect(()=>{localStorage.setItem("groupview_selected_candle_types",JSON.stringify(ie))},[ie]);const z=x.useMemo(()=>{const R={Regular:0,Heiken:0,Unknown:0};return Ue.forEach(w=>{var ae;const N=((ae=w.candle_pattern)==null?void 0:ae.toLowerCase())||"";N==="regular"||N==="normal"||N==="regular_candle"?R.Regular++:N==="heiken"||N==="heikin"||N==="heiken-ashi"||N==="heiken_ashi"||N==="heiken_candle"?R.Heiken++:R.Unknown++}),R},[Ue]),pe=Ue.filter(R=>{var ne;const w=((ne=R.candle_pattern)==null?void 0:ne.toLowerCase())||"",N=w==="regular"||w==="normal"||w==="regular_candle",I=w==="heiken"||w==="heikin"||w==="heiken-ashi"||w==="heiken_ashi"||w==="heiken_candle";return ie.Regular&&N||ie.Heiken&&I?!0:!ie.Regular&&!ie.Heiken?!1:(w===""?console.log(" [GroupViewPage] Log with empty candle pattern:",R):console.log(" [GroupViewPage] Log with unknown candle pattern:",w,R),!0)});x.useEffect(()=>{console.log(" [GroupViewPage] Filtered logs summary:",{totalLogs:Ue.length,filteredLogs:pe.length,selectedCandleTypes:ie,candleTypeCounts:z})},[Ue,pe,ie,z]);function Fe(R){return R.filter(w=>{const N=w.exist_in_exchange??w.Exist_in_exchange,I=N===!0||N==="true"||N===1||N==="1";if(!(Ce.true&&Ce.false)){if(Ce.true&&!I)return!1;if(Ce.false&&I)return!1;if(!Ce.true&&!Ce.false)return!1}if(Object.keys(d).length&&!d[w.SignalFrom]||Object.keys(E).length&&!E[w.MachineId])return!1;if(Object.keys(Q).length){const ne=w.Action||w.action||w.SignalType||w.signal_type;if(!Q[ne])return!1}return!0})}const bt=Fe(K),dt=R=>{if(R<10||R>5e3)return;V(R),oe(1),localStorage.setItem("groupview_logs_per_page",R.toString()),lt(!0);const w=e.length>0?`${Rn("/api/SignalProcessingLogsWithUniqueId")}?symbols=${encodeURIComponent(e.join(","))}&page=1&limit=${R}`:`${Rn("/api/SignalProcessingLogsWithUniqueId")}?page=1&limit=${R}`;Nn(w).then(N=>N.json()).then(N=>{var ne,ae;const I=Array.isArray(N.logs)?N.logs:[];Ze(I),B(((ne=N.pagination)==null?void 0:ne.total)||I.length),Sr(((ae=N.pagination)==null?void 0:ae.totalPages)||1),lt(!1),console.log(`[GroupViewPage] Changed to ${R} rows per page, fetched ${I.length} logs`)}).catch(N=>{console.error("[GroupViewPage] Error fetching logs:",N),Ze([]),lt(!1)})},Zt=R=>{if(R<1||R>En)return;lt(!0),oe(R);const w=e.length>0?`${Rn("/api/SignalProcessingLogsWithUniqueId")}?symbols=${encodeURIComponent(e.join(","))}&page=${R}&limit=${j}`:`${Rn("/api/SignalProcessingLogsWithUniqueId")}?page=${R}&limit=${j}`;Nn(w).then(N=>N.json()).then(N=>{var ne;const I=Array.isArray(N.logs)?N.logs:[];Ze(I),console.log(`[GroupViewPage] Fetched ${I.length} logs for symbols: ${e.join(", ")||"all"} (Page ${R} of ${((ne=N.pagination)==null?void 0:ne.totalPages)||1})`)}).catch(N=>{console.error("[GroupViewPage] Error fetching logs:",N),Ze([])}).finally(()=>{lt(!1)})},Vt=o.jsx(Z0,{canonicalSignalKeys:Aw,selectedSignals:d,setSelectedSignals:h,signalRadioMode:g,setSignalRadioMode:p,signalToggleAll:y,setSignalToggleAll:_,allMachines:S,selectedMachines:E,setSelectedMachines:O,machineRadioMode:T,setMachineRadioMode:D,machineToggleAll:F,setMachineToggleAll:Z,selectedActions:Q,setSelectedActions:se,actionRadioMode:ce,setActionRadioMode:ye,actionToggleAll:te,setActionToggleAll:xe,liveFilter:Ce,setLiveFilter:at,liveRadioMode:le,setLiveRadioMode:Ve,trades:K,darkMode:l});localStorage.getItem("groupview_reputation_enabled"),localStorage.getItem("groupview_reputation_intensity"),localStorage.getItem("groupview_reputation_mode"),K.filter(R=>{const w=R.exist_in_exchange??R.Exist_in_exchange,N=w===!0||w==="true"||w===1||w==="1";if(!(Ce.true&&Ce.false)){if(Ce.true&&!N)return!1;if(Ce.false&&N)return!1;if(!Ce.true&&!Ce.false)return!1}return!(Object.keys(d).length&&!d[R.SignalFrom]||Object.keys(E).length&&!E[R.MachineId]||Object.keys(Q).length&&!Q[R.action])});const kt=x.useMemo(()=>{const R={};return bt.forEach(w=>{w.unique_id&&(R[w.unique_id]=w)}),console.log("GroupViewPage tradesByUniqueId created:",{totalTrades:bt.length,tradesWithUniqueId:Object.keys(R).length,sampleKeys:Object.keys(R).slice(0,5),sampleTrades:Object.values(R).slice(0,3)}),R},[bt]),[ct,ft]=x.useState(()=>{const R=localStorage.getItem("groupview_font_size");return R?parseFloat(R):1});x.useEffect(()=>{localStorage.setItem("groupview_font_size",ct)},[ct]),x.useEffect(()=>{const R=localStorage.getItem("groupview_selected_json_columns");R&&JSON.parse(R)},[JSON.stringify(et)]),x.useEffect(()=>{},[]),et&&et.length>0,x.useEffect(()=>{localStorage.getItem("groupview_selected_columns")},[]),x.useEffect(()=>{},[]),x.useEffect(()=>{localStorage.getItem("groupview_selected_trade_columns")},[]),x.useEffect(()=>{},[]);const Xt="groupview_regular_labels",pn=od.map(R=>R.value),Yn=()=>{const R=localStorage.getItem(Xt);return R?JSON.parse(R):pn},[Tn,Gn]=x.useState(()=>{const R=localStorage.getItem("groupview_settings_modal_open");return R?JSON.parse(R):!1}),[In,bn]=x.useState(Yn()),re="groupview_json_labels",Ae=()=>{const R=localStorage.getItem(re);if(R)try{const w=JSON.parse(R);return w&&typeof w=="object"?w:{}}catch{return{}}return{}},[$e,zt]=x.useState(Ae());function Xe(R){const w=new Set,N={};console.log(" [extractJsonLabelsAndIntervals] Starting extraction with",R.length,"logs"),R.forEach((ne,ae)=>{if(!ne.json_data){ae<3&&console.log(` [extractJsonLabelsAndIntervals] Log ${ae}: No json_data`);return}let ge;try{if(typeof ne.json_data=="string"){let Ke=ne.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");ge=JSON.parse(Ke)}else ge=ne.json_data}catch(Ke){ae<3&&console.log(` [extractJsonLabelsAndIntervals] Log ${ae}: JSON parse error:`,Ke);return}ae<3&&console.log(` [extractJsonLabelsAndIntervals] Log ${ae} JSON keys:`,Object.keys(ge||{}));const Te=(ge==null?void 0:ge.signal_data)||(ge==null?void 0:ge.signaldata)||(ge==null?void 0:ge.signalData);ae<3&&console.log(` [extractJsonLabelsAndIntervals] Log ${ae} signalData:`,Te?Object.keys(Te):"undefined");const de=Te==null?void 0:Te.all_last_rows;ae<3&&console.log(` [extractJsonLabelsAndIntervals] Log ${ae} allRows:`,de?Object.keys(de):"undefined"),de&&typeof de=="object"&&Object.keys(de).forEach(Ke=>{if(Ke==="candle_type")return;w.add(Ke);const Ft=de[Ke];Ft&&typeof Ft=="object"&&Object.keys(Ft).forEach(hn=>{N[hn]||(N[hn]=new Set),N[hn].add(Ke)})})}),console.log(" [extractJsonLabelsAndIntervals] Final intervalSet:",Array.from(w)),console.log(" [extractJsonLabelsAndIntervals] Final labelMap keys:",Object.keys(N));const I=Array.from(w).sort((ne,ae)=>{const ge=["1m","3m","5m","15m","30m","1h","2h","4h","1d"];return ge.indexOf(ne)-ge.indexOf(ae)});return Object.entries(N).map(([ne,ae])=>({label:ne,value:ne,intervals:I.map(ge=>({interval:ge,exists:ae.has(ge)}))}))}x.useEffect(()=>{var R,w,N,I,ne;if(Ue.length>0){const ae=Xe(Ue);if(console.log(" [GroupViewPage] Extracted JSON labels:",ae),console.log(" [GroupViewPage] First log json_data sample:",(R=Ue[0])==null?void 0:R.json_data),console.log(" [GroupViewPage] First log json_data keys:",Object.keys(((w=Ue[0])==null?void 0:w.json_data)||{})),(N=Ue[0])!=null&&N.json_data){let ge;try{if(typeof Ue[0].json_data=="string"){let de=Ue[0].json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");ge=JSON.parse(de)}else ge=Ue[0].json_data;console.log(" [GroupViewPage] Parsed JSON keys:",Object.keys(ge||{})),console.log(" [GroupViewPage] Full JSON structure:",ge),console.log(" [GroupViewPage] Looking for signal_data:",ge==null?void 0:ge.signal_data),console.log(" [GroupViewPage] Looking for signaldata:",ge==null?void 0:ge.signaldata),console.log(" [GroupViewPage] Looking for all_last_rows in signal_data:",(I=ge==null?void 0:ge.signal_data)==null?void 0:I.all_last_rows),console.log(" [GroupViewPage] Looking for all_last_rows in signaldata:",(ne=ge==null?void 0:ge.signaldata)==null?void 0:ne.all_last_rows),["signal_data","signaldata","signalData","Signal_data","Signal_Data"].forEach(de=>{ge[de]&&(console.log(` [GroupViewPage] Found field: ${de}`,ge[de]),ge[de].all_last_rows&&console.log(` [GroupViewPage] Found all_last_rows in ${de}:`,Object.keys(ge[de].all_last_rows)))})}catch(Te){console.log(" [GroupViewPage] JSON parse error:",Te)}}ae.length>0&&console.log(" [GroupViewPage] First label intervals:",ae[0].intervals),ht(ae),xn(!0)}},[Ue]);function tt(R,w){const N={};R.forEach(de=>{N[de.value]=de});const I=Object.keys(w||{}),ne=I.filter(de=>N[de]),ae={};R.forEach(de=>{!w[de.value]&&!ae[de.value]&&(ae[de.value]=de)});const ge=Object.values(ae),Te=I.filter(de=>!N[de]);return{existed:ne,newlyAdded:ge,deleted:Te}}tt(et,$e||{}),At?et.filter(R=>$e[R.value]).flatMap(R=>(R.intervals||[]).filter(w=>{var N;return(N=$e[R.value])==null?void 0:N[w]}).map(w=>({parent:R,interval:w}))):Object.keys($e).flatMap(R=>Object.keys($e[R]||{}).filter(w=>$e[R][w]).map(w=>({parent:{label:R,value:R},interval:w})));const rt="groupview_unified_labels_order";function A(){const R=[],w=new Set;od.forEach(I=>{w.has(I.value)||(R.push({type:"regular",value:I.value,label:I.label}),w.add(I.value))});const N=new Set;return et.forEach(I=>{N.has(I.value)||(R.push({type:"json",value:I.value,label:I.label,intervals:I.intervals}),N.add(I.value))}),R}function G(R){const w=localStorage.getItem(rt);if(w)try{const N=JSON.parse(w),I={};R.forEach(Te=>{I[Te.type+"_"+Te.value]=Te});const ne=N.map(Te=>I[Te.type+"_"+Te.value]).filter(Boolean),ae=new Set(N.map(Te=>Te.type+"_"+Te.value)),ge=R.filter(Te=>!ae.has(Te.type+"_"+Te.value));return[...ne,...ge]}catch{return R}return R}const[U,J]=x.useState(()=>G(A())),Y=x.useRef(!1);x.useEffect(()=>{if(Y.current)return;const R=A();J(w=>{const N=new Set(w.map(Te=>Te.type+"_"+Te.value)),I=new Set(R.map(Te=>Te.type+"_"+Te.value));let ne=w.filter(Te=>I.has(Te.type+"_"+Te.value));const ae=R.filter(Te=>!N.has(Te.type+"_"+Te.value));return[...ne,...ae]})},[JSON.stringify(et)]),x.useEffect(()=>{const R=A();J(G(R))},[JSON.stringify(et)]);const[X,we]=x.useState(!1),[je,_e]=x.useState(!1),[Ee,Re]=x.useState({}),[gt,Nt]=x.useState(!1);x.useEffect(()=>{const R=localStorage.getItem("groupview_interval_master_checked");R?Re(JSON.parse(R)):Ow.forEach(w=>Re(N=>({...N,[w]:!0})))},[]),x.useEffect(()=>{localStorage.setItem("groupview_interval_master_checked",JSON.stringify(Ee))},[Ee]),x.useEffect(()=>{const R=localStorage.getItem("groupview_all_regular_checked");_e(R?JSON.parse(R):!1)},[]),x.useEffect(()=>{localStorage.setItem("groupview_all_regular_checked",JSON.stringify(je))},[je]),x.useEffect(()=>{const R=localStorage.getItem("groupview_show_unchecked");we(R?JSON.parse(R):!1)},[]),x.useEffect(()=>{localStorage.setItem("groupview_show_unchecked",JSON.stringify(X))},[X]);const Ut="groupview_settings_modal_pos",vt="groupview_settings_modal_size",$t=()=>{const R=localStorage.getItem(Ut);let w={x:window.innerWidth/2-400,y:window.innerHeight/2-300};if(R)try{const de=JSON.parse(R);typeof de.x=="number"&&typeof de.y=="number"&&(w=de)}catch{}const N=fn(),I=window.innerWidth,ne=window.innerHeight;let ae=Math.min(N.width,I);Math.min(N.height,ne);let ge=Math.max(0,Math.min(I-ae,w.x)),Te=w.y;return Te<0&&(Te=0),Te>ne-48&&(Te=ne-48),{x:ge,y:Te}},fn=()=>{const R=localStorage.getItem(vt);let w={width:700,height:500};if(R)try{const ne=JSON.parse(R);typeof ne.width=="number"&&typeof ne.height=="number"&&(w=ne)}catch{}const N=window.innerWidth,I=window.innerHeight;return{width:Math.min(w.width,N),height:Math.min(w.height,I)}},[Sn,mn]=x.useState($t),[Ot,ur]=x.useState(fn),[Mr,Jn]=x.useState(!1),ar=x.useRef({x:0,y:0});function Lr(R){Jn(!0),ar.current={x:R.clientX-Sn.x,y:R.clientY-Sn.y},document.body.style.userSelect="none"}x.useEffect(()=>{function R(N){if(!Mr)return;const I=window.innerWidth,ne=window.innerHeight,ae=document.querySelector('[role="dialog"][aria-label="Settings"]');let ge=ae?ae.offsetWidth:Ot.width;ae?ae.offsetHeight:Ot.height;const Te=Math.floor(.05*ge),de=48;let Ke=Math.max(-ge+Te,Math.min(I-Te,N.clientX-ar.current.x)),Ft=Math.max(de*-.9,Math.min(ne-48,N.clientY-ar.current.y));mn({x:Ke,y:Ft})}function w(){Jn(!1),document.body.style.userSelect=""}return Mr&&(window.addEventListener("mousemove",R),window.addEventListener("mouseup",w)),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",w)}},[Mr,Sn,Ot]);const er=x.useRef(null),[Ne,nt]=x.useState(!1),wt=x.useRef({x:0,y:0,width:0,height:0}),[nn,ln]=x.useState(null);function Dt(R,w){R.stopPropagation(),nt(!0),ln(w);const N=er.current;wt.current={x:R.clientX,y:R.clientY,width:N?N.offsetWidth:Ot.width,height:N?N.offsetHeight:Ot.height,left:N?N.offsetLeft:Sn.x,top:N?N.offsetTop:Sn.y},document.body.style.userSelect="none"}x.useEffect(()=>{function R(N){if(!Ne||!nn)return;let{x:I,y:ne,width:ae,height:ge,left:Te,top:de}=wt.current,Ke=N.clientX-I,Ft=N.clientY-ne,hn=ae,An=ge,xr=Sn.x,Or=Sn.y;switch(nn){case"right":hn=Math.max(200,ae+Ke);break;case"left":hn=Math.max(200,ae-Ke),xr=Te+Ke;break;case"bottom":An=Math.max(100,ge+Ft);break;case"top":An=Math.max(100,ge-Ft),Or=de+Ft;break;case"top-left":hn=Math.max(200,ae-Ke),xr=Te+Ke,An=Math.max(100,ge-Ft),Or=de+Ft;break;case"top-right":hn=Math.max(200,ae+Ke),An=Math.max(100,ge-Ft),Or=de+Ft;break;case"bottom-left":hn=Math.max(200,ae-Ke),xr=Te+Ke,An=Math.max(100,ge+Ft);break;case"bottom-right":hn=Math.max(200,ae+Ke),An=Math.max(100,ge+Ft);break}ur({width:hn,height:An}),mn({x:xr,y:Or});const yr=er.current;yr&&(yr.style.width=hn+"px",yr.style.height=An+"px",yr.style.left=xr+"px",yr.style.top=Or+"px")}function w(){nt(!1),ln(null),document.body.style.userSelect=""}return Ne&&(window.addEventListener("mousemove",R),window.addEventListener("mouseup",w)),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",w)}},[Ne,Sn,Ot,nn]),x.useEffect(()=>{localStorage.setItem(vt,JSON.stringify(Ot))},[Ot]),x.useEffect(()=>{function R(){const w=document.querySelector('[role="dialog"][aria-label="Settings"]');if(!w)return;const N=w.getBoundingClientRect();let I=Sn.x,ne=Sn.y;N.width,N.height;const ae=window.innerWidth,ge=window.innerHeight,Te=48,de=Math.floor(.05*N.width),Ke=Math.floor(.05*N.height);N.right>ae-de&&(I=Math.max(0,ae-de-N.width)),N.bottom>ge-Ke&&(ne=Math.max(Te,ge-Ke-N.height)),N.left<-N.width+de&&(I=-N.width+de),N.top<-N.height+Ke&&(ne=-N.height+Ke),N.width>ae,N.height>ge,(I!==Sn.x||ne!==Sn.y)&&mn({x:I,y:ne}),w.style&&(w.style.maxWidth=ae+"px",w.style.maxHeight=ge+"px",N.width>ae&&(w.style.width=ae+"px"),N.height>ge&&(w.style.height=ge+"px"))}return window.addEventListener("resize",R),R(),()=>window.removeEventListener("resize",R)},[Sn]),x.useEffect(()=>{localStorage.setItem(Ut,JSON.stringify(Sn))},[Sn]);const[yn,lr]=x.useState(!1),Pt="groupview_settings_modal_scale",[$n,rn]=x.useState(()=>{const R=localStorage.getItem(Pt);return R?parseFloat(R):1});x.useEffect(()=>{localStorage.setItem(Pt,$n)},[$n]),x.useEffect(()=>{if(Tn)lr(!0);else{const R=setTimeout(()=>lr(!1),180);return()=>clearTimeout(R)}},[Tn]),x.useEffect(()=>{localStorage.setItem("groupview_settings_modal_open",JSON.stringify(Tn))},[Tn]),x.useEffect(()=>{function R(w){Tn&&w.key==="Escape"&&Gn(!1)}return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[Tn]);const[ke,Me]=x.useState(()=>{const R=localStorage.getItem("groupview_settings_modal_opacity");return R?parseFloat(R):1});x.useEffect(()=>{localStorage.setItem("groupview_settings_modal_opacity",ke)},[ke]);const[Le,Ct]=x.useState(()=>{const R=localStorage.getItem("groupview_label_font_size");return R?parseFloat(R):1}),[pt,Yt]=x.useState(()=>{const R=localStorage.getItem("groupview_label_wrap");return R?JSON.parse(R):!1});x.useEffect(()=>{localStorage.setItem("groupview_label_font_size",Le)},[Le]),x.useEffect(()=>{localStorage.setItem("groupview_label_wrap",JSON.stringify(pt))},[pt]);const[St,q]=x.useState(()=>{const R=localStorage.getItem("groupview_filter_bar_visible");return R?JSON.parse(R):!0});x.useEffect(()=>{localStorage.setItem("groupview_filter_bar_visible",JSON.stringify(St))},[St]);function ee(){const R=U.map(I=>({type:I.type,value:I.value}));localStorage.setItem(rt,JSON.stringify(R)),localStorage.setItem(Xt,JSON.stringify(In)),localStorage.setItem(re,JSON.stringify($e));const w=document.createElement("div");w.textContent=" Settings saved successfully!",w.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #22c55e;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      z-index: 10000;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
      animation: slideIn 0.3s ease-out;
    `;const N=document.createElement("style");N.textContent=`
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
    `,document.head.appendChild(N),document.body.appendChild(w),setTimeout(()=>{w.parentNode&&w.parentNode.removeChild(w)},3e3)}const[ve,Qe]=x.useState(null),[ot,xt]=x.useState("asc"),Gt=(R,w,N=null,I=null)=>{console.log("T button clicked:",{type:R,key:w,parentKey:N,interval:I});const ne={type:R,key:w,parentKey:N,interval:I};ve&&ve.type===R&&ve.key===w&&ve.parentKey===N&&ve.interval===I?xt(ae=>ae==="asc"?"desc":"asc"):(Qe(ne),xt("asc"))},ze=(R,w)=>{var ge,Te;if(!w)return;const{type:N,key:I,parentKey:ne,interval:ae}=w;if(N==="regular"){const de=["PL","Hedge","Hedge_1_1","Hedge_Buy_pl","Hedge_Sell_pl","Hedge_order_size","Min_comm_after_hedge","Hedge_Swing_High_Point","Hedge_Swing_Low_Point"],Ke=["signal_data_active_squeeze_trend","signal_data_overall_trend_RC","signal_data_overall_trend_percentage_RC","signal_data_overall_trend_HC","signal_data_overall_trend_percentage_HC","signal_data_overall_trend_4h","signal_data_overall_trend_percentage_4h","signal_data_overall_trend_1h","signal_data_overall_trend_percentage_1h","signal_data_volume_1h"];if(de.includes(I)){const Ft=kt[R.unique_id];if(Ft&&Ft.unique_id){const An={PL:"Pl_after_comm",Hedge:"Hedge",Hedge_1_1:"Hedge_1_1_bool",Hedge_Buy_pl:"Hedge_Buy_pl",Hedge_Sell_pl:"Hedge_Sell_pl",Hedge_order_size:"Hedge_order_size",Min_comm_after_hedge:"Min_comm_after_hedge",Hedge_Swing_High_Point:"Hedge_Swing_High_Point",Hedge_Swing_Low_Point:"Hedge_Swing_Low_Point"}[I];if(An)return Ft[An]}return}else if(Ke.includes(I)){let Ft={};try{if(typeof R.json_data=="string"){let An=R.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Ft=JSON.parse(An)}else Ft=R.json_data||{}}catch{Ft={}}const hn=(Ft==null?void 0:Ft.signal_data)||(Ft==null?void 0:Ft.signaldata)||(Ft==null?void 0:Ft.signalData);if(hn&&typeof hn=="object"){const An=I.replace("signal_data_","");return hn[An]}return}return R[I]}if(N==="trade")return(ge=kt[R.unique_id])==null?void 0:ge[I];if(N==="json"&&ne&&ae){let de={};try{if(typeof R.json_data=="string"){let hn=R.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");de=JSON.parse(hn)}else de=R.json_data||{}}catch{de={}}const Ke=(de==null?void 0:de.signal_data)||(de==null?void 0:de.signaldata)||(de==null?void 0:de.signalData);return(Te=((Ke==null?void 0:Ke.all_last_rows)||{})[ae])==null?void 0:Te[ne]}},wn=R=>ve?[...R].sort((w,N)=>{let I=ze(w,ve),ne=ze(N,ve);if(ve.type==="regular"&&r(ve.key)){const Te=new Date(I),de=new Date(ne);if(!isNaN(Te.getTime())&&!isNaN(de.getTime()))return Te<de?ot==="asc"?-1:1:Te>de?ot==="asc"?1:-1:0}const ae=parseFloat(I),ge=parseFloat(ne);return!isNaN(ae)&&!isNaN(ge)?ot==="asc"?ae-ge:ge-ae:(I=I==null?"":String(I),ne=ne==null?"":String(ne),I<ne?ot==="asc"?-1:1:I>ne?ot==="asc"?1:-1:0)}):R,[Lt,Pn]=x.useState(null);function qt(){const R={width:700,height:500},w=window.innerWidth,N=window.innerHeight,I=Math.max(0,Math.floor((w-R.width)/2)),ne=Math.max(0,Math.floor((N-R.height)/2));mn({x:I,y:ne}),ur(R),rn(1),localStorage.setItem(Ut,JSON.stringify({x:I,y:ne})),localStorage.setItem(vt,JSON.stringify(R)),localStorage.setItem(Pt,"1.0")}const[fr,Xn]=x.useState(null),vr="groupview_filter_table_spacing",[Ar,rr]=x.useState(()=>{const R=localStorage.getItem(vr);return R?parseInt(R):0});x.useEffect(()=>{localStorage.setItem(vr,Ar.toString())},[Ar]);const[mr,vs]=x.useState(!1),[sr,is]=x.useState(()=>e.slice());x.useEffect(()=>{if(!mr)return;function R(w){er.current&&!er.current.contains(w.target)&&vs(!1)}return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[mr]);const wr=R=>{is(w=>w.includes(R)?w.filter(N=>N!==R):[...w,R])},Ks=()=>is(e.slice()),Mn=()=>is([]),[jn,qr]=x.useState([]),[os,bs]=x.useState(!1),[si,Qt]=x.useState(1),[Oe,Je]=x.useState(1),[qn,Vn]=x.useState(0),[H,he]=x.useState(100);x.useEffect(()=>{!mr&&sr.length&&sr.length!==e.length&&(bs(!0),ts.get(Rn("/api/SignalProcessingLogsWithUniqueId"),{withCredentials:!0,params:{symbols:sr.join(","),page:si,limit:H}}).then(R=>{R.data.logs&&Array.isArray(R.data.logs)?R.data.logs.slice(0,10).forEach((w,N)=>{console.log(`[API LOG ${N}] Unique_id:`,w.unique_id)}):console.log("API /api/SignalProcessingLogsWithUniqueId response:",R.data.logs),qr(R.data.logs||[]),Je(R.data.totalPages||1),Vn(R.data.total||0)}).catch(()=>{qr([]),Je(1),Vn(0)}).finally(()=>bs(!1)))},[sr,si,H,mr]);const Se=sr.length&&sr.length!==e.length?jn:Ue;sr.length&&(sr.length,e.length),sr.length&&(sr.length,e.length),sr.length&&(sr.length,e.length),sr.length&&(sr.length,e.length),sr.length&&(sr.length,e.length);const st=R=>{R<1||R>sn||Hn(R)},Tt=(R,w)=>{console.log("W button clicked:",{type:R,key:w}),Wt===w?Cn(N=>N==="ASC"?"DESC":"ASC"):(an(w),Cn("ASC")),Qe(null),Hn(1)},It=async()=>{if(Bt.length>0)me(!0);else{const R=un(pe);if(R.length===0){alert("No data to export!");return}const w=Ir.json_to_sheet(R),N=Ir.book_new();Ir.book_append_sheet(N,w,"Data"),La(N,"exported_data.xlsx")}},gn=async R=>{if(me(!1),R==="pagination"){const w=un(Bt);if(console.log("Export pagination - wholeData length:",Bt.length),console.log("Export pagination - exportRows length:",w.length),w.length===0){alert("No data to export!");return}const N=Ir.json_to_sheet(w),I=Ir.book_new();Ir.book_append_sheet(I,N,"Data"),La(I,"exported_data.xlsx")}else if(R==="whole"){Ge(!0);const w=e.length>0?`${Rn("/api/SignalProcessingLogsWithUniqueId")}?symbols=${encodeURIComponent(e.join(","))}&limit=1000000&sortKey=${Wt}&sortDirection=${Un}`:`${Rn("/api/SignalProcessingLogsWithUniqueId")}?limit=1000000&sortKey=${Wt}&sortDirection=${Un}`;console.log("Export whole - API URL:",w);try{const I=await(await Nn(w)).json();console.log("Export whole - API response:",I);const ne=Array.isArray(I.logs)?I.logs:[];console.log("Export whole - allRows length:",ne.length);const ae=un(ne);if(console.log("Export whole - exportRows length:",ae.length),ae.length===0){alert("No data to export!"),Ge(!1);return}const ge=Ir.json_to_sheet(ae),Te=Ir.book_new();Ir.book_append_sheet(Te,ge,"Data"),La(Te,"exported_data.xlsx")}catch(N){console.error("Export whole - error:",N),alert("Failed to fetch all data for export.")}Ge(!1)}};function Rt(){const R=U.filter(w=>w.type==="regular"?In.includes(w.value):w.type==="json"&&Array.isArray(w.intervals)?(w.intervals||[]).some(({interval:N})=>{var I;return(I=$e[w.value])==null?void 0:I[N]}):!1);return console.log("getVisibleColumns - workingLabelList length:",U==null?void 0:U.length),console.log("getVisibleColumns - activeRegularLabels:",In),console.log("getVisibleColumns - visibleCols length:",R.length),R}function kn(R){if(!R)return"";const w=new Date(R);if(isNaN(w.getTime()))return R;const N=I=>I.toString().padStart(2,"0");return`${w.getFullYear()}-${N(w.getMonth()+1)}-${N(w.getDate())} ${N(w.getHours())}:${N(w.getMinutes())}:${N(w.getSeconds())}`}function un(R){const w=Rt();return R.map(N=>{let I={};try{if(typeof N.json_data=="string"){let Te=N.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");I=JSON.parse(Te)}else I=N.json_data||{}}catch{I={}}const ne=(I==null?void 0:I.signal_data)||(I==null?void 0:I.signaldata)||(I==null?void 0:I.signalData),ae=(ne==null?void 0:ne.all_last_rows)||{},ge={};return w.forEach(Te=>{let de;if(Te.type==="regular"){const Ke=["PL","Hedge","Hedge_1_1","Hedge_Buy_pl","Hedge_Sell_pl","Hedge_order_size","Min_comm_after_hedge","Hedge_Swing_High_Point","Hedge_Swing_Low_Point"],Ft=["signal_data_active_squeeze_trend","signal_data_overall_trend_RC","signal_data_overall_trend_percentage_RC","signal_data_overall_trend_HC","signal_data_overall_trend_percentage_HC","signal_data_overall_trend_4h","signal_data_overall_trend_percentage_4h","signal_data_overall_trend_1h","signal_data_overall_trend_percentage_1h","signal_data_volume_1h"];if(Ke.includes(Te.value)){const hn=kt[N.unique_id];if(hn&&hn.unique_id){const xr={PL:"Pl_after_comm",Hedge:"Hedge",Hedge_1_1:"Hedge_1_1_bool",Hedge_Buy_pl:"Hedge_Buy_pl",Hedge_Sell_pl:"Hedge_Sell_pl",Hedge_order_size:"Hedge_order_size",Min_comm_after_hedge:"Min_comm_after_hedge",Hedge_Swing_High_Point:"Hedge_Swing_High_Point",Hedge_Swing_Low_Point:"Hedge_Swing_Low_Point"}[Te.value];xr&&(de=hn[xr])}}else if(Ft.includes(Te.value)){let hn={};try{if(typeof N.json_data=="string"){let xr=N.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");hn=JSON.parse(xr)}else hn=N.json_data||{}}catch{hn={}}const An=(hn==null?void 0:hn.signal_data)||(hn==null?void 0:hn.signaldata)||(hn==null?void 0:hn.signalData);if(An&&typeof An=="object"){const xr=Te.value.replace("signal_data_","");de=An[xr]}}else de=N[Te.value];r(Te.value)?ge[Te.label]=kn(de):typeof de=="number"&&de>1e12?ge[Te.label]=de.toString():ge[Te.label]=de}else Te.type==="json"&&Array.isArray(Te.intervals)&&(Te.intervals||[]).forEach(({interval:Ke})=>{var Ft,hn;(Ft=$e[Te.value])!=null&&Ft[Ke]&&(de=(hn=ae[Ke])==null?void 0:hn[Te.value],typeof de=="number"&&de>1e12?ge[`${Te.label} [${Ke}]`]=de.toString():ge[`${Te.label} [${Ke}]`]=de)})}),ge})}const[or,Fn]=x.useState(!1),[En,Sr]=x.useState(1),[_s,kr]=x.useState(1),[ta,ao]=x.useState(0),[lo,_a]=x.useState(100);return x.useEffect(()=>{e&&e.length&&ts.get(Rn("/api/SignalProcessingLogsWithUniqueId"),{withCredentials:!0,params:{symbols:e.join(","),page:1,limit:10}}).then(R=>{console.log("Initial API /api/SignalProcessingLogsWithUniqueId response:",R.data.logs)}).catch(R=>{console.error("Initial API /api/SignalProcessingLogsWithUniqueId error:",R)})},[]),x.useEffect(()=>{const R=["1000RATSUSDTBUY2025-07-18 06:00:00+00:00Kickerheiken"];R.length&&ts.get(Rn("/api/SignalProcessingLogsByUIDs"),{withCredentials:!0,params:{uids:R.join(",")}}).then(w=>{console.log("API /api/SignalProcessingLogsByUIDs response:",w.data.logs)}).catch(w=>{console.error("API /api/SignalProcessingLogsByUIDs error:",w)})},[]),x.useEffect(()=>{if(Se&&Se.length){const R=Se.map(w=>w.unique_id).filter(Boolean);R.length&&ts.get(Rn("/api/SignalProcessingLogsByUIDs"),{withCredentials:!0,params:{uids:R.join(",")}}).then(w=>{console.log("API /api/SignalProcessingLogsByUIDs response:",w.data.logs)}).catch(w=>{console.error("API /api/SignalProcessingLogsByUIDs error:",w)})}},[Se]),o.jsxs("div",{className:l?"dark":"",style:{minHeight:"100vh",background:l?"#181a20":"#f7f7fa"},children:[o.jsxs("div",{style:{position:"absolute",top:8,right:200,zIndex:100,display:"flex",alignItems:"center",gap:12},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Spacing"}),o.jsx("button",{onClick:()=>rr(R=>R-4),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:l?"#23272f":"#fff",color:l?"#fff":"#222",cursor:"pointer"},title:"Reduce space between filters and table",children:""}),o.jsx("button",{onClick:()=>rr(R=>Math.min(100,R+4)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:l?"#23272f":"#fff",color:l?"#fff":"#222",cursor:"pointer"},title:"Increase space between filters and table",children:""}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[Ar,"px"]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Table Font"}),o.jsx("button",{onClick:()=>ft(R=>Math.max(.7,R-.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:l?"#23272f":"#fff",color:l?"#fff":"#222",cursor:"pointer"},children:"A"}),o.jsx("button",{onClick:()=>ft(R=>Math.min(2,R+.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:l?"#23272f":"#fff",color:l?"#fff":"#222",cursor:"pointer"},children:"A+"}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[Math.round(ct*100),"%"]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Label Font"}),o.jsx("button",{onClick:()=>Ct(R=>Math.max(.7,R-.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:l?"#23272f":"#fff",color:l?"#fff":"#222",cursor:"pointer"},children:"A"}),o.jsx("button",{onClick:()=>Ct(R=>Math.min(2,R+.1)),style:{padding:"2px 6px",fontSize:12,borderRadius:3,border:"1px solid #888",background:l?"#23272f":"#fff",color:l?"#fff":"#222",cursor:"pointer"},children:"A+"}),o.jsxs("span",{style:{width:28,textAlign:"right",opacity:.7,fontSize:12},children:[Math.round(Le*100),"%"]})]}),o.jsx("button",{onClick:()=>Yt(R=>!R),style:{padding:"3px 10px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:12,background:pt?l?"#0ea5e9":"#0d9488":l?"#23272f":"#fff",color:pt||l?"#fff":"#222",cursor:"pointer",boxShadow:pt?"0 2px 8px #0ea5e944":"0 2px 8px #8882",transition:"background 0.2s"},title:"Wrap label text at word boundaries",children:pt?"Unwrap Labels":"Wrap Labels"})]}),o.jsx("div",{style:{position:"absolute",top:24,left:24,zIndex:100}}),o.jsxs("div",{style:{position:"absolute",top:24,right:80,zIndex:100,display:"flex",gap:8,alignItems:"center"},children:[o.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to reset the settings screen? Yes / No")&&qt()},style:{background:"none",border:"none",cursor:"pointer",fontSize:22,color:l?"#fff":"#222",marginRight:2},"aria-label":"Reset Settings",title:"Reset Settings Screen",children:o.jsx("span",{role:"img","aria-label":"reset",children:""})}),o.jsx("button",{onClick:()=>Gn(R=>!R),style:{background:"none",border:"none",cursor:"pointer",fontSize:28,color:l?"#fff":"#222"},"aria-label":Tn?"Close Settings":"Open Settings","aria-haspopup":"dialog","aria-expanded":Tn,children:o.jsx("span",{role:"img","aria-label":"settings",children:""})})]}),yn&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.10)",zIndex:199,transition:"opacity 0.18s",opacity:Tn?1:0,pointerEvents:"none"},"aria-hidden":"true"}),o.jsxs("div",{ref:er,role:"dialog","aria-modal":"true","aria-label":"Settings",style:{position:"fixed",top:Sn.y,left:Sn.x,minHeight:100,minWidth:200,zIndex:200,width:Ot.width,maxWidth:"100vw",background:l?`rgba(35,39,47,${ke})`:`rgba(255,255,255,${ke})`,color:l?"#fff":"#222",borderRadius:18,boxShadow:"0 4px 32px 0 rgba(0,0,0,0.18)",padding:0,display:"flex",flexDirection:"column",overflow:"hidden",height:Ot.height,maxHeight:"100vh",margin:"0 auto",boxSizing:"border-box",resize:"none",cursor:Mr?"move":"default",opacity:Tn?1:0,transform:Tn?"scale(1)":"scale(0.96)",transition:"opacity 0.18s, transform 0.18s",pointerEvents:Tn?"auto":"none"},children:[[["top-left",{top:-8,left:-8,cursor:"nwse-resize"}],["top",{top:-8,left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"}],["top-right",{top:-8,right:-8,cursor:"nesw-resize"}],["right",{top:"50%",right:-8,transform:"translateY(-50%)",cursor:"ew-resize"}],["bottom-right",{bottom:-8,right:-8,cursor:"nwse-resize"}],["bottom",{bottom:-8,left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"}],["bottom-left",{bottom:-8,left:-8,cursor:"nesw-resize"}],["left",{top:"50%",left:-8,transform:"translateY(-50%)",cursor:"ew-resize"}]].map(([R,w])=>o.jsx("div",{onMouseDown:N=>Dt(N,R),style:{position:"absolute",width:18,height:18,background:l?"#0ea5e9":"#2563eb",border:"2px solid #fff",borderRadius:6,zIndex:1e3,...w,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #0ea5e944",cursor:w.cursor,userSelect:"none"},title:`Resize (${R.replace("-"," ")})`,children:o.jsx("div",{style:{width:8,height:8,borderRadius:4,background:"#fff",opacity:.8}})},R)),o.jsxs("div",{style:{width:"100%",height:"100%",transform:`scale(${$n})`,transformOrigin:"top left"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:l?"#23272f":"#fff",zIndex:2,padding:12,borderTopLeftRadius:18,borderTopRightRadius:18,userSelect:"none",gap:8,minHeight:0},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:24,minWidth:56,marginRight:12,cursor:"grab",userSelect:"none",background:"transparent"},onMouseDown:Lr,children:o.jsx("div",{style:{width:48,height:16,background:l?"#334155":"#e0e7ef",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #0ea5e944",gap:2},children:[0,1,2,3].map(R=>o.jsx("div",{style:{width:6,height:6,borderRadius:3,background:l?"#fff":"#222",opacity:.7,margin:2}},R))})}),o.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13,marginRight:12},children:[o.jsx("span",{style:{opacity:.7},children:"Modal Scale"}),o.jsx("input",{type:"range",min:.7,max:1.5,step:.01,value:$n,onChange:R=>rn(parseFloat(R.target.value)),style:{width:70}}),o.jsxs("span",{style:{width:32,textAlign:"right",opacity:.7},children:[Math.round($n*100),"%"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13},children:[o.jsx("span",{style:{opacity:.7},children:"Opacity"}),o.jsx("input",{type:"range",min:.3,max:1,step:.01,value:ke,onChange:R=>Me(parseFloat(R.target.value)),style:{width:70}}),o.jsxs("span",{style:{width:32,textAlign:"right",opacity:.7},children:[Math.round(ke*100),"%"]})]}),o.jsx("button",{onClick:()=>Nt(R=>!R),style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:gt?"#0ea5e9":"#334155",color:"#fff",boxShadow:gt?"0 2px 8px #0ea5e944":"0 2px 8px #33415544",cursor:"pointer",transition:"background 0.2s"},children:gt?"Show Regular Labels":"Minimize Regular Labels"}),o.jsx("button",{onClick:()=>we(R=>!R),style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:X?"#22c55e":"#ef4444",color:"#fff",boxShadow:X?"0 2px 8px #22c55e44":"0 2px 8px #ef444444",cursor:"pointer",transition:"background 0.2s"},children:X?"Show Unchecked":"Hide Unchecked"}),o.jsx("button",{onClick:()=>{bn(je?[]:od.map(R=>R.value)),_e(R=>!R)},style:{padding:"6px 12px",borderRadius:6,border:"none",fontWeight:600,fontSize:14,background:je?"#22c55e":"#ef4444",color:"#fff",boxShadow:je?"0 2px 8px #22c55e44":"0 2px 8px #ef444444",cursor:"pointer",transition:"background 0.2s"},children:je?"Uncheck All Regular":"Check All Regular"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap",marginLeft:8},children:[o.jsx("span",{style:{fontWeight:500,marginRight:4},children:"Intervals:"}),Ow.map(R=>o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2,minWidth:36},children:[o.jsx("input",{type:"checkbox",checked:Ee[R]||!1,onChange:w=>{const N=w.target.checked;Re({...Ee,[R]:N}),zt(I=>{const ne={...I};return et.forEach(ae=>{ae.intervals.some(ge=>ge.interval===R&&ge.exists)&&(ne[ae.value]={...ne[ae.value],[R]:N})}),ne})},style:{transform:"scale(1.05)"}}),o.jsx("span",{style:{fontSize:13},children:R})]},R))]})]}),o.jsx("button",{onClick:ee,style:{padding:"6px 18px",borderRadius:6,border:"none",fontWeight:600,fontSize:15,background:"#22c55e",color:"#fff",boxShadow:"0 2px 8px #22c55e44",cursor:"pointer",transition:"background 0.2s",marginLeft:8},title:"Save label order and checkbox state",children:"Save"}),o.jsx("button",{onClick:()=>Gn(!1),style:{background:"none",border:"none",fontSize:22,color:"inherit",cursor:"pointer",marginLeft:12},"aria-label":"Close",children:""})]})]}),o.jsx("div",{style:{overflowY:"auto",padding:32,flex:1,minHeight:0,position:"relative"},children:o.jsx(ay,{backend:cy,children:o.jsx(hW,{items:U,moveLabel:(R,w)=>{J(N=>{const I=[...N],[ne]=I.splice(R,1);return I.splice(w,0,ne),I})},renderRow:(R,w)=>{let N=!0;return R.type==="regular"&&(gt&&(N=!1),!X&&!In.includes(R.value)&&(N=!1)),R.type==="json"&&Array.isArray(R.intervals)&&(R.intervals.some(({interval:ne})=>{var ae;return!X||!!((ae=$e==null?void 0:$e[R.value])!=null&&ae[ne])})||(N=!1)),o.jsxs("div",{style:{display:N?void 0:"none",width:"100%"},children:[R.type==="regular"&&o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[o.jsx("input",{type:"checkbox",checked:In.includes(R.value),onChange:I=>{I.target.checked?bn([...In,R.value]):bn(In.filter(ne=>ne!==R.value))}}),R.label]}),R&&R.type==="json"&&Array.isArray(R.intervals)&&(()=>{var ne;const I=(R.intervals||[]).filter(({interval:ae})=>{var ge;return!X||!!((ge=$e==null?void 0:$e[R.value])!=null&&ge[ae])});return(R.value==="overall_trend_RC"||R.value==="Overall_Trend_RC")&&console.log(" [Settings Modal] Interval Debug for",R.value,{itemIntervals:R.intervals,showUnchecked:X,activeJsonLabels:$e==null?void 0:$e[R.value],visibleIntervals:I,filterCondition:(ne=R.intervals)==null?void 0:ne.map(({interval:ae})=>{var ge,Te;return{interval:ae,showUnchecked:X,notShowUnchecked:!X,hasActiveLabel:!!((ge=$e==null?void 0:$e[R.value])!=null&&ge[ae]),result:!X||!!((Te=$e==null?void 0:$e[R.value])!=null&&Te[ae])}})}),I.length===0?null:o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:1,width:"100%"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between",marginBottom:1,lineHeight:1.2},children:o.jsx("span",{style:{fontWeight:500,fontSize:"0.95em"},children:R.label})}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:0,alignItems:"flex-start",lineHeight:1},children:I.map(({interval:ae,exists:ge})=>{var Te;return o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2,minWidth:40,opacity:ge?1:.5,padding:"1px 0",lineHeight:1},children:[o.jsx("input",{type:"checkbox",checked:!!((Te=$e==null?void 0:$e[R.value])!=null&&Te[ae]),disabled:!ge,onChange:de=>{zt(Ke=>({...Ke,[R.value]:{...Ke[R.value],[ae]:de.target.checked}}))},style:{transform:"scale(0.9)"}}),o.jsx("span",{style:{fontSize:"0.8em",fontWeight:500,lineHeight:1},children:ae})]},R.value+"_"+ae)})})]})})()]})},activeJsonLabels:$e,setActiveJsonLabels:zt,showUnchecked:X,dragOverIndex:fr,setDragOverIndex:Xn})})})]})]})]}),fe&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{background:l?"#23272f":"#fff",color:l?"#fff":"#222",padding:32,borderRadius:16,fontSize:22,fontWeight:600,boxShadow:"0 4px 32px rgba(0,0,0,0.18)"},children:"Loading logs..."})}),o.jsx("div",{style:{position:"absolute",top:24,right:130,zIndex:100,display:"flex",gap:4}}),o.jsx("button",{onClick:()=>c(R=>!R),style:{position:"absolute",right:32,top:24,zIndex:100,padding:8,borderRadius:"50%",background:l?"#222":"#fff",color:l?"#fff":"#222",border:"1.5px solid #888",fontSize:22,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},title:l?"Switch to Light Mode":"Switch to Dark Mode",children:l?"":""}),o.jsxs("div",{style:{padding:"0 64px 0 32px",position:"relative",display:"flex",flexDirection:"column",height:"100vh",boxSizing:"border-box"},children:[o.jsx("div",{style:{margin:"24px 0 12px 0",zIndex:10},children:Vt}),o.jsxs("div",{style:{margin:`${Ar}px 0 0 0`},children:[" ",o.jsxs("div",{style:{color:l?"#fff":"#222",margin:"8px 0 16px 0",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px"},children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Rows: ",pe.length," of ",P]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Page: ",M," of ",En]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Columns: ",od.length+et.reduce((R,w)=>{var N;return R+(((N=w.intervals)==null?void 0:N.length)||0)},0)+dW.length]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[o.jsx("input",{type:"checkbox",checked:ie.Regular,onChange:R=>Pe(w=>({...w,Regular:R.target.checked})),style:{transform:"scale(1.1)"}}),o.jsx("span",{children:"Regular"}),o.jsxs("span",{style:{fontSize:11,opacity:.7,color:ie.Regular?"#22c55e":"#6b7280",fontWeight:600},children:["(",z.Regular,")"]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[o.jsx("input",{type:"checkbox",checked:ie.Heiken,onChange:R=>Pe(w=>({...w,Heiken:R.target.checked})),style:{transform:"scale(1.1)"}}),o.jsx("span",{children:"Heiken"}),o.jsxs("span",{style:{fontSize:11,opacity:.7,color:ie.Heiken?"#22c55e":"#6b7280",fontWeight:600},children:["(",z.Heiken,")"]})]}),o.jsxs("span",{style:{fontSize:12,opacity:.7,color:pe.length===0?"#ef4444":"#22c55e",fontWeight:600},children:["(",pe.length," shown)"]}),z.Unknown>0&&o.jsxs("span",{style:{fontSize:11,opacity:.5,color:"#f59e0b",fontWeight:600},children:["(",z.Unknown," unknown)"]})]}),pe.length>0&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:8},children:[o.jsx("span",{style:{opacity:.7},children:"Time Range:"}),o.jsx("span",{style:{fontWeight:600,color:l?"#0ea5e9":"#0d9488"},children:(ii=pe[0])!=null&&ii.candle_time?n(pe[0].candle_time):"N/A"}),o.jsx("span",{children:"to"}),o.jsx("span",{style:{fontWeight:600,color:l?"#0ea5e9":"#0d9488"},children:(di=pe[pe.length-1])!=null&&di.candle_time?n(pe[pe.length-1].candle_time):"N/A"}),o.jsx("button",{onClick:It,style:{marginLeft:16,padding:"6px 12px",borderRadius:4,border:"none",fontWeight:600,fontSize:12,background:"#fbbf24",color:"#222",boxShadow:"0 2px 4px #fbbf2444",cursor:"pointer",transition:"background 0.2s"},children:"Export to Excel"})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",background:l?"#1e293b":"#f1f5f9",borderRadius:6,border:l?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("span",{style:{fontWeight:600,color:l?"#fff":"#222",fontSize:12},children:"Rows:"}),o.jsx("input",{type:"number",min:"1",value:j,onChange:R=>{const w=parseInt(R.target.value);!isNaN(w)&&w>=1&&V(w)},onKeyPress:R=>{R.key==="Enter"&&dt(j)},onBlur:()=>dt(j),style:{width:50,padding:"2px 4px",borderRadius:3,border:"1px solid #888",background:l?"#23272f":"#fff",color:l?"#fff":"#222",fontSize:12,textAlign:"center"}})]}),En>1&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",background:l?"#1e293b":"#f1f5f9",borderRadius:6,border:l?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("button",{onClick:()=>Bt.length>0?st(1):Zt(1),disabled:Bt.length>0?tn===1:M===1,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:M===1?l?"#334155":"#e5e7eb":l?"#0ea5e9":"#0d9488",color:M===1?l?"#6b7280":"#9ca3af":"#fff",cursor:M===1?"not-allowed":"pointer",opacity:M===1?.5:1},children:"First"}),o.jsx("button",{onClick:()=>Bt.length>0?st(tn-1):Zt(M-1),disabled:Bt.length>0?tn===1:M===1,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(Bt.length>0?tn===1:M===1)?l?"#334155":"#e5e7eb":l?"#0ea5e9":"#0d9488",color:(Bt.length>0?tn===1:M===1)?l?"#6b7280":"#9ca3af":"#fff",cursor:(Bt.length>0?tn===1:M===1)?"not-allowed":"pointer",opacity:(Bt.length>0?tn===1:M===1)?.5:1},children:""}),o.jsxs("span",{style:{fontWeight:600,color:l?"#fff":"#222",fontSize:12},children:[Bt.length>0?tn:M,"/",Bt.length>0?sn:En]}),o.jsx("button",{onClick:()=>Bt.length>0?st(tn+1):Zt(M+1),disabled:Bt.length>0?tn===sn:M===En,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(Bt.length>0?tn===sn:M===En)?l?"#334155":"#e5e7eb":l?"#0ea5e9":"#0d9488",color:(Bt.length>0?tn===sn:M===En)?l?"#6b7280":"#9ca3af":"#fff",cursor:(Bt.length>0?tn===sn:M===En)?"not-allowed":"pointer",opacity:(Bt.length>0?tn===sn:M===En)?.5:1},children:""}),o.jsx("button",{onClick:()=>Bt.length>0?st(sn):Zt(En),disabled:Bt.length>0?tn===sn:M===En,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #888",fontWeight:600,fontSize:11,background:(Bt.length>0?tn===sn:M===En)?l?"#334155":"#e5e7eb":l?"#0ea5e9":"#0d9488",color:(Bt.length>0?tn===sn:M===En)?l?"#6b7280":"#9ca3af":"#fff",cursor:(Bt.length>0?tn===sn:M===En)?"not-allowed":"pointer",opacity:(Bt.length>0?tn===sn:M===En)?.5:1},children:"Last"})]})]})]})]}),o.jsx("div",{className:"overflow-auto border border-gray-300 rounded-lg",style:{background:l?"#181a20":"#f5ecd7",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:l?"1px solid #334155":"1px solid #d1d5db",fontSize:`${ct}em`,position:"relative",flex:1,minHeight:0},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"16px 0 8px 0",paddingLeft:8,paddingRight:8},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:18}}),o.jsxs("table",{className:"w-full border-collapse",style:{fontSize:"inherit",color:l?"#fff":"#222"},children:[o.jsxs("thead",{className:"sticky top-0 z-30",style:{background:l?"#0f766e":"#0d9488",color:"white",fontSize:"inherit",zIndex:30},children:[o.jsx("tr",{style:{position:"sticky",top:0,zIndex:31,background:l?"#0f766e":"#0d9488"},children:U.map((R,w)=>{const N=R.type==="json"&&Array.isArray(R.intervals);if(R.type==="regular"&&In.includes(R.value)){const I=w===0||w===1,ne=l?"#5eead4":"#e0fcf7";return o.jsx("th",{rowSpan:2,className:"relative px-4 py-3 text-left cursor-pointer whitespace-nowrap",style:{fontSize:`${Le}em`,fontWeight:"600",borderBottom:"2px solid rgba(255,255,255,0.2)",color:"#111",background:ne,minWidth:120,overflow:"visible",whiteSpace:pt?"normal":"nowrap",wordBreak:pt?"break-word":"normal",position:I?"sticky":void 0,left:I?w===0?0:120:void 0,zIndex:I?40:void 0},title:R.label,onClick:()=>Gt("regular",R.value),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:ae=>{ae.stopPropagation(),Tt("regular",R.value)},style:{marginRight:4,background:"none",border:"none",color:Wt===R.value?Un==="ASC"?"#22c55e":"#ef4444":"#888",fontWeight:700,fontSize:14,cursor:"pointer",padding:"0 2px",borderRadius:3,outline:"none",width:"20px",textAlign:"center",position:"relative",zIndex:10},title:`Sort by ${R.label} (whole data)`,children:["w",Wt===R.value?Un==="ASC"?"":"":""]}),o.jsx("span",{children:R.label}),o.jsxs("button",{onClick:ae=>{ae.stopPropagation(),Gt("regular",R.value)},style:{marginLeft:4,background:"none",border:"none",color:ve&&ve.type==="regular"&&ve.key===R.value?ot==="asc"?"#22c55e":"#ef4444":"#888",fontWeight:700,fontSize:14,cursor:"pointer",padding:"0 2px",borderRadius:3,outline:"none",width:"20px",textAlign:"center",position:"relative",zIndex:10},title:`Sort by ${R.label} (table only)`,children:["t",ve&&ve.type==="regular"&&ve.key===R.value?ot==="asc"?"":"":""]})]})},R.value)}if(N){const I=R.intervals.filter(({interval:ae})=>{var ge;return!!((ge=$e[R.value])!=null&&ge[ae])});if(I.length===0)return null;const ne=w%2===0?l?"#fbbf24":"#ffe082":l?"#fb923c":"#ffd6a5";return o.jsx("th",{colSpan:I.length,className:"relative px-4 py-3 text-left whitespace-nowrap",style:{fontSize:`${Le}em`,fontWeight:"bold",borderBottom:"2px solid rgba(255,255,255,0.2)",color:"#111",background:ne,minWidth:120,overflow:"visible",whiteSpace:pt?"normal":"nowrap",wordBreak:pt?"break-word":"normal"},title:R.label,children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("span",{children:R.label})})},R.value)}return null})}),o.jsx("tr",{children:U.map((R,w)=>{if(R.type==="json"&&Array.isArray(R.intervals)){const N=R.intervals.filter(({interval:ne})=>{var ae;return!!((ae=$e[R.value])!=null&&ae[ne])}),I=w%2===0?l?"#1e293b":"#e0e7ef":l?"#334155":"#f1f5f9";return N.map(({interval:ne})=>o.jsx("th",{className:"relative px-4 py-3 text-left cursor-pointer whitespace-nowrap",style:{fontSize:`${Le}em`,fontWeight:"600",borderBottom:"2px solid rgba(255,255,255,0.2)",color:l?"#fff":"#222",background:I,minWidth:90,overflow:"visible",whiteSpace:pt?"normal":"nowrap",wordBreak:pt?"break-word":"normal"},title:ne,onClick:()=>Gt("json",ne,R.value,ne),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:ne}),o.jsx("span",{className:"ml-1 opacity-60",children:ve&&ve.type==="json"&&ve.parentKey===R.value&&ve.interval===ne?ot==="asc"?"":"":""})]})},R.value+"_"+ne))}return null})})]}),o.jsx("tbody",{children:(()=>{if(yt)return o.jsx("tr",{children:o.jsx("td",{colSpan:U?U.length:1,style:{textAlign:"center",color:l?"#fff":"#222",fontSize:"1.1em",padding:"32px 0"},children:"Loading sorted data from database..."})});const R=Bt.length>0?Bt:pe,w=wn(R);return w.length?w.map((N,I)=>{let ne={};try{if(typeof N.json_data=="string"){let Ke=N.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");ne=JSON.parse(Ke)}else ne=N.json_data||{}}catch{ne={}}const ae=(ne==null?void 0:ne.signal_data)||(ne==null?void 0:ne.signaldata)||(ne==null?void 0:ne.signalData),ge=(ae==null?void 0:ae.all_last_rows)||{},Te=N.unique_id!=null?N.unique_id:I,de=Lt===Te;return o.jsx("tr",{className:"cursor-pointer",style:{fontSize:"inherit",borderBottom:l?"1px solid #334155":"1px solid #e5e7eb",transition:"all 0.15s ease-in-out",color:l?"#fff":"#222",background:de?"#ffe066":void 0},onClick:()=>Pn(de?null:Te),onMouseEnter:Ke=>{de||(Ke.currentTarget.style.background=l?"#3d4451":"#f0f9ff",Ke.currentTarget.style.color=l?"#fff":"#222")},onMouseLeave:Ke=>{de||(Ke.currentTarget.style.background="",Ke.currentTarget.style.color="")},children:U.map((Ke,Ft)=>{if(Ke.type==="regular"&&In.includes(Ke.value)){if(!od.find(Jr=>Jr.value===Ke.value))return null;const An=Ft===0||Ft===1,xr=de?"#ffe066":An?l?"#5eead4":"#e0fcf7":void 0,Or=de||An?"#111":l?"#fff":"#222";let yr=null,Si="";const of=["PL","Hedge","Hedge_1_1","Hedge_Buy_pl","Hedge_Sell_pl","Hedge_order_size","Min_comm_after_hedge","Hedge_Swing_High_Point","Hedge_Swing_Low_Point"],oo=["signal_data_active_squeeze_trend","signal_data_overall_trend_RC","signal_data_overall_trend_percentage_RC","signal_data_overall_trend_HC","signal_data_overall_trend_percentage_HC","signal_data_overall_trend_4h","signal_data_overall_trend_percentage_4h","signal_data_overall_trend_1h","signal_data_overall_trend_percentage_1h","signal_data_volume_1h"];if(of.includes(Ke.value)){const Jr=kt[N.unique_id];if((Ke.value==="PL"||Ke.value==="Hedge")&&console.log("GroupViewPage Debug hedge field lookup:",{field:Ke.value,rowUniqueId:N.unique_id,tradeData:Jr,tradesByUniqueIdKeys:Object.keys(kt).slice(0,5),totalTradesByUniqueId:Object.keys(kt).length,sampleLogUniqueIds:pe.slice(0,3).map(ra=>ra.unique_id)}),Jr&&Jr.unique_id){const Ua={PL:"Pl_after_comm",Hedge:"Hedge",Hedge_1_1:"Hedge_1_1_bool",Hedge_Buy_pl:"Hedge_Buy_pl",Hedge_Sell_pl:"Hedge_Sell_pl",Hedge_order_size:"Hedge_order_size",Min_comm_after_hedge:"Min_comm_after_hedge",Hedge_Swing_High_Point:"Hedge_Swing_High_Point",Hedge_Swing_Low_Point:"Hedge_Swing_Low_Point"}[Ke.value];Ua&&(yr=Jr[Ua],Si=yr!=null?s(yr,Ke.value):"")}}else if(oo.includes(Ke.value)){let Jr={};try{if(typeof N.json_data=="string"){let Ua=N.json_data.replace(/\bNaN\b|\bInfinity\b|\b-Infinity\b/g,"null");Jr=JSON.parse(Ua)}else Jr=N.json_data||{}}catch{Jr={}}const ra=(Jr==null?void 0:Jr.signal_data)||(Jr==null?void 0:Jr.signaldata)||(Jr==null?void 0:Jr.signalData);if(ra&&typeof ra=="object"){const Ua=Ke.value.replace("signal_data_","");yr=ra[Ua],Si=yr!=null?s(yr,Ke.value):""}}else yr=N[Ke.value],Si=yr!=null?s(yr,Ke.value):"";let na={fontSize:"inherit",color:de?"#111":Or,background:xr,minWidth:120,overflow:"visible",whiteSpace:"nowrap",position:An?"sticky":void 0,left:An?Ft===0?0:120:void 0,zIndex:An?30:void 0,padding:"1px 6px !important",lineHeight:"1 !important",height:"20px !important",verticalAlign:"middle !important"};if(Ke.value==="PL"&&yr!=null){const Jr=parseFloat(yr);isNaN(Jr)||(de?Jr<0?na.color="#000000":Jr>0&&(na.color="#166534"):Jr<0?na.color="#ef4444":Jr>0&&(na.color="#22c55e"))}return o.jsx("td",{className:"whitespace-nowrap align-top text-sm select-text",style:na,title:Si,children:yr!=null?s(yr,Ke.value):""},Ke.value)}if(Ke.type==="json"&&Array.isArray(Ke.intervals)){const hn=Ke.intervals.filter(({interval:Or})=>{var yr;return!!((yr=$e[Ke.value])!=null&&yr[Or])}),An=de?"#ffe066":Ft%2===0?l?"#1e293b":"#e0e7ef":l?"#334155":"#f1f5f9",xr=de?"#111":l?"#fff":"#222";return hn.map(({interval:Or})=>{let yr=ge[Or]?ge[Or][Ke.value]:void 0;return o.jsx("td",{className:"whitespace-nowrap align-top text-sm select-text",style:{fontSize:"inherit",color:xr,background:An,minWidth:90,overflow:"visible",whiteSpace:"nowrap",padding:"1px 4px !important",lineHeight:"1 !important",height:"20px !important",verticalAlign:"middle !important"},title:yr!==void 0?s(yr,Ke.value):"",children:yr!==void 0?s(yr,Ke.value):"-"},Ke.value+"_"+Or)})}return null})},I)}):o.jsx("tr",{children:o.jsx("td",{colSpan:U?U.length:1,style:{textAlign:"center",color:l?"#fff":"#222",fontSize:"1.1em",padding:"32px 0"},children:"No data available for the selected symbols and filters."})})})()})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,margin:"12px 0 8px 0",padding:"8px 12px",background:l?"#1e293b":"#f1f5f9",borderRadius:6,border:l?"1px solid #334155":"1px solid #e2e8f0"},children:[o.jsx("span",{style:{fontWeight:600,color:l?"#fff":"#222",fontSize:14},children:"Rows per page:"}),o.jsx("input",{type:"number",min:"1",value:j,onChange:R=>{const w=parseInt(R.target.value);!isNaN(w)&&w>=1&&V(w)},onKeyPress:R=>{R.key==="Enter"&&dt(j)},onBlur:()=>dt(j),style:{width:80,padding:"4px 8px",borderRadius:4,border:"1px solid #888",background:l?"#23272f":"#fff",color:l?"#fff":"#222",fontSize:14,textAlign:"center"}})]}),En>1&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,margin:"16px 0 8px 0",padding:"12px",background:l?"#23272f":"#f8f9fa",borderRadius:8,border:l?"1px solid #334155":"1px solid #e5e7eb"},children:[o.jsx("button",{onClick:()=>Zt(1),disabled:M===1,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:M===1?l?"#334155":"#e5e7eb":l?"#0ea5e9":"#0d9488",color:M===1?l?"#6b7280":"#9ca3af":"#fff",cursor:M===1?"not-allowed":"pointer",opacity:M===1?.5:1},children:"First"}),o.jsx("button",{onClick:()=>Zt(M-1),disabled:M===1,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:M===1?l?"#334155":"#e5e7eb":l?"#0ea5e9":"#0d9488",color:M===1?l?"#6b7280":"#9ca3af":"#fff",cursor:M===1?"not-allowed":"pointer",opacity:M===1?.5:1},children:"Previous"}),o.jsxs("span",{style:{fontWeight:600,color:l?"#fff":"#222"},children:["Page ",M," of ",En]}),o.jsx("button",{onClick:()=>Zt(M+1),disabled:M===En,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:M===En?l?"#334155":"#e5e7eb":l?"#0ea5e9":"#0d9488",color:M===En?l?"#6b7280":"#9ca3af":"#fff",cursor:M===En?"not-allowed":"pointer",opacity:M===En?.5:1},children:"Next"}),o.jsx("button",{onClick:()=>Zt(En),disabled:M===En,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #888",fontWeight:600,fontSize:14,background:M===En?l?"#334155":"#e5e7eb":l?"#0ea5e9":"#0d9488",color:M===En?l?"#6b7280":"#9ca3af":"#fff",cursor:M===En?"not-allowed":"pointer",opacity:M===En?.5:1},children:"Last"})]})]})})]}),o.jsxs("div",{style:{position:"fixed",top:20,left:20,zIndex:200,display:"flex",flexDirection:"row",alignItems:"center",gap:8},children:[o.jsx("button",{onClick:()=>window.history.back(),style:{padding:"6px 10px",borderRadius:8,background:l?"#23272f":"#e5e7eb",color:l?"#fff":"#222",fontWeight:700,fontSize:16,border:"none",cursor:"pointer",boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},title:"Back",children:""}),o.jsx("button",{onClick:()=>vs(!0),style:{padding:"7px 12px",borderRadius:10,background:"#0ea5e9",color:"#fff",fontWeight:700,fontSize:15,boxShadow:"0 2px 8px #0ea5e944",border:"none",cursor:"pointer",minWidth:32,textAlign:"center"},title:"Select symbols to show",children:sr.length}),mr&&o.jsxs("div",{ref:er,style:{position:"absolute",top:40,left:0,minWidth:220,maxWidth:320,background:l?"#23272f":"#fff",color:l?"#fff":"#222",border:"2px solid #0ea5e9",borderRadius:14,boxShadow:"0 8px 32px rgba(0,0,0,0.18)",padding:18,zIndex:9999,display:"flex",flexDirection:"column",gap:10},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[o.jsx("span",{style:{fontWeight:700,fontSize:16},children:"Select Symbols"}),o.jsx("button",{onClick:()=>vs(!1),style:{fontSize:18,background:"none",border:"none",color:l?"#fff":"#222",cursor:"pointer"},title:"Close",children:""})]}),o.jsxs("div",{style:{display:"flex",gap:6,marginBottom:6},children:[o.jsx("button",{onClick:Ks,style:{padding:"3px 8px",borderRadius:5,background:"#22c55e",color:"#fff",border:"none",fontWeight:600,cursor:"pointer",fontSize:13},children:"Select All"}),o.jsx("button",{onClick:Mn,style:{padding:"3px 8px",borderRadius:5,background:"#ef4444",color:"#fff",border:"none",fontWeight:600,cursor:"pointer",fontSize:13},children:"Clear All"})]}),o.jsx("div",{style:{maxHeight:240,overflowY:"auto",display:"flex",flexDirection:"column",gap:4},children:e.map(R=>o.jsx("button",{onClick:()=>wr(R),style:{padding:"6px 10px",borderRadius:7,background:sr.includes(R)?"#0ea5e9":"#e5e7eb",color:sr.includes(R)?"#fff":"#222",border:"none",fontWeight:600,fontSize:13,cursor:"pointer",outline:sr.includes(R)?"2px solid #38bdf8":"none",transition:"background 0.18s, color 0.18s, outline 0.18s"},children:R},R))})]})]}),Qn&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{background:l?"#23272f":"#fff",color:l?"#fff":"#222",padding:32,borderRadius:16,fontSize:20,fontWeight:600,boxShadow:"0 4px 32px rgba(0,0,0,0.18)",minWidth:340,minHeight:120,display:"flex",flexDirection:"column",alignItems:"center",gap:24},children:[o.jsx("div",{children:"Export Data"}),o.jsxs("div",{style:{display:"flex",gap:18},children:[o.jsx("button",{onClick:()=>gn("pagination"),style:{padding:"8px 24px",borderRadius:6,border:"none",fontWeight:600,fontSize:16,background:"#0ea5e9",color:"#fff",boxShadow:"0 2px 8px #0ea5e944",cursor:"pointer",transition:"background 0.2s"},children:"Export Current Page"}),o.jsx("button",{onClick:()=>gn("whole"),style:{padding:"8px 24px",borderRadius:6,border:"none",fontWeight:600,fontSize:16,background:"#22c55e",color:"#fff",boxShadow:"0 2px 8px #22c55e44",cursor:"pointer",transition:"background 0.2s"},children:"Export All Filtered Data"})]}),o.jsx("button",{onClick:()=>me(!1),style:{marginTop:12,background:"none",border:"none",color:l?"#fff":"#222",fontSize:18,cursor:"pointer"},children:"Cancel"})]})}),We&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{background:l?"#23272f":"#fff",color:l?"#fff":"#222",padding:32,borderRadius:16,fontSize:22,fontWeight:600,boxShadow:"0 4px 32px rgba(0,0,0,0.18)"},children:"Exporting data..."})}),o.jsx("div",{style:{marginTop:60}})]})};function pW(t,e){const n=new Date(t).getTime();let r=Math.floor((e-n)/1e3);if(r<0&&(r=0),r<60)return`${r}s ago`;if(r<3600){const h=Math.floor(r/60),g=r%60;return`${h}m ${g}s ago`}if(r<86400){const h=Math.floor(r/3600),g=Math.floor(r%3600/60),p=r%60;return`${h}h ${g}m ${p}s ago`}const s=Math.floor(r/86400),l=Math.floor(r%86400/3600),c=Math.floor(r%3600/60),d=r%60;return`${s}d ${l}h ${c}m ${d}s ago`}function mW({data:t=[]}){const[e,n]=x.useState(Date.now());x.useEffect(()=>{const l=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(l)},[]);const[r,s]=x.useState(()=>document.documentElement.classList.contains("dark"));return x.useEffect(()=>{const l=new MutationObserver(()=>{s(document.documentElement.classList.contains("dark"))});return l.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>l.disconnect()},[]),o.jsxs("div",{className:"flex flex-row items-center gap-3 ml-4",children:[t.length===0&&o.jsx("span",{className:"text-gray-400 text-xs",children:"No SuperTrend signals"}),t.map((l,c)=>{const d=new Date(l.timestamp).getTime(),g=Math.floor((e-d)/1e3)<2700,p=r?"text-white":"text-black",y=l.trend&&l.trend.toUpperCase()==="BUY"?"text-green-500":l.trend&&l.trend.toUpperCase()==="SELL"?"text-red-500":"";return o.jsxs("span",{className:`px-2 py-1 rounded border ${g?"border-yellow-400 animate-pulse":"border-gray-500"} flex flex-row items-center gap-1 bg-transparent`,style:{background:"none"},children:[o.jsx("span",{className:`font-mono text-blue-400 ${p}`,children:l.source}),o.jsx("span",{className:`font-bold ${y}`,children:l.trend}),o.jsx("span",{className:g?"text-orange-400 font-bold":p,children:pW(l.timestamp,e)})]},c)})]})}const Oi=t=>{const e=parseFloat(t);return Number.isFinite(e)?e:null},Rh=t=>{const e=((t==null?void 0:t.action)||"").toUpperCase();return Oi(e==="BUY"?(t==null?void 0:t.buy_price)??(t==null?void 0:t.Buy_Price)??(t==null?void 0:t.buyPrice):e==="SELL"?(t==null?void 0:t.sell_price)??(t==null?void 0:t.Sell_Price)??(t==null?void 0:t.sellPrice):(t==null?void 0:t.close_price)??(t==null?void 0:t.Close_Price)??(t==null?void 0:t.price))},Mh=t=>Oi((t==null?void 0:t.close_price)??(t==null?void 0:t.Close_Price)??(t==null?void 0:t.price)),Rw=t=>((t==null?void 0:t.interval)??(t==null?void 0:t.Interval)??"").toString(),QT=t=>{const e=(t||"").toString().trim();return e?e==="60"?"1h":e==="240"?"4h":e==="D"||e==="1d"||e==="1D"?"1d":/^(\\d+)[mhd]$/i.test(e)?e.toLowerCase():`${e}m`:"15m"},xW=(t,e)=>{const n=t.replace("/","").toUpperCase();if(!n)return null;const r=e?`?interval=${QT(e)}`:"";return`https://www.binance.com/en/futures/${n}${r}`},Lh=t=>(t==null?void 0:t.fetcher_trade_time)||(t==null?void 0:t.fetcher_time)||(t==null?void 0:t.Fetcher_time),dd=t=>(t==null?void 0:t.operator_close_time)||(t==null?void 0:t.close_time)||(t==null?void 0:t.Operator_close_time)||(t==null?void 0:t["Operator_"])||(t==null?void 0:t.operatorCloseTime),Mw=(t,e)=>{const n=Mt(t),r=Mt(e);return!n.isValid()||!r.isValid()?null:Math.abs(n.diff(r,"minutes",!0))},Lw=(t,e)=>{if(t===null||e===null)return null;const n=Math.max(Math.abs(t),Math.abs(e),1e-9);return Math.abs((e-t)/n)*100},ex=t=>((t==null?void 0:t.type)||(t==null?void 0:t.Type)||"").toString().toLowerCase().includes("back_close")||dd(t)?"closed":"running",tx=t=>t==null?"":t>=25?"bg-red-800 text-white":t>=20?"bg-red-600 text-white":t>=15?"bg-red-500 text-white":t>=10?"bg-orange-400 text-white":"",yW=({title:t,value:e,subtitle:n,tint:r})=>o.jsxs("div",{className:`p-4 rounded-lg border shadow-sm ${r||"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700"}`,children:[o.jsx("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:t}),o.jsx("div",{className:"text-3xl font-bold mt-1 text-gray-900 dark:text-white",children:e}),n&&o.jsx("div",{className:"text-xs mt-1 text-gray-500 dark:text-gray-400",children:n})]}),Iw=({children:t,tone:e})=>o.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${e||"bg-gray-200 text-gray-800"}`,children:t}),vW=()=>{const[t,e]=x.useState(()=>{const z=localStorage.getItem("theme");return z?z==="dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{t?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[t]);const[n,r]=x.useState([]),[s,l]=x.useState([]),[c,d]=x.useState(!0),[h,g]=x.useState(""),[p,y]=x.useState(()=>localStorage.getItem("tc_fromDate")||""),[_,b]=x.useState(()=>localStorage.getItem("tc_toDate")||""),[k,S]=x.useState(()=>{try{const z=localStorage.getItem("tc_backendMachines");return z?JSON.parse(z):[]}catch{return[]}}),[E,O]=x.useState(()=>{try{const z=localStorage.getItem("tc_liveMachines");return z?JSON.parse(z):[]}catch{return[]}}),[T,D]=x.useState(()=>localStorage.getItem("tc_showIssuesOnly")==="true"),[F,Z]=x.useState(()=>{try{const z=localStorage.getItem("tc_quickFilters");return z?JSON.parse(z):[]}catch{return[]}}),[K,L]=x.useState(()=>{try{const z=localStorage.getItem("tc_sortConfig");return z?JSON.parse(z):{key:"candle",direction:"asc"}}catch{return{key:"candle",direction:"asc"}}}),[Q,se]=x.useState(null),[ce,ye]=x.useState(null),[te,xe]=x.useState({}),[Ce,at]=x.useState({}),[le,Ve]=x.useState({key:"ts",direction:"asc"}),[Ue,Ze]=x.useState(!1),[M,oe]=x.useState(null),[P,B]=x.useState(null),[j,V]=x.useState(()=>{const z=localStorage.getItem("tc_font_scale"),pe=z?parseFloat(z):1;return Number.isFinite(pe)?pe:1}),[fe,lt]=x.useState(null),et=x.useCallback((z,pe)=>{if(!pe)return"";const Fe=(z||"").toLowerCase(),bt=pe[z]??pe[z==null?void 0:z.toLowerCase()]??pe[z==null?void 0:z.toUpperCase()];return bt!==void 0?bt:Fe.includes("m.id")||Fe==="m_id"||Fe==="m.id"?pe.machineid??pe.machine_id??"":Fe.includes("unique")?pe.unique_id??"":Fe.includes("candle")?pe.candel_time??pe.candle_time??"":Fe.includes("fetcher")?pe.fetcher_trade_time??pe.fetcher_time??"":Fe.includes("operator")&&Fe.includes("close")?pe.operator_close_time??"":Fe.includes("operator")?pe.operator_trade_time??pe.operator_time??"":Fe==="pair"||Fe==="symbol"?pe.pair??pe.symbol??"":Fe.includes("interval")?pe.interval??"":Fe.includes("action")?pe.action??"":Fe.includes("type")?pe.type??"":Fe.includes("pl after comm")||Fe==="pl"||Fe.includes("pl_after_comm")?pe.pl_after_comm??pe.Pl_after_comm??"":Fe.includes("investment")?pe.investment??"":Fe.includes("stop")?pe.stop_price??"":Fe.includes("save")?pe.save_price??"":Fe.includes("buy price")?pe.buy_price??"":Fe.includes("sell price")?pe.sell_price??"":Fe.includes("close price")?pe.close_price??"":""},[]),[ht]=x.useState(()=>{try{const z=localStorage.getItem("liveTradeView_regular_labels");return z?JSON.parse(z):null}catch{return null}}),[At]=x.useState(()=>{try{const z=localStorage.getItem("liveTradeView_json_labels");return z?JSON.parse(z):null}catch{return null}}),xn=Xc(),Bt=x.useCallback(async()=>{d(!0),g("");try{const[z,pe]=await Promise.all([Nn("/api/trades"),Nn("/api/machines")]),Fe=z.ok?await z.json():{trades:[]},bt=pe.ok?await pe.json():{machines:[]},dt=Array.isArray(Fe.trades)?Fe.trades:[],Zt=Array.isArray(bt.machines)?bt.machines:[];r(dt),l(Zt);const Vt=[...new Set([...Zt.map(ft=>{var Xt;return(Xt=ft.machineid)==null?void 0:Xt.toString()}),...dt.map(ft=>{var Xt;return(Xt=ft.machineid)==null?void 0:Xt.toString()})].filter(Boolean))],ct=Vt.includes("9")?["9"]:Vt.slice(0,1);S(ft=>ft.length?ft:ct),O(ft=>ft.length?ft:Vt.filter(Xt=>!ct.includes(Xt)))}catch(z){console.error(z),g("Failed to load trades/machines")}finally{d(!1)}},[]);x.useEffect(()=>{Bt()},[Bt]),x.useEffect(()=>{p?localStorage.setItem("tc_fromDate",p):localStorage.removeItem("tc_fromDate")},[p]),x.useEffect(()=>{_?localStorage.setItem("tc_toDate",_):localStorage.removeItem("tc_toDate")},[_]),x.useEffect(()=>{localStorage.setItem("tc_backendMachines",JSON.stringify(k))},[k]),x.useEffect(()=>{localStorage.setItem("tc_liveMachines",JSON.stringify(E))},[E]),x.useEffect(()=>{localStorage.setItem("tc_showIssuesOnly",T?"true":"false")},[T]),x.useEffect(()=>{localStorage.setItem("tc_quickFilters",JSON.stringify(F))},[F]),x.useEffect(()=>{localStorage.setItem("tc_sortConfig",JSON.stringify(K))},[K]);const Kt=x.useCallback(async z=>{var Fe,bt,dt,Zt;const pe=((Fe=z.liveTrade)==null?void 0:Fe.unique_id)||((bt=z.liveTrade)==null?void 0:bt.uid)||((dt=z.liveTrade)==null?void 0:dt.Unique_ID);if(!pe){xe(Vt=>({...Vt,[z.key]:{error:"No UID on live trade"}}));return}if(!((Zt=te[z.key])!=null&&Zt.loaded)){at(Vt=>({...Vt,[z.key]:!0}));try{const Vt=await Nn(`/api/bot-event-logs?uid=${encodeURIComponent(pe)}&limit=500`);if(!Vt.ok)throw new Error(`HTTP ${Vt.status}`);const kt=await Vt.json(),ft=(Array.isArray(kt.logs)?kt.logs:[]).map(bn=>{let re={};try{re=typeof bn.json_message=="string"?JSON.parse(bn.json_message):bn.json_message||{}}catch{re={}}const Ae=Oi(re["Pl After Comm"]??re.pl_after_comm);return{ts:bn.timestamp||bn.created_at||bn.time||bn.Timestamp||bn.time_stamp,pl:Ae,raw:bn,json:re}});ft.sort((bn,re)=>{const Ae=Mt(bn.ts),$e=Mt(re.ts);return!Ae.isValid()||!$e.isValid()?0:Ae.valueOf()-$e.valueOf()});let Xt=!1,pn=null,Yn=null,Tn=null,Gn=null,In=null;ft.forEach(bn=>{if(bn.pl===null)return;if(In===null&&(In=!1),bn.pl>0&&(In=!0),!Xt&&bn.pl>20){Xt=!0,pn=bn.pl,Yn=bn.ts;return}if(!Xt)return;if(bn.pl>pn){pn=bn.pl,Yn=bn.ts,Tn=null,Gn={peak:pn,at:Yn};return}const re=pn?(pn-bn.pl)/pn*100:0;!Tn&&re>20&&(Tn={dropPct:re,peak:pn,at:bn.ts,value:bn.pl},Gn=null)}),xe(bn=>({...bn,[z.key]:{logs:ft,issue:Tn,recovered:Gn,loaded:!0,everPositive:In}}))}catch(Vt){xe(kt=>({...kt,[z.key]:{error:Vt.message||"Failed to load logs"}}))}finally{at(Vt=>({...Vt,[z.key]:!1}))}}},[te]),tn=x.useMemo(()=>[...new Set([...s.map(pe=>{var Fe;return(Fe=pe.machineid)==null?void 0:Fe.toString()}),...n.map(pe=>{var Fe;return(Fe=pe.machineid)==null?void 0:Fe.toString()})].filter(Boolean))],[s,n]),Hn=x.useMemo(()=>{const z=p?Mt.utc(p).startOf("day"):null,pe=_?Mt.utc(_).endOf("day"):null;return n.filter(Fe=>{const bt=(Fe==null?void 0:Fe.candel_time)||(Fe==null?void 0:Fe.candle_time);if(!bt)return!1;const dt=Mt.utc(bt);return!(z&&dt.isBefore(z)||pe&&dt.isAfter(pe))})},[n,p,_]),sn=x.useMemo(()=>{const z=new Set(k.map(String));return Hn.filter(pe=>z.has((pe.machineid||pe.machine_id||"").toString()))},[Hn,k]),He=x.useMemo(()=>{const z=new Set(E.map(String));return Hn.filter(pe=>z.has((pe.machineid||pe.machine_id||"").toString()))},[Hn,E]),Dn=x.useMemo(()=>{const z=new Map;return sn.forEach(pe=>{const Fe=(pe.pair||pe.symbol||pe.PAIR||"").toString().trim().toUpperCase();z.has(Fe)||z.set(Fe,[]),z.get(Fe).push(pe)}),z.forEach(pe=>pe.sort((Fe,bt)=>Mt.utc(Fe.candel_time||Fe.candle_time).valueOf()-Mt.utc(bt.candel_time||bt.candle_time).valueOf())),z},[sn]),Ht=x.useMemo(()=>{const z=new Map;return He.forEach(pe=>{const Fe=(pe.pair||pe.symbol||pe.PAIR||"").toString().trim().toUpperCase();z.has(Fe)||z.set(Fe,[]),z.get(Fe).push(pe)}),z.forEach(pe=>pe.sort((Fe,bt)=>Mt.utc(Fe.candel_time||Fe.candle_time).valueOf()-Mt.utc(bt.candel_time||bt.candle_time).valueOf())),z},[He]),yt=x.useMemo(()=>{const z=[],pe=new Set;return Dn.forEach((Fe,bt)=>{const dt=Ht.get(bt)||[];Fe.forEach(Zt=>{let Vt=null,kt=1/0;dt.forEach(G=>{if(pe.has(G))return;const U=Math.abs(Mt.utc((Zt==null?void 0:Zt.candel_time)||(Zt==null?void 0:Zt.candle_time)).diff(Mt.utc((G==null?void 0:G.candel_time)||(G==null?void 0:G.candle_time)),"hours",!0));U<=4&&U<kt&&(kt=U,Vt=G)}),Vt&&pe.add(Vt);const ct=Zt||null,ft=Vt||null,Xt=Mw(Lh(ct),Lh(ft)),pn=ct&&ft?Math.abs(Mt.utc((ct==null?void 0:ct.candel_time)||(ct==null?void 0:ct.candle_time)).diff(Mt.utc((ft==null?void 0:ft.candel_time)||(ft==null?void 0:ft.candle_time)),"hours",!0)):null,Yn=Rh(ct),Tn=Rh(ft),Gn=Lw(Yn,Tn),In=Lw(Oi(ct==null?void 0:ct.investment),Oi(ft==null?void 0:ft.investment)),bn=ex(ct),re=ex(ft),Ae=Mh(ct),$e=Mh(ft),zt=bn==="closed"&&re==="closed"?Mw(dd(ct),dd(ft)):null,Xe=bn==="closed"&&re==="closed"&&Ae!==null&&$e!==null?(()=>{const G=(Math.abs($e)+Math.abs(Ae))/2||1e-9;return Math.abs($e-Ae)/G*100})():null,tt=[];pn!==null&&pn>4&&tt.push(`Candle gap ${pn.toFixed(1)}h`),Xt!==null&&Xt>5&&tt.push(`Late fetch (${Xt.toFixed(1)}m)`),Gn!==null&&Gn>15&&tt.push(`Price gap ${Gn.toFixed(1)}%`),bn==="closed"&&re==="running"&&tt.push("Backend closed, live running"),bn==="running"&&re==="closed"&&tt.push("Backend running, live closed");const rt=Oi(ft==null?void 0:ft.pl_after_comm),A=Oi(ct==null?void 0:ct.pl_after_comm);zt!==null&&zt>16&&rt!==null&&A!==null&&rt<A&&tt.push(`Close time gap ${zt.toFixed(1)}m and live earned less`),Xe!==null&&Xe>15&&rt!==null&&A!==null&&rt<A&&tt.push(`Close price gap ${Xe.toFixed(1)}% with worse P/L`),In!==null&&In>0&&tt.push(`Investment gap ${In.toFixed(1)}%`),z.push({key:`${bt}__${(ct==null?void 0:ct.candel_time)||(ct==null?void 0:ct.candle_time)||"na"}__${(ft==null?void 0:ft.candel_time)||(ft==null?void 0:ft.candle_time)||"na"}`,backendList:ct?[ct]:[],liveList:ft?[ft]:[],backendTrade:ct,liveTrade:ft,fetcherDiff:Xt,priceDeltaPct:Gn,closeTimeDiff:zt,closePriceDelta:Xe,investmentDeltaPct:In,backendStatus:bn,liveStatus:re,issues:tt})})}),Ht.forEach((Fe,bt)=>{Fe.forEach(dt=>{pe.has(dt)||z.push({key:`${bt}__liveonly__${(dt==null?void 0:dt.candel_time)||(dt==null?void 0:dt.candle_time)||"na"}`,backendList:[],liveList:[dt],backendTrade:null,liveTrade:dt,fetcherDiff:null,priceDeltaPct:null,closeTimeDiff:null,closePriceDelta:null,investmentDeltaPct:null,backendStatus:"missing",liveStatus:ex(dt),issues:["Extra in live"]})})}),z},[Dn,Ht]),[dn,Wt]=x.useState(()=>{try{const z=localStorage.getItem("liveTradeView_unified_labels_order");return z?JSON.parse(z):null}catch{return null}});x.useEffect(()=>{yt.forEach(z=>{var pe;z.liveTrade&&((pe=te[z.key])!=null&&pe.loaded||Ce[z.key]||Kt(z))})},[yt,Kt]);const an=x.useMemo(()=>{const z=T?yt.filter(Fe=>Fe.issues&&Fe.issues.length):yt;if(!F||F.length===0)return z;const pe=(Fe,bt)=>{var dt,Zt;switch(bt){case"backendMissing":return Fe.liveList.length===0;case"liveExtra":return Fe.backendList.length===0;case"lateFetch":return Number.isFinite(Fe.fetcherDiff)&&Fe.fetcherDiff>5;case"priceGap":return Number.isFinite(Fe.priceDeltaPct)&&Fe.priceDeltaPct>15;case"closureMismatch":return Fe.backendStatus==="closed"&&Fe.liveStatus==="running"||Fe.backendStatus==="running"&&Fe.liveStatus==="closed";case"closureGap":return Number.isFinite(Fe.closeTimeDiff)&&Fe.closeTimeDiff>16&&Number.isFinite(Fe.closePriceDelta)&&Fe.closePriceDelta>15;case"plDrop":return!!((dt=te[Fe.key])!=null&&dt.issue);case"neverProfit":return((Zt=te[Fe.key])==null?void 0:Zt.everPositive)===!1;case"totalBackend":return Fe.backendList.length>0;case"totalLive":return Fe.liveList.length>0;default:return!1}};return z.filter(Fe=>F.some(bt=>pe(Fe,bt)))},[yt,T,F,te]),Un=x.useMemo(()=>yt.filter(z=>{var pe;return(pe=te[z.key])==null?void 0:pe.issue}).length,[yt,te]),Cn=x.useMemo(()=>an.filter(z=>{var pe;return((pe=te[z.key])==null?void 0:pe.everPositive)===!1}).length,[an,te]),Qn=x.useMemo(()=>an.filter(z=>{var pe,Fe;return((pe=te[z.key])==null?void 0:pe.loaded)||((Fe=te[z.key])==null?void 0:Fe.error)}).length,[an,te]),me=x.useMemo(()=>{const{key:z,direction:pe}=K,Fe=pe==="asc"?1:-1,bt=dt=>{var Zt,Vt,kt,ct,ft,Xt,pn,Yn;switch(z){case"symbol":return((Zt=dt.backendTrade)==null?void 0:Zt.pair)||((Vt=dt.liveTrade)==null?void 0:Vt.pair)||"";case"candle":return((kt=dt.backendTrade)==null?void 0:kt.candel_time)||((ct=dt.liveTrade)==null?void 0:ct.candel_time)||"";case"fetcher":return Number.isFinite(dt.fetcherDiff)?dt.fetcherDiff:1/0;case"price":return Number.isFinite(dt.priceDeltaPct)?dt.priceDeltaPct:1/0;case"investment":return Number.isFinite(dt.investmentDeltaPct)?dt.investmentDeltaPct:1/0;case"close":return Number.isFinite(dt.closeTimeDiff)?dt.closeTimeDiff:Number.isFinite(dt.closePriceDelta)?dt.closePriceDelta:1/0;case"backend":return(dt.backendList.map(Tn=>Tn.machineid).join(",")||"").toLowerCase();case"live":return(dt.liveList.map(Tn=>Tn.machineid).join(",")||"").toLowerCase();case"action":{const Tn=(((ft=dt.backendTrade)==null?void 0:ft.action)||"").toLowerCase(),Gn=(((Xt=dt.liveTrade)==null?void 0:Xt.action)||"").toLowerCase();return`${Tn}-${Gn}`}case"status":return`${dt.backendStatus}-${dt.liveStatus}`;case"drawdown":{const Tn=(Yn=(pn=te[dt.key])==null?void 0:pn.issue)==null?void 0:Yn.dropPct;return Number.isFinite(Tn)?Tn:1/0}case"issues":return dt.issues?dt.issues.length:0;default:return 0}};return[...an].sort((dt,Zt)=>{const Vt=bt(dt),kt=bt(Zt);return Vt<kt?-1*Fe:Vt>kt?1*Fe:0})},[an,K,te]),We=z=>{L(pe=>pe.key===z?{key:z,direction:pe.direction==="asc"?"desc":"asc"}:{key:z,direction:"asc"})},Ge=x.useMemo(()=>{const z=yt.filter(ct=>ct.liveList.length===0).length,pe=yt.filter(ct=>ct.backendList.length===0).length,Fe=yt.filter(ct=>ct.fetcherDiff!==null&&ct.fetcherDiff>5).length,bt=yt.filter(ct=>ct.priceDeltaPct!==null&&ct.priceDeltaPct>15).length,dt=yt.filter(ct=>ct.backendStatus==="closed"&&ct.liveStatus==="running"||ct.backendStatus==="running"&&ct.liveStatus==="closed").length,Zt=yt.filter(ct=>ct.closeTimeDiff!==null&&ct.closeTimeDiff>16&&ct.closePriceDelta!==null&&ct.closePriceDelta>15).length,Vt=sn.length,kt=He.length;return{backendMissing:z,liveExtra:pe,lateFetch:Fe,priceGap:bt,closureMismatch:dt,closureGap:Zt,totalBackend:Vt,totalLive:kt}},[yt,sn,He]),ie=x.useMemo(()=>{let z=0,pe=0;return an.forEach(Fe=>{var kt,ct;const bt=Oi((kt=Fe.liveTrade)==null?void 0:kt.pl_after_comm),dt=Oi((ct=Fe.backendTrade)==null?void 0:ct.pl_after_comm);if(!(Fe.backendStatus==="closed"&&Fe.liveStatus==="closed")||bt===null||dt===null)return;const Vt=bt-dt;Vt>0&&(z+=Vt),Vt<0&&(pe+=Math.abs(Vt))}),{profit:z,loss:pe,net:z-pe}},[an]),Pe=z=>!z||!z.length?o.jsx(Iw,{tone:"bg-green-100 text-green-800",children:"OK"}):o.jsx("div",{className:"flex flex-wrap gap-1",children:z.map((pe,Fe)=>o.jsx(Iw,{tone:"bg-red-100 text-red-800",children:pe},Fe))});return c?o.jsx("div",{className:"p-6 text-center",children:"Loading trades"}):h?o.jsx("div",{className:"p-6 text-center text-red-600",children:h}):o.jsxs("div",{className:"flex h-screen overflow-hidden bg-[#f5f6fa] dark:bg-black text-gray-900 dark:text-gray-100",children:[o.jsx(R1,{isOpen:Ue,toggleSidebar:()=>Ze(z=>!z)}),o.jsx("div",{className:`flex-1 transition-all duration-300 ${Ue?"ml-64":"ml-20"} h-full overflow-hidden`,children:o.jsxs("div",{className:"p-6 h-full flex flex-col space-y-6 overflow-hidden",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Trade Compare"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Backend (Assigned) vs Live by symbol + candle time"})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"px-4 py-2 rounded-lg bg-green-100 text-green-800 dark:bg-green-900/60 dark:text-green-100 border border-green-200 dark:border-green-700",children:[o.jsx("div",{className:"text-xs uppercase tracking-wide",children:"Total Profit "}),o.jsxs("div",{className:"text-xl font-bold",children:["$",ie.profit.toFixed(2)]})]}),o.jsxs("div",{className:"px-4 py-2 rounded-lg bg-red-100 text-red-800 dark:bg-red-900/60 dark:text-red-100 border border-red-200 dark:border-red-700",children:[o.jsx("div",{className:"text-xs uppercase tracking-wide",children:"Total Loss "}),o.jsxs("div",{className:"text-xl font-bold",children:["$",ie.loss.toFixed(2)]})]}),o.jsxs("div",{className:"px-4 py-2 rounded-lg bg-blue-100 text-blue-900 dark:bg-blue-900/60 dark:text-blue-100 border border-blue-200 dark:border-blue-700",children:[o.jsx("div",{className:"text-xs uppercase tracking-wide",children:"Net PL "}),o.jsxs("div",{className:"text-xl font-bold",children:["$",ie.net.toFixed(2)]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($x,{to:"/",className:"px-3 py-2 rounded bg-gray-200 dark:bg-gray-800 text-black dark:text-white border border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700",title:"Back to main dashboard",children:" Home"}),o.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700",onClick:()=>{V(z=>{const pe=Math.max(.6,z-.1);return localStorage.setItem("tc_font_scale",String(pe)),pe})},title:"Decrease font size",children:""}),o.jsxs("span",{className:"px-2",children:["Font ",j.toFixed(1),"x"]}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700",onClick:()=>{V(z=>{const pe=Math.min(2,z+.1);return localStorage.setItem("tc_font_scale",String(pe)),pe})},title:"Increase font size",children:"+"})]}),o.jsx("button",{onClick:()=>e(z=>!z),className:"px-3 py-2 rounded bg-gray-200 dark:bg-gray-800 text-black dark:text-white border border-gray-300 dark:border-gray-700",title:t?"Switch to light mode":"Switch to dark mode",children:t?" Light":" Dark"}),o.jsx("button",{onClick:Bt,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Refresh"}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:T,onChange:z=>D(z.target.checked)}),"Show only issues"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm",children:[o.jsx("div",{className:"col-span-1 md:col-span-2",children:o.jsxs("div",{className:"border rounded bg-white dark:bg-gray-900 p-2 flex flex-col gap-2 text-xs",children:[o.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[o.jsxs("label",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-semibold",children:"From"}),o.jsx("input",{type:"datetime-local",value:p?Mt.utc(p).format("YYYY-MM-DDTHH:mm"):"",onChange:z=>y(z.target.value?Mt.utc(z.target.value).toISOString():""),className:"h-8 border rounded px-2 bg-white text-black dark:bg-gray-800 dark:text-white dark:border-gray-700"})]}),o.jsxs("label",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-semibold",children:"To"}),o.jsx("input",{type:"datetime-local",value:_?Mt.utc(_).format("YYYY-MM-DDTHH:mm"):"",onChange:z=>b(z.target.value?Mt.utc(z.target.value).toISOString():""),className:"h-8 border rounded px-2 bg-white text-black dark:bg-gray-800 dark:text-white dark:border-gray-700"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-[180px]",children:[o.jsx("div",{className:"font-semibold mb-1",children:"Backend (Assigned)"}),o.jsx("div",{className:"flex flex-wrap gap-1 max-h-14 overflow-auto pr-1",children:tn.map(z=>o.jsxs("label",{className:"flex items-center gap-1 border px-2 py-1 rounded",children:[o.jsx("input",{type:"checkbox",checked:k.includes(z),onChange:pe=>{S(Fe=>pe.target.checked?[...Fe,z]:Fe.filter(bt=>bt!==z))}}),z]},`b-${z}`))})]}),o.jsxs("div",{className:"flex-1 min-w-[180px]",children:[o.jsx("div",{className:"font-semibold mb-1",children:"Live machines"}),o.jsx("div",{className:"flex flex-wrap gap-1 max-h-14 overflow-auto pr-1",children:tn.map(z=>o.jsxs("label",{className:"flex items-center gap-1 border px-2 py-1 rounded",children:[o.jsx("input",{type:"checkbox",checked:E.includes(z),onChange:pe=>{O(Fe=>pe.target.checked?[...Fe,z]:Fe.filter(bt=>bt!==z))}}),z]},`l-${z}`))})]})]})]})}),o.jsx("div",{className:"col-span-1 md:col-span-2",children:o.jsxs("div",{className:"grid grid-rows-2 grid-flow-col auto-cols-[200px] gap-2 overflow-x-auto pb-1",children:[[{key:"backendMissing",title:"Backend missing in live",value:Ge.backendMissing},{key:"liveExtra",title:"Live extra vs backend",value:Ge.liveExtra},{key:"totalBackend",title:"Total backend trades",value:Ge.totalBackend},{key:"totalLive",title:"Total live trades",value:Ge.totalLive},{key:"lateFetch",title:"Late fetch (>5m)",value:Ge.lateFetch},{key:"priceGap",title:"Price gap (>15%)",value:Ge.priceGap},{key:"closureMismatch",title:"Closure mismatch",value:Ge.closureMismatch},{key:"closureGap",title:"Closure gap (time/price)",value:Ge.closureGap},{key:"plDrop",title:"PL drop after $20 (>15%)",value:Un},{key:"neverProfit",title:"Never in profit (scanned)",value:Cn,subtitle:`${Qn}/${an.length} scanned`}].map((z,pe)=>{const Fe=["bg-gradient-to-br from-cyan-500/80 via-sky-400/80 to-blue-500/80 text-white","bg-gradient-to-br from-emerald-500/80 via-green-400/80 to-lime-500/80 text-white","bg-gradient-to-br from-amber-500/80 via-orange-400/80 to-rose-500/80 text-white","bg-gradient-to-br from-purple-500/80 via-fuchsia-500/80 to-pink-500/80 text-white","bg-gradient-to-br from-slate-600/80 via-slate-500/80 to-gray-500/80 text-white"],bt=Fe[pe%Fe.length],dt=F.includes(z.key);return o.jsx("button",{onClick:()=>Z(Zt=>Zt.includes(z.key)?Zt.filter(Vt=>Vt!==z.key):[...Zt,z.key]),className:`text-left h-full w-full transition-all rounded-lg shadow-md ${dt?"ring-2 ring-white/70 dark:ring-cyan-300 scale-[1.01]":"hover:scale-[1.01] hover:ring-1 hover:ring-white/50 dark:hover:ring-cyan-200/70"}`,children:o.jsx(yW,{title:z.title,value:z.value,subtitle:z.subtitle,tint:dt?bt:`${bt} opacity-90`})},z.key)}),o.jsx("div",{className:"flex items-center",children:o.jsx("button",{onClick:()=>Z([]),className:"text-sm text-blue-200 underline",children:"Show all"})})]})})]}),o.jsx("div",{className:"flex items-center justify-end mb-2",children:o.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700",onClick:()=>{V(z=>{const pe=Math.max(.6,z-.1);return localStorage.setItem("tc_font_scale",String(pe)),pe})},title:"Decrease font size",children:""}),o.jsxs("span",{className:"px-2",children:["Font ",j.toFixed(1),"x"]}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700",onClick:()=>{V(z=>{const pe=Math.min(2,z+.1);return localStorage.setItem("tc_font_scale",String(pe)),pe})},title:"Increase font size",children:"+"})]})})]}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx("div",{className:"border rounded-lg h-full",style:{fontSize:`${j}rem`},children:o.jsx("div",{className:"overflow-auto h-full",children:o.jsxs("table",{className:"min-w-[1400px]",style:{fontSize:"inherit"},children:[o.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("symbol"),children:["Symbol ",K.key==="symbol"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Unique ID"}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("candle"),children:["Candle Time ",K.key==="candle"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("backend"),children:["Backend ",K.key==="backend"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("live"),children:["Live ",K.key==="live"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("action"),children:["Action ",K.key==="action"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("fetcher"),children:["Fetcher  ",K.key==="fetcher"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("price"),children:["Price % ",K.key==="price"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("investment"),children:["Invest % ",K.key==="investment"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("status"),children:["Status ",K.key==="status"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("close"),children:["Close  ",K.key==="close"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("drawdown"),children:["Closing issue ",K.key==="drawdown"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>We("issues"),children:["Issues ",K.key==="issues"?K.direction==="asc"?"":"":""]})}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Compare"})]})}),o.jsxs("tbody",{children:[an.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:13,className:"px-3 py-4 text-center text-gray-500",children:"No trades in range"})}),me.map(z=>{var A,G,U,J,Y,X,we,je,_e,Ee,Re,gt,Nt,Ut,vt,$t,fn,Sn,mn,Ot,ur,Mr,Jn,ar,Lr,er,Ne;const pe=((A=z.backendTrade)==null?void 0:A.pair)||((G=z.liveTrade)==null?void 0:G.pair)||"N/A",Fe=((U=z.backendTrade)==null?void 0:U.candel_time)||((J=z.liveTrade)==null?void 0:J.candel_time)||"N/A",bt=Rw(z.backendTrade)||Rw(z.liveTrade),dt=xW(pe,bt),Zt=Number.isFinite(z.fetcherDiff)?`${z.fetcherDiff.toFixed(1)}m`:"",Vt=Number.isFinite(z.priceDeltaPct)?`${z.priceDeltaPct.toFixed(1)}%`:"",kt=tx(z.priceDeltaPct),ct=Number.isFinite(z.investmentDeltaPct)?`${z.investmentDeltaPct.toFixed(1)}%`:"",ft=tx(z.investmentDeltaPct),Xt=Oi((Y=z.liveTrade)==null?void 0:Y.pl_after_comm),pn=Oi((X=z.backendTrade)==null?void 0:X.pl_after_comm),Yn=Mh(z.liveTrade),Tn=Mh(z.backendTrade),Gn=Xt!==null&&pn!==null?Xt-pn:null,In=Xt!==null&&pn!==null&&pn!==0?(Xt-pn)/Math.abs(pn)*100:null,bn=z.backendStatus==="closed"&&z.liveStatus==="closed",re=dd(z.backendTrade),Ae=dd(z.liveTrade),$e=(()=>{if(bn&&Number.isFinite(z.closeTimeDiff))return`${z.closeTimeDiff.toFixed(1)}m`;const nt=[];return re&&nt.push(`B:${re}`),Ae&&nt.push(`L:${Ae}`),nt.length?nt.join(" | "):""})(),zt=(()=>{if(bn&&Number.isFinite(z.closePriceDelta))return`${z.closePriceDelta.toFixed(1)}%`;const nt=[];return Number.isFinite(Tn)&&nt.push(`B:${Tn.toFixed(2)}`),Number.isFinite(Yn)&&nt.push(`L:${Yn.toFixed(2)}`),nt.length?nt.join(" / "):""})(),Xe=(()=>{const nt=[];pn!==null&&nt.push(`B:${pn.toFixed(2)}`),Xt!==null&&nt.push(`L:${Xt.toFixed(2)}`);const wt=Gn!==null?o.jsxs("div",{className:"font-bold text-sm",children:[" $",Gn.toFixed(2)," ",In!==null?`(${In.toFixed(1)}%)`:""]}):null;return nt.length===0&&!wt?o.jsx("div",{children:"PL: "}):o.jsxs("div",{className:"leading-tight",children:[nt.length?o.jsx("div",{children:nt.join(" / ")}):null,wt]})})(),tt=o.jsxs("div",{className:"space-y-0.5 text-xs",children:[o.jsxs("div",{children:["Time: ",$e]}),o.jsxs("div",{children:["Price: ",zt]}),o.jsx("div",{children:Xe}),!bn&&o.jsx("div",{className:"text-gray-500",children:"Pending (running)"})]}),rt=(()=>{if(!bn)return"";if(Gn!==null){if(Gn>0)return"bg-green-200 text-green-900";if(Gn<0)return"bg-red-200 text-red-900"}return tx(z.closePriceDelta)})();return o.jsxs(Kr.Fragment,{children:[o.jsxs("tr",{className:`border-t border-gray-200 dark:border-gray-800 cursor-pointer transition-colors ${Q===z.key?"bg-yellow-100 dark:bg-yellow-900":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>{se(z.key),fe===z.key&&lt(null)},onDoubleClick:()=>{const nt=ce===z.key?null:z.key;ye(nt),nt&&Kt(z)},children:[o.jsx("td",{className:"px-3 py-2 font-semibold",children:o.jsxs("div",{className:"flex items-center gap-2",children:[dt?o.jsx("a",{href:dt,target:"_blank",rel:"noreferrer",className:"text-blue-600 dark:text-cyan-300 underline",onClick:nt=>nt.stopPropagation(),title:`Open ${pe} on Binance (${QT(bt)})`,children:pe}):o.jsx("span",{children:pe}),o.jsx("button",{className:"text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:nt=>{nt.stopPropagation(),navigator.clipboard.writeText(pe),oe(pe),setTimeout(()=>oe(null),1200)},title:"Copy symbol",children:M===pe?"":""})]})}),o.jsx("td",{className:"px-3 py-2",children:(we=z.liveTrade)!=null&&we.unique_id||(je=z.backendTrade)!=null&&je.unique_id?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button","data-uid-link":!0,className:"underline text-blue-600 dark:text-blue-300",onClick:nt=>{var nn,ln;nt.stopPropagation();const wt=((nn=z.liveTrade)==null?void 0:nn.unique_id)||((ln=z.backendTrade)==null?void 0:ln.unique_id)||"";wt&&xn(`/live-trade-view?uid=${encodeURIComponent(wt)}`)},children:((_e=z.liveTrade)==null?void 0:_e.unique_id)||((Ee=z.backendTrade)==null?void 0:Ee.unique_id)}),o.jsx("button",{className:"text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:nt=>{var nn,ln;nt.stopPropagation();const wt=((nn=z.liveTrade)==null?void 0:nn.unique_id)||((ln=z.backendTrade)==null?void 0:ln.unique_id)||"";navigator.clipboard.writeText(wt),B(wt),setTimeout(()=>B(null),1200)},title:"Copy UID",children:P===(((Re=z.liveTrade)==null?void 0:Re.unique_id)||((gt=z.backendTrade)==null?void 0:gt.unique_id))?"":""})]}):""}),o.jsx("td",{className:"px-3 py-2",children:Fe}),o.jsxs("td",{className:"px-3 py-2",children:[o.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-200",children:["Machines: ",z.backendList.map(nt=>nt.machineid).join(", ")||""]}),o.jsxs("div",{className:"text-xs",children:["Status: ",z.backendStatus]}),o.jsxs("div",{className:"text-xs",children:["Fetcher: ",Lh(z.backendTrade)||""]}),o.jsxs("div",{className:"text-xs",children:["Price: ",Rh(z.backendTrade)??""]})]}),o.jsxs("td",{className:"px-3 py-2",children:[o.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-200",children:["Machines: ",z.liveList.map(nt=>nt.machineid).join(", ")||""]}),o.jsxs("div",{className:"text-xs",children:["Status: ",z.liveStatus]}),o.jsxs("div",{className:"text-xs",children:["Fetcher: ",Lh(z.liveTrade)||""]}),o.jsxs("div",{className:"text-xs",children:["Price: ",Rh(z.liveTrade)??""]})]}),o.jsxs("td",{className:"px-3 py-2",children:[o.jsxs("div",{children:["Backend: ",((Nt=z.backendTrade)==null?void 0:Nt.action)||""]}),o.jsxs("div",{children:["Live: ",((Ut=z.liveTrade)==null?void 0:Ut.action)||""]})]}),o.jsx("td",{className:"px-3 py-2",children:Zt}),o.jsx("td",{className:`px-3 py-2 ${kt}`,children:Vt}),o.jsx("td",{className:`px-3 py-2 ${ft}`,children:ct}),o.jsxs("td",{className:"px-3 py-2",children:[o.jsxs("div",{children:["Backend: ",z.backendStatus]}),o.jsxs("div",{children:["Live: ",z.liveStatus]})]}),o.jsx("td",{className:`px-3 py-2 ${rt}`,children:tt}),o.jsxs("td",{className:"px-3 py-2 text-xs",children:[((vt=te[z.key])==null?void 0:vt.loading)&&o.jsx("span",{className:"text-gray-500",children:"Scanning"}),!(($t=te[z.key])!=null&&$t.loading)&&((fn=te[z.key])==null?void 0:fn.issue)&&o.jsxs("span",{className:"text-red-500 font-semibold",children:[" Dropped ",(te[z.key].issue.dropPct||0).toFixed(1),"% from peak $",(Sn=te[z.key].issue.peak)==null?void 0:Sn.toFixed(2)," at ",te[z.key].issue.at]}),!((mn=te[z.key])!=null&&mn.loading)&&!((Ot=te[z.key])!=null&&Ot.issue)&&((ur=te[z.key])==null?void 0:ur.recovered)&&o.jsxs("span",{className:"text-green-500 font-semibold",children:[" Recovered to $",(Mr=te[z.key].recovered.peak)==null?void 0:Mr.toFixed(2)," at ",te[z.key].recovered.at]}),!((Jn=te[z.key])!=null&&Jn.loading)&&!((ar=te[z.key])!=null&&ar.issue)&&!((Lr=te[z.key])!=null&&Lr.recovered)&&o.jsx("span",{className:"text-green-500",children:"OK"})]}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("div",{className:"flex flex-col gap-1",children:Pe(z.issues)})}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700",onClick:nt=>{nt.stopPropagation(),lt(wt=>wt===z.key?null:z.key),te[z.key]||Kt(z)},children:fe===z.key?"Hide":"Compare"})})]}),ce===z.key&&o.jsx("tr",{className:"border-t border-gray-100 dark:border-gray-800",children:o.jsx("td",{colSpan:13,className:"px-0 py-0",children:o.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-4",children:o.jsxs("div",{className:"max-h-[50vh] overflow-auto",style:{fontSize:`${j}rem`},children:[Ce[z.key]&&o.jsx("div",{children:"Loading trade history"}),!Ce[z.key]&&((er=te[z.key])==null?void 0:er.error)&&o.jsx("div",{className:"text-red-500 text-sm",children:te[z.key].error}),!Ce[z.key]&&((Ne=te[z.key])==null?void 0:Ne.logs)&&(()=>{var Dt,yn,lr;const nt=te[z.key].logs,wt=Pt=>{if(Pt.type==="json"){if(!At)return!1;const $n=At[Pt.value];return $n?Pt.interval?!!$n[Pt.interval]:Object.values($n).some(Boolean)||$n===!0:!1}return Array.isArray(ht)&&ht.length?ht.includes(Pt.value):!0},nn=Array.isArray(dn)&&dn.length?dn:(Dt=nt[0])!=null&&Dt.json?Object.keys(nt[0].json):[],ln=(nn&&nn.length?nn:Object.keys(((yn=nt[0])==null?void 0:yn.json)||[])).map(Pt=>typeof Pt=="string"?{header:Pt,key:Pt,type:"regular",value:Pt}:Pt&&typeof Pt=="object"?{header:Pt.label||Pt.value||JSON.stringify(Pt),key:Pt.value||Pt.label||JSON.stringify(Pt),type:Pt.type||Pt.kind||"regular",value:Pt.value||Pt.label||JSON.stringify(Pt),interval:Pt.interval}:{header:String(Pt),key:String(Pt),type:"regular",value:String(Pt)}).filter(wt);return o.jsxs("div",{className:"space-y-2",children:[te[z.key].issue&&o.jsxs("div",{className:"text-sm text-red-500 font-semibold",children:[" Dropped ",(te[z.key].issue.dropPct||0).toFixed(1),"% from peak $",(lr=te[z.key].issue.peak)==null?void 0:lr.toFixed(2)," at ",te[z.key].issue.at]}),o.jsxs("table",{className:"min-w-full text-xs",style:{fontSize:"inherit"},children:[o.jsx("thead",{className:"bg-gray-200 dark:bg-gray-800 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>Ve(Pt=>({key:"ts",direction:Pt.key==="ts"&&Pt.direction==="asc"?"desc":"asc"})),children:["Timestamp ",le.key==="ts"?le.direction==="asc"?"":"":""]})}),ln.map((Pt,$n)=>o.jsx("th",{className:"px-2 py-1 text-left",children:o.jsxs("button",{className:"flex items-center gap-1",onClick:()=>Ve(rn=>({key:Pt.key,direction:rn.key===Pt.key&&rn.direction==="asc"?"desc":"asc"})),children:[Pt.header," ",le.key===Pt.key?le.direction==="asc"?"":"":""]})},`${Pt.header}-${$n}`))]})}),o.jsx("tbody",{children:nt.slice().sort((Pt,$n)=>{var Ct,pt;const rn=le.direction==="asc"?1:-1,ke=le.key;if(ke==="ts"){const Yt=Mt(Pt.ts||((Ct=Pt.raw)==null?void 0:Ct.timestamp)),St=Mt($n.ts||((pt=$n.raw)==null?void 0:pt.timestamp));return!Yt.isValid()||!St.isValid()||Yt.valueOf()===St.valueOf()?0:Yt.valueOf()>St.valueOf()?rn:-rn}const Me=Pt.json?Pt.json[ke]:void 0,Le=$n.json?$n.json[ke]:void 0;return Me===Le?0:Me>Le?rn:-rn}).map((Pt,$n)=>{var rn;return o.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",children:[o.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:Pt.ts||((rn=Pt.raw)==null?void 0:rn.timestamp)||""}),ln.map((ke,Me)=>{const Le=ke.key,Ct=Pt.json&&Object.prototype.hasOwnProperty.call(Pt.json,Le)?Pt.json[Le]:"",pt=Ct==null?"":typeof Ct=="object"?JSON.stringify(Ct):String(Ct);return o.jsx("td",{className:"px-2 py-1 whitespace-nowrap hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:pt},`${Le}-${Me}`)})]},$n)})})]})]})})()]})})})}),fe===z.key&&o.jsx("tr",{className:"border-t border-gray-100 dark:border-gray-800",children:o.jsx("td",{colSpan:13,className:"px-4 py-3 bg-gray-50 dark:bg-gray-900",children:(()=>{const nt=localStorage.getItem("tableColumnOrder_global"),wt=nt?JSON.parse(nt):null,nn=Array.isArray(wt)&&wt.length?wt:Object.keys(z.liveTrade||z.backendTrade||{});return o.jsx("div",{className:"overflow-auto max-h-[50vh] border rounded bg-gray-900 text-white dark:bg-white dark:text-black",style:{fontSize:`${j}rem`},children:o.jsxs("table",{className:"min-w-[1200px] text-xs",children:[o.jsx("thead",{className:"sticky top-0 bg-gray-800 text-white dark:bg-gray-200 dark:text-black",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1 text-left",children:"Side"}),nn.map(ln=>o.jsx("th",{className:"px-2 py-1 text-left",children:ln},ln))]})}),o.jsx("tbody",{children:[{title:"Backend",trade:z.backendTrade},{title:"Live",trade:z.liveTrade}].map(({title:ln,trade:Dt})=>o.jsxs("tr",{className:"border-t border-gray-700 dark:border-gray-200 bg-gray-900 text-white dark:bg-white dark:text-black hover:bg-gray-700 dark:hover:bg-gray-100 transition-colors",children:[o.jsx("td",{className:"px-2 py-1 font-semibold",children:ln}),nn.map(yn=>o.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:et(yn,Dt)},yn))]},ln))})]})})})()})})]},z.key)})]})]})})})})]})})]})},nx={enabled:!1,volume:.7,mode:"tts",announceActions:{BUY:!0,SELL:!0},announceSignals:{},audioUrls:{BUY:"",SELL:""},newTradeWindowHours:4};function bW({isOpen:t,onClose:e,settings:n,onChange:r,availableSignals:s,onTestVisual:l}){var D,F;const[c,d]=x.useState(n||nx),h=x.useRef(null),[g,p]=x.useState(null),y=x.useRef({dragging:!1,offsetX:0,offsetY:0,width:0,height:0});x.useEffect(()=>{d(Z=>{const K={...nx,...n||{}},L={...K.announceSignals||{}};return(s||[]).forEach(Q=>{L[Q]===void 0&&(L[Q]=!0)}),K.announceSignals=L,K})},[n,s]),x.useEffect(()=>{t&&p(null)},[t]);const _=()=>{r(c),e()},b=()=>{var ye;const Z=c||nx;if(!Z.enabled)return;const K=Math.max(0,Math.min(1,Number(Z.volume||.7)));let Q=["BUY","SELL"].find(te=>{var xe;return((xe=Z.announceActions)==null?void 0:xe[te])!==!1})||"BUY";const ce=(s||[]).find(te=>{var xe;return((xe=Z.announceSignals)==null?void 0:xe[te])!==!1})||"signal";if(Z.mode==="audio"){const te=(ye=Z.audioUrls)==null?void 0:ye[Q];if(te)try{const xe=new Audio(te);xe.volume=K,xe.play().catch(()=>{});return}catch{}}try{const te=`${Q==="BUY"?"Buy":Q==="SELL"?"Sell":Q} from ${ce}`,xe=new SpeechSynthesisUtterance(te);xe.volume=K,window.speechSynthesis.speak(xe)}catch{}typeof l=="function"&&l()},k=Z=>{if(!h.current)return;const K=h.current.getBoundingClientRect();p({x:K.left,y:K.top}),y.current={dragging:!0,offsetX:Z.clientX-K.left,offsetY:Z.clientY-K.top,width:K.width,height:K.height},window.addEventListener("mousemove",S),window.addEventListener("mouseup",E,{once:!0})},S=Z=>{if(!y.current.dragging)return;const K=window.innerWidth,L=window.innerHeight,Q=Z.clientX-y.current.offsetX,se=Z.clientY-y.current.offsetY,ce=8,ye=Math.max(ce,K-y.current.width-ce),te=Math.max(ce,L-y.current.height-ce),xe=Math.min(Math.max(Q,ce),ye),Ce=Math.min(Math.max(se,ce),te);p({x:xe,y:Ce})},E=()=>{y.current.dragging=!1,window.removeEventListener("mousemove",S)},O=({action:Z})=>o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:!!c.announceActions[Z],onChange:K=>d(L=>({...L,announceActions:{...L.announceActions,[Z]:K.target.checked}}))}),Z]}),T=({signal:Z})=>o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:!!c.announceSignals[Z],onChange:K=>d(L=>({...L,announceSignals:{...L.announceSignals,[Z]:K.target.checked}}))}),Z]});return t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:o.jsxs("div",{ref:h,className:"fixed w-[92vw] max-w-2xl bg-white dark:bg-gray-900 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-800 text-gray-900 dark:text-gray-100",style:g?{left:g.x,top:g.y}:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-800 cursor-move select-none",onMouseDown:k,children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Sound & New Trades"}),o.jsx("button",{className:"text-sm px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 text-black dark:text-white",onClick:e,children:"Close"})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Enable sound"}),o.jsx("input",{type:"checkbox",checked:!!c.enabled,onChange:Z=>d(K=>({...K,enabled:Z.target.checked}))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["Volume: ",Math.round((c.volume||0)*100),"%"]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",className:"w-full",value:c.volume||0,onChange:Z=>d(K=>({...K,volume:parseFloat(Z.target.value)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Mode"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-900 dark:text-gray-100",children:[o.jsx("input",{type:"radio",name:"mode",value:"tts",checked:(c.mode||"tts")==="tts",onChange:Z=>d(K=>({...K,mode:Z.target.value}))}),"Voice (TTS)"]}),o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-900 dark:text-gray-100",children:[o.jsx("input",{type:"radio",name:"mode",value:"audio",checked:c.mode==="audio",onChange:Z=>d(K=>({...K,mode:Z.target.value}))}),"Audio URLs"]})]})]}),c.mode==="audio"&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-900 dark:text-gray-100",children:"BUY audio URL"}),o.jsx("input",{className:"px-2 py-1 rounded border border-gray-300 dark:border-gray-700 dark:bg-gray-800",placeholder:"https://example.com/buy.mp3",value:((D=c.audioUrls)==null?void 0:D.BUY)||"",onChange:Z=>d(K=>({...K,audioUrls:{...K.audioUrls||{},BUY:Z.target.value}}))})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-900 dark:text-gray-100",children:"SELL audio URL"}),o.jsx("input",{className:"px-2 py-1 rounded border border-gray-300 dark:border-gray-700 dark:bg-gray-800",placeholder:"https://example.com/sell.mp3",value:((F=c.audioUrls)==null?void 0:F.SELL)||"",onChange:Z=>d(K=>({...K,audioUrls:{...K.audioUrls||{},SELL:Z.target.value}}))})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Announce actions"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(O,{action:"BUY"}),o.jsx(O,{action:"SELL"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Announce signals"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-36 overflow-auto p-2 border border-gray-200 dark:border-gray-800 rounded",children:(s||[]).map(Z=>o.jsx(T,{signal:Z},Z))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:'"New trades" window for sticker (hours)'}),o.jsx("input",{type:"number",min:"1",max:"72",className:"w-24 px-2 py-1 rounded border border-gray-300 dark:border-gray-700 dark:bg-gray-800",value:c.newTradeWindowHours||4,onChange:Z=>d(K=>({...K,newTradeWindowHours:Math.max(1,Math.min(72,parseInt(Z.target.value||"1")))}))})]})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-2 px-4 py-3 border-t border-gray-200 dark:border-gray-800",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white",onClick:b,children:"Test"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 dark:bg-gray-800 text-black dark:text-white",onClick:e,children:"Cancel"}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:_,children:"Save"})]})]})}):null}const Ms=t=>{if(t===!0||t==="true"||t===1||t==="1")return!0;if(t===!1||t==="false"||t===0||t==="0"||t===null||t===void 0)return!1;if(typeof t=="string"){const e=parseFloat(t);return!isNaN(e)&&e>0}return!1},Vi=t=>{if(t===!0||t==="true"||t===1||t==="1")return!0;if(typeof t=="string"){const e=parseFloat(t);return!isNaN(e)&&e>0}return!1},_W=30*1e3,SW=60*60*1e3,Pw=15*60,Fw="logout_timer_enabled",wW=()=>{var Le,Ct,pt,Yt,St;const[t,e]=x.useState(!1),[n,r]=x.useState(null),[s,l]=x.useState(!0),[c,d]=x.useState(!1),[h,g]=x.useState(!1),[p,y]=x.useState(!1),[_,b]=x.useState(Pw),[k,S]=x.useState(()=>{try{const q=localStorage.getItem(Fw);if(q==="false")return!1;if(q==="true")return!0}catch{}return!0}),[E,O]=x.useState(!1),T=x.useRef(0),D=x.useRef(!1),F=x.useRef(null),[Z,K]=x.useState([]),[L,Q]=x.useState(null),[se,ce]=x.useState(0),[ye,te]=x.useState(null),[xe,Ce]=x.useState(null),[at,le]=x.useState(null);x.useEffect(()=>{window._superTrendData=Z},[Z]),x.useEffect(()=>{if(!L)return;const q=setInterval(()=>ce(ee=>ee+1),60*1e3);return()=>clearInterval(q)},[L]);const[Ve,Ue]=x.useState(null),[Ze,M]=x.useState(null),[oe,P]=x.useState([]),[B,j]=x.useState(null),[V,fe]=x.useState(()=>typeof Oa=="function"?Oa():""),[lt,et]=x.useState(!1),[ht,At]=x.useState(!1),[xn,Bt]=x.useState(!1),[Kt,tn]=x.useState([]),[Hn,sn]=x.useState([]),[He,Dn]=x.useState(!1),[Ht,yt]=x.useState([]),[dn,Wt]=x.useState(!1),[an,Un]=x.useState(()=>{const q=localStorage.getItem("machineRadioMode");return q?JSON.parse(q):!1}),Cn=x.useCallback(q=>q==null?"":String(q),[]),[Qn,me]=x.useState(!0),[We,Ge]=x.useState("running"),[ie,Pe]=x.useState(()=>{const q=localStorage.getItem("fontSizeLevel");return q?parseInt(q,10):3}),[z,pe]=x.useState(()=>{const q=localStorage.getItem("chartSettings");return q?JSON.parse(q):{layout:3,showRSI:!0,showVolume:!0}});x.useEffect(()=>{localStorage.setItem("chartSettings",JSON.stringify(z))},[z]),x.useEffect(()=>{const q=document.documentElement,ee=1,ve=(ie-8)*.25;q.style.setProperty("--app-font-scale",`${ee+ve}`)},[ie]),x.useEffect(()=>{localStorage.setItem("fontSizeLevel",ie)},[ie]);const Fe=1e4;x.useEffect(()=>{let q=!1;const ee=setTimeout(()=>{q||(l(!1),e(!1),r(null))},Fe);return gw().then(ve=>{q||(e(!!ve),ve&&(T.current=Date.now()),r((ve==null?void 0:ve.user)??null),l(!1))}).catch(()=>{q||(e(!1),r(null),l(!1))}).finally(()=>{clearTimeout(ee)}),()=>{q=!0,clearTimeout(ee)}},[]),x.useEffect(()=>{t&&T.current===0&&(T.current=Date.now())},[t]),x.useEffect(()=>{if(!t)return;const q=setInterval(()=>{gw().then(ee=>{if(!ee){e(!1),r(null),d(!1),g(!1);return}r(ee.user??null),Date.now()-T.current>=SW&&g(!0)})},_W);return()=>clearInterval(q)},[t]),x.useEffect(()=>{const q=()=>{e(!1),d(!1)};return window.addEventListener("lab-unauthorized",q),()=>window.removeEventListener("lab-unauthorized",q)},[]);const bt="soundSettings",[dt,Zt]=x.useState(!1),[Vt,kt]=x.useState(()=>{try{const q=localStorage.getItem(bt);return q?JSON.parse(q):{enabled:!1,volume:.7,mode:"tts",announceActions:{BUY:!0,SELL:!0},announceSignals:{},audioUrls:{BUY:"",SELL:""},newTradeWindowHours:4}}catch{return{enabled:!1,volume:.7,mode:"tts",announceActions:{BUY:!0,SELL:!0},announceSignals:{},audioUrls:{BUY:"",SELL:""},newTradeWindowHours:4}}});x.useEffect(()=>{localStorage.setItem(bt,JSON.stringify(Vt))},[Vt]);const[ct,ft]=x.useState(()=>{try{const q=localStorage.getItem("layoutOption");if(q==null||q==="")return 3;const ee=parseInt(q,10);return Number.isInteger(ee)&&ee>=1&&ee<=14?ee:3}catch{return 3}}),[Xt,pn]=x.useState(()=>{const q=localStorage.getItem("selectedSignals");if(q){const ee=JSON.parse(q);return!Object.values(ee).every(Qe=>Qe===!0)}return!0}),[Yn,Tn]=x.useState(()=>{const q=localStorage.getItem("machineToggleAll");return q?JSON.parse(q):!0});x.useEffect(()=>{localStorage.setItem("machineRadioMode",an)},[an]),x.useEffect(()=>{localStorage.setItem("machineToggleAll",Yn)},[Yn]);const[Gn,In]=x.useState(!1),[bn,re]=x.useState(["BTCUSDT","ETHUSDT","ADAUSDT","DOTUSDT"]),[Ae,$e]=x.useState(()=>{const q=localStorage.getItem("fromDate");return q?Mt(q):null}),[zt,Xe]=x.useState(()=>{const q=localStorage.getItem("toDate");return q?Mt(q):null});x.useEffect(()=>{Ae?localStorage.setItem("fromDate",Ae.toISOString()):localStorage.removeItem("fromDate")},[Ae]),x.useEffect(()=>{zt?localStorage.setItem("toDate",zt.toISOString()):localStorage.removeItem("toDate")},[zt]);const[tt,rt]=x.useState({"2POLE_IN5LOOP":!0,IMACD:!0,"2POLE_Direct_Signal":!0,"HIGHEST SWING HIGH":!0,"LOWEST SWING LOW":!0,"NORMAL SWING HIGH":!0,"NORMAL SWING LOW":!0,ProGap:!0,CrossOver:!0,Spike:!0,Kicker:!0}),[A,G]=x.useState(!1),[U,J]=x.useState(!1),[Y,X]=x.useState({BUY:!0,SELL:!0}),[we,je]=x.useState(()=>{const q=localStorage.getItem("liveFilter");if(q)try{return JSON.parse(q)}catch{return{true:!0,false:!0}}return{true:!0,false:!0}});x.useEffect(()=>{localStorage.setItem("liveFilter",JSON.stringify(we))},[we]);const[_e,Ee]=x.useState(()=>localStorage.getItem("liveRadioMode")==="true");x.useEffect(()=>{localStorage.setItem("liveRadioMode",_e?"true":"false")},[_e]);const[Re,gt]=x.useState(()=>localStorage.getItem("filterVisible")!=="false");x.useEffect(()=>{localStorage.setItem("filterVisible",Re?"true":"false")},[Re]),x.useEffect(()=>{if(U){const q=Object.keys(Y).find(ee=>Y[ee]);if(q){const ee={BUY:!1,SELL:!1};ee[q]=!0,X(ee),localStorage.setItem("selectedActions",JSON.stringify(ee))}}},[U]);const[Nt,Ut]=x.useState(()=>{const q=localStorage.getItem("selectedIntervals");return q?JSON.parse(q):{"1m":!0,"3m":!0,"5m":!0,"15m":!0,"30m":!0,"1h":!0,"2h":!0,"4h":!0}}),[vt,$t]=x.useState({}),[fn,Sn]=x.useState(0),mn=x.useCallback(async()=>{var q,ee,ve,Qe,ot;if(typeof window<"u"&&((ee=(q=window.location)==null?void 0:q.hostname)!=null&&ee.includes("github.io"))&&!Oa()){P([]),yt([]),sn([]),tn([]),K([]),Q(null),te(null),j(null);return}try{et(!1);try{await Nn("/api/sync-open-positions").catch(()=>{})}catch{}const xt=await Nn("/api/trades");if(xt.status===401){e(!1);return}const Gt=xt.ok?await xt.json():{trades:[]},ze=Array.isArray(Gt.trades)?Gt.trades:[];console.log("[DEBUG] Trades received:",ze.length,"rows"),j((ve=Gt._meta)!=null&&ve.demoData&&Gt._meta.hint||null);const wn=await Nn("/api/machines"),Lt=wn.ok?await wn.json():{machines:[]},Pn=Array.isArray(Lt.machines)?Lt.machines:[];console.log("[DEBUG] Machines received:",Pn.length,"machines");const qt=`${"/live_cloud-lab_live/".replace(/\/?$/,"/")}logs.json`,fr=await fetch(qt).catch(()=>({ok:!1})),Xn=fr.ok?await fr.json():{logs:[]},vr=Array.isArray(Xn==null?void 0:Xn.logs)?Xn.logs:[];console.log("[API DEBUG] fetch /api/supertrend");const Ar=await Nn("/api/supertrend"),rr=Ar.ok?await Ar.json():{supertrend:[]};K(Array.isArray(rr.supertrend)?rr.supertrend:[]),console.log("[API DEBUG] fetch /api/pairstatus");const mr=await Nn(`/api/pairstatus?_=${Date.now()}`),vs=mr.ok?await mr.json():null;Q(vs);try{console.log("[API DEBUG] fetch /api/active-loss");const Mn=await Nn("/api/active-loss"),jn=Mn.ok?await Mn.json():null;te(jn||null)}catch{te(null)}try{console.log("[API DEBUG] fetch /api/auto-execute");const Mn=await Nn("/api/auto-execute"),jn=Mn.ok?await Mn.json():null;jn&&typeof jn.buyActive=="boolean"&&typeof jn.sellActive=="boolean"?Ce({buyActive:jn.buyActive,sellActive:jn.sellActive}):jn&&typeof jn.active=="boolean"?Ce({buyActive:jn.active,sellActive:jn.active}):Ce(null)}catch{Ce(null)}try{const Mn=await Nn("/api/manage-auto-position"),jn=Mn.ok?await Mn.json():null;jn&&typeof jn.enabled=="boolean"?le(jn.enabled):le(!1)}catch{le(!1)}const sr=Array.from(new Set(ze.map(Mn=>Cn(Mn.machineid)).filter(Boolean))).map(Mn=>({machineid:Mn,active:!0})),is=[...Pn,...sr.filter(Mn=>!Pn.some(jn=>Cn(jn.machineid)===Mn.machineid))];yt(is),P(ze),sn(vr),tn(is),ht&&ze.length>0&&(console.log("[DEBUG]  CORS error cleared - data loaded successfully"),At(!1));const wr=is.reduce((Mn,jn)=>{const qr=Cn(jn.machineid);return qr&&(Mn[qr]=!0),Mn},{});$t(wr),localStorage.setItem("selectedMachines",JSON.stringify(wr));const Ks=ze.reduce((Mn,jn)=>{const qr=Cn(jn.machineid)||"unknown";return Mn[qr]=(Mn[qr]||0)+1,Mn},{});console.log("[DEBUG] Machines from API:",Pn.map(Mn=>Cn(Mn.machineid))),console.log("[DEBUG] Machines from trades:",sr),console.log("[DEBUG] Counts by machine from trades:",Ks),console.log("[DEBUG] Selected machines:",wr)}catch{if(P([]),j(null),DN())et(!0),Bt(!0);else if(typeof window<"u"&&((ot=(Qe=window.location)==null?void 0:Qe.hostname)!=null&&ot.includes("github.io"))){const Gt=Oa();console.log("[DEBUG] GitHub Pages error - current API base:",Gt),et(!0),typeof mx=="function"&&mx().then(()=>setTimeout(()=>mn(),2e3))}}},[Cn]);x.useEffect(()=>{mn()},[mn]),x.useEffect(()=>{const q=()=>{fe(Oa()),mn()};return window.addEventListener("api-config-loaded",q),()=>window.removeEventListener("api-config-loaded",q)},[mn]);const Ot=x.useMemo(()=>{if(!Array.isArray(oe))return[];const q=(ee,ve)=>Object.prototype.hasOwnProperty.call(ee,ve)?ee[ve]:!0;return oe.filter(ee=>{if(!Qn&&ee.min_close==="Min_close")return!1;const ve=q(tt,ee.signalfrom),Qe=q(vt,Cn(ee.machineid)),ot=q(Nt,ee.interval),xt=q(Y,ee.action),Gt=ee.exist_in_exchange??ee.Exist_in_exchange,ze=Gt===!0||Gt==="true"||Gt===1||Gt==="1";if(!(we.true&&we.false)){if(we.true&&!ze)return!1;if(we.false&&ze)return!1;if(!we.true&&!we.false)return!1}if(!ee.candel_time)return!1;const wn=Mt(ee.candel_time),Lt=(!Ae||wn.isSameOrAfter(Ae))&&(!zt||wn.isSameOrBefore(zt));return ve&&Qe&&ot&&xt&&Lt})},[oe,tt,vt,Nt,Y,Ae,zt,Qn,ie,we]);x.useEffect(()=>{if(!Ht.length&&!oe.length)return;const q=Array.from(new Set(oe.map(xt=>xt.interval))),ee=Array.from(new Set(oe.map(xt=>xt.signalfrom))),ve=Array.from(new Set(oe.map(xt=>xt.action))),Qe=oe.reduce((xt,Gt)=>{const ze=Cn(Gt.machineid)||"unknown";return xt[ze]=(xt[ze]||0)+1,xt},{}),ot=Ot.reduce((xt,Gt)=>{const ze=Cn(Gt.machineid)||"unknown";return xt[ze]=(xt[ze]||0)+1,xt},{});console.log("[DEBUG][Machines] API machines:",Ht.map(xt=>Cn(xt.machineid))),console.log("[DEBUG][Machines] Selected map:",vt),console.log("[DEBUG][Trades] Raw counts by machine:",Qe),console.log("[DEBUG][Trades] Filtered counts by machine:",ot),console.log("[DEBUG][Trades] Unique intervals:",q),console.log("[DEBUG][Trades] Unique signals:",ee),console.log("[DEBUG][Trades] Unique actions:",ve)},[Ht,oe,Ot,vt,Cn]);const ur=x.useMemo(()=>{const q={};return(Ot||[]).forEach(ee=>{const ve=ze=>{q[ze]||(q[ze]=[]),q[ze].push(ee)};ve("Total_Trades"),ee.type==="close"&&ve("Profit_+_Loss_=_Closed_Profit $"),(ee.type==="running"||ee.type==="hedge_hold")&&ve("Profit_+_Loss_=_Running_Profit $"),["assign","running","close","hedge_hold"].includes(ee.type)&&ve("Assign_/_Running_/_Closed Count"),ee.action==="BUY"&&(ee.type==="running"||ee.type==="hedge_hold")&&ve("Running_/_Total_Buy"),ee.action==="SELL"&&(ee.type==="running"||ee.type==="hedge_hold")&&ve("Running_/_Total_Sell");const Qe=Ms(ee.hedge),ot=Vi(ee.hedge_1_1_bool),xt=Vi(ee.commision_journey),Gt=Vi(ee.profit_journey);if(xt&&ee.pl_after_comm>0&&!Gt&&(ee.type==="running"||ee.type==="hedge_hold")&&ve("Comission_Point_Crossed"),Gt&&ee.pl_after_comm>0&&(ee.type==="running"||ee.type==="hedge_hold")&&ve("Profit_Journey_Crossed"),ee.pl_after_comm<0&&(ee.type==="running"||ee.type==="hedge_hold")&&ve("Below_Commision_Point"),ee.type==="close"&&xt&&!Gt&&ve("Closed_After_Comission_Point"),ee.type==="close"&&ee.pl_after_comm<0&&ve("Close_in_Loss"),Qe&&ve("Total_Hedge"),Qe&&(ee.type==="running"||ee.type==="hedge_hold")&&ve("Hedge_Running_pl"),Qe&&ee.type==="close"&&ve("Hedge_Closed_pl"),ee.type==="close"&&ee.pl_after_comm>0&&ve("Close_in_Profit"),ee.type==="close"&&Gt&&ve("Close_After_Profit_Journey"),ee.type==="close"&&xt&&ee.pl_after_comm<0&&ve("Close_Curve_in_Loss"),ee.type==="close"&&ee.min_close==="Min_close"&&(ee.pl_after_comm>0&&ve("Min_Close_Profit"),ee.pl_after_comm<0&&ve("Min_Close_Loss")),ee.type==="close"&&(ve("Total_Closed_Stats"),ve("Closed_Count_Stats"),Qe||ve("Direct_Closed_Stats")),ee.type==="hedge_close"&&ve("Hedge_Closed_Stats"),ee.type==="running"||ee.type==="hedge_hold"){ve("Total_Running_Stats");const ze=Qe||ee.type==="hedge_hold";ze||ve("Direct_Running_Stats"),ze&&!ot&&ve("Hedge_Running_Stats")}(Qe||ee.type==="hedge_hold")&&ot&&(ee.type==="running"||ee.type==="hedge_hold")&&ve("Hedge_on_Hold"),ve("Total_Stats"),(ee.type==="assign"||ee.type==="back_close")&&ve("Assigned_New"),Qe&&ve("Hedge_Stats"),["BUY","SELL"].includes(ee.action)&&ve("Buy_Sell_Stats"),(ee.type==="running"||ee.type==="hedge_hold")&&ee.pl_after_comm>0&&Gt&&ve("Journey_Stats_Running"),(ee.type==="running"||ee.type==="hedge_hold")&&ee.pl_after_comm>0&&xt&&!Gt&&ve("Journey_Stats_Running"),(ee.type==="running"||ee.type==="hedge_hold")&&ee.pl_after_comm<0&&ve("Journey_Stats_Running")}),q},[Ot]),Mr=x.useMemo(()=>{const q=new Set((Array.isArray(Ot)?Ot:[]).map(ee=>ee.signalfrom).filter(Boolean));return Array.from(q)},[Ot]),Jn=q=>{const ee=q.unique_id||q.Unique_ID||q.uid;if(ee)return`uid:${String(ee)}`;const ve=q.candel_time||q.candle_time||q.timestamp||q.created_at,Qe=q.pair||q.Pair||q.symbol||"",ot=q.action||q.Action||"";return`ts:${String(ve)}|${Qe}|${ot}`},ar=x.useMemo(()=>{const q=Number((Vt==null?void 0:Vt.newTradeWindowHours)||4),ee=Mt.utc().utcOffset(330);return(Ot||[]).filter(ve=>{const Qe=Ms(ve.hedge)||ve.type==="hedge_hold";if(!(ve.type==="running"&&!Qe))return!1;const xt=ve.fetcher_trade_time||ve.Fetcher_Trade_time||ve.fetch_time||ve.candel_time||ve.candle_time||ve.timestamp||ve.created_at;if(!xt)return!1;const Gt=Mt.utc(xt).utcOffset(330);return Gt.isValid()?ee.diff(Gt,"hours",!0)<=q:!1})},[Ot,Vt]),Lr="announcedTradeKeysV1",er=x.useRef(new Map);x.useEffect(()=>{try{const q=localStorage.getItem(Lr);if(q){const ee=JSON.parse(q),ve=Date.now(),Qe=7*24*3600*1e3;Object.entries(ee||{}).forEach(([ot,xt])=>{typeof xt=="number"&&ve-xt<Qe&&er.current.set(ot,xt)})}}catch{}},[]);const Ne=()=>{const q=Array.from(er.current.entries()).sort((ee,ve)=>ve[1]-ee[1]).slice(0,5e3);try{localStorage.setItem(Lr,JSON.stringify(Object.fromEntries(q)))}catch{}},nt=q=>{var ot;if(!(Vt!=null&&Vt.enabled))return;const ee=String(q.action||"").toUpperCase(),ve=String(q.signalfrom||"");if(Vt.announceActions&&Vt.announceActions[ee]===!1||Vt.announceSignals&&Object.keys(Vt.announceSignals).length&&Vt.announceSignals[ve]===!1)return;const Qe=Math.max(0,Math.min(1,Number(Vt.volume||.7)));if(Vt.mode==="audio"){const xt=(ot=Vt.audioUrls)==null?void 0:ot[ee];if(xt){try{const Gt=new Audio(xt);Gt.volume=Qe,Gt.play().catch(()=>{})}catch{}return}}try{const xt=`${ee==="BUY"?"Buy":ee==="SELL"?"Sell":ee} from ${ve||"signal"}`,Gt=new SpeechSynthesisUtterance(xt);Gt.volume=Qe,window.speechSynthesis.speak(Gt)}catch{}},wt=x.useRef(new Set);x.useEffect(()=>{const q=Array.isArray(ar)?ar:[],ee=new Set(q.map(Jn)),ve=q.filter(ot=>!wt.current.has(Jn(ot)));wt.current=ee;const Qe=ve.filter(ot=>!er.current.has(Jn(ot)));Qe.length&&(Qe.forEach(ot=>{nt(ot),er.current.set(Jn(ot),Date.now())}),Ne())},[ar,Vt]),x.useEffect(()=>{Ot.reduce((Oe,Je)=>Oe+(Je.investment||0),0);const q=Ot.filter(Oe=>Oe.pl_after_comm>0&&Oe.type==="close").reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),ee=Ot.filter(Oe=>Oe.pl_after_comm<0&&Oe.type==="close").reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),ve=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold";return Oe.pl_after_comm>0&&Oe.type==="running"&&!Je}),Qe=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold";return Oe.pl_after_comm<0&&Oe.type==="running"&&!Je}),ot=ve.reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),xt=Qe.reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),Gt=Ot.filter(Oe=>Oe.type==="close").reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),ze=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold";return Oe.type==="running"&&!Je}).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),wn=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold";return Oe.action==="BUY"&&Oe.type==="running"&&!Je}).length,Lt=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold";return Oe.action==="BUY"&&(Oe.type==="running"||Oe.type==="hedge_hold")&&Je}).length,Pn=Ot.filter(Oe=>Oe.action==="BUY"&&Oe.type==="close").length,qt=Ot.filter(Oe=>Oe.action==="BUY"&&Oe.type==="hedge_close").length,fr=Pn+qt,Xn=Ot.filter(Oe=>Oe.action==="BUY").length,vr=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold";return Oe.action==="SELL"&&Oe.type==="running"&&!Je}).length,Ar=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold";return Oe.action==="SELL"&&(Oe.type==="running"||Oe.type==="hedge_hold")&&Je}).length,rr=Ot.filter(Oe=>Oe.action==="SELL"&&Oe.type==="close").length,mr=Ot.filter(Oe=>Oe.action==="SELL"&&Oe.type==="hedge_close").length,vs=rr+mr,sr=Ot.filter(Oe=>Oe.action==="SELL").length,is=Ot.filter(Oe=>{const Je=Oe.hedge||Oe.Hedge||Oe.hedge_bool||Oe.Hedge_bool,qn=Oe.hedge_1_1_bool||Oe.Hedge_1_1_bool||Oe.hedge_1_1||Oe.Hedge_1_1,Vn=Oe.pl_after_comm||Oe.Pl_after_comm,H=Ms(Je),he=Vi(qn);return Vn>0&&H&&he}).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm||Je.Pl_after_comm)||0),0),wr=Ot.filter(Oe=>{const Je=Oe.hedge||Oe.Hedge||Oe.hedge_bool||Oe.Hedge_bool,qn=Oe.hedge_1_1_bool||Oe.Hedge_1_1_bool||Oe.hedge_1_1||Oe.Hedge_1_1,Vn=Oe.pl_after_comm||Oe.Pl_after_comm,H=Ms(Je),he=Vi(qn);return Vn<0&&H&&he}).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm||Je.Pl_after_comm)||0),0),Ks=Ot.filter(Oe=>{const Je=Oe.hedge||Oe.Hedge||Oe.hedge_bool||Oe.Hedge_bool,qn=Oe.hedge_1_1_bool||Oe.Hedge_1_1_bool||Oe.hedge_1_1||Oe.Hedge_1_1,Vn=Oe.type||Oe.Type||"",H=Ms(Je),he=Vi(qn),Se=!Vn.toLowerCase().includes("close")&&!Vn.toLowerCase().includes("assign");return H&&he&&Se}).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm||Je.Pl_after_comm)||0),0),Mn=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold",qn=Vi(Oe.hedge_1_1_bool);return Je&&!qn&&Oe.pl_after_comm>0&&(Oe.type==="running"||Oe.type==="hedge_hold")}).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),jn=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold",qn=Vi(Oe.hedge_1_1_bool);return Je&&!qn&&Oe.pl_after_comm<0&&(Oe.type==="running"||Oe.type==="hedge_hold")}).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),qr=Ot.filter(Oe=>{const Je=Ms(Oe.hedge)||Oe.type==="hedge_hold",qn=Vi(Oe.hedge_1_1_bool);return Je&&!qn&&(Oe.type==="running"||Oe.type==="hedge_hold")}).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),os=Ot.filter(Oe=>Oe.type==="hedge_close"&&Oe.pl_after_comm>0).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),bs=Ot.filter(Oe=>Oe.type==="hedge_close"&&Oe.pl_after_comm<0).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0),si=Ot.filter(Oe=>Oe.type==="hedge_close").reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0);Ot.filter(Oe=>Oe.min_close==="Min_close"&&Oe.type==="close"&&Oe.pl_after_comm>0).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0).toFixed(2),Ot.filter(Oe=>Oe.min_close==="Min_close"&&Oe.type==="close"&&Oe.pl_after_comm<0).reduce((Oe,Je)=>Oe+(parseFloat(Je.pl_after_comm)||0),0).toFixed(2);const Qt=new Date;Qt.setDate(Qt.getDate()-1),Ue(Oe=>({...Oe,Total_Closed_Stats:o.jsxs(o.Fragment,{children:[o.jsx("span",{title:"Closed Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:"Total Closed Trades "}),o.jsx("span",{title:"Closed Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:""}),"",o.jsx("span",{title:"Closed Count",className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${30+(ie-8)*5}px`},children:Ot.filter(Je=>Je.type==="close"||Je.type==="hedge_close").length}),o.jsx("div",{style:{height:"14px"}}),o.jsx("span",{title:"Closed Profit (Hedge + Direct) ",className:"text-green-300 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:(q+os).toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"+ "}),"",o.jsx("span",{title:"Closed Loss (Hedge + Direct)",className:"text-red-400 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:(ee+bs).toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"="}),"",o.jsx("span",{className:`${Gt>=0?"text-green-300":"text-red-400"} text-[30px]`,style:{fontSize:`${30+(ie-8)*5}px`},title:"Closed Total (Hedge + Direct)",children:(q+os+(ee+bs)).toFixed(2)})]}),Direct_Closed_Stats:o.jsxs(o.Fragment,{children:[o.jsx("span",{title:"Closed Count (Only Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:"Direct Closed Trades"}),o.jsx("span",{title:"Closed Count (Only Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:""}),"",o.jsx("span",{title:"Closed Count",className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${30+(ie-8)*5}px`},children:Ot.filter(Je=>Je.type==="close").length}),o.jsx("div",{style:{height:"14px"}}),o.jsx("span",{title:"Closed Profit (Only Direct) ",className:"text-green-300 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:q.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"+ "}),"",o.jsx("span",{title:"Closed Loss (Only Direct)",className:"text-red-400 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:ee.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"="}),"",o.jsx("span",{className:`${q+ee>=0?"text-green-300":"text-red-400"} text-[30px]`,style:{fontSize:`${30+(ie-8)*5}px`},title:"Closed Total (Only Direct)",children:(q+ee).toFixed(2)})]}),Hedge_Closed_Stats:o.jsxs(o.Fragment,{children:[o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold font-semibold",style:{fontSize:`${26+(ie-8)*5}px`},children:"Hedge Closed  "}),o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:""}),"",o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${30+(ie-8)*5}px`},title:"Closed Hedge Count",children:Ot.filter(Je=>Je.type==="hedge_close").length}),o.jsx("div",{style:{height:"14px"}}),o.jsx("span",{className:"text-green-300 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},title:"Closed Hedge Profit +",children:os.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"+ "}),"",o.jsx("span",{className:"text-red-400 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},title:"Closed Hedge Profit -",children:bs.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"="}),"",o.jsx("span",{className:`${si>=0?"text-green-300":"text-red-400"} text-[30px]`,style:{fontSize:`${30+(ie-8)*5}px`},title:"Closed Hedge Profit Total",children:si.toFixed(2)})]}),Total_Running_Stats:o.jsxs(o.Fragment,{children:[o.jsx("span",{title:"Running Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:"Total Running Trades"}),o.jsx("span",{title:"Running Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:""}),"",o.jsx("span",{title:"Running Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${30+(ie-8)*5}px`},children:Ot.filter(Je=>{const qn=Vi(Je.hedge_1_1_bool);return(Je.type==="running"||Je.type==="hedge_hold")&&!qn}).length}),o.jsx("div",{style:{height:"14px"}}),"",o.jsx("span",{title:"Running Profit (Hedge + Direct)",className:"text-green-300 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:(ot+Mn).toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"+ "}),"",o.jsx("span",{title:"Running Loss (Hedge + Direct)",className:"text-red-400 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:(xt+jn).toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"="}),"",o.jsx("span",{className:`${ze+qr>=0?"text-green-300":"text-red-400"} text-[30px]`,style:{fontSize:`${30+(ie-8)*5}px`},title:"Running Total (Hedge + Direct)",children:(ze+qr).toFixed(2)})]}),Direct_Running_Stats:o.jsxs(o.Fragment,{children:[o.jsx("span",{title:"Running Count (only Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:"Direct Running Trades"}),o.jsx("span",{title:"Running Count (only Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:""}),"",o.jsx("span",{title:"Running Count (only Direct)",className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${30+(ie-8)*5}px`},children:Ot.filter(Je=>{const qn=Ms(Je.hedge)||Je.type==="hedge_hold";return Je.type==="running"&&!qn}).length}),o.jsx("div",{style:{height:"14px"}}),"",o.jsx("span",{title:"Running Profit (only Direct)",className:"text-green-300 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:ot.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${30+(ie-8)*5}px`},children:"+ "}),"",o.jsx("span",{title:"Running Loss (only Direct)",className:"text-red-400 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:xt.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"="}),"",o.jsx("span",{className:`${ze>=0?"text-green-300":"text-red-400"} text-[30px]`,style:{fontSize:`${30+(ie-8)*5}px`},title:"Running Total (only Direct)",children:ze.toFixed(2)})]}),Hedge_Running_Stats:o.jsxs(o.Fragment,{children:[o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${26+(ie-8)*5}px`},children:"Hedge Running"}),o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:""}),"",o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${30+(ie-8)*5}px`},title:"Running Hedge Count",children:Ot.filter(Je=>{const qn=Ms(Je.hedge)||Je.type==="hedge_hold";return!Vi(Je.hedge_1_1_bool)&&qn&&(Je.type==="running"||Je.type==="hedge_hold")}).length}),o.jsx("div",{style:{height:"14px"}}),o.jsx("span",{className:"text-green-300 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},title:"Running Hedge in Profit",children:Mn.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"+ "}),"",o.jsx("span",{className:"text-red-400 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},title:"Running Hedge in Loss ",children:jn.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"="}),"",o.jsx("span",{className:`${qr>=0?"text-green-300":"text-red-400"} text-[30px]`,style:{fontSize:`${30+(ie-8)*5}px`},title:"Running Hedge Total",children:qr.toFixed(2)})]}),Total_Stats:o.jsxs(o.Fragment,{children:[o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:"All Total Trades"}),o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:""}),"",o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${30+(ie-8)*5}px`},children:Ot.length}),o.jsx("div",{style:{height:"14px"}}),o.jsx("span",{title:"Total Profit (Hedge + Direct) ",className:"text-green-300 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:(ot+Mn+is+os+q).toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"+ "}),"",o.jsx("span",{title:"Total Loss (Hedge + Direct)",className:"text-red-400 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},children:(xt+bs+wr+ee+jn).toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"="}),"",o.jsx("span",{className:`${(ot+Mn+os+is+q+(xt+bs+wr+ee+jn)).toFixed(2)>=0?"text-green-300":"text-red-400"} text-[35px]`,style:{fontSize:`${30+(ie-8)*5}px`},title:"Total (Hedge + Direct)",children:(ot+Mn+os+is+q+(xt+bs+wr+ee+jn)).toFixed(2)})]}),Buy_Sell_Stats:o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{height:"6px"}}),o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold",style:{fontSize:`${28+(ie-8)*5}px`},children:"Buy"}),o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold opacity-80",style:{fontSize:`${25+(ie-8)*5}px`},children:" Direct-"}),o.jsx("span",{className:"relative px-[3px] text-green-300 ",style:{fontSize:`${30+(ie-8)*5}px`},children:wn}),o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold opacity-80",style:{fontSize:`${25+(ie-8)*5}px`},children:", Hedge-"}),o.jsx("span",{className:"relative px-[3px] text-green-300 ",style:{fontSize:`${30+(ie-8)*5}px`},children:Lt}),o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold opacity-80",style:{fontSize:`${25+(ie-8)*5}px`},children:", Close-"}),o.jsx("span",{className:"relative px-[3px] text-green-300 ",style:{fontSize:`${30+(ie-8)*5}px`},children:fr}),"",o.jsx("span",{style:{fontSize:`${20+(ie-8)*5}px`},children:"out of"}),"",o.jsx("span",{className:"relative px-[3px] text-green-300 ",style:{fontSize:`${30+(ie-8)*5}px`},children:Xn}),o.jsx("div",{style:{height:"10px"}}),o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold",style:{fontSize:`${28+(ie-8)*5}px`},children:"Sell"}),o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold opacity-80 ",style:{fontSize:`${25+(ie-8)*5}px`},children:" Direct-"}),o.jsx("span",{className:"relative px-[3px] text-green-300 ",style:{fontSize:`${30+(ie-8)*5}px`},children:vr}),o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold opacity-80 ",style:{fontSize:`${25+(ie-8)*5}px`},children:", Hedge-"}),o.jsx("span",{className:"relative px-[3px] text-green-300 ",style:{fontSize:`${30+(ie-8)*5}px`},children:Ar}),o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold opacity-80",style:{fontSize:`${25+(ie-8)*5}px`},children:", Close-"}),o.jsx("span",{className:"relative px-[3px] text-green-300 ",style:{fontSize:`${30+(ie-8)*5}px`},children:vs}),"",o.jsx("span",{style:{fontSize:`${20+(ie-8)*5}px`},children:"out of"}),"",o.jsx("span",{className:"relative px-[3px] text-green-300 ",style:{fontSize:`${30+(ie-8)*5}px`},children:sr}),o.jsx("br",{})]}),Hedge_on_Hold:o.jsxs(o.Fragment,{children:[o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-200 font-semibold  font-semibold",style:{fontSize:`${26+(ie-8)*5}px`},children:"Hedge on hold  1-1 "}),o.jsx("span",{title:"Total Trades Count (Hedge + Direct)",className:"relative px-[3px] text-yellow-300 font-semibold opacity-70 font-semibold",style:{fontSize:`${24+(ie-8)*5}px`},children:""}),"",o.jsx("span",{className:"relative px-[3px] text-yellow-300 font-semibold  font-semibold",style:{fontSize:`${30+(ie-8)*5}px`},title:"Hedge 1-1 Count",children:(()=>{const Je=Ot.filter(qn=>{const Vn=qn.hedge||qn.Hedge||qn.hedge_bool||qn.Hedge_bool||qn.hedgebool||qn.HedgeBool,H=qn.hedge_1_1_bool||qn.Hedge_1_1_bool||qn.hedge_1_1||qn.Hedge_1_1||qn.hedge11bool||qn.Hedge11Bool,he=Ms(Vn),Se=Vi(H),st=qn.type||qn.Type||"",Tt=st==="running"||st==="Running"||st==="hedge_hold"||st.toLowerCase().includes("running")||!st||st==="";Ot.indexOf(qn)<3&&console.log(" Hedge Debug - Trade:",qn.unique_id,{hedgeValue:Vn,hedge11Value:H,isHedge:he,isHedge11:Se,isRunning:Tt,typeValue:st,originalType:qn.type,originalTypeCapital:qn.Type});const It=!st.toLowerCase().includes("close")&&!st.toLowerCase().includes("assign");return he&&Se&&It});return console.log(" Hedge on Hold Count:",Je.length),Je.length})()}),o.jsx("div",{style:{height:"14px"}}),o.jsx("span",{className:"text-green-300 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},title:"Hedge 1-1 Profit",children:is.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"+ "}),"",o.jsx("span",{className:"text-red-400 text-[30px]",style:{fontSize:`${30+(ie-8)*5}px`},title:"Hedge 1-1 Loss",children:wr.toFixed(2)}),"",o.jsx("span",{style:{fontSize:`${25+(ie-8)*5}px`},children:"="}),"",o.jsx("span",{className:`${Ks>=0?"text-green-300":"text-red-400"} text-[30px]`,style:{fontSize:`${30+(ie-8)*5}px`},title:"Hedge 1-1 Total",children:Ks.toFixed(2)})]})}))},[Ot,Ze,ie]),x.useEffect(()=>{const q=localStorage.getItem("selectedSignals"),ee=localStorage.getItem("selectedMachines");if(q){const Qe={"2POLE_IN5LOOP":!0,IMACD:!0,"2POLE_Direct_Signal":!0,"HIGHEST SWING HIGH":!0,"LOWEST SWING LOW":!0,"NORMAL SWING HIGH":!0,"NORMAL SWING LOW":!0,ProGap:!0,CrossOver:!0,Spike:!0,Kicker:!0,...JSON.parse(q)};rt(Qe);const ot=Object.values(Qe).every(xt=>xt===!0);pn(!ot)}ee&&$t(JSON.parse(ee))},[]),x.useCallback(q=>{$t(ee=>{const ve=Cn(q),Qe={...ee,[ve]:!ee[ve]};return localStorage.setItem("selectedMachines",JSON.stringify(Qe)),Qe})},[Cn]),x.useEffect(()=>{if(dn){const q=Object.keys(tt).find(ee=>tt[ee]);if(q){const ee={};Object.keys(tt).forEach(ve=>{ee[ve]=ve===q}),rt(ee),localStorage.setItem("selectedSignals",JSON.stringify(ee))}}},[dn]),x.useEffect(()=>{if(A){const q=Object.keys(Nt).find(ee=>Nt[ee]);if(q){const ee={};Object.keys(Nt).forEach(ve=>{ee[ve]=ve===q}),Ut(ee),localStorage.setItem("selectedIntervals",JSON.stringify(ee))}}},[A]);const[nn,ln]=x.useState(()=>{const q=localStorage.getItem("theme");return q?q==="dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{nn?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[nn]),x.useCallback(q=>{if(q!=null){if(typeof q=="string")try{return JSON.parse(q)}catch{return q}return q}},[]),x.useMemo(()=>({"2POLE_IN5LOOP":!0,IMACD:!0,"2POLE_Direct_Signal":!0,"HIGHEST SWING HIGH":!0,"LOWEST SWING LOW":!0,"NORMAL SWING HIGH":!0,"NORMAL SWING LOW":!0,ProGap:!0,CrossOver:!0,Spike:!0,Kicker:!0}),[]),x.useMemo(()=>({"1m":!0,"3m":!0,"5m":!0,"15m":!0,"30m":!0,"1h":!0,"2h":!0,"4h":!0}),[]),x.useMemo(()=>({true:!0,false:!0}),[]),x.useMemo(()=>({layout:3,showRSI:!0,showVolume:!0}),[]),x.useMemo(()=>({enabled:!1,volume:.7,mode:"tts",announceActions:{BUY:!0,SELL:!0},announceSignals:{},audioUrls:{BUY:"",SELL:""},newTradeWindowHours:4}),[]);const Dt=x.useCallback((q,ee)=>{try{q==="theme"?localStorage.setItem("theme",ee):q==="soundSettings"?localStorage.setItem("soundSettings",typeof ee=="string"?ee:JSON.stringify(ee)):localStorage.setItem(q,typeof ee=="string"?ee:JSON.stringify(ee))}catch{}},[]);x.useEffect(()=>{D.current=!0},[]),x.useEffect(()=>{D.current&&Dt("theme",nn?"dark":"light")},[nn,Dt]),x.useEffect(()=>{D.current&&Dt("layoutOption",ct)},[ct,Dt]),x.useEffect(()=>{D.current&&Dt("fontSizeLevel",ie)},[ie,Dt]),x.useEffect(()=>{D.current&&Dt("liveFilter",we)},[we,Dt]),x.useEffect(()=>{D.current&&Dt("liveRadioMode",_e?"true":"false")},[_e,Dt]),x.useEffect(()=>{D.current&&Dt("filterVisible",Re?"true":"false")},[Re,Dt]),x.useEffect(()=>{D.current&&Dt("machineRadioMode",an)},[an,Dt]),x.useEffect(()=>{D.current&&Dt("machineToggleAll",Yn)},[Yn,Dt]),x.useEffect(()=>{D.current&&Dt("selectedSignals",tt)},[tt,Dt]),x.useEffect(()=>{D.current&&Dt("selectedMachines",vt)},[vt,Dt]),x.useEffect(()=>{D.current&&Dt("selectedIntervals",Nt)},[Nt,Dt]),x.useEffect(()=>{D.current&&Dt("selectedActions",Y)},[Y,Dt]),x.useEffect(()=>{D.current&&Dt("chartSettings",z)},[z,Dt]),x.useEffect(()=>{D.current&&Dt("soundSettings",Vt)},[Vt,Dt]),x.useEffect(()=>{D.current&&Ae&&Dt("fromDate",Ae.toISOString())},[Ae,Dt]),x.useEffect(()=>{D.current&&zt&&Dt("toDate",zt.toISOString())},[zt,Dt]),x.useEffect(()=>{const q=ee=>{ee.key==="theme"&&ln(ee.newValue==="dark")};return window.addEventListener("storage",q),()=>window.removeEventListener("storage",q)},[]);const[yn,lr]=x.useState([]);x.useEffect(()=>{(async()=>{var Qe,ot;if(typeof window<"u"&&((ot=(Qe=window.location)==null?void 0:Qe.hostname)!=null&&ot.includes("github.io"))&&!Oa())return;const ve=await(await Nn("/api/trades")).json();lr(ve.trades||[])})()},[]);const Pt=x.useCallback(async()=>{await D$(),e(!1),r(null),d(!1),g(!1),y(!1)},[]),$n=x.useCallback(()=>{k?(y(!0),b(Pw),O(!1)):Pt()},[k,Pt]),rn=x.useMemo(()=>({user:n,logout:Pt,triggerLogout:$n}),[n,Pt,$n]),ke=x.useCallback(async()=>{await R$()?(T.current=Date.now(),g(!1)):(e(!1),g(!1))},[]),Me=x.useCallback(q=>{const ee=Math.floor(q/60),ve=q%60;return`${ee}:${ve<10?"0":""}${ve}`},[]);return x.useEffect(()=>{if(!p)return;const q=setInterval(()=>{b(ee=>ee<=1?0:ee-1)},1e3);return()=>clearInterval(q)},[p]),x.useEffect(()=>{p&&_===0&&Pt()},[p,_,Pt]),x.useEffect(()=>{try{localStorage.setItem(Fw,k?"true":"false")}catch{}},[k]),x.useEffect(()=>{const q=ee=>{F.current&&!F.current.contains(ee.target)&&O(!1)};if(E)return document.addEventListener("click",q),()=>document.removeEventListener("click",q)},[E]),s?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0f0f]",children:o.jsx("div",{className:"text-gray-400",children:"Checking session"})}):t?o.jsx(uy.Provider,{value:rn,children:o.jsxs("div",{className:"flex flex-col min-h-screen",children:[o.jsxs("header",{className:"flex-shrink-0 h-12 flex items-center justify-end gap-2 px-4 border-b border-gray-200 dark:border-gray-700 shadow-sm bg-[#f5f6fa] dark:bg-black ",children:[o.jsx("button",{onClick:()=>Zt(!0),className:"px-2 py-1 rounded-full bg-white/80 dark:bg-gray-800/80 shadow hover:scale-105 transition-all text-sm font-semibold",title:"Sound & New trades settings",children:" Sound"}),o.jsx("button",{onClick:()=>{ln(q=>{const ee=!q;try{localStorage.setItem("theme",ee?"dark":"light")}catch{}return ee})},className:"p-1.5 rounded-full bg-white/80 dark:bg-gray-800/80 shadow hover:scale-110 transition-all",title:nn?"Switch to Light Mode":"Switch to Dark Mode",style:{fontSize:22},children:nn?"":""}),o.jsxs("div",{className:"relative",ref:F,children:[o.jsx("button",{type:"button",onClick:()=>O(q=>!q),className:"px-3 py-1.5 rounded-full bg-white/80 dark:bg-gray-800/80 shadow hover:scale-105 transition-all text-sm font-semibold text-gray-700 dark:text-gray-200",title:"Session & Logout",children:"Logout"}),E&&o.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 w-56 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-900 shadow-xl py-2 px-3",children:[o.jsxs("label",{className:"flex items-center justify-between gap-2 py-2 px-2 cursor-pointer text-sm text-gray-700 dark:text-gray-200",children:[o.jsx("span",{children:"Auto logout (15 min)"}),o.jsx("input",{type:"checkbox",checked:k,onChange:q=>S(q.target.checked),className:"rounded"})]}),o.jsx("button",{type:"button",onClick:$n,className:"w-full mt-1 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white text-sm font-semibold",children:"Log out"})]})]})]}),o.jsxs("main",{className:"flex-1 min-h-0 flex flex-col overflow-auto",children:[p&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"logout-popup-title",children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-sm w-full shadow-xl border border-gray-200 dark:border-gray-700 mx-4",children:[o.jsx("h2",{id:"logout-popup-title",className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Log out"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"You will be logged out automatically in"}),o.jsx("p",{className:"text-2xl font-mono font-bold text-gray-900 dark:text-white mb-4",children:Me(_)}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold",children:"Cancel"}),o.jsx("button",{type:"button",onClick:Pt,className:"flex-1 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-semibold",children:"Log out now"})]})]})}),h&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"stay-logged-in-title",children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-sm w-full shadow-xl border border-gray-200 dark:border-gray-700 mx-4",children:[o.jsx("h2",{id:"stay-logged-in-title",className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Stay logged in?"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:"You have been logged in for a while. Do you want to stay logged in?"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:async()=>{g(!1),await Pt()},className:"flex-1 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold",children:"Log out"}),o.jsx("button",{type:"button",onClick:ke,className:"flex-1 py-2 rounded-lg bg-teal-600 hover:bg-teal-700 text-white font-semibold",children:"Stay logged in"})]})]})}),c&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"session-warning-title",children:o.jsxs("div",{className:"bg-white dark:bg-[#222] rounded-xl p-6 max-w-sm w-full shadow-xl border border-gray-200 dark:border-gray-700 mx-4",children:[o.jsx("h2",{id:"session-warning-title",className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Session expired"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:"Please sign in again."}),o.jsx("button",{type:"button",onClick:()=>{e(!1),d(!1)},className:"w-full py-2 rounded-lg bg-teal-600 hover:bg-teal-700 text-white font-semibold",children:"OK"})]})}),o.jsxs(Ej,{children:[o.jsx(ca,{path:"/chart-grid",element:o.jsx(IF,{})}),o.jsx(ca,{path:"/custom-chart-grid",element:o.jsx(rH,{trades:Ot})}),o.jsx(ca,{path:"/reports",element:o.jsx(mH,{})}),o.jsx(ca,{path:"/reports/list",element:o.jsx(j$,{})}),o.jsx(ca,{path:"/income-history",element:o.jsx(xH,{})}),o.jsx(ca,{path:"/live-trade-view",element:o.jsx(iW,{})}),o.jsx(ca,{path:"/live-running-trades",element:o.jsx(oW,{})}),o.jsx(ca,{path:"/pages/group-view",element:o.jsx(gW,{})}),o.jsx(ca,{path:"/trades",element:o.jsx(vW,{})}),o.jsx(ca,{path:"/*",element:o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"sticky top-0 z-40 flex items-center justify-between border-b border-gray-200 dark:border-gray-700 shadow-sm bg-[#f5f6fa] dark:bg-black w-full max-w-full overflow-hidden gap-4",style:{minHeight:"80px",height:"80px",padding:"0 16px"},children:[o.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0 min-w-0",children:[o.jsx(OT,{onRefresh:mn,storageKey:"app_main",initialIntervalSec:20,initialAutoOn:!0}),o.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-blue-500 via-pink-500 to-yellow-400 bg-clip-text text-transparent drop-shadow-lg tracking-tight flex-shrink-0",style:{WebkitTextStroke:"1px #222",textShadow:"0 4px 24px rgba(0,0,0,0.18)"},children:["LAB",o.jsx("span",{className:"block w-12 h-0.5 mt-1 rounded-full bg-gradient-to-r from-blue-400 via-pink-400 to-yellow-300"})]})]}),xe!==null&&o.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center justify-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 justify-center py-2 px-4 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 shadow-sm w-[480px] min-w-[480px] max-w-[480px] box-border",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300 flex-shrink-0",children:"Auto Execute"}),o.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[o.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer select-none",children:[o.jsx("input",{type:"checkbox",checked:!!xe.buyActive,onChange:async()=>{const q=!xe.buyActive;try{const ee=await Nn("/api/auto-execute/set",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyActive:q,sellActive:xe.sellActive})}),ve=await ee.json().catch(()=>({}));ee.ok&&ve.buyActive!==void 0&&ve.sellActive!==void 0&&Ce({buyActive:ve.buyActive,sellActive:ve.sellActive})}catch{}},className:"w-4 h-4 rounded border-gray-400 dark:border-gray-500 text-emerald-500 focus:ring-2 focus:ring-emerald-500/50"}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Buy"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer select-none",children:[o.jsx("input",{type:"checkbox",checked:!!xe.sellActive,onChange:async()=>{const q=!xe.sellActive;try{const ee=await Nn("/api/auto-execute/set",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyActive:xe.buyActive,sellActive:q})}),ve=await ee.json().catch(()=>({}));ee.ok&&ve.buyActive!==void 0&&ve.sellActive!==void 0&&Ce({buyActive:ve.buyActive,sellActive:ve.sellActive})}catch{}},className:"w-4 h-4 rounded border-gray-400 dark:border-gray-500 text-emerald-500 focus:ring-2 focus:ring-emerald-500/50"}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Sell"})]})]}),o.jsx("span",{className:`text-sm px-3 py-1.5 rounded-lg font-medium min-w-0 w-[220px] max-w-[220px] overflow-hidden break-words line-clamp-2 block text-center box-border ${xe.buyActive&&xe.sellActive?"bg-emerald-500/15 text-emerald-700 dark:text-emerald-300 border border-emerald-300/50 dark:border-emerald-600/50":!xe.buyActive&&!xe.sellActive?"bg-red-500/15 text-red-700 dark:text-red-300 border border-red-300/50 dark:border-red-600/50":"bg-amber-500/15 text-amber-700 dark:text-amber-300 border border-amber-300/50 dark:border-amber-600/50"}`,title:xe.buyActive&&xe.sellActive?"Execute will be done once the P/L crosses 3 USDT for both buy and sell.":!xe.buyActive&&!xe.sellActive?"Buy and Sell both are deactive.":xe.buyActive?"Sell is deactive.":"Buy is deactive.",children:xe.buyActive&&xe.sellActive?"Execute will be done once the P/L crosses 3 USDT.":!xe.buyActive&&!xe.sellActive?"Buy and Sell both are deactive.":xe.buyActive?"Sell is deactive.":"Buy is deactive."})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsx("button",{type:"button",onClick:async()=>{try{const q=await Nn("/api/manage-auto-position/toggle",{method:"POST"}),ee=await q.json().catch(()=>({}));q.ok&&typeof ee.enabled=="boolean"&&le(ee.enabled)}catch{}},className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 transition-colors",children:"Manage Auto Position"}),o.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 min-w-[2.5rem]",children:at===null?"":at?"true":"false"})]})]}),o.jsx("div",{className:"flex-1 min-w-0 max-w-[180px] md:max-w-[200px]","aria-hidden":"true"})]}),o.jsxs("div",{className:"flex min-w-0 w-full max-w-full",children:[o.jsx(R1,{isOpen:He,toggleSidebar:()=>Dn(!He)}),o.jsx("div",{className:`flex-1 min-h-screen min-w-0 max-w-full transition-all duration-300 ${He?"ml-64":"ml-20"} overflow-x-auto overflow-y-auto relative bg-[#f5f6fa] dark:bg-black`,children:o.jsxs("div",{className:"p-8 pt-2 w-full max-w-full min-w-0",children:[ht&&o.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-red-100 dark:bg-red-900/40 border border-red-400 dark:border-red-600 text-red-900 dark:text-red-100 text-sm",children:[o.jsx("strong",{className:"block mb-2",children:" CORS Error: Cloud server not allowing GitHub Pages origin"}),o.jsxs("p",{className:"mb-2",children:["The cloud server (150.241.244.130) is blocking requests from ",o.jsx("code",{className:"bg-red-200/60 dark:bg-red-800/60 px-1 rounded",children:"https://loveleet.github.io"}),"."]}),o.jsxs("p",{className:"mb-2",children:[o.jsx("strong",{children:"Fix:"})," Deploy the latest ",o.jsx("code",{className:"bg-red-200/60 dark:bg-red-800/60 px-1 rounded",children:"server/server.js"})," to the cloud (it has CORS for GitHub Pages) and restart the Node app."]}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1 mt-2 text-xs",children:[o.jsxs("li",{children:["From laptop: ",o.jsx("code",{className:"bg-red-200/60 dark:bg-red-800/60 px-1 rounded",children:"export DEPLOY_HOST=root@150.241.244.130 && ./scripts/deploy-to-server.sh"})]}),o.jsxs("li",{children:["Or manually: ",o.jsx("code",{className:"bg-red-200/60 dark:bg-red-800/60 px-1 rounded",children:"scp server/server.js root@150.241.244.130:/opt/apps/lab-trading-dashboard/server/"})]}),o.jsxs("li",{children:["On cloud: ",o.jsx("code",{className:"bg-red-200/60 dark:bg-red-800/60 px-1 rounded",children:"sudo systemctl restart lab-trading-dashboard"})]}),o.jsxs("li",{children:["Verify: ",o.jsx("code",{className:"bg-red-200/60 dark:bg-red-800/60 px-1 rounded",children:"curl -s http://localhost:10000/api/server-info"})," should show ",o.jsx("code",{className:"bg-red-200/60 dark:bg-red-800/60 px-1 rounded",children:"hasGitHubPagesOrigin: true"})]})]})]}),xn&&o.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-amber-100 dark:bg-amber-900/40 border border-amber-400 dark:border-amber-600 text-amber-900 dark:text-amber-100 text-sm",children:[o.jsx("strong",{className:"block mb-2",children:"Local server not running"}),o.jsxs("p",{className:"mb-2",children:["The app is trying to use the local API at ",o.jsx("code",{className:"bg-amber-200/60 dark:bg-amber-800/60 px-1 rounded",children:"localhost:10000"})," (via Vite proxy), but the connection was refused. Start the Node server in ",o.jsx("code",{className:"bg-amber-200/60 dark:bg-amber-800/60 px-1 rounded",children:"lab-trading-dashboard/server"})," or use cloud data."]}),o.jsx("button",{type:"button",onClick:()=>{setLocalhostUseCloudFallback(!0),Bt(!1),et(!1),mn()},className:"mt-2 px-3 py-1.5 rounded bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium",children:"Use cloud data"})]}),lt&&!ht&&!xn&&o.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-amber-100 dark:bg-amber-900/40 border border-amber-400 dark:border-amber-600 text-amber-900 dark:text-amber-100 text-sm",children:[o.jsx("strong",{className:"block mb-2",children:"API unreachable"}),o.jsxs("p",{className:"mb-2",children:["The backend at the current API URL could not be reached. Check that the server is running and that ",o.jsx("code",{className:"bg-amber-200/60 dark:bg-amber-800/60 px-1 rounded",children:"API_BASE_URL"})," is set to your cloud URL (e.g. ",o.jsx("code",{className:"bg-amber-200/60 dark:bg-amber-800/60 px-1 rounded",children:"http://150.241.244.130:10000"}),")."]}),o.jsx("p",{className:"text-xs",children:"Hard-refresh (Ctrl+Shift+R) after fixing the URL or restarting the server."})]}),typeof window<"u"&&((Ct=(Le=window.location)==null?void 0:Le.hostname)==null?void 0:Ct.includes("github.io"))&&!V&&!lt&&o.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-blue-100 dark:bg-blue-900/40 border border-blue-400 dark:border-blue-600 text-blue-900 dark:text-blue-100 text-sm",children:[o.jsx("strong",{className:"block mb-2",children:"API not configured for GitHub Pages"}),o.jsx("p",{className:"mb-2",children:"To load data here, set your backend URL (cloud IP or domain) and redeploy:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1 mt-2 text-xs",children:[o.jsxs("li",{children:["Add secret ",o.jsx("a",{href:"https://github.com/Loveleet/lab_live/settings/secrets/actions",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"Settings  Secrets  Actions"}),"  ",o.jsx("code",{className:"bg-blue-200/60 dark:bg-blue-800/60 px-1 rounded",children:"API_BASE_URL"})," = your backend URL (e.g. ",o.jsx("code",{className:"bg-blue-200/60 dark:bg-blue-800/60 px-1 rounded",children:"http://150.241.244.130:10000"}),", no trailing slash)."]}),o.jsxs("li",{children:[o.jsx("a",{href:"https://github.com/Loveleet/lab_live/actions/workflows/deploy-frontend-pages.yml",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:'Run "Deploy frontend to GitHub Pages"'}),", then hard-refresh this page."]})]})]}),B&&o.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-orange-100 dark:bg-orange-900/40 border border-orange-400 dark:border-orange-600 text-orange-900 dark:text-orange-100 text-sm",children:[o.jsx("strong",{className:"block mb-2",children:"Get real data on this cloud site"}),o.jsx("p",{className:"mb-2",children:B}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1 mt-2 text-xs",children:[o.jsxs("li",{children:["On this server edit env: ",o.jsx("code",{className:"bg-orange-200/60 dark:bg-orange-800/60 px-1 rounded",children:"sudo nano /etc/lab-trading-dashboard.env"})]}),o.jsxs("li",{children:["Add ",o.jsx("code",{className:"bg-orange-200/60 dark:bg-orange-800/60 px-1 rounded",children:"DATABASE_URL='postgres://user:pass@host:5432/dbname'"})," (your Postgres URL) or set DB_HOST, DB_USER, DB_PASSWORD, DB_NAME"]}),o.jsxs("li",{children:["Restart: ",o.jsx("code",{className:"bg-orange-200/60 dark:bg-orange-800/60 px-1 rounded",children:"sudo systemctl restart lab-trading-dashboard"}),"  wait ~30s and refresh"]})]})]}),Array.isArray(oe)&&oe.length===0&&!B&&!(typeof window<"u"&&((Yt=(pt=window.location)==null?void 0:pt.hostname)!=null&&Yt.includes("github.io"))&&!V)&&o.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-amber-100 dark:bg-amber-900/30 border border-amber-300 dark:border-amber-700 text-amber-800 dark:text-amber-200 text-sm",children:[o.jsx("strong",{children:"No trade records in database."})," Table ",o.jsx("code",{className:"bg-amber-200/50 dark:bg-amber-800/50 px-1 rounded",children:"alltraderecords"})," is empty. Machines and pairstatus are loading from the same DB. To see trades, add data or copy the database (see docs or ",o.jsx("code",{className:"bg-amber-200/50 dark:bg-amber-800/50 px-1 rounded",children:"/api/debug"})," for counts)."]}),o.jsx("div",{className:"flex justify-end mb-2",children:o.jsx("button",{onClick:()=>gt(q=>!q),className:"text-xs px-3 py-1 rounded-full bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700 shadow",children:Re?"Hide Filters":"Show Filters"})}),Re&&o.jsx(YP,{selectedSignals:tt,setSelectedSignals:rt,selectedMachines:vt,setSelectedMachines:$t,selectedIntervals:Nt,setSelectedIntervals:Ut,selectedActions:Y,setSelectedActions:X,fromDate:Ae,toDate:zt,setFromDate:$e,setToDate:Xe,includeMinClose:Qn,setIncludeMinClose:me,signalRadioMode:dn,setSignalRadioMode:Wt,machineRadioMode:an,setMachineRadioMode:Un,intervalRadioMode:A,setIntervalRadioMode:G,actionRadioMode:U,setActionRadioMode:J,liveFilter:we,setLiveFilter:je,liveRadioMode:_e,setLiveRadioMode:Ee,signalToggleAll:Xt,setSignalToggleAll:pn,machineToggleAll:Yn,setMachineToggleAll:Tn,machines:Ht,dateKey:fn,setDateKey:Sn,assignedCount:((St=ur.Assigned_New)==null?void 0:St.length)||0}),o.jsxs("div",{className:"flex flex-wrap items-start gap-3 ml-0 md:ml-6",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-none",children:[o.jsx("span",{className:"text-sm md:text-base lg:text-lg font-semibold text-black dark:text-white",children:"Layout:"}),o.jsx("button",{type:"button",onClick:()=>{const q=Math.max(1,ct-1);ft(q);try{localStorage.setItem("layoutOption",String(q))}catch{}},className:"bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-black dark:text-white px-2 py-1 md:px-3 md:py-1.5 rounded text-sm md:text-base","aria-label":"Decrease columns",children:""}),o.jsx("span",{className:"text-sm md:text-base font-medium text-black dark:text-white min-w-[1.5rem] text-center","aria-live":"polite",children:ct}),o.jsx("button",{type:"button",onClick:()=>{const q=Math.min(14,ct+1);ft(q);try{localStorage.setItem("layoutOption",String(q))}catch{}},className:"bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-black dark:text-white px-2 py-1 md:px-3 md:py-1.5 rounded text-sm md:text-base","aria-label":"Increase columns",children:""}),o.jsx("span",{className:"hidden md:inline px-2 text-gray-400",children:"|"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>Pe(q=>{const ee=Math.max(1,q-1);localStorage.setItem("fontSizeLevel",ee);try{localStorage.setItem("fontSizeLevel",String(ee))}catch{}return ee}),className:"bg-gray-300 hover:bg-gray-400 text-black px-2 py-1 md:px-3 md:py-1.5 rounded text-sm md:text-base","aria-label":"Decrease font size",children:""}),o.jsxs("span",{className:"text-sm md:text-base lg:text-lg font-semibold text-black",children:["Font: ",ie]}),o.jsx("button",{onClick:()=>Pe(q=>{const ee=Math.min(30,q+1);localStorage.setItem("fontSizeLevel",ee);try{localStorage.setItem("fontSizeLevel",String(ee))}catch{}return ee}),className:"bg-gray-300 hover:bg-gray-400 text-black px-2 py-1 md:px-3 md:py-1.5 rounded text-sm md:text-base","aria-label":"Increase font size",children:""})]}),(()=>{const q=ot=>{if(ot===!0||ot==="true"||ot===1||ot==="1")return!0;if(typeof ot=="string"){const xt=parseFloat(ot);if(!Number.isNaN(xt))return xt>0}return!1},ee=q((ye==null?void 0:ye.buy)??(ye==null?void 0:ye.buy_condition)??(ye==null?void 0:ye.buyflag)),ve=q((ye==null?void 0:ye.sell)??(ye==null?void 0:ye.sell_condition)??(ye==null?void 0:ye.sellflag)),Qe=({label:ot,on:xt})=>o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${xt?"bg-green-500/90 text-white border-green-600 animate-pulse ring-2 ring-green-300":"bg-gray-200 text-gray-700 border-gray-300 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"}`,title:`${ot} condition ${xt?"ACTIVE":"inactive"}`,children:xt?`LIVE ${ot}`:`${ot} OFF`});return o.jsxs("div",{className:"flex items-center gap-2 ml-1",children:[o.jsx(Qe,{label:"BUY",on:ee}),o.jsx(Qe,{label:"SELL",on:ve})]})})(),o.jsx("span",{className:"text-green-600 text-[14px] md:text-[16px] lg:text-[18px] font-bold",children:" Assigned New:"}),o.jsx("span",{className:"text-red-600 text-[24px] md:text-[34px] lg:text-[40px] font-bold cursor-pointer hover:underline",title:"Click to view Assigned Trades",onClick:()=>{M(q=>{const ee=q==="Assigned_New"?null:"Assigned_New";return ee&&(Ge("assign"),setTimeout(()=>{const ve=document.getElementById("tableViewSection");ve&&ve.scrollIntoView({behavior:"smooth"})},0)),ee})},children:Ot.filter(q=>q.type==="assign"||q.type==="back_close").length})]}),o.jsxs("div",{className:"flex flex-wrap items-start gap-4 flex-1 min-w-0",children:[o.jsx("div",{className:"w-full sm:w-[300px] md:w-[360px] shrink-0 min-w-0",children:o.jsx(mW,{data:Z})}),L&&o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 flex-1 min-w-0",children:(()=>{const q=ot=>{try{if(ot==null||ot==="")return"";let xt=String(ot).trim();if(!xt)return"";/Z$|[+-]\d{2}:?\d{2}$/.test(xt)||(xt=xt.replace(" ","T")+"Z");const Gt=new Date(xt).getTime();if(Number.isNaN(Gt))return"";const ze=Date.now()-Gt,wn=Math.floor(ze/1e3),Lt=Math.floor(wn/60),Pn=Math.floor(Lt/60);return wn<60?`${wn} sec ago`:Lt<60?`${Lt} min ago`:Pn<24?`${Pn} hr ago`:`${Math.floor(Pn/24)} days ago`}catch{return""}},ee=(ot,xt,Gt)=>{const ze=Number(ot);if(Number.isNaN(ze))return{color:"rgb(255,255,255)"};const wn=Math.max(0,Math.min(ze/90,1)),Lt=Math.pow(wn,.6),Pn=xt?[34,197,94]:Gt?[239,68,68]:[255,255,255],qt=Math.round(255+(Pn[0]-255)*Lt),fr=Math.round(255+(Pn[1]-255)*Lt),Xn=Math.round(255+(Pn[2]-255)*Lt);return{color:`rgb(${qt}, ${fr}, ${Xn})`}},ve=({header:ot,value:xt,trendText:Gt,pct:ze})=>{const wn=Number(ze),Lt=(Gt||"").toLowerCase(),Pn=Lt.includes("bull"),qt=Lt.includes("bear"),fr=ze!=null&&ze!==""&&!Number.isNaN(wn)&&wn>=90,Xn="w-full min-w-0 flex flex-col rounded-lg border transition-all duration-200 ease-out bg-blue-50 dark:bg-blue-950/40 border-blue-200 dark:border-blue-900 px-3 py-2 md:px-4 md:py-2.5",vr=fr?qt?" bg-red-50 dark:bg-red-950/40 ring-2 ring-red-300 dark:ring-red-800":Pn?" bg-green-50 dark:bg-green-950/40 ring-2 ring-green-300 dark:ring-green-800":"":"",Ar=ze!=null&&ze!==""&&!fr?ee(wn,Pn,qt):void 0,rr=ze!=null&&ze!==""&&fr?Pn?"text-green-600":qt?"text-red-600":"text-black dark:text-white":"text-black dark:text-white",mr=ze!=null&&ze!==""?`${(Gt||"").trim()} ${Number.isNaN(wn)?ze:wn.toFixed(2)}%`:typeof xt<"u"&&xt!==null&&String(xt).trim()!==""?String(xt).trim():"";return o.jsxs("div",{className:`${Xn} ${vr}`.trim(),children:[o.jsx("span",{className:"text-blue-700 dark:text-blue-200 font-bold text-xs md:text-sm mb-1 truncate",children:ot}),o.jsxs("span",{className:`font-bold text-sm md:text-base truncate ${rr}`,style:Ar,title:mr,children:[ze!=null&&ze!==""&&(Pn||qt)&&o.jsx("span",{className:"mr-1",children:Pn?"":""}),mr]})]})},Qe=q(L.last_updated);return o.jsxs(o.Fragment,{children:[o.jsx(ve,{header:"Last Update Time",value:Qe??""}),o.jsx(ve,{header:"EMA 1m",trendText:L.overall_ema_trend_1m,pct:L.overall_ema_trend_percentage_1m}),o.jsx(ve,{header:"EMA 5m",trendText:L.overall_ema_trend_5m,pct:L.overall_ema_trend_percentage_5m}),o.jsx(ve,{header:"EMA 15m",trendText:L.overall_ema_trend_15m,pct:L.overall_ema_trend_percentage_15m})]})})()})]})]}),Ve&&o.jsx("div",{className:"grid gap-6 w-full px-2 py-4",style:{gridTemplateColumns:`repeat(${Math.min(14,Math.max(1,Number(ct)||3))}, minmax(0, 1fr))`,transition:"all 0.3s ease-in-out"},children:Object.entries(Ve).map(([q,ee])=>{const ve=q.trim().replace(/\s+/g,"_"),Qe=ve==="Direct_Running_Stats",ot=Qe?(ar||[]).map(ze=>ze.fetcher_trade_time||ze.Fetcher_Trade_time||ze.fetch_time||ze.candel_time||ze.candle_time||ze.timestamp||ze.created_at).filter(Boolean).sort((ze,wn)=>new Date(wn)-new Date(ze))[0]:null,xt=ot&&Mt.utc(ot).isValid()?Mt.utc(ot).format("HH:mm")+" UTC":null,Gt=Qe&&(ar==null?void 0:ar.length)>0?`New: ${ar.length}${xt?`  Last ${xt}`:""}`:null;return o.jsx("div",{className:"relative",children:o.jsx(GP,{title:q,value:ee,isSelected:Ze===ve,onClick:()=>{const ze=ur[ve];M(wn=>wn===ve||!ze?null:ve)},sticker:Qe?Gt:null,onStickerClick:()=>{M("Direct_Running_New"),Ge("running"),setTimeout(()=>{const ze=document.getElementById("tableViewSection");ze&&ze.scrollIntoView({behavior:"smooth"})},0)},filteredTradeData:Ot,className:"bg-white dark:bg-[#181a20] border border-gray-200 dark:border-gray-800"})},ve)})}),o.jsx("div",{className:"mt-6",children:Ze&&(()=>{const q=Ze==null?void 0:Ze.trim().replace(/\s+/g,"_"),ee=q==="Direct_Running_New"?ar:ur[q];return ee&&ee.length>0?o.jsx("div",{className:"mt-6",children:o.jsx(RF,{title:Ze,tradeData:ee,clientData:Kt,logData:Hn,activeSubReport:We,setActiveSubReport:Ge})}):o.jsxs("p",{className:"text-center text-gray-500 mt-4",children:[" No relevant data available for ",Ze.replace(/_/g," ")," (Found ",(ee==null?void 0:ee.length)||0," items)"]})})()}),o.jsx("div",{className:"my-4"})]})})]}),o.jsx(bW,{isOpen:dt,onClose:()=>Zt(!1),settings:Vt,onChange:kt,availableSignals:Mr})]})})]})]})]})}):o.jsx(cW,{onLogin:()=>e(!0)})},kW=typeof import.meta<"u"?"/live_cloud-lab_live/".replace(/\/$/,""):"";class EW extends Kr.Component{constructor(){super(...arguments);b_(this,"state",{error:null})}static getDerivedStateFromError(n){return{error:n}}componentDidCatch(n,r){console.error("[App] Render error:",n,r==null?void 0:r.componentStack)}render(){var n;return this.state.error?o.jsxs("div",{style:{padding:24,fontFamily:"system-ui",maxWidth:600},children:[o.jsx("h1",{style:{color:"#b91c1c"},children:"Something went wrong"}),o.jsx("pre",{style:{background:"#f3f4f6",padding:16,overflow:"auto",fontSize:12},children:((n=this.state.error)==null?void 0:n.message)||String(this.state.error)}),o.jsx("p",{style:{color:"#6b7280",fontSize:14},children:"Check the browser console for details."})]}):this.props.children}}L4.createRoot(document.getElementById("root")).render(o.jsx(EW,{children:o.jsx(qj,{basename:kW,children:o.jsx(wW,{})})}));
